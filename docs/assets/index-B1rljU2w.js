const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ZonesView-C25xKjpf.js","assets/ZonesView-x4dTz9qd.css","assets/BarcodeScannerView-Dz6ePMHy.js","assets/BarcodeScannerView-BVB_L3lv.css","assets/AmazonFlowDemoView-BMTyJczT.js","assets/AmazonFlowDemoView-DuhZPy9E.css"])))=>i.map(i=>d[i]);
(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function a(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(c){if(c.ep)return;c.ep=!0;const f=a(c);fetch(c.href,f)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Jy(e){const i=Object.create(null);for(const a of e.split(","))i[a]=1;return a=>a in i}const fi={},Fc=[],Ds=()=>{},I1=()=>!1,vp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Qy=e=>e.startsWith("onUpdate:"),aa=Object.assign,e_=(e,i)=>{const a=e.indexOf(i);a>-1&&e.splice(a,1)},DT=Object.prototype.hasOwnProperty,ti=(e,i)=>DT.call(e,i),_n=Array.isArray,Oc=e=>yp(e)==="[object Map]",P1=e=>yp(e)==="[object Set]",Sn=e=>typeof e=="function",Ai=e=>typeof e=="string",bl=e=>typeof e=="symbol",mi=e=>e!==null&&typeof e=="object",T1=e=>(mi(e)||Sn(e))&&Sn(e.then)&&Sn(e.catch),A1=Object.prototype.toString,yp=e=>A1.call(e),VT=e=>yp(e).slice(8,-1),E1=e=>yp(e)==="[object Object]",t_=e=>Ai(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ch=Jy(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_p=e=>{const i=Object.create(null);return(a=>i[a]||(i[a]=e(a)))},zT=/-\w/g,ar=_p(e=>e.replace(zT,i=>i.slice(1).toUpperCase())),LT=/\B([A-Z])/g,xu=_p(e=>e.replace(LT,"-$1").toLowerCase()),Fs=_p(e=>e.charAt(0).toUpperCase()+e.slice(1)),bv=_p(e=>e?`on${Fs(e)}`:""),cl=(e,i)=>!Object.is(e,i),$m=(e,...i)=>{for(let a=0;a<e.length;a++)e[a](...i)},M1=(e,i,a,o=!1)=>{Object.defineProperty(e,i,{configurable:!0,enumerable:!1,writable:o,value:a})},Kv=e=>{const i=parseFloat(e);return isNaN(i)?e:i},BT=e=>{const i=Ai(e)?Number(e):NaN;return isNaN(i)?e:i};let d0;const bp=()=>d0||(d0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function St(e){if(_n(e)){const i={};for(let a=0;a<e.length;a++){const o=e[a],c=Ai(o)?$T(o):St(o);if(c)for(const f in c)i[f]=c[f]}return i}else if(Ai(e)||mi(e))return e}const RT=/;(?![^(]*\))/g,FT=/:([^]+)/,OT=/\/\*[^]*?\*\//g;function $T(e){const i={};return e.replace(OT,"").split(RT).forEach(a=>{if(a){const o=a.split(FT);o.length>1&&(i[o[0].trim()]=o[1].trim())}}),i}function st(e){let i="";if(Ai(e))i=e;else if(_n(e))for(let a=0;a<e.length;a++){const o=st(e[a]);o&&(i+=o+" ")}else if(mi(e))for(const a in e)e[a]&&(i+=a+" ");return i.trim()}function NT(e){if(!e)return null;let{class:i,style:a}=e;return i&&!Ai(i)&&(e.class=st(i)),a&&(e.style=St(a)),e}const jT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",UT=Jy(jT);function D1(e){return!!e||e===""}const V1=e=>!!(e&&e.__v_isRef===!0),Nn=e=>Ai(e)?e:e==null?"":_n(e)||mi(e)&&(e.toString===A1||!Sn(e.toString))?V1(e)?Nn(e.value):JSON.stringify(e,z1,2):String(e),z1=(e,i)=>V1(i)?z1(e,i.value):Oc(i)?{[`Map(${i.size})`]:[...i.entries()].reduce((a,[o,c],f)=>(a[xv(o,f)+" =>"]=c,a),{})}:P1(i)?{[`Set(${i.size})`]:[...i.values()].map(a=>xv(a))}:bl(i)?xv(i):mi(i)&&!_n(i)&&!E1(i)?String(i):i,xv=(e,i="")=>{var a;return bl(e)?`Symbol(${(a=e.description)!=null?a:i})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fa;class L1{constructor(i=!1){this.detached=i,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Fa,!i&&Fa&&(this.index=(Fa.scopes||(Fa.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let i,a;if(this.scopes)for(i=0,a=this.scopes.length;i<a;i++)this.scopes[i].pause();for(i=0,a=this.effects.length;i<a;i++)this.effects[i].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let i,a;if(this.scopes)for(i=0,a=this.scopes.length;i<a;i++)this.scopes[i].resume();for(i=0,a=this.effects.length;i<a;i++)this.effects[i].resume()}}run(i){if(this._active){const a=Fa;try{return Fa=this,i()}finally{Fa=a}}}on(){++this._on===1&&(this.prevScope=Fa,Fa=this)}off(){this._on>0&&--this._on===0&&(Fa=this.prevScope,this.prevScope=void 0)}stop(i){if(this._active){this._active=!1;let a,o;for(a=0,o=this.effects.length;a<o;a++)this.effects[a].stop();for(this.effects.length=0,a=0,o=this.cleanups.length;a<o;a++)this.cleanups[a]();if(this.cleanups.length=0,this.scopes){for(a=0,o=this.scopes.length;a<o;a++)this.scopes[a].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!i){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.parent=void 0}}}function fl(e){return new L1(e)}function n_(){return Fa}function Hi(e,i=!1){Fa&&Fa.cleanups.push(e)}let vi;const wv=new WeakSet;class B1{constructor(i){this.fn=i,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Fa&&Fa.active&&Fa.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wv.has(this)&&(wv.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||F1(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,h0(this),O1(this);const i=vi,a=ls;vi=this,ls=!0;try{return this.fn()}finally{$1(this),vi=i,ls=a,this.flags&=-3}}stop(){if(this.flags&1){for(let i=this.deps;i;i=i.nextDep)r_(i);this.deps=this.depsTail=void 0,h0(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wv.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Xv(this)&&this.run()}get dirty(){return Xv(this)}}let R1=0,Ih,Ph;function F1(e,i=!1){if(e.flags|=8,i){e.next=Ph,Ph=e;return}e.next=Ih,Ih=e}function i_(){R1++}function a_(){if(--R1>0)return;if(Ph){let i=Ph;for(Ph=void 0;i;){const a=i.next;i.next=void 0,i.flags&=-9,i=a}}let e;for(;Ih;){let i=Ih;for(Ih=void 0;i;){const a=i.next;if(i.next=void 0,i.flags&=-9,i.flags&1)try{i.trigger()}catch(o){e||(e=o)}i=a}}if(e)throw e}function O1(e){for(let i=e.deps;i;i=i.nextDep)i.version=-1,i.prevActiveLink=i.dep.activeLink,i.dep.activeLink=i}function $1(e){let i,a=e.depsTail,o=a;for(;o;){const c=o.prevDep;o.version===-1?(o===a&&(a=c),r_(o),HT(o)):i=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=c}e.deps=i,e.depsTail=a}function Xv(e){for(let i=e.deps;i;i=i.nextDep)if(i.dep.version!==i.version||i.dep.computed&&(N1(i.dep.computed)||i.dep.version!==i.version))return!0;return!!e._dirty}function N1(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Bh)||(e.globalVersion=Bh,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Xv(e))))return;e.flags|=2;const i=e.dep,a=vi,o=ls;vi=e,ls=!0;try{O1(e);const c=e.fn(e._value);(i.version===0||cl(c,e._value))&&(e.flags|=128,e._value=c,i.version++)}catch(c){throw i.version++,c}finally{vi=a,ls=o,$1(e),e.flags&=-3}}function r_(e,i=!1){const{dep:a,prevSub:o,nextSub:c}=e;if(o&&(o.nextSub=c,e.prevSub=void 0),c&&(c.prevSub=o,e.nextSub=void 0),a.subs===e&&(a.subs=o,!o&&a.computed)){a.computed.flags&=-5;for(let f=a.computed.deps;f;f=f.nextDep)r_(f,!0)}!i&&!--a.sc&&a.map&&a.map.delete(a.key)}function HT(e){const{prevDep:i,nextDep:a}=e;i&&(i.nextDep=a,e.prevDep=void 0),a&&(a.prevDep=i,e.nextDep=void 0)}let ls=!0;const j1=[];function mo(){j1.push(ls),ls=!1}function po(){const e=j1.pop();ls=e===void 0?!0:e}function h0(e){const{cleanup:i}=e;if(e.cleanup=void 0,i){const a=vi;vi=void 0;try{i()}finally{vi=a}}}let Bh=0;class qT{constructor(i,a){this.sub=i,this.dep=a,this.version=a.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class s_{constructor(i){this.computed=i,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(i){if(!vi||!ls||vi===this.computed)return;let a=this.activeLink;if(a===void 0||a.sub!==vi)a=this.activeLink=new qT(vi,this),vi.deps?(a.prevDep=vi.depsTail,vi.depsTail.nextDep=a,vi.depsTail=a):vi.deps=vi.depsTail=a,U1(a);else if(a.version===-1&&(a.version=this.version,a.nextDep)){const o=a.nextDep;o.prevDep=a.prevDep,a.prevDep&&(a.prevDep.nextDep=o),a.prevDep=vi.depsTail,a.nextDep=void 0,vi.depsTail.nextDep=a,vi.depsTail=a,vi.deps===a&&(vi.deps=o)}return a}trigger(i){this.version++,Bh++,this.notify(i)}notify(i){i_();try{for(let a=this.subs;a;a=a.prevSub)a.sub.notify()&&a.sub.dep.notify()}finally{a_()}}}function U1(e){if(e.dep.sc++,e.sub.flags&4){const i=e.dep.computed;if(i&&!e.dep.subs){i.flags|=20;for(let o=i.deps;o;o=o.nextDep)U1(o)}const a=e.dep.subs;a!==e&&(e.prevSub=a,a&&(a.nextSub=e)),e.dep.subs=e}}const Zm=new WeakMap,su=Symbol(""),Yv=Symbol(""),Rh=Symbol("");function Oa(e,i,a){if(ls&&vi){let o=Zm.get(e);o||Zm.set(e,o=new Map);let c=o.get(a);c||(o.set(a,c=new s_),c.map=o,c.key=a),c.track()}}function co(e,i,a,o,c,f){const h=Zm.get(e);if(!h){Bh++;return}const l=b=>{b&&b.trigger()};if(i_(),i==="clear")h.forEach(l);else{const b=_n(e),S=b&&t_(a);if(b&&a==="length"){const w=Number(o);h.forEach((k,I)=>{(I==="length"||I===Rh||!bl(I)&&I>=w)&&l(k)})}else switch((a!==void 0||h.has(void 0))&&l(h.get(a)),S&&l(h.get(Rh)),i){case"add":b?S&&l(h.get("length")):(l(h.get(su)),Oc(e)&&l(h.get(Yv)));break;case"delete":b||(l(h.get(su)),Oc(e)&&l(h.get(Yv)));break;case"set":Oc(e)&&l(h.get(su));break}}a_()}function GT(e,i){const a=Zm.get(e);return a&&a.get(i)}function Ic(e){const i=rn(e);return i===e?i:(Oa(i,"iterate",Rh),Kr(e)?i:i.map(Sa))}function xp(e){return Oa(e=rn(e),"iterate",Rh),e}const WT={__proto__:null,[Symbol.iterator](){return Sv(this,Symbol.iterator,Sa)},concat(...e){return Ic(this).concat(...e.map(i=>_n(i)?Ic(i):i))},entries(){return Sv(this,"entries",e=>(e[1]=Sa(e[1]),e))},every(e,i){return ao(this,"every",e,i,void 0,arguments)},filter(e,i){return ao(this,"filter",e,i,a=>a.map(Sa),arguments)},find(e,i){return ao(this,"find",e,i,Sa,arguments)},findIndex(e,i){return ao(this,"findIndex",e,i,void 0,arguments)},findLast(e,i){return ao(this,"findLast",e,i,Sa,arguments)},findLastIndex(e,i){return ao(this,"findLastIndex",e,i,void 0,arguments)},forEach(e,i){return ao(this,"forEach",e,i,void 0,arguments)},includes(...e){return kv(this,"includes",e)},indexOf(...e){return kv(this,"indexOf",e)},join(e){return Ic(this).join(e)},lastIndexOf(...e){return kv(this,"lastIndexOf",e)},map(e,i){return ao(this,"map",e,i,void 0,arguments)},pop(){return vh(this,"pop")},push(...e){return vh(this,"push",e)},reduce(e,...i){return f0(this,"reduce",e,i)},reduceRight(e,...i){return f0(this,"reduceRight",e,i)},shift(){return vh(this,"shift")},some(e,i){return ao(this,"some",e,i,void 0,arguments)},splice(...e){return vh(this,"splice",e)},toReversed(){return Ic(this).toReversed()},toSorted(e){return Ic(this).toSorted(e)},toSpliced(...e){return Ic(this).toSpliced(...e)},unshift(...e){return vh(this,"unshift",e)},values(){return Sv(this,"values",Sa)}};function Sv(e,i,a){const o=xp(e),c=o[i]();return o!==e&&!Kr(e)&&(c._next=c.next,c.next=()=>{const f=c._next();return f.done||(f.value=a(f.value)),f}),c}const ZT=Array.prototype;function ao(e,i,a,o,c,f){const h=xp(e),l=h!==e&&!Kr(e),b=h[i];if(b!==ZT[i]){const k=b.apply(e,f);return l?Sa(k):k}let S=a;h!==e&&(l?S=function(k,I){return a.call(this,Sa(k),I,e)}:a.length>2&&(S=function(k,I){return a.call(this,k,I,e)}));const w=b.call(h,S,o);return l&&c?c(w):w}function f0(e,i,a,o){const c=xp(e);let f=a;return c!==e&&(Kr(e)?a.length>3&&(f=function(h,l,b){return a.call(this,h,l,b,e)}):f=function(h,l,b){return a.call(this,h,Sa(l),b,e)}),c[i](f,...o)}function kv(e,i,a){const o=rn(e);Oa(o,"iterate",Rh);const c=o[i](...a);return(c===-1||c===!1)&&u_(a[0])?(a[0]=rn(a[0]),o[i](...a)):c}function vh(e,i,a=[]){mo(),i_();const o=rn(e)[i].apply(e,a);return a_(),po(),o}const KT=Jy("__proto__,__v_isRef,__isVue"),H1=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(bl));function XT(e){bl(e)||(e=String(e));const i=rn(this);return Oa(i,"has",e),i.hasOwnProperty(e)}class q1{constructor(i=!1,a=!1){this._isReadonly=i,this._isShallow=a}get(i,a,o){if(a==="__v_skip")return i.__v_skip;const c=this._isReadonly,f=this._isShallow;if(a==="__v_isReactive")return!c;if(a==="__v_isReadonly")return c;if(a==="__v_isShallow")return f;if(a==="__v_raw")return o===(c?f?sA:K1:f?Z1:W1).get(i)||Object.getPrototypeOf(i)===Object.getPrototypeOf(o)?i:void 0;const h=_n(i);if(!c){let b;if(h&&(b=WT[a]))return b;if(a==="hasOwnProperty")return XT}const l=Reflect.get(i,a,wi(i)?i:o);if((bl(a)?H1.has(a):KT(a))||(c||Oa(i,"get",a),f))return l;if(wi(l)){const b=h&&t_(a)?l:l.value;return c&&mi(b)?hu(b):b}return mi(l)?c?hu(l):Ui(l):l}}class G1 extends q1{constructor(i=!1){super(!1,i)}set(i,a,o,c){let f=i[a];if(!this._isShallow){const b=ml(f);if(!Kr(o)&&!ml(o)&&(f=rn(f),o=rn(o)),!_n(i)&&wi(f)&&!wi(o))return b||(f.value=o),!0}const h=_n(i)&&t_(a)?Number(a)<i.length:ti(i,a),l=Reflect.set(i,a,o,wi(i)?i:c);return i===rn(c)&&(h?cl(o,f)&&co(i,"set",a,o):co(i,"add",a,o)),l}deleteProperty(i,a){const o=ti(i,a);i[a];const c=Reflect.deleteProperty(i,a);return c&&o&&co(i,"delete",a,void 0),c}has(i,a){const o=Reflect.has(i,a);return(!bl(a)||!H1.has(a))&&Oa(i,"has",a),o}ownKeys(i){return Oa(i,"iterate",_n(i)?"length":su),Reflect.ownKeys(i)}}class YT extends q1{constructor(i=!1){super(!0,i)}set(i,a){return!0}deleteProperty(i,a){return!0}}const JT=new G1,QT=new YT,eA=new G1(!0);const Jv=e=>e,Am=e=>Reflect.getPrototypeOf(e);function tA(e,i,a){return function(...o){const c=this.__v_raw,f=rn(c),h=Oc(f),l=e==="entries"||e===Symbol.iterator&&h,b=e==="keys"&&h,S=c[e](...o),w=a?Jv:i?Km:Sa;return!i&&Oa(f,"iterate",b?Yv:su),{next(){const{value:k,done:I}=S.next();return I?{value:k,done:I}:{value:l?[w(k[0]),w(k[1])]:w(k),done:I}},[Symbol.iterator](){return this}}}}function Em(e){return function(...i){return e==="delete"?!1:e==="clear"?void 0:this}}function nA(e,i){const a={get(c){const f=this.__v_raw,h=rn(f),l=rn(c);e||(cl(c,l)&&Oa(h,"get",c),Oa(h,"get",l));const{has:b}=Am(h),S=i?Jv:e?Km:Sa;if(b.call(h,c))return S(f.get(c));if(b.call(h,l))return S(f.get(l));f!==h&&f.get(c)},get size(){const c=this.__v_raw;return!e&&Oa(rn(c),"iterate",su),c.size},has(c){const f=this.__v_raw,h=rn(f),l=rn(c);return e||(cl(c,l)&&Oa(h,"has",c),Oa(h,"has",l)),c===l?f.has(c):f.has(c)||f.has(l)},forEach(c,f){const h=this,l=h.__v_raw,b=rn(l),S=i?Jv:e?Km:Sa;return!e&&Oa(b,"iterate",su),l.forEach((w,k)=>c.call(f,S(w),S(k),h))}};return aa(a,e?{add:Em("add"),set:Em("set"),delete:Em("delete"),clear:Em("clear")}:{add(c){!i&&!Kr(c)&&!ml(c)&&(c=rn(c));const f=rn(this);return Am(f).has.call(f,c)||(f.add(c),co(f,"add",c,c)),this},set(c,f){!i&&!Kr(f)&&!ml(f)&&(f=rn(f));const h=rn(this),{has:l,get:b}=Am(h);let S=l.call(h,c);S||(c=rn(c),S=l.call(h,c));const w=b.call(h,c);return h.set(c,f),S?cl(f,w)&&co(h,"set",c,f):co(h,"add",c,f),this},delete(c){const f=rn(this),{has:h,get:l}=Am(f);let b=h.call(f,c);b||(c=rn(c),b=h.call(f,c)),l&&l.call(f,c);const S=f.delete(c);return b&&co(f,"delete",c,void 0),S},clear(){const c=rn(this),f=c.size!==0,h=c.clear();return f&&co(c,"clear",void 0,void 0),h}}),["keys","values","entries",Symbol.iterator].forEach(c=>{a[c]=tA(c,e,i)}),a}function o_(e,i){const a=nA(e,i);return(o,c,f)=>c==="__v_isReactive"?!e:c==="__v_isReadonly"?e:c==="__v_raw"?o:Reflect.get(ti(a,c)&&c in o?a:o,c,f)}const iA={get:o_(!1,!1)},aA={get:o_(!1,!0)},rA={get:o_(!0,!1)};const W1=new WeakMap,Z1=new WeakMap,K1=new WeakMap,sA=new WeakMap;function oA(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lA(e){return e.__v_skip||!Object.isExtensible(e)?0:oA(VT(e))}function Ui(e){return ml(e)?e:l_(e,!1,JT,iA,W1)}function X1(e){return l_(e,!1,eA,aA,Z1)}function hu(e){return l_(e,!0,QT,rA,K1)}function l_(e,i,a,o,c){if(!mi(e)||e.__v_raw&&!(i&&e.__v_isReactive))return e;const f=lA(e);if(f===0)return e;const h=c.get(e);if(h)return h;const l=new Proxy(e,f===2?o:a);return c.set(e,l),l}function dl(e){return ml(e)?dl(e.__v_raw):!!(e&&e.__v_isReactive)}function ml(e){return!!(e&&e.__v_isReadonly)}function Kr(e){return!!(e&&e.__v_isShallow)}function u_(e){return e?!!e.__v_raw:!1}function rn(e){const i=e&&e.__v_raw;return i?rn(i):e}function wp(e){return!ti(e,"__v_skip")&&Object.isExtensible(e)&&M1(e,"__v_skip",!0),e}const Sa=e=>mi(e)?Ui(e):e,Km=e=>mi(e)?hu(e):e;function wi(e){return e?e.__v_isRef===!0:!1}function Qe(e){return Y1(e,!1)}function bt(e){return Y1(e,!0)}function Y1(e,i){return wi(e)?e:new uA(e,i)}class uA{constructor(i,a){this.dep=new s_,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=a?i:rn(i),this._value=a?i:Sa(i),this.__v_isShallow=a}get value(){return this.dep.track(),this._value}set value(i){const a=this._rawValue,o=this.__v_isShallow||Kr(i)||ml(i);i=o?i:rn(i),cl(i,a)&&(this._rawValue=i,this._value=o?i:Sa(i),this.dep.trigger())}}function en(e){return wi(e)?e.value:e}function rr(e){return Sn(e)?e():en(e)}const cA={get:(e,i,a)=>i==="__v_raw"?e:en(Reflect.get(e,i,a)),set:(e,i,a,o)=>{const c=e[i];return wi(c)&&!wi(a)?(c.value=a,!0):Reflect.set(e,i,a,o)}};function J1(e){return dl(e)?e:new Proxy(e,cA)}function wu(e){const i=_n(e)?new Array(e.length):{};for(const a in e)i[a]=Q1(e,a);return i}class dA{constructor(i,a,o){this._object=i,this._key=a,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const i=this._object[this._key];return this._value=i===void 0?this._defaultValue:i}set value(i){this._object[this._key]=i}get dep(){return GT(rn(this._object),this._key)}}class hA{constructor(i){this._getter=i,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function we(e,i,a){return wi(e)?e:Sn(e)?new hA(e):mi(e)&&arguments.length>1?Q1(e,i,a):Qe(e)}function Q1(e,i,a){const o=e[i];return wi(o)?o:new dA(e,i,a)}class fA{constructor(i,a,o){this.fn=i,this.setter=a,this._value=void 0,this.dep=new s_(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Bh-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!a,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&vi!==this)return F1(this,!0),!0}get value(){const i=this.dep.track();return N1(this),i&&(i.version=this.dep.version),this._value}set value(i){this.setter&&this.setter(i)}}function mA(e,i,a=!1){let o,c;return Sn(e)?o=e:(o=e.get,c=e.set),new fA(o,c,a)}const Mm={},Xm=new WeakMap;let nu;function pA(e,i=!1,a=nu){if(a){let o=Xm.get(a);o||Xm.set(a,o=[]),o.push(e)}}function gA(e,i,a=fi){const{immediate:o,deep:c,once:f,scheduler:h,augmentJob:l,call:b}=a,S=Y=>c?Y:Kr(Y)||c===!1||c===0?ho(Y,1):ho(Y);let w,k,I,E,L=!1,F=!1;if(wi(e)?(k=()=>e.value,L=Kr(e)):dl(e)?(k=()=>S(e),L=!0):_n(e)?(F=!0,L=e.some(Y=>dl(Y)||Kr(Y)),k=()=>e.map(Y=>{if(wi(Y))return Y.value;if(dl(Y))return S(Y);if(Sn(Y))return b?b(Y,2):Y()})):Sn(e)?i?k=b?()=>b(e,2):e:k=()=>{if(I){mo();try{I()}finally{po()}}const Y=nu;nu=w;try{return b?b(e,3,[E]):e(E)}finally{nu=Y}}:k=Ds,i&&c){const Y=k,J=c===!0?1/0:c;k=()=>ho(Y(),J)}const z=n_(),B=()=>{w.stop(),z&&z.active&&e_(z.effects,w)};if(f&&i){const Y=i;i=(...J)=>{Y(...J),B()}}let R=F?new Array(e.length).fill(Mm):Mm;const Z=Y=>{if(!(!(w.flags&1)||!w.dirty&&!Y))if(i){const J=w.run();if(c||L||(F?J.some((ae,he)=>cl(ae,R[he])):cl(J,R))){I&&I();const ae=nu;nu=w;try{const he=[J,R===Mm?void 0:F&&R[0]===Mm?[]:R,E];R=J,b?b(i,3,he):i(...he)}finally{nu=ae}}}else w.run()};return l&&l(Z),w=new B1(k),w.scheduler=h?()=>h(Z,!1):Z,E=Y=>pA(Y,!1,w),I=w.onStop=()=>{const Y=Xm.get(w);if(Y){if(b)b(Y,4);else for(const J of Y)J();Xm.delete(w)}},i?o?Z(!0):R=w.run():h?h(Z.bind(null,!0),!0):w.run(),B.pause=w.pause.bind(w),B.resume=w.resume.bind(w),B.stop=B,B}function ho(e,i=1/0,a){if(i<=0||!mi(e)||e.__v_skip||(a=a||new Map,(a.get(e)||0)>=i))return e;if(a.set(e,i),i--,wi(e))ho(e.value,i,a);else if(_n(e))for(let o=0;o<e.length;o++)ho(e[o],i,a);else if(P1(e)||Oc(e))e.forEach(o=>{ho(o,i,a)});else if(E1(e)){for(const o in e)ho(e[o],i,a);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&ho(e[o],i,a)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function df(e,i,a,o){try{return o?e(...o):e()}catch(c){Sp(c,i,a)}}function us(e,i,a,o){if(Sn(e)){const c=df(e,i,a,o);return c&&T1(c)&&c.catch(f=>{Sp(f,i,a)}),c}if(_n(e)){const c=[];for(let f=0;f<e.length;f++)c.push(us(e[f],i,a,o));return c}}function Sp(e,i,a,o=!0){const c=i?i.vnode:null,{errorHandler:f,throwUnhandledErrorInProduction:h}=i&&i.appContext.config||fi;if(i){let l=i.parent;const b=i.proxy,S=`https://vuejs.org/error-reference/#runtime-${a}`;for(;l;){const w=l.ec;if(w){for(let k=0;k<w.length;k++)if(w[k](e,b,S)===!1)return}l=l.parent}if(f){mo(),df(f,null,10,[e,b,S]),po();return}}vA(e,a,c,o,h)}function vA(e,i,a,o=!0,c=!1){if(c)throw e;console.error(e)}const ir=[];let Ps=-1;const $c=[];let sl=null,Vc=0;const eS=Promise.resolve();let Ym=null;function kn(e){const i=Ym||eS;return e?i.then(this?e.bind(this):e):i}function yA(e){let i=Ps+1,a=ir.length;for(;i<a;){const o=i+a>>>1,c=ir[o],f=Fh(c);f<e||f===e&&c.flags&2?i=o+1:a=o}return i}function c_(e){if(!(e.flags&1)){const i=Fh(e),a=ir[ir.length-1];!a||!(e.flags&2)&&i>=Fh(a)?ir.push(e):ir.splice(yA(i),0,e),e.flags|=1,tS()}}function tS(){Ym||(Ym=eS.then(iS))}function _A(e){_n(e)?$c.push(...e):sl&&e.id===-1?sl.splice(Vc+1,0,e):e.flags&1||($c.push(e),e.flags|=1),tS()}function m0(e,i,a=Ps+1){for(;a<ir.length;a++){const o=ir[a];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;ir.splice(a,1),a--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function nS(e){if($c.length){const i=[...new Set($c)].sort((a,o)=>Fh(a)-Fh(o));if($c.length=0,sl){sl.push(...i);return}for(sl=i,Vc=0;Vc<sl.length;Vc++){const a=sl[Vc];a.flags&4&&(a.flags&=-2),a.flags&8||a(),a.flags&=-2}sl=null,Vc=0}}const Fh=e=>e.id==null?e.flags&2?-1:1/0:e.id;function iS(e){try{for(Ps=0;Ps<ir.length;Ps++){const i=ir[Ps];i&&!(i.flags&8)&&(i.flags&4&&(i.flags&=-2),df(i,i.i,i.i?15:14),i.flags&4||(i.flags&=-2))}}finally{for(;Ps<ir.length;Ps++){const i=ir[Ps];i&&(i.flags&=-2)}Ps=-1,ir.length=0,nS(),Ym=null,(ir.length||$c.length)&&iS()}}let Er=null,aS=null;function Jm(e){const i=Er;return Er=e,aS=e&&e.type.__scopeId||null,i}function Ge(e,i=Er,a){if(!i||e._n)return e;const o=(...c)=>{o._d&&tp(-1);const f=Jm(i);let h;try{h=e(...c)}finally{Jm(f),o._d&&tp(1)}return h};return o._n=!0,o._c=!0,o._d=!0,o}function yi(e,i){if(Er===null)return e;const a=Tp(Er),o=e.dirs||(e.dirs=[]);for(let c=0;c<i.length;c++){let[f,h,l,b=fi]=i[c];f&&(Sn(f)&&(f={mounted:f,updated:f}),f.deep&&ho(h),o.push({dir:f,instance:a,value:h,oldValue:void 0,arg:l,modifiers:b}))}return e}function Yl(e,i,a,o){const c=e.dirs,f=i&&i.dirs;for(let h=0;h<c.length;h++){const l=c[h];f&&(l.oldValue=f[h].value);let b=l.dir[o];b&&(mo(),us(b,a,8,[e.el,l,e,i]),po())}}const rS=Symbol("_vte"),sS=e=>e.__isTeleport,Th=e=>e&&(e.disabled||e.disabled===""),p0=e=>e&&(e.defer||e.defer===""),g0=e=>typeof SVGElement<"u"&&e instanceof SVGElement,v0=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Qv=(e,i)=>{const a=e&&e.to;return Ai(a)?i?i(a):null:a},oS={name:"Teleport",__isTeleport:!0,process(e,i,a,o,c,f,h,l,b,S){const{mc:w,pc:k,pbc:I,o:{insert:E,querySelector:L,createText:F,createComment:z}}=S,B=Th(i.props);let{shapeFlag:R,children:Z,dynamicChildren:Y}=i;if(e==null){const J=i.el=F(""),ae=i.anchor=F("");E(J,a,o),E(ae,a,o);const he=(re,ie)=>{R&16&&w(Z,re,ie,c,f,h,l,b)},te=()=>{const re=i.target=Qv(i.props,L),ie=lS(re,i,F,E);re&&(h!=="svg"&&g0(re)?h="svg":h!=="mathml"&&v0(re)&&(h="mathml"),c&&c.isCE&&(c.ce._teleportTargets||(c.ce._teleportTargets=new Set)).add(re),B||(he(re,ie),Nm(i,!1)))};B&&(he(a,ae),Nm(i,!0)),p0(i.props)?(i.el.__isMounted=!1,nr(()=>{te(),delete i.el.__isMounted},f)):te()}else{if(p0(i.props)&&e.el.__isMounted===!1){nr(()=>{oS.process(e,i,a,o,c,f,h,l,b,S)},f);return}i.el=e.el,i.targetStart=e.targetStart;const J=i.anchor=e.anchor,ae=i.target=e.target,he=i.targetAnchor=e.targetAnchor,te=Th(e.props),re=te?a:ae,ie=te?J:he;if(h==="svg"||g0(ae)?h="svg":(h==="mathml"||v0(ae))&&(h="mathml"),Y?(I(e.dynamicChildren,Y,re,c,f,h,l),g_(e,i,!0)):b||k(e,i,re,ie,c,f,h,l,!1),B)te?i.props&&e.props&&i.props.to!==e.props.to&&(i.props.to=e.props.to):Dm(i,a,J,S,1);else if((i.props&&i.props.to)!==(e.props&&e.props.to)){const ue=i.target=Qv(i.props,L);ue&&Dm(i,ue,null,S,0)}else te&&Dm(i,ae,he,S,1);Nm(i,B)}},remove(e,i,a,{um:o,o:{remove:c}},f){const{shapeFlag:h,children:l,anchor:b,targetStart:S,targetAnchor:w,target:k,props:I}=e;if(k&&(c(S),c(w)),f&&c(b),h&16){const E=f||!Th(I);for(let L=0;L<l.length;L++){const F=l[L];o(F,i,a,E,!!F.dynamicChildren)}}},move:Dm,hydrate:bA};function Dm(e,i,a,{o:{insert:o},m:c},f=2){f===0&&o(e.targetAnchor,i,a);const{el:h,anchor:l,shapeFlag:b,children:S,props:w}=e,k=f===2;if(k&&o(h,i,a),(!k||Th(w))&&b&16)for(let I=0;I<S.length;I++)c(S[I],i,a,2);k&&o(l,i,a)}function bA(e,i,a,o,c,f,{o:{nextSibling:h,parentNode:l,querySelector:b,insert:S,createText:w}},k){function I(F,z,B,R){z.anchor=k(h(F),z,l(F),a,o,c,f),z.targetStart=B,z.targetAnchor=R}const E=i.target=Qv(i.props,b),L=Th(i.props);if(E){const F=E._lpa||E.firstChild;if(i.shapeFlag&16)if(L)I(e,i,F,F&&h(F));else{i.anchor=h(e);let z=F;for(;z;){if(z&&z.nodeType===8){if(z.data==="teleport start anchor")i.targetStart=z;else if(z.data==="teleport anchor"){i.targetAnchor=z,E._lpa=i.targetAnchor&&h(i.targetAnchor);break}}z=h(z)}i.targetAnchor||lS(E,i,w,S),k(F&&h(F),i,E,a,o,c,f)}Nm(i,L)}else L&&i.shapeFlag&16&&I(e,i,e,h(e));return i.anchor&&h(i.anchor)}const xA=oS;function Nm(e,i){const a=e.ctx;if(a&&a.ut){let o,c;for(i?(o=e.el,c=e.anchor):(o=e.targetStart,c=e.targetAnchor);o&&o!==c;)o.nodeType===1&&o.setAttribute("data-v-owner",a.uid),o=o.nextSibling;a.ut()}}function lS(e,i,a,o){const c=i.targetStart=a(""),f=i.targetAnchor=a("");return c[rS]=f,e&&(o(c,e),o(f,e)),f}const lo=Symbol("_leaveCb"),Vm=Symbol("_enterCb");function uS(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Fi(()=>{e.isMounted=!0}),va(()=>{e.isUnmounting=!0}),e}const qr=[Function,Array],cS={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:qr,onEnter:qr,onAfterEnter:qr,onEnterCancelled:qr,onBeforeLeave:qr,onLeave:qr,onAfterLeave:qr,onLeaveCancelled:qr,onBeforeAppear:qr,onAppear:qr,onAfterAppear:qr,onAppearCancelled:qr},dS=e=>{const i=e.subTree;return i.component?dS(i.component):i},wA={name:"BaseTransition",props:cS,setup(e,{slots:i}){const a=ed(),o=uS();return()=>{const c=i.default&&d_(i.default(),!0);if(!c||!c.length)return;const f=hS(c),h=rn(e),{mode:l}=h;if(o.isLeaving)return Cv(f);const b=y0(f);if(!b)return Cv(f);let S=Oh(b,h,o,a,k=>S=k);b.type!==$a&&fu(b,S);let w=a.subTree&&y0(a.subTree);if(w&&w.type!==$a&&!iu(w,b)&&dS(a).type!==$a){let k=Oh(w,h,o,a);if(fu(w,k),l==="out-in"&&b.type!==$a)return o.isLeaving=!0,k.afterLeave=()=>{o.isLeaving=!1,a.job.flags&8||a.update(),delete k.afterLeave,w=void 0},Cv(f);l==="in-out"&&b.type!==$a?k.delayLeave=(I,E,L)=>{const F=fS(o,w);F[String(w.key)]=w,I[lo]=()=>{E(),I[lo]=void 0,delete S.delayedLeave,w=void 0},S.delayedLeave=()=>{L(),delete S.delayedLeave,w=void 0}}:w=void 0}else w&&(w=void 0);return f}}};function hS(e){let i=e[0];if(e.length>1){for(const a of e)if(a.type!==$a){i=a;break}}return i}const SA=wA;function fS(e,i){const{leavingVNodes:a}=e;let o=a.get(i.type);return o||(o=Object.create(null),a.set(i.type,o)),o}function Oh(e,i,a,o,c){const{appear:f,mode:h,persisted:l=!1,onBeforeEnter:b,onEnter:S,onAfterEnter:w,onEnterCancelled:k,onBeforeLeave:I,onLeave:E,onAfterLeave:L,onLeaveCancelled:F,onBeforeAppear:z,onAppear:B,onAfterAppear:R,onAppearCancelled:Z}=i,Y=String(e.key),J=fS(a,e),ae=(re,ie)=>{re&&us(re,o,9,ie)},he=(re,ie)=>{const ue=ie[1];ae(re,ie),_n(re)?re.every(Q=>Q.length<=1)&&ue():re.length<=1&&ue()},te={mode:h,persisted:l,beforeEnter(re){let ie=b;if(!a.isMounted)if(f)ie=z||b;else return;re[lo]&&re[lo](!0);const ue=J[Y];ue&&iu(e,ue)&&ue.el[lo]&&ue.el[lo](),ae(ie,[re])},enter(re){let ie=S,ue=w,Q=k;if(!a.isMounted)if(f)ie=B||S,ue=R||w,Q=Z||k;else return;let pe=!1;const Ce=re[Vm]=$e=>{pe||(pe=!0,$e?ae(Q,[re]):ae(ue,[re]),te.delayedLeave&&te.delayedLeave(),re[Vm]=void 0)};ie?he(ie,[re,Ce]):Ce()},leave(re,ie){const ue=String(e.key);if(re[Vm]&&re[Vm](!0),a.isUnmounting)return ie();ae(I,[re]);let Q=!1;const pe=re[lo]=Ce=>{Q||(Q=!0,ie(),Ce?ae(F,[re]):ae(L,[re]),re[lo]=void 0,J[ue]===e&&delete J[ue])};J[ue]=e,E?he(E,[re,pe]):pe()},clone(re){const ie=Oh(re,i,a,o,c);return c&&c(ie),ie}};return te}function Cv(e){if(kp(e))return e=go(e),e.children=null,e}function y0(e){if(!kp(e))return sS(e.type)&&e.children?hS(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:i,children:a}=e;if(a){if(i&16)return a[0];if(i&32&&Sn(a.default))return a.default()}}function fu(e,i){e.shapeFlag&6&&e.component?(e.transition=i,fu(e.component.subTree,i)):e.shapeFlag&128?(e.ssContent.transition=i.clone(e.ssContent),e.ssFallback.transition=i.clone(e.ssFallback)):e.transition=i}function d_(e,i=!1,a){let o=[],c=0;for(let f=0;f<e.length;f++){let h=e[f];const l=a==null?h.key:String(a)+String(h.key!=null?h.key:f);h.type===Bt?(h.patchFlag&128&&c++,o=o.concat(d_(h.children,i,l))):(i||h.type!==$a)&&o.push(l!=null?go(h,{key:l}):h)}if(c>1)for(let f=0;f<o.length;f++)o[f].patchFlag=-2;return o}function hs(e,i){return Sn(e)?aa({name:e.name},i,{setup:e}):e}function Ia(){const e=ed();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function mS(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Qm=new WeakMap;function Ah(e,i,a,o,c=!1){if(_n(e)){e.forEach((L,F)=>Ah(L,i&&(_n(i)?i[F]:i),a,o,c));return}if(Eh(o)&&!c){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&Ah(e,i,a,o.component.subTree);return}const f=o.shapeFlag&4?Tp(o.component):o.el,h=c?null:f,{i:l,r:b}=e,S=i&&i.r,w=l.refs===fi?l.refs={}:l.refs,k=l.setupState,I=rn(k),E=k===fi?I1:L=>ti(I,L);if(S!=null&&S!==b){if(_0(i),Ai(S))w[S]=null,E(S)&&(k[S]=null);else if(wi(S)){S.value=null;const L=i;L.k&&(w[L.k]=null)}}if(Sn(b))df(b,l,12,[h,w]);else{const L=Ai(b),F=wi(b);if(L||F){const z=()=>{if(e.f){const B=L?E(b)?k[b]:w[b]:b.value;if(c)_n(B)&&e_(B,f);else if(_n(B))B.includes(f)||B.push(f);else if(L)w[b]=[f],E(b)&&(k[b]=w[b]);else{const R=[f];b.value=R,e.k&&(w[e.k]=R)}}else L?(w[b]=h,E(b)&&(k[b]=h)):F&&(b.value=h,e.k&&(w[e.k]=h))};if(h){const B=()=>{z(),Qm.delete(e)};B.id=-1,Qm.set(e,B),nr(B,a)}else _0(e),z()}}}function _0(e){const i=Qm.get(e);i&&(i.flags|=8,Qm.delete(e))}bp().requestIdleCallback;bp().cancelIdleCallback;const Eh=e=>!!e.type.__asyncLoader,kp=e=>e.type.__isKeepAlive;function pS(e,i){gS(e,"a",i)}function h_(e,i){gS(e,"da",i)}function gS(e,i,a=Na){const o=e.__wdc||(e.__wdc=()=>{let c=a;for(;c;){if(c.isDeactivated)return;c=c.parent}return e()});if(Cp(i,o,a),a){let c=a.parent;for(;c&&c.parent;)kp(c.parent.vnode)&&kA(o,i,a,c),c=c.parent}}function kA(e,i,a,o){const c=Cp(i,e,o,!0);Ip(()=>{e_(o[i],c)},a)}function Cp(e,i,a=Na,o=!1){if(a){const c=a[e]||(a[e]=[]),f=i.__weh||(i.__weh=(...h)=>{mo();const l=ff(a),b=us(i,a,e,h);return l(),po(),b});return o?c.unshift(f):c.push(f),f}}const yo=e=>(i,a=Na)=>{(!jh||e==="sp")&&Cp(e,(...o)=>i(...o),a)},Qc=yo("bm"),Fi=yo("m"),vS=yo("bu"),f_=yo("u"),va=yo("bum"),Ip=yo("um"),CA=yo("sp"),IA=yo("rtg"),PA=yo("rtc");function TA(e,i=Na){Cp("ec",e,i)}const yS="components";function _S(e,i){return bS(yS,e,!0,i)||e}const AA=Symbol.for("v-ndc");function EA(e){return Ai(e)&&bS(yS,e,!1)||e}function bS(e,i,a=!0,o=!1){const c=Er||Na;if(c){const f=c.type;{const l=vE(f,!1);if(l&&(l===i||l===ar(i)||l===Fs(ar(i))))return f}const h=b0(c[e]||f[e],i)||b0(c.appContext[e],i);return!h&&o?f:h}}function b0(e,i){return e&&(e[i]||e[ar(i)]||e[Fs(ar(i))])}function MA(e,i,a,o){let c;const f=a,h=_n(e);if(h||Ai(e)){const l=h&&dl(e);let b=!1,S=!1;l&&(b=!Kr(e),S=ml(e),e=xp(e)),c=new Array(e.length);for(let w=0,k=e.length;w<k;w++)c[w]=i(b?S?Km(Sa(e[w])):Sa(e[w]):e[w],w,void 0,f)}else if(typeof e=="number"){c=new Array(e);for(let l=0;l<e;l++)c[l]=i(l+1,l,void 0,f)}else if(mi(e))if(e[Symbol.iterator])c=Array.from(e,(l,b)=>i(l,b,void 0,f));else{const l=Object.keys(e);c=new Array(l.length);for(let b=0,S=l.length;b<S;b++){const w=l[b];c[b]=i(e[w],w,b,f)}}else c=[];return c}const ey=e=>e?OS(e)?Tp(e):ey(e.parent):null,Mh=aa(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ey(e.parent),$root:e=>ey(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>wS(e),$forceUpdate:e=>e.f||(e.f=()=>{c_(e.update)}),$nextTick:e=>e.n||(e.n=kn.bind(e.proxy)),$watch:e=>QA.bind(e)}),Iv=(e,i)=>e!==fi&&!e.__isScriptSetup&&ti(e,i),DA={get({_:e},i){if(i==="__v_skip")return!0;const{ctx:a,setupState:o,data:c,props:f,accessCache:h,type:l,appContext:b}=e;let S;if(i[0]!=="$"){const E=h[i];if(E!==void 0)switch(E){case 1:return o[i];case 2:return c[i];case 4:return a[i];case 3:return f[i]}else{if(Iv(o,i))return h[i]=1,o[i];if(c!==fi&&ti(c,i))return h[i]=2,c[i];if((S=e.propsOptions[0])&&ti(S,i))return h[i]=3,f[i];if(a!==fi&&ti(a,i))return h[i]=4,a[i];ty&&(h[i]=0)}}const w=Mh[i];let k,I;if(w)return i==="$attrs"&&Oa(e.attrs,"get",""),w(e);if((k=l.__cssModules)&&(k=k[i]))return k;if(a!==fi&&ti(a,i))return h[i]=4,a[i];if(I=b.config.globalProperties,ti(I,i))return I[i]},set({_:e},i,a){const{data:o,setupState:c,ctx:f}=e;return Iv(c,i)?(c[i]=a,!0):o!==fi&&ti(o,i)?(o[i]=a,!0):ti(e.props,i)||i[0]==="$"&&i.slice(1)in e?!1:(f[i]=a,!0)},has({_:{data:e,setupState:i,accessCache:a,ctx:o,appContext:c,propsOptions:f,type:h}},l){let b,S;return!!(a[l]||e!==fi&&l[0]!=="$"&&ti(e,l)||Iv(i,l)||(b=f[0])&&ti(b,l)||ti(o,l)||ti(Mh,l)||ti(c.config.globalProperties,l)||(S=h.__cssModules)&&S[l])},defineProperty(e,i,a){return a.get!=null?e._.accessCache[i]=0:ti(a,"value")&&this.set(e,i,a.value,null),Reflect.defineProperty(e,i,a)}};function x0(e){return _n(e)?e.reduce((i,a)=>(i[a]=null,i),{}):e}let ty=!0;function VA(e){const i=wS(e),a=e.proxy,o=e.ctx;ty=!1,i.beforeCreate&&w0(i.beforeCreate,e,"bc");const{data:c,computed:f,methods:h,watch:l,provide:b,inject:S,created:w,beforeMount:k,mounted:I,beforeUpdate:E,updated:L,activated:F,deactivated:z,beforeDestroy:B,beforeUnmount:R,destroyed:Z,unmounted:Y,render:J,renderTracked:ae,renderTriggered:he,errorCaptured:te,serverPrefetch:re,expose:ie,inheritAttrs:ue,components:Q,directives:pe,filters:Ce}=i;if(S&&zA(S,o,null),h)for(const Ye in h){const qe=h[Ye];Sn(qe)&&(o[Ye]=qe.bind(a))}if(c){const Ye=c.call(a,a);mi(Ye)&&(e.data=Ui(Ye))}if(ty=!0,f)for(const Ye in f){const qe=f[Ye],Te=Sn(qe)?qe.bind(a,a):Sn(qe.get)?qe.get.bind(a,a):Ds,Me=!Sn(qe)&&Sn(qe.set)?qe.set.bind(a):Ds,Ve=K({get:Te,set:Me});Object.defineProperty(o,Ye,{enumerable:!0,configurable:!0,get:()=>Ve.value,set:Fe=>Ve.value=Fe})}if(l)for(const Ye in l)xS(l[Ye],o,a,Ye);if(b){const Ye=Sn(b)?b.call(a):b;Reflect.ownKeys(Ye).forEach(qe=>{Jn(qe,Ye[qe])})}w&&w0(w,e,"c");function Xe(Ye,qe){_n(qe)?qe.forEach(Te=>Ye(Te.bind(a))):qe&&Ye(qe.bind(a))}if(Xe(Qc,k),Xe(Fi,I),Xe(vS,E),Xe(f_,L),Xe(pS,F),Xe(h_,z),Xe(TA,te),Xe(PA,ae),Xe(IA,he),Xe(va,R),Xe(Ip,Y),Xe(CA,re),_n(ie))if(ie.length){const Ye=e.exposed||(e.exposed={});ie.forEach(qe=>{Object.defineProperty(Ye,qe,{get:()=>a[qe],set:Te=>a[qe]=Te,enumerable:!0})})}else e.exposed||(e.exposed={});J&&e.render===Ds&&(e.render=J),ue!=null&&(e.inheritAttrs=ue),Q&&(e.components=Q),pe&&(e.directives=pe),re&&mS(e)}function zA(e,i,a=Ds){_n(e)&&(e=ny(e));for(const o in e){const c=e[o];let f;mi(c)?"default"in c?f=vn(c.from||o,c.default,!0):f=vn(c.from||o):f=vn(c),wi(f)?Object.defineProperty(i,o,{enumerable:!0,configurable:!0,get:()=>f.value,set:h=>f.value=h}):i[o]=f}}function w0(e,i,a){us(_n(e)?e.map(o=>o.bind(i.proxy)):e.bind(i.proxy),i,a)}function xS(e,i,a,o){let c=o.includes(".")?VS(a,o):()=>a[o];if(Ai(e)){const f=i[e];Sn(f)&&xt(c,f)}else if(Sn(e))xt(c,e.bind(a));else if(mi(e))if(_n(e))e.forEach(f=>xS(f,i,a,o));else{const f=Sn(e.handler)?e.handler.bind(a):i[e.handler];Sn(f)&&xt(c,f,e)}}function wS(e){const i=e.type,{mixins:a,extends:o}=i,{mixins:c,optionsCache:f,config:{optionMergeStrategies:h}}=e.appContext,l=f.get(i);let b;return l?b=l:!c.length&&!a&&!o?b=i:(b={},c.length&&c.forEach(S=>ep(b,S,h,!0)),ep(b,i,h)),mi(i)&&f.set(i,b),b}function ep(e,i,a,o=!1){const{mixins:c,extends:f}=i;f&&ep(e,f,a,!0),c&&c.forEach(h=>ep(e,h,a,!0));for(const h in i)if(!(o&&h==="expose")){const l=LA[h]||a&&a[h];e[h]=l?l(e[h],i[h]):i[h]}return e}const LA={data:S0,props:k0,emits:k0,methods:wh,computed:wh,beforeCreate:tr,created:tr,beforeMount:tr,mounted:tr,beforeUpdate:tr,updated:tr,beforeDestroy:tr,beforeUnmount:tr,destroyed:tr,unmounted:tr,activated:tr,deactivated:tr,errorCaptured:tr,serverPrefetch:tr,components:wh,directives:wh,watch:RA,provide:S0,inject:BA};function S0(e,i){return i?e?function(){return aa(Sn(e)?e.call(this,this):e,Sn(i)?i.call(this,this):i)}:i:e}function BA(e,i){return wh(ny(e),ny(i))}function ny(e){if(_n(e)){const i={};for(let a=0;a<e.length;a++)i[e[a]]=e[a];return i}return e}function tr(e,i){return e?[...new Set([].concat(e,i))]:i}function wh(e,i){return e?aa(Object.create(null),e,i):i}function k0(e,i){return e?_n(e)&&_n(i)?[...new Set([...e,...i])]:aa(Object.create(null),x0(e),x0(i??{})):i}function RA(e,i){if(!e)return i;if(!i)return e;const a=aa(Object.create(null),e);for(const o in i)a[o]=tr(e[o],i[o]);return a}function SS(){return{app:null,config:{isNativeTag:I1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let FA=0;function OA(e,i){return function(o,c=null){Sn(o)||(o=aa({},o)),c!=null&&!mi(c)&&(c=null);const f=SS(),h=new WeakSet,l=[];let b=!1;const S=f.app={_uid:FA++,_component:o,_props:c,_container:null,_context:f,_instance:null,version:_E,get config(){return f.config},set config(w){},use(w,...k){return h.has(w)||(w&&Sn(w.install)?(h.add(w),w.install(S,...k)):Sn(w)&&(h.add(w),w(S,...k))),S},mixin(w){return f.mixins.includes(w)||f.mixins.push(w),S},component(w,k){return k?(f.components[w]=k,S):f.components[w]},directive(w,k){return k?(f.directives[w]=k,S):f.directives[w]},mount(w,k,I){if(!b){const E=S._ceVNode||V(o,c);return E.appContext=f,I===!0?I="svg":I===!1&&(I=void 0),e(E,w,I),b=!0,S._container=w,w.__vue_app__=S,Tp(E.component)}},onUnmount(w){l.push(w)},unmount(){b&&(us(l,S._instance,16),e(null,S._container),delete S._container.__vue_app__)},provide(w,k){return f.provides[w]=k,S},runWithContext(w){const k=ou;ou=S;try{return w()}finally{ou=k}}};return S}}let ou=null;function Jn(e,i){if(Na){let a=Na.provides;const o=Na.parent&&Na.parent.provides;o===a&&(a=Na.provides=Object.create(o)),a[e]=i}}function vn(e,i,a=!1){const o=ed();if(o||ou){let c=ou?ou._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(c&&e in c)return c[e];if(arguments.length>1)return a&&Sn(i)?i.call(o&&o.proxy):i}}function $A(){return!!(ed()||ou)}const kS={},CS=()=>Object.create(kS),IS=e=>Object.getPrototypeOf(e)===kS;function NA(e,i,a,o=!1){const c={},f=CS();e.propsDefaults=Object.create(null),PS(e,i,c,f);for(const h in e.propsOptions[0])h in c||(c[h]=void 0);a?e.props=o?c:X1(c):e.type.props?e.props=c:e.props=f,e.attrs=f}function jA(e,i,a,o){const{props:c,attrs:f,vnode:{patchFlag:h}}=e,l=rn(c),[b]=e.propsOptions;let S=!1;if((o||h>0)&&!(h&16)){if(h&8){const w=e.vnode.dynamicProps;for(let k=0;k<w.length;k++){let I=w[k];if(Pp(e.emitsOptions,I))continue;const E=i[I];if(b)if(ti(f,I))E!==f[I]&&(f[I]=E,S=!0);else{const L=ar(I);c[L]=iy(b,l,L,E,e,!1)}else E!==f[I]&&(f[I]=E,S=!0)}}}else{PS(e,i,c,f)&&(S=!0);let w;for(const k in l)(!i||!ti(i,k)&&((w=xu(k))===k||!ti(i,w)))&&(b?a&&(a[k]!==void 0||a[w]!==void 0)&&(c[k]=iy(b,l,k,void 0,e,!0)):delete c[k]);if(f!==l)for(const k in f)(!i||!ti(i,k))&&(delete f[k],S=!0)}S&&co(e.attrs,"set","")}function PS(e,i,a,o){const[c,f]=e.propsOptions;let h=!1,l;if(i)for(let b in i){if(Ch(b))continue;const S=i[b];let w;c&&ti(c,w=ar(b))?!f||!f.includes(w)?a[w]=S:(l||(l={}))[w]=S:Pp(e.emitsOptions,b)||(!(b in o)||S!==o[b])&&(o[b]=S,h=!0)}if(f){const b=rn(a),S=l||fi;for(let w=0;w<f.length;w++){const k=f[w];a[k]=iy(c,b,k,S[k],e,!ti(S,k))}}return h}function iy(e,i,a,o,c,f){const h=e[a];if(h!=null){const l=ti(h,"default");if(l&&o===void 0){const b=h.default;if(h.type!==Function&&!h.skipFactory&&Sn(b)){const{propsDefaults:S}=c;if(a in S)o=S[a];else{const w=ff(c);o=S[a]=b.call(null,i),w()}}else o=b;c.ce&&c.ce._setProp(a,o)}h[0]&&(f&&!l?o=!1:h[1]&&(o===""||o===xu(a))&&(o=!0))}return o}const UA=new WeakMap;function TS(e,i,a=!1){const o=a?UA:i.propsCache,c=o.get(e);if(c)return c;const f=e.props,h={},l=[];let b=!1;if(!Sn(e)){const w=k=>{b=!0;const[I,E]=TS(k,i,!0);aa(h,I),E&&l.push(...E)};!a&&i.mixins.length&&i.mixins.forEach(w),e.extends&&w(e.extends),e.mixins&&e.mixins.forEach(w)}if(!f&&!b)return mi(e)&&o.set(e,Fc),Fc;if(_n(f))for(let w=0;w<f.length;w++){const k=ar(f[w]);C0(k)&&(h[k]=fi)}else if(f)for(const w in f){const k=ar(w);if(C0(k)){const I=f[w],E=h[k]=_n(I)||Sn(I)?{type:I}:aa({},I),L=E.type;let F=!1,z=!0;if(_n(L))for(let B=0;B<L.length;++B){const R=L[B],Z=Sn(R)&&R.name;if(Z==="Boolean"){F=!0;break}else Z==="String"&&(z=!1)}else F=Sn(L)&&L.name==="Boolean";E[0]=F,E[1]=z,(F||ti(E,"default"))&&l.push(k)}}const S=[h,l];return mi(e)&&o.set(e,S),S}function C0(e){return e[0]!=="$"&&!Ch(e)}const m_=e=>e==="_"||e==="_ctx"||e==="$stable",p_=e=>_n(e)?e.map(Ts):[Ts(e)],HA=(e,i,a)=>{if(i._n)return i;const o=Ge((...c)=>p_(i(...c)),a);return o._c=!1,o},AS=(e,i,a)=>{const o=e._ctx;for(const c in e){if(m_(c))continue;const f=e[c];if(Sn(f))i[c]=HA(c,f,o);else if(f!=null){const h=p_(f);i[c]=()=>h}}},ES=(e,i)=>{const a=p_(i);e.slots.default=()=>a},MS=(e,i,a)=>{for(const o in i)(a||!m_(o))&&(e[o]=i[o])},qA=(e,i,a)=>{const o=e.slots=CS();if(e.vnode.shapeFlag&32){const c=i._;c?(MS(o,i,a),a&&M1(o,"_",c,!0)):AS(i,o)}else i&&ES(e,i)},GA=(e,i,a)=>{const{vnode:o,slots:c}=e;let f=!0,h=fi;if(o.shapeFlag&32){const l=i._;l?a&&l===1?f=!1:MS(c,i,a):(f=!i.$stable,AS(i,c)),h=i}else i&&(ES(e,i),h={default:1});if(f)for(const l in c)!m_(l)&&h[l]==null&&delete c[l]},nr=oE;function WA(e){return ZA(e)}function ZA(e,i){const a=bp();a.__VUE__=!0;const{insert:o,remove:c,patchProp:f,createElement:h,createText:l,createComment:b,setText:S,setElementText:w,parentNode:k,nextSibling:I,setScopeId:E=Ds,insertStaticContent:L}=e,F=(fe,se,Se,xe=null,le=null,Ke=null,ht=void 0,et=null,tt=!!se.dynamicChildren)=>{if(fe===se)return;fe&&!iu(fe,se)&&(xe=ge(fe),Fe(fe,le,Ke,!0),fe=null),se.patchFlag===-2&&(tt=!1,se.dynamicChildren=null);const{type:dt,ref:yt,shapeFlag:It}=se;switch(dt){case hf:z(fe,se,Se,xe);break;case $a:B(fe,se,Se,xe);break;case Tv:fe==null&&R(se,Se,xe,ht);break;case Bt:Q(fe,se,Se,xe,le,Ke,ht,et,tt);break;default:It&1?J(fe,se,Se,xe,le,Ke,ht,et,tt):It&6?pe(fe,se,Se,xe,le,Ke,ht,et,tt):(It&64||It&128)&&dt.process(fe,se,Se,xe,le,Ke,ht,et,tt,ft)}yt!=null&&le?Ah(yt,fe&&fe.ref,Ke,se||fe,!se):yt==null&&fe&&fe.ref!=null&&Ah(fe.ref,null,Ke,fe,!0)},z=(fe,se,Se,xe)=>{if(fe==null)o(se.el=l(se.children),Se,xe);else{const le=se.el=fe.el;se.children!==fe.children&&S(le,se.children)}},B=(fe,se,Se,xe)=>{fe==null?o(se.el=b(se.children||""),Se,xe):se.el=fe.el},R=(fe,se,Se,xe)=>{[fe.el,fe.anchor]=L(fe.children,se,Se,xe,fe.el,fe.anchor)},Z=({el:fe,anchor:se},Se,xe)=>{let le;for(;fe&&fe!==se;)le=I(fe),o(fe,Se,xe),fe=le;o(se,Se,xe)},Y=({el:fe,anchor:se})=>{let Se;for(;fe&&fe!==se;)Se=I(fe),c(fe),fe=Se;c(se)},J=(fe,se,Se,xe,le,Ke,ht,et,tt)=>{se.type==="svg"?ht="svg":se.type==="math"&&(ht="mathml"),fe==null?ae(se,Se,xe,le,Ke,ht,et,tt):re(fe,se,le,Ke,ht,et,tt)},ae=(fe,se,Se,xe,le,Ke,ht,et)=>{let tt,dt;const{props:yt,shapeFlag:It,transition:Ut,dirs:nn}=fe;if(tt=fe.el=h(fe.type,Ke,yt&&yt.is,yt),It&8?w(tt,fe.children):It&16&&te(fe.children,tt,null,xe,le,Pv(fe,Ke),ht,et),nn&&Yl(fe,null,xe,"created"),he(tt,fe,fe.scopeId,ht,xe),yt){for(const Pn in yt)Pn!=="value"&&!Ch(Pn)&&f(tt,Pn,null,yt[Pn],Ke,xe);"value"in yt&&f(tt,"value",null,yt.value,Ke),(dt=yt.onVnodeBeforeMount)&&Cs(dt,xe,fe)}nn&&Yl(fe,null,xe,"beforeMount");const bn=KA(le,Ut);bn&&Ut.beforeEnter(tt),o(tt,se,Se),((dt=yt&&yt.onVnodeMounted)||bn||nn)&&nr(()=>{dt&&Cs(dt,xe,fe),bn&&Ut.enter(tt),nn&&Yl(fe,null,xe,"mounted")},le)},he=(fe,se,Se,xe,le)=>{if(Se&&E(fe,Se),xe)for(let Ke=0;Ke<xe.length;Ke++)E(fe,xe[Ke]);if(le){let Ke=le.subTree;if(se===Ke||LS(Ke.type)&&(Ke.ssContent===se||Ke.ssFallback===se)){const ht=le.vnode;he(fe,ht,ht.scopeId,ht.slotScopeIds,le.parent)}}},te=(fe,se,Se,xe,le,Ke,ht,et,tt=0)=>{for(let dt=tt;dt<fe.length;dt++){const yt=fe[dt]=et?ol(fe[dt]):Ts(fe[dt]);F(null,yt,se,Se,xe,le,Ke,ht,et)}},re=(fe,se,Se,xe,le,Ke,ht)=>{const et=se.el=fe.el;let{patchFlag:tt,dynamicChildren:dt,dirs:yt}=se;tt|=fe.patchFlag&16;const It=fe.props||fi,Ut=se.props||fi;let nn;if(Se&&Jl(Se,!1),(nn=Ut.onVnodeBeforeUpdate)&&Cs(nn,Se,se,fe),yt&&Yl(se,fe,Se,"beforeUpdate"),Se&&Jl(Se,!0),(It.innerHTML&&Ut.innerHTML==null||It.textContent&&Ut.textContent==null)&&w(et,""),dt?ie(fe.dynamicChildren,dt,et,Se,xe,Pv(se,le),Ke):ht||qe(fe,se,et,null,Se,xe,Pv(se,le),Ke,!1),tt>0){if(tt&16)ue(et,It,Ut,Se,le);else if(tt&2&&It.class!==Ut.class&&f(et,"class",null,Ut.class,le),tt&4&&f(et,"style",It.style,Ut.style,le),tt&8){const bn=se.dynamicProps;for(let Pn=0;Pn<bn.length;Pn++){const mt=bn[Pn],Hn=It[mt],Fn=Ut[mt];(Fn!==Hn||mt==="value")&&f(et,mt,Hn,Fn,le,Se)}}tt&1&&fe.children!==se.children&&w(et,se.children)}else!ht&&dt==null&&ue(et,It,Ut,Se,le);((nn=Ut.onVnodeUpdated)||yt)&&nr(()=>{nn&&Cs(nn,Se,se,fe),yt&&Yl(se,fe,Se,"updated")},xe)},ie=(fe,se,Se,xe,le,Ke,ht)=>{for(let et=0;et<se.length;et++){const tt=fe[et],dt=se[et],yt=tt.el&&(tt.type===Bt||!iu(tt,dt)||tt.shapeFlag&198)?k(tt.el):Se;F(tt,dt,yt,null,xe,le,Ke,ht,!0)}},ue=(fe,se,Se,xe,le)=>{if(se!==Se){if(se!==fi)for(const Ke in se)!Ch(Ke)&&!(Ke in Se)&&f(fe,Ke,se[Ke],null,le,xe);for(const Ke in Se){if(Ch(Ke))continue;const ht=Se[Ke],et=se[Ke];ht!==et&&Ke!=="value"&&f(fe,Ke,et,ht,le,xe)}"value"in Se&&f(fe,"value",se.value,Se.value,le)}},Q=(fe,se,Se,xe,le,Ke,ht,et,tt)=>{const dt=se.el=fe?fe.el:l(""),yt=se.anchor=fe?fe.anchor:l("");let{patchFlag:It,dynamicChildren:Ut,slotScopeIds:nn}=se;nn&&(et=et?et.concat(nn):nn),fe==null?(o(dt,Se,xe),o(yt,Se,xe),te(se.children||[],Se,yt,le,Ke,ht,et,tt)):It>0&&It&64&&Ut&&fe.dynamicChildren?(ie(fe.dynamicChildren,Ut,Se,le,Ke,ht,et),(se.key!=null||le&&se===le.subTree)&&g_(fe,se,!0)):qe(fe,se,Se,yt,le,Ke,ht,et,tt)},pe=(fe,se,Se,xe,le,Ke,ht,et,tt)=>{se.slotScopeIds=et,fe==null?se.shapeFlag&512?le.ctx.activate(se,Se,xe,ht,tt):Ce(se,Se,xe,le,Ke,ht,tt):$e(fe,se,tt)},Ce=(fe,se,Se,xe,le,Ke,ht)=>{const et=fe.component=hE(fe,xe,le);if(kp(fe)&&(et.ctx.renderer=ft),fE(et,!1,ht),et.asyncDep){if(le&&le.registerDep(et,Xe,ht),!fe.el){const tt=et.subTree=V($a);B(null,tt,se,Se),fe.placeholder=tt.el}}else Xe(et,fe,se,Se,le,Ke,ht)},$e=(fe,se,Se)=>{const xe=se.component=fe.component;if(rE(fe,se,Se))if(xe.asyncDep&&!xe.asyncResolved){Ye(xe,se,Se);return}else xe.next=se,xe.update();else se.el=fe.el,xe.vnode=se},Xe=(fe,se,Se,xe,le,Ke,ht)=>{const et=()=>{if(fe.isMounted){let{next:It,bu:Ut,u:nn,parent:bn,vnode:Pn}=fe;{const Ni=DS(fe);if(Ni){It&&(It.el=Pn.el,Ye(fe,It,ht)),Ni.asyncDep.then(()=>{fe.isUnmounted||et()});return}}let mt=It,Hn;Jl(fe,!1),It?(It.el=Pn.el,Ye(fe,It,ht)):It=Pn,Ut&&$m(Ut),(Hn=It.props&&It.props.onVnodeBeforeUpdate)&&Cs(Hn,bn,It,Pn),Jl(fe,!0);const Fn=P0(fe),Ei=fe.subTree;fe.subTree=Fn,F(Ei,Fn,k(Ei.el),ge(Ei),fe,le,Ke),It.el=Fn.el,mt===null&&sE(fe,Fn.el),nn&&nr(nn,le),(Hn=It.props&&It.props.onVnodeUpdated)&&nr(()=>Cs(Hn,bn,It,Pn),le)}else{let It;const{el:Ut,props:nn}=se,{bm:bn,m:Pn,parent:mt,root:Hn,type:Fn}=fe,Ei=Eh(se);Jl(fe,!1),bn&&$m(bn),!Ei&&(It=nn&&nn.onVnodeBeforeMount)&&Cs(It,mt,se),Jl(fe,!0);{Hn.ce&&Hn.ce._def.shadowRoot!==!1&&Hn.ce._injectChildStyle(Fn);const Ni=fe.subTree=P0(fe);F(null,Ni,Se,xe,fe,le,Ke),se.el=Ni.el}if(Pn&&nr(Pn,le),!Ei&&(It=nn&&nn.onVnodeMounted)){const Ni=se;nr(()=>Cs(It,mt,Ni),le)}(se.shapeFlag&256||mt&&Eh(mt.vnode)&&mt.vnode.shapeFlag&256)&&fe.a&&nr(fe.a,le),fe.isMounted=!0,se=Se=xe=null}};fe.scope.on();const tt=fe.effect=new B1(et);fe.scope.off();const dt=fe.update=tt.run.bind(tt),yt=fe.job=tt.runIfDirty.bind(tt);yt.i=fe,yt.id=fe.uid,tt.scheduler=()=>c_(yt),Jl(fe,!0),dt()},Ye=(fe,se,Se)=>{se.component=fe;const xe=fe.vnode.props;fe.vnode=se,fe.next=null,jA(fe,se.props,xe,Se),GA(fe,se.children,Se),mo(),m0(fe),po()},qe=(fe,se,Se,xe,le,Ke,ht,et,tt=!1)=>{const dt=fe&&fe.children,yt=fe?fe.shapeFlag:0,It=se.children,{patchFlag:Ut,shapeFlag:nn}=se;if(Ut>0){if(Ut&128){Me(dt,It,Se,xe,le,Ke,ht,et,tt);return}else if(Ut&256){Te(dt,It,Se,xe,le,Ke,ht,et,tt);return}}nn&8?(yt&16&&kt(dt,le,Ke),It!==dt&&w(Se,It)):yt&16?nn&16?Me(dt,It,Se,xe,le,Ke,ht,et,tt):kt(dt,le,Ke,!0):(yt&8&&w(Se,""),nn&16&&te(It,Se,xe,le,Ke,ht,et,tt))},Te=(fe,se,Se,xe,le,Ke,ht,et,tt)=>{fe=fe||Fc,se=se||Fc;const dt=fe.length,yt=se.length,It=Math.min(dt,yt);let Ut;for(Ut=0;Ut<It;Ut++){const nn=se[Ut]=tt?ol(se[Ut]):Ts(se[Ut]);F(fe[Ut],nn,Se,null,le,Ke,ht,et,tt)}dt>yt?kt(fe,le,Ke,!0,!1,It):te(se,Se,xe,le,Ke,ht,et,tt,It)},Me=(fe,se,Se,xe,le,Ke,ht,et,tt)=>{let dt=0;const yt=se.length;let It=fe.length-1,Ut=yt-1;for(;dt<=It&&dt<=Ut;){const nn=fe[dt],bn=se[dt]=tt?ol(se[dt]):Ts(se[dt]);if(iu(nn,bn))F(nn,bn,Se,null,le,Ke,ht,et,tt);else break;dt++}for(;dt<=It&&dt<=Ut;){const nn=fe[It],bn=se[Ut]=tt?ol(se[Ut]):Ts(se[Ut]);if(iu(nn,bn))F(nn,bn,Se,null,le,Ke,ht,et,tt);else break;It--,Ut--}if(dt>It){if(dt<=Ut){const nn=Ut+1,bn=nn<yt?se[nn].el:xe;for(;dt<=Ut;)F(null,se[dt]=tt?ol(se[dt]):Ts(se[dt]),Se,bn,le,Ke,ht,et,tt),dt++}}else if(dt>Ut)for(;dt<=It;)Fe(fe[dt],le,Ke,!0),dt++;else{const nn=dt,bn=dt,Pn=new Map;for(dt=bn;dt<=Ut;dt++){const Jt=se[dt]=tt?ol(se[dt]):Ts(se[dt]);Jt.key!=null&&Pn.set(Jt.key,dt)}let mt,Hn=0;const Fn=Ut-bn+1;let Ei=!1,Ni=0;const Pt=new Array(Fn);for(dt=0;dt<Fn;dt++)Pt[dt]=0;for(dt=nn;dt<=It;dt++){const Jt=fe[dt];if(Hn>=Fn){Fe(Jt,le,Ke,!0);continue}let di;if(Jt.key!=null)di=Pn.get(Jt.key);else for(mt=bn;mt<=Ut;mt++)if(Pt[mt-bn]===0&&iu(Jt,se[mt])){di=mt;break}di===void 0?Fe(Jt,le,Ke,!0):(Pt[di-bn]=dt+1,di>=Ni?Ni=di:Ei=!0,F(Jt,se[di],Se,null,le,Ke,ht,et,tt),Hn++)}const xn=Ei?XA(Pt):Fc;for(mt=xn.length-1,dt=Fn-1;dt>=0;dt--){const Jt=bn+dt,di=se[Jt],Pa=se[Jt+1],hn=Jt+1<yt?Pa.el||Pa.placeholder:xe;Pt[dt]===0?F(null,di,Se,hn,le,Ke,ht,et,tt):Ei&&(mt<0||dt!==xn[mt]?Ve(di,Se,hn,2):mt--)}}},Ve=(fe,se,Se,xe,le=null)=>{const{el:Ke,type:ht,transition:et,children:tt,shapeFlag:dt}=fe;if(dt&6){Ve(fe.component.subTree,se,Se,xe);return}if(dt&128){fe.suspense.move(se,Se,xe);return}if(dt&64){ht.move(fe,se,Se,ft);return}if(ht===Bt){o(Ke,se,Se);for(let It=0;It<tt.length;It++)Ve(tt[It],se,Se,xe);o(fe.anchor,se,Se);return}if(ht===Tv){Z(fe,se,Se);return}if(xe!==2&&dt&1&&et)if(xe===0)et.beforeEnter(Ke),o(Ke,se,Se),nr(()=>et.enter(Ke),le);else{const{leave:It,delayLeave:Ut,afterLeave:nn}=et,bn=()=>{fe.ctx.isUnmounted?c(Ke):o(Ke,se,Se)},Pn=()=>{Ke._isLeaving&&Ke[lo](!0),It(Ke,()=>{bn(),nn&&nn()})};Ut?Ut(Ke,bn,Pn):Pn()}else o(Ke,se,Se)},Fe=(fe,se,Se,xe=!1,le=!1)=>{const{type:Ke,props:ht,ref:et,children:tt,dynamicChildren:dt,shapeFlag:yt,patchFlag:It,dirs:Ut,cacheIndex:nn}=fe;if(It===-2&&(le=!1),et!=null&&(mo(),Ah(et,null,Se,fe,!0),po()),nn!=null&&(se.renderCache[nn]=void 0),yt&256){se.ctx.deactivate(fe);return}const bn=yt&1&&Ut,Pn=!Eh(fe);let mt;if(Pn&&(mt=ht&&ht.onVnodeBeforeUnmount)&&Cs(mt,se,fe),yt&6)vt(fe.component,Se,xe);else{if(yt&128){fe.suspense.unmount(Se,xe);return}bn&&Yl(fe,null,se,"beforeUnmount"),yt&64?fe.type.remove(fe,se,Se,ft,xe):dt&&!dt.hasOnce&&(Ke!==Bt||It>0&&It&64)?kt(dt,se,Se,!1,!0):(Ke===Bt&&It&384||!le&&yt&16)&&kt(tt,se,Se),xe&&Be(fe)}(Pn&&(mt=ht&&ht.onVnodeUnmounted)||bn)&&nr(()=>{mt&&Cs(mt,se,fe),bn&&Yl(fe,null,se,"unmounted")},Se)},Be=fe=>{const{type:se,el:Se,anchor:xe,transition:le}=fe;if(se===Bt){lt(Se,xe);return}if(se===Tv){Y(fe);return}const Ke=()=>{c(Se),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(fe.shapeFlag&1&&le&&!le.persisted){const{leave:ht,delayLeave:et}=le,tt=()=>ht(Se,Ke);et?et(fe.el,Ke,tt):tt()}else Ke()},lt=(fe,se)=>{let Se;for(;fe!==se;)Se=I(fe),c(fe),fe=Se;c(se)},vt=(fe,se,Se)=>{const{bum:xe,scope:le,job:Ke,subTree:ht,um:et,m:tt,a:dt}=fe;I0(tt),I0(dt),xe&&$m(xe),le.stop(),Ke&&(Ke.flags|=8,Fe(ht,fe,se,Se)),et&&nr(et,se),nr(()=>{fe.isUnmounted=!0},se)},kt=(fe,se,Se,xe=!1,le=!1,Ke=0)=>{for(let ht=Ke;ht<fe.length;ht++)Fe(fe[ht],se,Se,xe,le)},ge=fe=>{if(fe.shapeFlag&6)return ge(fe.component.subTree);if(fe.shapeFlag&128)return fe.suspense.next();const se=I(fe.anchor||fe.el),Se=se&&se[rS];return Se?I(Se):se};let je=!1;const rt=(fe,se,Se)=>{fe==null?se._vnode&&Fe(se._vnode,null,null,!0):F(se._vnode||null,fe,se,null,null,null,Se),se._vnode=fe,je||(je=!0,m0(),nS(),je=!1)},ft={p:F,um:Fe,m:Ve,r:Be,mt:Ce,mc:te,pc:qe,pbc:ie,n:ge,o:e};return{render:rt,hydrate:void 0,createApp:OA(rt)}}function Pv({type:e,props:i},a){return a==="svg"&&e==="foreignObject"||a==="mathml"&&e==="annotation-xml"&&i&&i.encoding&&i.encoding.includes("html")?void 0:a}function Jl({effect:e,job:i},a){a?(e.flags|=32,i.flags|=4):(e.flags&=-33,i.flags&=-5)}function KA(e,i){return(!e||e&&!e.pendingBranch)&&i&&!i.persisted}function g_(e,i,a=!1){const o=e.children,c=i.children;if(_n(o)&&_n(c))for(let f=0;f<o.length;f++){const h=o[f];let l=c[f];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=c[f]=ol(c[f]),l.el=h.el),!a&&l.patchFlag!==-2&&g_(h,l)),l.type===hf&&l.patchFlag!==-1&&(l.el=h.el),l.type===$a&&!l.el&&(l.el=h.el)}}function XA(e){const i=e.slice(),a=[0];let o,c,f,h,l;const b=e.length;for(o=0;o<b;o++){const S=e[o];if(S!==0){if(c=a[a.length-1],e[c]<S){i[o]=c,a.push(o);continue}for(f=0,h=a.length-1;f<h;)l=f+h>>1,e[a[l]]<S?f=l+1:h=l;S<e[a[f]]&&(f>0&&(i[o]=a[f-1]),a[f]=o)}}for(f=a.length,h=a[f-1];f-- >0;)a[f]=h,h=i[h];return a}function DS(e){const i=e.subTree.component;if(i)return i.asyncDep&&!i.asyncResolved?i:DS(i)}function I0(e){if(e)for(let i=0;i<e.length;i++)e[i].flags|=8}const YA=Symbol.for("v-scx"),JA=()=>vn(YA);function pi(e,i){return v_(e,null,i)}function xt(e,i,a){return v_(e,i,a)}function v_(e,i,a=fi){const{immediate:o,deep:c,flush:f,once:h}=a,l=aa({},a),b=i&&o||!i&&f!=="post";let S;if(jh){if(f==="sync"){const E=JA();S=E.__watcherHandles||(E.__watcherHandles=[])}else if(!b){const E=()=>{};return E.stop=Ds,E.resume=Ds,E.pause=Ds,E}}const w=Na;l.call=(E,L,F)=>us(E,w,L,F);let k=!1;f==="post"?l.scheduler=E=>{nr(E,w&&w.suspense)}:f!=="sync"&&(k=!0,l.scheduler=(E,L)=>{L?E():c_(E)}),l.augmentJob=E=>{i&&(E.flags|=4),k&&(E.flags|=2,w&&(E.id=w.uid,E.i=w))};const I=gA(e,i,l);return jh&&(S?S.push(I):b&&I()),I}function QA(e,i,a){const o=this.proxy,c=Ai(e)?e.includes(".")?VS(o,e):()=>o[e]:e.bind(o,o);let f;Sn(i)?f=i:(f=i.handler,a=i);const h=ff(this),l=v_(c,f.bind(o),a);return h(),l}function VS(e,i){const a=i.split(".");return()=>{let o=e;for(let c=0;c<a.length&&o;c++)o=o[a[c]];return o}}const eE=(e,i)=>i==="modelValue"||i==="model-value"?e.modelModifiers:e[`${i}Modifiers`]||e[`${ar(i)}Modifiers`]||e[`${xu(i)}Modifiers`];function tE(e,i,...a){if(e.isUnmounted)return;const o=e.vnode.props||fi;let c=a;const f=i.startsWith("update:"),h=f&&eE(o,i.slice(7));h&&(h.trim&&(c=a.map(w=>Ai(w)?w.trim():w)),h.number&&(c=a.map(Kv)));let l,b=o[l=bv(i)]||o[l=bv(ar(i))];!b&&f&&(b=o[l=bv(xu(i))]),b&&us(b,e,6,c);const S=o[l+"Once"];if(S){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,us(S,e,6,c)}}const nE=new WeakMap;function zS(e,i,a=!1){const o=a?nE:i.emitsCache,c=o.get(e);if(c!==void 0)return c;const f=e.emits;let h={},l=!1;if(!Sn(e)){const b=S=>{const w=zS(S,i,!0);w&&(l=!0,aa(h,w))};!a&&i.mixins.length&&i.mixins.forEach(b),e.extends&&b(e.extends),e.mixins&&e.mixins.forEach(b)}return!f&&!l?(mi(e)&&o.set(e,null),null):(_n(f)?f.forEach(b=>h[b]=null):aa(h,f),mi(e)&&o.set(e,h),h)}function Pp(e,i){return!e||!vp(i)?!1:(i=i.slice(2).replace(/Once$/,""),ti(e,i[0].toLowerCase()+i.slice(1))||ti(e,xu(i))||ti(e,i))}function P0(e){const{type:i,vnode:a,proxy:o,withProxy:c,propsOptions:[f],slots:h,attrs:l,emit:b,render:S,renderCache:w,props:k,data:I,setupState:E,ctx:L,inheritAttrs:F}=e,z=Jm(e);let B,R;try{if(a.shapeFlag&4){const Y=c||o,J=Y;B=Ts(S.call(J,Y,w,k,E,I,L)),R=l}else{const Y=i;B=Ts(Y.length>1?Y(k,{attrs:l,slots:h,emit:b}):Y(k,null)),R=i.props?l:iE(l)}}catch(Y){Dh.length=0,Sp(Y,e,1),B=V($a)}let Z=B;if(R&&F!==!1){const Y=Object.keys(R),{shapeFlag:J}=Z;Y.length&&J&7&&(f&&Y.some(Qy)&&(R=aE(R,f)),Z=go(Z,R,!1,!0))}return a.dirs&&(Z=go(Z,null,!1,!0),Z.dirs=Z.dirs?Z.dirs.concat(a.dirs):a.dirs),a.transition&&fu(Z,a.transition),B=Z,Jm(z),B}const iE=e=>{let i;for(const a in e)(a==="class"||a==="style"||vp(a))&&((i||(i={}))[a]=e[a]);return i},aE=(e,i)=>{const a={};for(const o in e)(!Qy(o)||!(o.slice(9)in i))&&(a[o]=e[o]);return a};function rE(e,i,a){const{props:o,children:c,component:f}=e,{props:h,children:l,patchFlag:b}=i,S=f.emitsOptions;if(i.dirs||i.transition)return!0;if(a&&b>=0){if(b&1024)return!0;if(b&16)return o?T0(o,h,S):!!h;if(b&8){const w=i.dynamicProps;for(let k=0;k<w.length;k++){const I=w[k];if(h[I]!==o[I]&&!Pp(S,I))return!0}}}else return(c||l)&&(!l||!l.$stable)?!0:o===h?!1:o?h?T0(o,h,S):!0:!!h;return!1}function T0(e,i,a){const o=Object.keys(i);if(o.length!==Object.keys(e).length)return!0;for(let c=0;c<o.length;c++){const f=o[c];if(i[f]!==e[f]&&!Pp(a,f))return!0}return!1}function sE({vnode:e,parent:i},a){for(;i;){const o=i.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=i.vnode).el=a,i=i.parent;else break}}const LS=e=>e.__isSuspense;function oE(e,i){i&&i.pendingBranch?_n(e)?i.effects.push(...e):i.effects.push(e):_A(e)}const Bt=Symbol.for("v-fgt"),hf=Symbol.for("v-txt"),$a=Symbol.for("v-cmt"),Tv=Symbol.for("v-stc"),Dh=[];let Mr=null;function Yi(e=!1){Dh.push(Mr=e?null:[])}function lE(){Dh.pop(),Mr=Dh[Dh.length-1]||null}let $h=1;function tp(e,i=!1){$h+=e,e<0&&Mr&&i&&(Mr.hasOnce=!0)}function BS(e){return e.dynamicChildren=$h>0?Mr||Fc:null,lE(),$h>0&&Mr&&Mr.push(e),e}function hl(e,i,a,o,c,f){return BS(q(e,i,a,o,c,f,!0))}function Wr(e,i,a,o,c){return BS(V(e,i,a,o,c,!0))}function Nh(e){return e?e.__v_isVNode===!0:!1}function iu(e,i){return e.type===i.type&&e.key===i.key}const RS=({key:e})=>e??null,jm=({ref:e,ref_key:i,ref_for:a})=>(typeof e=="number"&&(e=""+e),e!=null?Ai(e)||wi(e)||Sn(e)?{i:Er,r:e,k:i,f:!!a}:e:null);function q(e,i=null,a=null,o=0,c=null,f=e===Bt?0:1,h=!1,l=!1){const b={__v_isVNode:!0,__v_skip:!0,type:e,props:i,key:i&&RS(i),ref:i&&jm(i),scopeId:aS,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:f,patchFlag:o,dynamicProps:c,dynamicChildren:null,appContext:null,ctx:Er};return l?(y_(b,a),f&128&&e.normalize(b)):a&&(b.shapeFlag|=Ai(a)?8:16),$h>0&&!h&&Mr&&(b.patchFlag>0||f&6)&&b.patchFlag!==32&&Mr.push(b),b}const V=uE;function uE(e,i=null,a=null,o=0,c=null,f=!1){if((!e||e===AA)&&(e=$a),Nh(e)){const l=go(e,i,!0);return a&&y_(l,a),$h>0&&!f&&Mr&&(l.shapeFlag&6?Mr[Mr.indexOf(e)]=l:Mr.push(l)),l.patchFlag=-2,l}if(yE(e)&&(e=e.__vccOpts),i){i=FS(i);let{class:l,style:b}=i;l&&!Ai(l)&&(i.class=st(l)),mi(b)&&(u_(b)&&!_n(b)&&(b=aa({},b)),i.style=St(b))}const h=Ai(e)?1:LS(e)?128:sS(e)?64:mi(e)?4:Sn(e)?2:0;return q(e,i,a,o,c,h,f,!0)}function FS(e){return e?u_(e)||IS(e)?aa({},e):e:null}function go(e,i,a=!1,o=!1){const{props:c,ref:f,patchFlag:h,children:l,transition:b}=e,S=i?nt(c||{},i):c,w={__v_isVNode:!0,__v_skip:!0,type:e.type,props:S,key:S&&RS(S),ref:i&&i.ref?a&&f?_n(f)?f.concat(jm(i)):[f,jm(i)]:jm(i):f,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:i&&e.type!==Bt?h===-1?16:h|16:h,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:b,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&go(e.ssContent),ssFallback:e.ssFallback&&go(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return b&&o&&fu(w,b.clone(w)),w}function Lt(e=" ",i=0){return V(hf,null,e,i)}function Nc(e="",i=!1){return i?(Yi(),Wr($a,null,e)):V($a,null,e)}function Ts(e){return e==null||typeof e=="boolean"?V($a):_n(e)?V(Bt,null,e.slice()):Nh(e)?ol(e):V(hf,null,String(e))}function ol(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:go(e)}function y_(e,i){let a=0;const{shapeFlag:o}=e;if(i==null)i=null;else if(_n(i))a=16;else if(typeof i=="object")if(o&65){const c=i.default;c&&(c._c&&(c._d=!1),y_(e,c()),c._c&&(c._d=!0));return}else{a=32;const c=i._;!c&&!IS(i)?i._ctx=Er:c===3&&Er&&(Er.slots._===1?i._=1:(i._=2,e.patchFlag|=1024))}else Sn(i)?(i={default:i,_ctx:Er},a=32):(i=String(i),o&64?(a=16,i=[Lt(i)]):a=8);e.children=i,e.shapeFlag|=a}function nt(...e){const i={};for(let a=0;a<e.length;a++){const o=e[a];for(const c in o)if(c==="class")i.class!==o.class&&(i.class=st([i.class,o.class]));else if(c==="style")i.style=St([i.style,o.style]);else if(vp(c)){const f=i[c],h=o[c];h&&f!==h&&!(_n(f)&&f.includes(h))&&(i[c]=f?[].concat(f,h):h)}else c!==""&&(i[c]=o[c])}return i}function Cs(e,i,a,o=null){us(e,i,7,[a,o])}const cE=SS();let dE=0;function hE(e,i,a){const o=e.type,c=(i?i.appContext:e.appContext)||cE,f={uid:dE++,vnode:e,type:o,parent:i,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new L1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:i?i.provides:Object.create(c.provides),ids:i?i.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:TS(o,c),emitsOptions:zS(o,c),emit:null,emitted:null,propsDefaults:fi,inheritAttrs:o.inheritAttrs,ctx:fi,data:fi,props:fi,attrs:fi,slots:fi,refs:fi,setupState:fi,setupContext:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return f.ctx={_:f},f.root=i?i.root:f,f.emit=tE.bind(null,f),e.ce&&e.ce(f),f}let Na=null;const ed=()=>Na||Er;let np,ay;{const e=bp(),i=(a,o)=>{let c;return(c=e[a])||(c=e[a]=[]),c.push(o),f=>{c.length>1?c.forEach(h=>h(f)):c[0](f)}};np=i("__VUE_INSTANCE_SETTERS__",a=>Na=a),ay=i("__VUE_SSR_SETTERS__",a=>jh=a)}const ff=e=>{const i=Na;return np(e),e.scope.on(),()=>{e.scope.off(),np(i)}},A0=()=>{Na&&Na.scope.off(),np(null)};function OS(e){return e.vnode.shapeFlag&4}let jh=!1;function fE(e,i=!1,a=!1){i&&ay(i);const{props:o,children:c}=e.vnode,f=OS(e);NA(e,o,f,i),qA(e,c,a||i);const h=f?mE(e,i):void 0;return i&&ay(!1),h}function mE(e,i){const a=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,DA);const{setup:o}=a;if(o){mo();const c=e.setupContext=o.length>1?gE(e):null,f=ff(e),h=df(o,e,0,[e.props,c]),l=T1(h);if(po(),f(),(l||e.sp)&&!Eh(e)&&mS(e),l){if(h.then(A0,A0),i)return h.then(b=>{E0(e,b)}).catch(b=>{Sp(b,e,0)});e.asyncDep=h}else E0(e,h)}else $S(e)}function E0(e,i,a){Sn(i)?e.type.__ssrInlineRender?e.ssrRender=i:e.render=i:mi(i)&&(e.setupState=J1(i)),$S(e)}function $S(e,i,a){const o=e.type;e.render||(e.render=o.render||Ds);{const c=ff(e);mo();try{VA(e)}finally{po(),c()}}}const pE={get(e,i){return Oa(e,"get",""),e[i]}};function gE(e){const i=a=>{e.exposed=a||{}};return{attrs:new Proxy(e.attrs,pE),slots:e.slots,emit:e.emit,expose:i}}function Tp(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(J1(wp(e.exposed)),{get(i,a){if(a in i)return i[a];if(a in Mh)return Mh[a](e)},has(i,a){return a in i||a in Mh}})):e.proxy}function vE(e,i=!0){return Sn(e)?e.displayName||e.name:e.name||i&&e.__name}function yE(e){return Sn(e)&&"__vccOpts"in e}const K=(e,i)=>mA(e,i,jh);function fs(e,i,a){try{tp(-1);const o=arguments.length;return o===2?mi(i)&&!_n(i)?Nh(i)?V(e,null,[i]):V(e,i):V(e,null,i):(o>3?a=Array.prototype.slice.call(arguments,2):o===3&&Nh(a)&&(a=[a]),V(e,i,a))}finally{tp(1)}}const _E="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ry;const M0=typeof window<"u"&&window.trustedTypes;if(M0)try{ry=M0.createPolicy("vue",{createHTML:e=>e})}catch{}const NS=ry?e=>ry.createHTML(e):e=>e,bE="http://www.w3.org/2000/svg",xE="http://www.w3.org/1998/Math/MathML",oo=typeof document<"u"?document:null,D0=oo&&oo.createElement("template"),wE={insert:(e,i,a)=>{i.insertBefore(e,a||null)},remove:e=>{const i=e.parentNode;i&&i.removeChild(e)},createElement:(e,i,a,o)=>{const c=i==="svg"?oo.createElementNS(bE,e):i==="mathml"?oo.createElementNS(xE,e):a?oo.createElement(e,{is:a}):oo.createElement(e);return e==="select"&&o&&o.multiple!=null&&c.setAttribute("multiple",o.multiple),c},createText:e=>oo.createTextNode(e),createComment:e=>oo.createComment(e),setText:(e,i)=>{e.nodeValue=i},setElementText:(e,i)=>{e.textContent=i},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>oo.querySelector(e),setScopeId(e,i){e.setAttribute(i,"")},insertStaticContent(e,i,a,o,c,f){const h=a?a.previousSibling:i.lastChild;if(c&&(c===f||c.nextSibling))for(;i.insertBefore(c.cloneNode(!0),a),!(c===f||!(c=c.nextSibling)););else{D0.innerHTML=NS(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const l=D0.content;if(o==="svg"||o==="mathml"){const b=l.firstChild;for(;b.firstChild;)l.appendChild(b.firstChild);l.removeChild(b)}i.insertBefore(l,a)}return[h?h.nextSibling:i.firstChild,a?a.previousSibling:i.lastChild]}},nl="transition",yh="animation",Uc=Symbol("_vtc"),jS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},US=aa({},cS,jS),SE=e=>(e.displayName="Transition",e.props=US,e),pl=SE((e,{slots:i})=>fs(SA,HS(e),i)),Ql=(e,i=[])=>{_n(e)?e.forEach(a=>a(...i)):e&&e(...i)},V0=e=>e?_n(e)?e.some(i=>i.length>1):e.length>1:!1;function HS(e){const i={};for(const Q in e)Q in jS||(i[Q]=e[Q]);if(e.css===!1)return i;const{name:a="v",type:o,duration:c,enterFromClass:f=`${a}-enter-from`,enterActiveClass:h=`${a}-enter-active`,enterToClass:l=`${a}-enter-to`,appearFromClass:b=f,appearActiveClass:S=h,appearToClass:w=l,leaveFromClass:k=`${a}-leave-from`,leaveActiveClass:I=`${a}-leave-active`,leaveToClass:E=`${a}-leave-to`}=e,L=kE(c),F=L&&L[0],z=L&&L[1],{onBeforeEnter:B,onEnter:R,onEnterCancelled:Z,onLeave:Y,onLeaveCancelled:J,onBeforeAppear:ae=B,onAppear:he=R,onAppearCancelled:te=Z}=i,re=(Q,pe,Ce,$e)=>{Q._enterCancelled=$e,al(Q,pe?w:l),al(Q,pe?S:h),Ce&&Ce()},ie=(Q,pe)=>{Q._isLeaving=!1,al(Q,k),al(Q,E),al(Q,I),pe&&pe()},ue=Q=>(pe,Ce)=>{const $e=Q?he:R,Xe=()=>re(pe,Q,Ce);Ql($e,[pe,Xe]),z0(()=>{al(pe,Q?b:f),Is(pe,Q?w:l),V0($e)||L0(pe,o,F,Xe)})};return aa(i,{onBeforeEnter(Q){Ql(B,[Q]),Is(Q,f),Is(Q,h)},onBeforeAppear(Q){Ql(ae,[Q]),Is(Q,b),Is(Q,S)},onEnter:ue(!1),onAppear:ue(!0),onLeave(Q,pe){Q._isLeaving=!0;const Ce=()=>ie(Q,pe);Is(Q,k),Q._enterCancelled?(Is(Q,I),sy(Q)):(sy(Q),Is(Q,I)),z0(()=>{Q._isLeaving&&(al(Q,k),Is(Q,E),V0(Y)||L0(Q,o,z,Ce))}),Ql(Y,[Q,Ce])},onEnterCancelled(Q){re(Q,!1,void 0,!0),Ql(Z,[Q])},onAppearCancelled(Q){re(Q,!0,void 0,!0),Ql(te,[Q])},onLeaveCancelled(Q){ie(Q),Ql(J,[Q])}})}function kE(e){if(e==null)return null;if(mi(e))return[Av(e.enter),Av(e.leave)];{const i=Av(e);return[i,i]}}function Av(e){return BT(e)}function Is(e,i){i.split(/\s+/).forEach(a=>a&&e.classList.add(a)),(e[Uc]||(e[Uc]=new Set)).add(i)}function al(e,i){i.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const a=e[Uc];a&&(a.delete(i),a.size||(e[Uc]=void 0))}function z0(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let CE=0;function L0(e,i,a,o){const c=e._endId=++CE,f=()=>{c===e._endId&&o()};if(a!=null)return setTimeout(f,a);const{type:h,timeout:l,propCount:b}=qS(e,i);if(!h)return o();const S=h+"end";let w=0;const k=()=>{e.removeEventListener(S,I),f()},I=E=>{E.target===e&&++w>=b&&k()};setTimeout(()=>{w<b&&k()},l+1),e.addEventListener(S,I)}function qS(e,i){const a=window.getComputedStyle(e),o=L=>(a[L]||"").split(", "),c=o(`${nl}Delay`),f=o(`${nl}Duration`),h=B0(c,f),l=o(`${yh}Delay`),b=o(`${yh}Duration`),S=B0(l,b);let w=null,k=0,I=0;i===nl?h>0&&(w=nl,k=h,I=f.length):i===yh?S>0&&(w=yh,k=S,I=b.length):(k=Math.max(h,S),w=k>0?h>S?nl:yh:null,I=w?w===nl?f.length:b.length:0);const E=w===nl&&/\b(?:transform|all)(?:,|$)/.test(o(`${nl}Property`).toString());return{type:w,timeout:k,propCount:I,hasTransform:E}}function B0(e,i){for(;e.length<i.length;)e=e.concat(e);return Math.max(...i.map((a,o)=>R0(a)+R0(e[o])))}function R0(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function sy(e){return(e?e.ownerDocument:document).body.offsetHeight}function IE(e,i,a){const o=e[Uc];o&&(i=(i?[i,...o]:[...o]).join(" ")),i==null?e.removeAttribute("class"):a?e.setAttribute("class",i):e.className=i}const ip=Symbol("_vod"),GS=Symbol("_vsh"),ms={name:"show",beforeMount(e,{value:i},{transition:a}){e[ip]=e.style.display==="none"?"":e.style.display,a&&i?a.beforeEnter(e):_h(e,i)},mounted(e,{value:i},{transition:a}){a&&i&&a.enter(e)},updated(e,{value:i,oldValue:a},{transition:o}){!i!=!a&&(o?i?(o.beforeEnter(e),_h(e,!0),o.enter(e)):o.leave(e,()=>{_h(e,!1)}):_h(e,i))},beforeUnmount(e,{value:i}){_h(e,i)}};function _h(e,i){e.style.display=i?e[ip]:"none",e[GS]=!i}const PE=Symbol(""),TE=/(?:^|;)\s*display\s*:/;function AE(e,i,a){const o=e.style,c=Ai(a);let f=!1;if(a&&!c){if(i)if(Ai(i))for(const h of i.split(";")){const l=h.slice(0,h.indexOf(":")).trim();a[l]==null&&Um(o,l,"")}else for(const h in i)a[h]==null&&Um(o,h,"");for(const h in a)h==="display"&&(f=!0),Um(o,h,a[h])}else if(c){if(i!==a){const h=o[PE];h&&(a+=";"+h),o.cssText=a,f=TE.test(a)}}else i&&e.removeAttribute("style");ip in e&&(e[ip]=f?o.display:"",e[GS]&&(o.display="none"))}const F0=/\s*!important$/;function Um(e,i,a){if(_n(a))a.forEach(o=>Um(e,i,o));else if(a==null&&(a=""),i.startsWith("--"))e.setProperty(i,a);else{const o=EE(e,i);F0.test(a)?e.setProperty(xu(o),a.replace(F0,""),"important"):e[o]=a}}const O0=["Webkit","Moz","ms"],Ev={};function EE(e,i){const a=Ev[i];if(a)return a;let o=ar(i);if(o!=="filter"&&o in e)return Ev[i]=o;o=Fs(o);for(let c=0;c<O0.length;c++){const f=O0[c]+o;if(f in e)return Ev[i]=f}return i}const $0="http://www.w3.org/1999/xlink";function N0(e,i,a,o,c,f=UT(i)){o&&i.startsWith("xlink:")?a==null?e.removeAttributeNS($0,i.slice(6,i.length)):e.setAttributeNS($0,i,a):a==null||f&&!D1(a)?e.removeAttribute(i):e.setAttribute(i,f?"":bl(a)?String(a):a)}function j0(e,i,a,o,c){if(i==="innerHTML"||i==="textContent"){a!=null&&(e[i]=i==="innerHTML"?NS(a):a);return}const f=e.tagName;if(i==="value"&&f!=="PROGRESS"&&!f.includes("-")){const l=f==="OPTION"?e.getAttribute("value")||"":e.value,b=a==null?e.type==="checkbox"?"on":"":String(a);(l!==b||!("_value"in e))&&(e.value=b),a==null&&e.removeAttribute(i),e._value=a;return}let h=!1;if(a===""||a==null){const l=typeof e[i];l==="boolean"?a=D1(a):a==null&&l==="string"?(a="",h=!0):l==="number"&&(a=0,h=!0)}try{e[i]=a}catch{}h&&e.removeAttribute(c||i)}function zc(e,i,a,o){e.addEventListener(i,a,o)}function ME(e,i,a,o){e.removeEventListener(i,a,o)}const U0=Symbol("_vei");function DE(e,i,a,o,c=null){const f=e[U0]||(e[U0]={}),h=f[i];if(o&&h)h.value=o;else{const[l,b]=VE(i);if(o){const S=f[i]=BE(o,c);zc(e,l,S,b)}else h&&(ME(e,l,h,b),f[i]=void 0)}}const H0=/(?:Once|Passive|Capture)$/;function VE(e){let i;if(H0.test(e)){i={};let o;for(;o=e.match(H0);)e=e.slice(0,e.length-o[0].length),i[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):xu(e.slice(2)),i]}let Mv=0;const zE=Promise.resolve(),LE=()=>Mv||(zE.then(()=>Mv=0),Mv=Date.now());function BE(e,i){const a=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=a.attached)return;us(RE(o,a.value),i,5,[o])};return a.value=e,a.attached=LE(),a}function RE(e,i){if(_n(i)){const a=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{a.call(e),e._stopped=!0},i.map(o=>c=>!c._stopped&&o&&o(c))}else return i}const q0=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,FE=(e,i,a,o,c,f)=>{const h=c==="svg";i==="class"?IE(e,o,h):i==="style"?AE(e,a,o):vp(i)?Qy(i)||DE(e,i,a,o,f):(i[0]==="."?(i=i.slice(1),!0):i[0]==="^"?(i=i.slice(1),!1):OE(e,i,o,h))?(j0(e,i,o),!e.tagName.includes("-")&&(i==="value"||i==="checked"||i==="selected")&&N0(e,i,o,h,f,i!=="value")):e._isVueCE&&(/[A-Z]/.test(i)||!Ai(o))?j0(e,ar(i),o,f,i):(i==="true-value"?e._trueValue=o:i==="false-value"&&(e._falseValue=o),N0(e,i,o,h))};function OE(e,i,a,o){if(o)return!!(i==="innerHTML"||i==="textContent"||i in e&&q0(i)&&Sn(a));if(i==="spellcheck"||i==="draggable"||i==="translate"||i==="autocorrect"||i==="form"||i==="list"&&e.tagName==="INPUT"||i==="type"&&e.tagName==="TEXTAREA")return!1;if(i==="width"||i==="height"){const c=e.tagName;if(c==="IMG"||c==="VIDEO"||c==="CANVAS"||c==="SOURCE")return!1}return q0(i)&&Ai(a)?!1:i in e}const WS=new WeakMap,ZS=new WeakMap,ap=Symbol("_moveCb"),G0=Symbol("_enterCb"),$E=e=>(delete e.props.mode,e),NE=$E({name:"TransitionGroup",props:aa({},US,{tag:String,moveClass:String}),setup(e,{slots:i}){const a=ed(),o=uS();let c,f;return f_(()=>{if(!c.length)return;const h=e.moveClass||`${e.name||"v"}-move`;if(!qE(c[0].el,a.vnode.el,h)){c=[];return}c.forEach(jE),c.forEach(UE);const l=c.filter(HE);sy(a.vnode.el),l.forEach(b=>{const S=b.el,w=S.style;Is(S,h),w.transform=w.webkitTransform=w.transitionDuration="";const k=S[ap]=I=>{I&&I.target!==S||(!I||I.propertyName.endsWith("transform"))&&(S.removeEventListener("transitionend",k),S[ap]=null,al(S,h))};S.addEventListener("transitionend",k)}),c=[]}),()=>{const h=rn(e),l=HS(h);let b=h.tag||Bt;if(c=[],f)for(let S=0;S<f.length;S++){const w=f[S];w.el&&w.el instanceof Element&&(c.push(w),fu(w,Oh(w,l,o,a)),WS.set(w,w.el.getBoundingClientRect()))}f=i.default?d_(i.default()):[];for(let S=0;S<f.length;S++){const w=f[S];w.key!=null&&fu(w,Oh(w,l,o,a))}return V(b,null,f)}}}),__=NE;function jE(e){const i=e.el;i[ap]&&i[ap](),i[G0]&&i[G0]()}function UE(e){ZS.set(e,e.el.getBoundingClientRect())}function HE(e){const i=WS.get(e),a=ZS.get(e),o=i.left-a.left,c=i.top-a.top;if(o||c){const f=e.el.style;return f.transform=f.webkitTransform=`translate(${o}px,${c}px)`,f.transitionDuration="0s",e}}function qE(e,i,a){const o=e.cloneNode(),c=e[Uc];c&&c.forEach(l=>{l.split(/\s+/).forEach(b=>b&&o.classList.remove(b))}),a.split(/\s+/).forEach(l=>l&&o.classList.add(l)),o.style.display="none";const f=i.nodeType===1?i:i.parentNode;f.appendChild(o);const{hasTransform:h}=qS(o);return f.removeChild(o),h}const W0=e=>{const i=e.props["onUpdate:modelValue"]||!1;return _n(i)?a=>$m(i,a):i};function GE(e){e.target.composing=!0}function Z0(e){const i=e.target;i.composing&&(i.composing=!1,i.dispatchEvent(new Event("input")))}const Dv=Symbol("_assign"),WE={created(e,{modifiers:{lazy:i,trim:a,number:o}},c){e[Dv]=W0(c);const f=o||c.props&&c.props.type==="number";zc(e,i?"change":"input",h=>{if(h.target.composing)return;let l=e.value;a&&(l=l.trim()),f&&(l=Kv(l)),e[Dv](l)}),a&&zc(e,"change",()=>{e.value=e.value.trim()}),i||(zc(e,"compositionstart",GE),zc(e,"compositionend",Z0),zc(e,"change",Z0))},mounted(e,{value:i}){e.value=i??""},beforeUpdate(e,{value:i,oldValue:a,modifiers:{lazy:o,trim:c,number:f}},h){if(e[Dv]=W0(h),e.composing)return;const l=(f||e.type==="number")&&!/^0\d/.test(e.value)?Kv(e.value):e.value,b=i??"";l!==b&&(document.activeElement===e&&e.type!=="range"&&(o&&i===a||c&&e.value.trim()===b)||(e.value=b))}},ZE=["ctrl","shift","alt","meta"],KE={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,i)=>ZE.some(a=>e[`${a}Key`]&&!i.includes(a))},Sh=(e,i)=>{const a=e._withMods||(e._withMods={}),o=i.join(".");return a[o]||(a[o]=((c,...f)=>{for(let h=0;h<i.length;h++){const l=KE[i[h]];if(l&&l(c,i))return}return e(c,...f)}))},XE=aa({patchProp:FE},wE);let K0;function KS(){return K0||(K0=WA(XE))}const XS=((...e)=>{KS().render(...e)}),YE=((...e)=>{const i=KS().createApp(...e),{mount:a}=i;return i.mount=o=>{const c=QE(o);if(!c)return;const f=i._component;!Sn(f)&&!f.render&&!f.template&&(f.template=c.innerHTML),c.nodeType===1&&(c.textContent="");const h=a(c,!1,JE(c));return c instanceof Element&&(c.removeAttribute("v-cloak"),c.setAttribute("data-v-app","")),h},i});function JE(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function QE(e){return Ai(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let YS;const Ap=e=>YS=e,JS=Symbol();function oy(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Vh;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Vh||(Vh={}));function eM(){const e=fl(!0),i=e.run(()=>Qe({}));let a=[],o=[];const c=wp({install(f){Ap(c),c._a=f,f.provide(JS,c),f.config.globalProperties.$pinia=c,o.forEach(h=>a.push(h)),o=[]},use(f){return this._a?a.push(f):o.push(f),this},_p:a,_a:null,_e:e,_s:new Map,state:i});return c}const QS=()=>{};function X0(e,i,a,o=QS){e.push(i);const c=()=>{const f=e.indexOf(i);f>-1&&(e.splice(f,1),o())};return!a&&n_()&&Hi(c),c}function Pc(e,...i){e.slice().forEach(a=>{a(...i)})}const tM=e=>e(),Y0=Symbol(),Vv=Symbol();function ly(e,i){e instanceof Map&&i instanceof Map?i.forEach((a,o)=>e.set(o,a)):e instanceof Set&&i instanceof Set&&i.forEach(e.add,e);for(const a in i){if(!i.hasOwnProperty(a))continue;const o=i[a],c=e[a];oy(c)&&oy(o)&&e.hasOwnProperty(a)&&!wi(o)&&!dl(o)?e[a]=ly(c,o):e[a]=o}return e}const nM=Symbol();function iM(e){return!oy(e)||!e.hasOwnProperty(nM)}const{assign:rl}=Object;function aM(e){return!!(wi(e)&&e.effect)}function rM(e,i,a,o){const{state:c,actions:f,getters:h}=i,l=a.state.value[e];let b;function S(){l||(a.state.value[e]=c?c():{});const w=wu(a.state.value[e]);return rl(w,f,Object.keys(h||{}).reduce((k,I)=>(k[I]=wp(K(()=>{Ap(a);const E=a._s.get(e);return h[I].call(E,E)})),k),{}))}return b=ek(e,S,i,a,o,!0),b}function ek(e,i,a={},o,c,f){let h;const l=rl({actions:{}},a),b={deep:!0};let S,w,k=[],I=[],E;const L=o.state.value[e];!f&&!L&&(o.state.value[e]={}),Qe({});let F;function z(te){let re;S=w=!1,typeof te=="function"?(te(o.state.value[e]),re={type:Vh.patchFunction,storeId:e,events:E}):(ly(o.state.value[e],te),re={type:Vh.patchObject,payload:te,storeId:e,events:E});const ie=F=Symbol();kn().then(()=>{F===ie&&(S=!0)}),w=!0,Pc(k,re,o.state.value[e])}const B=f?function(){const{state:re}=a,ie=re?re():{};this.$patch(ue=>{rl(ue,ie)})}:QS;function R(){h.stop(),k=[],I=[],o._s.delete(e)}const Z=(te,re="")=>{if(Y0 in te)return te[Vv]=re,te;const ie=function(){Ap(o);const ue=Array.from(arguments),Q=[],pe=[];function Ce(Ye){Q.push(Ye)}function $e(Ye){pe.push(Ye)}Pc(I,{args:ue,name:ie[Vv],store:J,after:Ce,onError:$e});let Xe;try{Xe=te.apply(this&&this.$id===e?this:J,ue)}catch(Ye){throw Pc(pe,Ye),Ye}return Xe instanceof Promise?Xe.then(Ye=>(Pc(Q,Ye),Ye)).catch(Ye=>(Pc(pe,Ye),Promise.reject(Ye))):(Pc(Q,Xe),Xe)};return ie[Y0]=!0,ie[Vv]=re,ie},Y={_p:o,$id:e,$onAction:X0.bind(null,I),$patch:z,$reset:B,$subscribe(te,re={}){const ie=X0(k,te,re.detached,()=>ue()),ue=h.run(()=>xt(()=>o.state.value[e],Q=>{(re.flush==="sync"?w:S)&&te({storeId:e,type:Vh.direct,events:E},Q)},rl({},b,re)));return ie},$dispose:R},J=Ui(Y);o._s.set(e,J);const he=(o._a&&o._a.runWithContext||tM)(()=>o._e.run(()=>(h=fl()).run(()=>i({action:Z}))));for(const te in he){const re=he[te];if(wi(re)&&!aM(re)||dl(re))f||(L&&iM(re)&&(wi(re)?re.value=L[te]:ly(re,L[te])),o.state.value[e][te]=re);else if(typeof re=="function"){const ie=Z(re,te);he[te]=ie,l.actions[te]=re}}return rl(J,he),rl(rn(J),he),Object.defineProperty(J,"$state",{get:()=>o.state.value[e],set:te=>{z(re=>{rl(re,te)})}}),o._p.forEach(te=>{rl(J,h.run(()=>te({store:J,app:o._a,pinia:o,options:l})))}),L&&f&&a.hydrate&&a.hydrate(J.$state,L),S=!0,w=!0,J}/*! #__NO_SIDE_EFFECTS__ */function b_(e,i,a){let o,c;const f=typeof i=="function";typeof e=="string"?(o=e,c=f?a:i):(c=e,o=e.id);function h(l,b){const S=$A();return l=l||(S?vn(JS,null):null),l&&Ap(l),l=YS,l._s.has(o)||(f?ek(o,i,c,l):rM(o,c,l)),l._s.get(o)}return h.$id=o,h}function ka(e,i){let a;function o(){a=fl(),a.run(()=>i.length?i(()=>{a==null||a.stop(),o()}):i())}xt(e,c=>{c&&!a?o():c||(a==null||a.stop(),a=void 0)},{immediate:!0}),Hi(()=>{a==null||a.stop()})}const jn=typeof window<"u",x_=jn&&"IntersectionObserver"in window,sM=jn&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),J0=jn&&"EyeDropper"in window,w_=jn&&"matchMedia"in window&&typeof window.matchMedia=="function",zs=()=>w_&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;function Q0(e,i,a){oM(e,i),i.set(e,a)}function oM(e,i){if(i.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ew(e,i,a){return e.set(tk(e,i),a),a}function ro(e,i){return e.get(tk(e,i))}function tk(e,i,a){if(typeof e=="function"?e===i:e.has(i))return arguments.length<3?i:a;throw new TypeError("Private element is not present on this object")}function nk(e,i,a){const o=i.length-1;if(o<0)return e===void 0?a:e;for(let c=0;c<o;c++){if(e==null)return a;e=e[i[c]]}return e==null||e[i[o]]===void 0?a:e[i[o]]}function ia(e,i){if(e===i)return!0;if(e instanceof Date&&i instanceof Date&&e.getTime()!==i.getTime()||e!==Object(e)||i!==Object(i))return!1;const a=Object.keys(e);return a.length!==Object.keys(i).length?!1:a.every(o=>ia(e[o],i[o]))}function mu(e,i,a){return e==null||!i||typeof i!="string"?a:e[i]!==void 0?e[i]:(i=i.replace(/\[(\w+)\]/g,".$1"),i=i.replace(/^\./,""),nk(e,i.split("."),a))}function Ri(e,i,a){if(i===!0)return e===void 0?a:e;if(i==null||typeof i=="boolean")return a;if(e!==Object(e)){if(typeof i!="function")return a;const c=i(e,a);return typeof c>"u"?a:c}if(typeof i=="string")return mu(e,i,a);if(Array.isArray(i))return nk(e,i,a);if(typeof i!="function")return a;const o=i(e,a);return typeof o>"u"?a:o}function Dr(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(a,o)=>i+o)}function Tt(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(e==null||e==="")return;const a=Number(e);return isNaN(a)?String(e):isFinite(a)?`${a}${i}`:void 0}function Uh(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function tw(e){let i;return e!==null&&typeof e=="object"&&((i=Object.getPrototypeOf(e))===Object.prototype||i===null)}function S_(e){if(e&&"$el"in e){const i=e.$el;return(i==null?void 0:i.nodeType)===Node.TEXT_NODE?i.nextElementSibling:i}return e}const uy=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function ik(e){return Object.keys(e)}function au(e,i){return i.every(a=>e.hasOwnProperty(a))}function pr(e,i){const a={};for(const o of i)Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}function cy(e,i,a){const o=Object.create(null),c=Object.create(null);for(const f in e)i.some(h=>h instanceof RegExp?h.test(f):h===f)?o[f]=e[f]:c[f]=e[f];return[o,c]}function Wn(e,i){const a={...e};return i.forEach(o=>delete a[o]),a}const ak=/^on[^a-z]/,k_=e=>ak.test(e),lM=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],uM=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function cM(e){return e.isComposing&&uM.includes(e.key)}function xl(e){const[i,a]=cy(e,[ak]),o=Wn(i,lM),[c,f]=cy(a,["class","style","id",/^data-/]);return Object.assign(c,i),Object.assign(f,o),[c,f]}function Si(e){return e==null?[]:Array.isArray(e)?e:[e]}function rk(e,i){let a=0;const o=function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];clearTimeout(a),a=setTimeout(()=>e(...f),en(i))};return o.clear=()=>{clearTimeout(a)},o.immediate=e,o}function ni(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(i,Math.min(a,e))}function nw(e){const i=e.toString().trim();return i.includes(".")?i.length-i.indexOf(".")-1:0}function iw(e,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+a.repeat(Math.max(0,i-e.length))}function aw(e,i){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,i-e.length))+e}function dM(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const a=[];let o=0;for(;o<e.length;)a.push(e.substr(o,i)),o+=i;return a}function rw(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(e<i)return`${e} B`;const a=i===1024?["Ki","Mi","Gi"]:["k","M","G"];let o=-1;for(;Math.abs(e)>=i&&o<a.length-1;)e/=i,++o;return`${e.toFixed(1)} ${a[o]}B`}function ja(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;const o={};for(const c in e)o[c]=e[c];for(const c in i){const f=e[c],h=i[c];if(tw(f)&&tw(h)){o[c]=ja(f,h,a);continue}if(a&&Array.isArray(f)&&Array.isArray(h)){o[c]=a(f,h);continue}o[c]=h}return o}function sk(e){return e.map(i=>i.type===Bt?sk(i.children):i).flat()}function lu(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(lu.cache.has(e))return lu.cache.get(e);const i=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return lu.cache.set(e,i),i}lu.cache=new Map;function Bc(e,i){if(!i||typeof i!="object")return[];if(Array.isArray(i))return i.map(a=>Bc(e,a)).flat(1);if(i.suspense)return Bc(e,i.ssContent);if(Array.isArray(i.children))return i.children.map(a=>Bc(e,a)).flat(1);if(i.component){if(Object.getOwnPropertySymbols(i.component.provides).includes(e))return[i.component];if(i.component.subTree)return Bc(e,i.component.subTree).flat(1)}return[]}var Tc=new WeakMap,eu=new WeakMap;class ok{constructor(i){Q0(this,Tc,[]),Q0(this,eu,0),this.size=i}get isFull(){return ro(Tc,this).length===this.size}push(i){ro(Tc,this)[ro(eu,this)]=i,ew(eu,this,(ro(eu,this)+1)%this.size)}values(){return ro(Tc,this).slice(ro(eu,this)).concat(ro(Tc,this).slice(0,ro(eu,this)))}clear(){ro(Tc,this).length=0,ew(eu,this,0)}}function hM(e){return"touches"in e?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}function C_(e){const i=Ui({});pi(()=>{const o=e();for(const c in o)i[c]=o[c]},{flush:"sync"});const a={};for(const o in i)a[o]=we(()=>i[o]);return a}function rp(e,i){return e.includes(i)}function lk(e){return e[2].toLowerCase()+e.slice(3)}const pa=()=>[Function,Array];function sw(e,i){return i="on"+Fs(i),!!(e[i]||e[`${i}Once`]||e[`${i}Capture`]||e[`${i}OnceCapture`]||e[`${i}CaptureOnce`])}function mf(e){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];if(Array.isArray(e))for(const c of e)c(...a);else typeof e=="function"&&e(...a)}function Hc(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const a=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(o=>`${o}${i?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...e.querySelectorAll(a)]}function uk(e,i,a){let o,c=e.indexOf(document.activeElement);const f=i==="next"?1:-1;do c+=f,o=e[c];while((!o||o.offsetParent==null||!((a==null?void 0:a(o))??!0))&&c<e.length&&c>=0);return o}function uu(e,i){var o,c,f,h;const a=Hc(e);if(i==null)(e===document.activeElement||!e.contains(document.activeElement))&&((o=a[0])==null||o.focus());else if(i==="first")(c=a[0])==null||c.focus();else if(i==="last")(f=a.at(-1))==null||f.focus();else if(typeof i=="number")(h=a[i])==null||h.focus();else{const l=uk(a,i);l?l.focus():uu(e,i==="next"?"first":"last")}}function zm(e){return e==null||typeof e=="string"&&e.trim()===""}function ck(){}function qc(e,i){if(!(jn&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${i})`)))return null;try{return!!e&&e.matches(i)}catch{return null}}function Ep(e){return e.some(i=>Nh(i)?i.type===$a?!1:i.type!==Bt||Ep(i.children):!0)?e:null}function Lm(e,i,a){return(e==null?void 0:e(i))??(a==null?void 0:a(i))}function fM(e,i){if(!jn||e===0)return i(),()=>{};const a=window.setTimeout(i,e);return()=>window.clearTimeout(a)}function mM(e,i){const a=e.clientX,o=e.clientY,c=i.getBoundingClientRect(),f=c.left,h=c.top,l=c.right,b=c.bottom;return a>=f&&a<=l&&o>=h&&o<=b}function sp(){const e=bt(),i=a=>{e.value=a};return Object.defineProperty(i,"value",{enumerable:!0,get:()=>e.value,set:a=>e.value=a}),Object.defineProperty(i,"el",{enumerable:!0,get:()=>S_(e.value)}),i}function Gc(e){const i=e.key.length===1,a=!e.ctrlKey&&!e.metaKey&&!e.altKey;return i&&a}function dy(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"}function op(e){return"\\^$*+?.()|{}[]".includes(e)?`\\${e}`:e}function pM(e,i,a){const o=new RegExp(`[\\d\\-${op(a)}]`),c=e.split("").filter(h=>o.test(h)).filter((h,l,b)=>l===0&&/[-]/.test(h)||h===a&&l===b.indexOf(h)||/\d/.test(h)).join("");if(i===0)return c.split(a)[0];const f=new RegExp(`${op(a)}\\d`);if(i!==null&&f.test(c)){const h=c.split(a);return[h[0],h[1].substring(0,i)].join(a)}return c}function gM(e){const i={};for(const a in e)i[ar(a)]=e[a];return i}function vM(e){const i=["checked","disabled"];return Object.fromEntries(Object.entries(e).filter(a=>{let[o,c]=a;return i.includes(o)?!!c:c!==void 0}))}const dk=["top","bottom"],yM=["start","end","left","right"];function hy(e,i){let[a,o]=e.split(" ");return o||(o=rp(dk,a)?"start":rp(yM,a)?"top":"center"),{side:fy(a,i),align:fy(o,i)}}function fy(e,i){return e==="start"?i?"right":"left":e==="end"?i?"left":"right":e}function zv(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function Lv(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function ow(e){return{side:e.align,align:e.side}}function lw(e){return rp(dk,e.side)?"y":"x"}class Zr{constructor(i){const a=document.body.currentCSSZoom??1,o=i instanceof DOMRect?1+(1-a)/a:1,{x:c,y:f,width:h,height:l}=i;this.x=c*o,this.y=f*o,this.width=h*o,this.height=l*o}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function uw(e,i){return{x:{before:Math.max(0,i.left-e.left),after:Math.max(0,e.right-i.right)},y:{before:Math.max(0,i.top-e.top),after:Math.max(0,e.bottom-i.bottom)}}}function hk(e){if(Array.isArray(e)){const i=document.body.currentCSSZoom??1,a=1+(1-i)/i;return new Zr({x:e[0]*a,y:e[1]*a,width:0*a,height:0*a})}else return new Zr(e.getBoundingClientRect())}function _M(e){if(e===document.documentElement)if(visualViewport){const i=document.body.currentCSSZoom??1;return new Zr({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale/i,height:visualViewport.height*visualViewport.scale/i})}else return new Zr({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});else{const i=e.getBoundingClientRect();return new Zr({x:i.x,y:i.y,width:e.clientWidth,height:e.clientHeight})}}function I_(e){const i=new Zr(e.getBoundingClientRect()),a=getComputedStyle(e),o=a.transform;if(o){let c,f,h,l,b;if(o.startsWith("matrix3d("))c=o.slice(9,-1).split(/, /),f=Number(c[0]),h=Number(c[5]),l=Number(c[12]),b=Number(c[13]);else if(o.startsWith("matrix("))c=o.slice(7,-1).split(/, /),f=Number(c[0]),h=Number(c[3]),l=Number(c[4]),b=Number(c[5]);else return new Zr(i);const S=a.transformOrigin,w=i.x-l-(1-f)*parseFloat(S),k=i.y-b-(1-h)*parseFloat(S.slice(S.indexOf(" ")+1)),I=f?i.width/f:e.offsetWidth+1,E=h?i.height/h:e.offsetHeight+1;return new Zr({x:w,y:k,width:I,height:E})}else return new Zr(i)}function uo(e,i,a){if(typeof e.animate>"u")return{finished:Promise.resolve()};let o;try{o=e.animate(i,a)}catch{return{finished:Promise.resolve()}}return typeof o.finished>"u"&&(o.finished=new Promise(c=>{o.onfinish=()=>{c(o)}})),o}const Hm=new WeakMap;function bM(e,i){Object.keys(i).forEach(a=>{if(k_(a)){const o=lk(a),c=Hm.get(e);if(i[a]==null)c==null||c.forEach(f=>{const[h,l]=f;h===o&&(e.removeEventListener(o,l),c.delete(f))});else if(!c||![...c].some(f=>f[0]===o&&f[1]===i[a])){e.addEventListener(o,i[a]);const f=c||new Set;f.add([o,i[a]]),Hm.has(e)||Hm.set(e,f)}}else i[a]==null?e.removeAttribute(a):e.setAttribute(a,i[a])})}function xM(e,i){Object.keys(i).forEach(a=>{if(k_(a)){const o=lk(a),c=Hm.get(e);c==null||c.forEach(f=>{const[h,l]=f;h===o&&(e.removeEventListener(o,l),c.delete(f))})}else e.removeAttribute(a)})}const Ac=2.4,cw=.2126729,dw=.7151522,hw=.072175,wM=.55,SM=.58,kM=.57,CM=.62,Bm=.03,fw=1.45,IM=5e-4,PM=1.25,TM=1.25,mw=.078,pw=12.82051282051282,Rm=.06,gw=.001;function vw(e,i){const a=(e.r/255)**Ac,o=(e.g/255)**Ac,c=(e.b/255)**Ac,f=(i.r/255)**Ac,h=(i.g/255)**Ac,l=(i.b/255)**Ac;let b=a*cw+o*dw+c*hw,S=f*cw+h*dw+l*hw;if(b<=Bm&&(b+=(Bm-b)**fw),S<=Bm&&(S+=(Bm-S)**fw),Math.abs(S-b)<IM)return 0;let w;if(S>b){const k=(S**wM-b**SM)*PM;w=k<gw?0:k<mw?k-k*pw*Rm:k-Rm}else{const k=(S**CM-b**kM)*TM;w=k>-gw?0:k>-mw?k-k*pw*Rm:k+Rm}return w*100}function fk(e,i){i=Array.isArray(i)?i.slice(0,-1).map(a=>`'${a}'`).join(", ")+` or '${i.at(-1)}'`:`'${i}'`}const lp=.20689655172413793,AM=e=>e>lp**3?Math.cbrt(e):e/(3*lp**2)+4/29,EM=e=>e>lp?e**3:3*lp**2*(e-4/29);function mk(e){const i=AM,a=i(e[1]);return[116*a-16,500*(i(e[0]/.95047)-a),200*(a-i(e[2]/1.08883))]}function pk(e){const i=EM,a=(e[0]+16)/116;return[i(a+e[1]/500)*.95047,i(a),i(a-e[2]/200)*1.08883]}const MM=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],DM=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,VM=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],zM=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function gk(e){const i=Array(3),a=DM,o=MM;for(let c=0;c<3;++c)i[c]=Math.round(ni(a(o[c][0]*e[0]+o[c][1]*e[1]+o[c][2]*e[2]))*255);return{r:i[0],g:i[1],b:i[2]}}function P_(e){let{r:i,g:a,b:o}=e;const c=[0,0,0],f=zM,h=VM;i=f(i/255),a=f(a/255),o=f(o/255);for(let l=0;l<3;++l)c[l]=h[l][0]*i+h[l][1]*a+h[l][2]*o;return c}function my(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function LM(e){return my(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const yw=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,BM={rgb:(e,i,a,o)=>({r:e,g:i,b:a,a:o}),rgba:(e,i,a,o)=>({r:e,g:i,b:a,a:o}),hsl:(e,i,a,o)=>_w({h:e,s:i,l:a,a:o}),hsla:(e,i,a,o)=>_w({h:e,s:i,l:a,a:o}),hsv:(e,i,a,o)=>Ls({h:e,s:i,v:a,a:o}),hsva:(e,i,a,o)=>Ls({h:e,s:i,v:a,a:o})};function Vr(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&yw.test(e)){const{groups:i}=e.match(yw),{fn:a,values:o}=i,c=o.split(/,\s*|\s*\/\s*|\s+/).map((f,h)=>f.endsWith("%")||h>0&&h<3&&["hsl","hsla","hsv","hsva"].includes(a)?parseFloat(f)/100:parseFloat(f));return BM[a](...c)}else if(typeof e=="string"){let i=e.startsWith("#")?e.slice(1):e;return[3,4].includes(i.length)?i=i.split("").map(a=>a+a).join(""):[6,8].includes(i.length),bk(i)}else if(typeof e=="object"){if(au(e,["r","g","b"]))return e;if(au(e,["h","s","l"]))return Ls(T_(e));if(au(e,["h","s","v"]))return Ls(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Ls(e){const{h:i,s:a,v:o,a:c}=e,f=l=>{const b=(l+i/60)%6;return o-o*a*Math.max(Math.min(b,4-b,1),0)},h=[f(5),f(3),f(1)].map(l=>Math.round(l*255));return{r:h[0],g:h[1],b:h[2],a:c}}function _w(e){return Ls(T_(e))}function pf(e){if(!e)return{h:0,s:1,v:1,a:1};const i=e.r/255,a=e.g/255,o=e.b/255,c=Math.max(i,a,o),f=Math.min(i,a,o);let h=0;c!==f&&(c===i?h=60*(0+(a-o)/(c-f)):c===a?h=60*(2+(o-i)/(c-f)):c===o&&(h=60*(4+(i-a)/(c-f)))),h<0&&(h=h+360);const l=c===0?0:(c-f)/c,b=[h,l,c];return{h:b[0],s:b[1],v:b[2],a:e.a}}function py(e){const{h:i,s:a,v:o,a:c}=e,f=o-o*a/2,h=f===1||f===0?0:(o-f)/Math.min(f,1-f);return{h:i,s:h,l:f,a:c}}function T_(e){const{h:i,s:a,l:o,a:c}=e,f=o+a*Math.min(o,1-o),h=f===0?0:2-2*o/f;return{h:i,s:h,v:f,a:c}}function vk(e){let{r:i,g:a,b:o,a:c}=e;return c===void 0?`rgb(${i}, ${a}, ${o})`:`rgba(${i}, ${a}, ${o}, ${c})`}function yk(e){return vk(Ls(e))}function Fm(e){const i=Math.round(e).toString(16);return("00".substr(0,2-i.length)+i).toUpperCase()}function _k(e){let{r:i,g:a,b:o,a:c}=e;return`#${[Fm(i),Fm(a),Fm(o),c!==void 0?Fm(Math.round(c*255)):""].join("")}`}function bk(e){e=FM(e);let[i,a,o,c]=dM(e,2).map(f=>parseInt(f,16));return c=c===void 0?c:c/255,{r:i,g:a,b:o,a:c}}function RM(e){const i=bk(e);return pf(i)}function xk(e){return _k(Ls(e))}function FM(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(i=>i+i).join("")),e.length!==6&&(e=iw(iw(e,6),8,"F")),e}function OM(e,i){const a=mk(P_(e));return a[0]=a[0]+i*10,gk(pk(a))}function $M(e,i){const a=mk(P_(e));return a[0]=a[0]-i*10,gk(pk(a))}function gy(e){const i=Vr(e);return P_(i)[1]}function NM(e,i){const a=gy(e),o=gy(i),c=Math.max(a,o),f=Math.min(a,o);return(c+.05)/(f+.05)}function wk(e){const i=Math.abs(vw(Vr(0),Vr(e)));return Math.abs(vw(Vr(16777215),Vr(e)))>Math.min(i,50)?"#fff":"#000"}function Re(e,i){return a=>Object.keys(e).reduce((o,c)=>{const h=typeof e[c]=="object"&&e[c]!=null&&!Array.isArray(e[c])?e[c]:{type:e[c]};return a&&c in a?o[c]={...h,default:a[c]}:o[c]=h,i&&!o[c].source&&(o[c].source=i),o},{})}const Ft=Re({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function Vi(e,i){const a=ed();if(!a)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return a}function Os(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const i=Vi(e).type;return lu((i==null?void 0:i.aliasName)||(i==null?void 0:i.name))}function jM(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vi("injectSelf");const{provides:a}=i;if(a&&e in a)return a[e]}const Wc=Symbol.for("vuetify:defaults");function UM(e){return Qe(e)}function A_(){const e=vn(Wc);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function ki(e,i){const a=A_(),o=Qe(e),c=K(()=>{if(en(i==null?void 0:i.disabled))return a.value;const h=en(i==null?void 0:i.scoped),l=en(i==null?void 0:i.reset),b=en(i==null?void 0:i.root);if(o.value==null&&!(h||l||b))return a.value;let S=ja(o.value,{prev:a.value});if(h)return S;if(l||b){const w=Number(l||1/0);for(let k=0;k<=w&&!(!S||!("prev"in S));k++)S=S.prev;return S&&typeof b=="string"&&b in S&&(S=ja(ja(S,{prev:S}),S[b])),S}return S.prev?ja(S.prev,S):S});return Jn(Wc,c),c}function HM(e,i){return e.props&&(typeof e.props[i]<"u"||typeof e.props[lu(i)]<"u")}function qM(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A_();const o=Vi("useDefaults");if(i=i??o.type.name??o.type.__name,!i)throw new Error("[Vuetify] Could not determine component name");const c=K(()=>{var b;return(b=a.value)==null?void 0:b[e._as??i]}),f=new Proxy(e,{get(b,S){var E,L,F,z;const w=Reflect.get(b,S);if(S==="class"||S==="style")return[(E=c.value)==null?void 0:E[S],w].filter(B=>B!=null);if(HM(o.vnode,S))return w;const k=(L=c.value)==null?void 0:L[S];if(k!==void 0)return k;const I=(z=(F=a.value)==null?void 0:F.global)==null?void 0:z[S];return I!==void 0?I:w}}),h=bt();pi(()=>{if(c.value){const b=Object.entries(c.value).filter(S=>{let[w]=S;return w.startsWith(w[0].toUpperCase())});h.value=b.length?Object.fromEntries(b):void 0}else h.value=void 0});function l(){const b=jM(Wc,o);Jn(Wc,K(()=>h.value?ja((b==null?void 0:b.value)??{},h.value):b==null?void 0:b.value))}return{props:f,provideSubDefaults:l}}function Lr(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=Re(e.props??{},e.name)();const i=Object.keys(e.props).filter(a=>a!=="class"&&a!=="style");e.filterProps=function(o){return pr(o,i)},e.props._as=String,e.setup=function(o,c){const f=A_();if(!f.value)return e._setup(o,c);const{props:h,provideSubDefaults:l}=qM(o,o._as??e.name,f),b=e._setup(h,c);return l(),b}}return e}function it(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return i=>(e?Lr:hs)(i)}function GM(e,i){return i.props=e,i}function _o(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",a=arguments.length>2?arguments[2]:void 0;return it()({name:a??Fs(ar(e.replace(/__/g,"-"))),props:{tag:{type:String,default:i},...Ft()},setup(o,c){let{slots:f}=c;return()=>{var h;return fs(o.tag,{class:[e,o.class],style:o.style},(h=f.default)==null?void 0:h.call(f))}}})}function Sk(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const i=e.getRootNode();return i!==document&&i.getRootNode({composed:!0})!==document?null:i}const Hh="cubic-bezier(0.4, 0, 0.2, 1)",bw="cubic-bezier(0.0, 0, 0.2, 1)",xw="cubic-bezier(0.4, 0, 1, 1)",WM={linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:-1+(4-2*e)*e,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5,instant:e=>1};function ww(e,i,a){return Object.keys(e).filter(o=>k_(o)&&o.endsWith(i)).reduce((o,c)=>(o[c.slice(0,-i.length)]=f=>mf(e[c],f,a(f)),o),{})}function E_(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(i?ZM(e):M_(e))return e;e=e.parentElement}return document.scrollingElement}function up(e,i){const a=[];if(i&&e&&!i.contains(e))return a;for(;e&&(M_(e)&&a.push(e),e!==i);)e=e.parentElement;return a}function M_(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const i=window.getComputedStyle(e),a=i.overflowY==="scroll"||i.overflowY==="auto"&&e.scrollHeight>e.clientHeight,o=i.overflowX==="scroll"||i.overflowX==="auto"&&e.scrollWidth>e.clientWidth;return a||o}function ZM(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const i=window.getComputedStyle(e);return["scroll","auto"].includes(i.overflowY)}function KM(e){let{depth:i,isLast:a,isLastGroup:o,leafLinks:c,separateRoots:f,parentIndentLines:h,variant:l}=e;if(!h||!i)return{leaf:void 0,node:void 0,children:h};if(l==="simple")return{leaf:[...h,"line"],node:[...h,"line"],children:[...h,"line"]};const b=a&&(!o||f||i>1);return{leaf:[...h,b?"last-leaf":"leaf",...c?["leaf-link"]:[]],node:[...h,b?"last-leaf":"leaf"],children:[...h,b?"none":"line"]}}function XM(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function ct(e){const i=Vi("useRender");i.render=e}function Zt(e,i,a){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k=>k,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:k=>k;const f=Vi("useProxiedModel"),h=Qe(e[i]!==void 0?e[i]:a),l=lu(i),S=K(l!==i?()=>{var k,I,E,L;return e[i],!!(((k=f.vnode.props)!=null&&k.hasOwnProperty(i)||(I=f.vnode.props)!=null&&I.hasOwnProperty(l))&&((E=f.vnode.props)!=null&&E.hasOwnProperty(`onUpdate:${i}`)||(L=f.vnode.props)!=null&&L.hasOwnProperty(`onUpdate:${l}`)))}:()=>{var k,I;return e[i],!!((k=f.vnode.props)!=null&&k.hasOwnProperty(i)&&((I=f.vnode.props)!=null&&I.hasOwnProperty(`onUpdate:${i}`)))});ka(()=>!S.value,()=>{xt(()=>e[i],k=>{h.value=k})});const w=K({get(){const k=e[i];return o(S.value?k:h.value)},set(k){const I=c(k),E=rn(S.value?e[i]:h.value);E===I||o(E)===k||(h.value=I,f==null||f.emit(`update:${i}`,I))}});return Object.defineProperty(w,"externalValue",{get:()=>S.value?e[i]:h.value}),w}const YM={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"},ariaLabel:{previousMonth:"Previous month",nextMonth:"Next month",selectYear:"Select year",selectDate:"{0}",currentDate:"Today, {0}"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"},hotkey:{then:"then",ctrl:"Ctrl",command:"Command",space:"Space",shift:"Shift",alt:"Alt",enter:"Enter",escape:"Escape",upArrow:"Up Arrow",downArrow:"Down Arrow",leftArrow:"Left Arrow",rightArrow:"Right Arrow",backspace:"Backspace",option:"Option",plus:"plus",shortcut:"Keyboard shortcut: {0}"},video:{play:"Play",pause:"Pause",seek:"Seek",volume:"Volume",showVolume:"Show volume control",mute:"Mute",unmute:"Unmute",enterFullscreen:"Full screen",exitFullscreen:"Exit full screen"},colorPicker:{ariaLabel:{eyedropper:"Select color with eyedropper",hueSlider:"Hue",alphaSlider:"Alpha",redInput:"Red value",greenInput:"Green value",blueInput:"Blue value",alphaInput:"Alpha value",hueInput:"Hue value",saturationInput:"Saturation value",lightnessInput:"Lightness value",hexInput:"HEX value",hexaInput:"HEX with alpha value",changeFormat:"Change color format"}}},Sw="$vuetify.",kw=(e,i)=>e.replace(/\{(\d+)\}/g,(a,o)=>String(i[Number(o)])),kk=(e,i,a)=>function(o){for(var c=arguments.length,f=new Array(c>1?c-1:0),h=1;h<c;h++)f[h-1]=arguments[h];if(!o.startsWith(Sw))return kw(o,f);const l=o.replace(Sw,""),b=e.value&&a.value[e.value],S=i.value&&a.value[i.value];let w=mu(b,l,null);return w||(`${o}${e.value}`,w=mu(S,l,null)),w||(w=o),typeof w!="string"&&(w=o),kw(w,f)};function D_(e,i){return(a,o)=>new Intl.NumberFormat([e.value,i.value],o).format(a)}function Ck(e,i){return D_(e,i)(.1).includes(",")?",":"."}function Bv(e,i,a){const o=Zt(e,i,e[i]??a.value);return o.value=e[i]??a.value,xt(a,c=>{e[i]==null&&(o.value=a.value)}),o}function Ik(e){return i=>{const a=Bv(i,"locale",e.current),o=Bv(i,"fallback",e.fallback),c=Bv(i,"messages",e.messages);return{name:"vuetify",current:a,fallback:o,messages:c,decimalSeparator:we(()=>Ck(a,o)),t:kk(a,o,c),n:D_(a,o),provide:Ik({current:a,fallback:o,messages:c})}}}function JM(e){const i=bt((e==null?void 0:e.locale)??"en"),a=bt((e==null?void 0:e.fallback)??"en"),o=Qe({en:YM,...e==null?void 0:e.messages});return{name:"vuetify",current:i,fallback:a,messages:o,decimalSeparator:we(()=>(e==null?void 0:e.decimalSeparator)??Ck(i,a)),t:kk(i,a,o),n:D_(i,a),provide:Ik({current:i,fallback:a,messages:o})}}const Zc=Symbol.for("vuetify:locale");function QM(e){return e.name!=null}function eD(e){const i=e!=null&&e.adapter&&QM(e==null?void 0:e.adapter)?e==null?void 0:e.adapter:JM(e),a=iD(i,e);return{...i,...a}}function Zn(){const e=vn(Zc);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function tD(e){const i=vn(Zc);if(!i)throw new Error("[Vuetify] Could not find injected locale instance");const a=i.provide(e),o=aD(a,i.rtl,e),c={...a,...o};return Jn(Zc,c),c}function nD(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function iD(e,i){const a=Qe((i==null?void 0:i.rtl)??nD()),o=K(()=>a.value[e.current.value]??!1);return{isRtl:o,rtl:a,rtlClasses:we(()=>`v-locale--is-${o.value?"rtl":"ltr"}`)}}function aD(e,i,a){const o=K(()=>a.rtl??i.value[e.current.value]??!1);return{isRtl:o,rtl:i,rtlClasses:we(()=>`v-locale--is-${o.value?"rtl":"ltr"}`)}}function qi(){const e=vn(Zc);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}function gf(e){const i=e.slice(-2).toUpperCase();switch(!0){case e==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case e==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(i):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(i):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(i):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(i):return{firstDay:6,firstWeekSize:1};case i==="MV":return{firstDay:5,firstWeekSize:1};case i==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function rD(e,i,a){var w;const o=[];let c=[];const f=Pk(e),h=Tk(e),l=a??((w=gf(i))==null?void 0:w.firstDay)??0,b=(f.getDay()-l+7)%7,S=(h.getDay()-l+7)%7;for(let k=0;k<b;k++){const I=new Date(f);I.setDate(I.getDate()-(b-k)),c.push(I)}for(let k=1;k<=h.getDate();k++){const I=new Date(e.getFullYear(),e.getMonth(),k);c.push(I),c.length===7&&(o.push(c),c=[])}for(let k=1;k<7-S;k++){const I=new Date(h);I.setDate(I.getDate()+k),c.push(I)}return c.length>0&&o.push(c),o}function cp(e,i,a){var f;let o=(a??((f=gf(i))==null?void 0:f.firstDay)??0)%7;[0,1,2,3,4,5,6].includes(o)||(o=0);const c=new Date(e);for(;c.getDay()!==o;)c.setDate(c.getDate()-1);return c}function sD(e,i){var c;const a=new Date(e),o=((((c=gf(i))==null?void 0:c.firstDay)??0)+6)%7;for(;a.getDay()!==o;)a.setDate(a.getDate()+1);return a}function Pk(e){return new Date(e.getFullYear(),e.getMonth(),1)}function Tk(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function oD(e){const i=e.split("-").map(Number);return new Date(i[0],i[1]-1,i[2])}const lD=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function Ak(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let i;if(lD.test(e))return oD(e);if(i=Date.parse(e),!isNaN(i))return new Date(i)}return null}const Cw=new Date(2e3,0,2);function uD(e,i,a){var c;const o=i??((c=gf(e))==null?void 0:c.firstDay)??0;return Dr(7).map(f=>{const h=new Date(Cw);return h.setDate(Cw.getDate()+o+f),new Intl.DateTimeFormat(e,{weekday:a??"narrow"}).format(h)})}function cD(e,i,a,o){const c=Ak(e)??new Date,f=o==null?void 0:o[i];if(typeof f=="function")return f(c,i,a);let h={};switch(i){case"fullDate":h={year:"numeric",month:"short",day:"numeric"};break;case"fullDateWithWeekday":h={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const l=c.getDate(),b=new Intl.DateTimeFormat(a,{month:"long"}).format(c);return`${l} ${b}`;case"normalDateWithWeekday":h={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":h={month:"short",day:"numeric"};break;case"year":h={year:"numeric"};break;case"month":h={month:"long"};break;case"monthShort":h={month:"short"};break;case"monthAndYear":h={month:"long",year:"numeric"};break;case"monthAndDate":h={month:"long",day:"numeric"};break;case"weekday":h={weekday:"long"};break;case"weekdayShort":h={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(a).format(c.getDate());case"hours12h":h={hour:"numeric",hour12:!0};break;case"hours24h":h={hour:"numeric",hour12:!1};break;case"minutes":h={minute:"numeric"};break;case"seconds":h={second:"numeric"};break;case"fullTime":h={hour:"numeric",minute:"numeric"};break;case"fullTime12h":h={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":h={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":h={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":h={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":h={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":h={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return h={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(a,h).format(c).replace(/, /g," ");case"keyboardDateTime12h":return h={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(a,h).format(c).replace(/, /g," ");case"keyboardDateTime24h":return h={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(a,h).format(c).replace(/, /g," ");default:h=f??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(a,h).format(c)}function dD(e,i){const a=e.toJsDate(i),o=a.getFullYear(),c=aw(String(a.getMonth()+1),2,"0"),f=aw(String(a.getDate()),2,"0");return`${o}-${c}-${f}`}function hD(e){const[i,a,o]=e.split("-").map(Number);return new Date(i,a-1,o)}function fD(e,i){const a=new Date(e);return a.setMinutes(a.getMinutes()+i),a}function mD(e,i){const a=new Date(e);return a.setHours(a.getHours()+i),a}function cu(e,i){const a=new Date(e);return a.setDate(a.getDate()+i),a}function pD(e,i){const a=new Date(e);return a.setDate(a.getDate()+i*7),a}function gD(e,i){const a=new Date(e);return a.setDate(1),a.setMonth(a.getMonth()+i),a}function qh(e){return e.getFullYear()}function vD(e){return e.getMonth()}function yD(e,i,a,o){const c=gf(i),f=a??(c==null?void 0:c.firstDay)??0,h=(c==null?void 0:c.firstWeekSize)??1;return o!==void 0?_D(e,i,f,o):bD(e,i,f,h)}function _D(e,i,a,o){const c=(7+o-a)%7,f=cp(e,i,a),h=cu(f,6);function l(I){return(7+new Date(I,0,1).getDay()-a)%7}let b=qh(e);b<qh(h)&&l(b+1)<=c&&b++;const S=new Date(b,0,1),w=l(b),k=w<=c?cu(S,-w):cu(S,7-w);return 1+hp(V_(e),Gh(k),"weeks")}function bD(e,i,a,o){const c=cu(cp(e,i,a),6);function f(w){const k=new Date(w,0,1);return 7-hp(k,cp(k,i,a),"days")}let h=qh(e);h<qh(c)&&f(h+1)>=o&&h++;const l=new Date(h,0,1),b=f(h),S=b>=o?cu(l,b-7):cu(l,b);return 1+hp(V_(e),Gh(S),"weeks")}function xD(e){return e.getDate()}function wD(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function SD(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function kD(e){return e.getHours()}function CD(e){return e.getMinutes()}function ID(e){return new Date(e.getFullYear(),0,1)}function PD(e){return new Date(e.getFullYear(),11,31)}function TD(e,i){return dp(e,i[0])&&MD(e,i[1])}function AD(e){const i=new Date(e);return i instanceof Date&&!isNaN(i.getTime())}function dp(e,i){return e.getTime()>i.getTime()}function ED(e,i){return dp(Gh(e),Gh(i))}function MD(e,i){return e.getTime()<i.getTime()}function Iw(e,i){return e.getTime()===i.getTime()}function DD(e,i){return e.getDate()===i.getDate()&&e.getMonth()===i.getMonth()&&e.getFullYear()===i.getFullYear()}function VD(e,i){return e.getMonth()===i.getMonth()&&e.getFullYear()===i.getFullYear()}function zD(e,i){return e.getFullYear()===i.getFullYear()}function hp(e,i,a){const o=new Date(e),c=new Date(i);switch(a){case"years":return o.getFullYear()-c.getFullYear();case"quarters":return Math.floor((o.getMonth()-c.getMonth()+(o.getFullYear()-c.getFullYear())*12)/4);case"months":return o.getMonth()-c.getMonth()+(o.getFullYear()-c.getFullYear())*12;case"weeks":return Math.floor((o.getTime()-c.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((o.getTime()-c.getTime())/(1e3*60*60*24));case"hours":return Math.floor((o.getTime()-c.getTime())/(1e3*60*60));case"minutes":return Math.floor((o.getTime()-c.getTime())/(1e3*60));case"seconds":return Math.floor((o.getTime()-c.getTime())/1e3);default:return o.getTime()-c.getTime()}}function LD(e,i){const a=new Date(e);return a.setHours(i),a}function BD(e,i){const a=new Date(e);return a.setMinutes(i),a}function RD(e,i){const a=new Date(e);return a.setMonth(i),a}function FD(e,i){const a=new Date(e);return a.setDate(i),a}function OD(e,i){const a=new Date(e);return a.setFullYear(i),a}function Gh(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function V_(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class $D{constructor(i){this.locale=i.locale,this.formats=i.formats}date(i){return Ak(i)}toJsDate(i){return i}toISO(i){return dD(this,i)}parseISO(i){return hD(i)}addMinutes(i,a){return fD(i,a)}addHours(i,a){return mD(i,a)}addDays(i,a){return cu(i,a)}addWeeks(i,a){return pD(i,a)}addMonths(i,a){return gD(i,a)}getWeekArray(i,a){const o=a!==void 0?Number(a):void 0;return rD(i,this.locale,o)}startOfWeek(i,a){const o=a!==void 0?Number(a):void 0;return cp(i,this.locale,o)}endOfWeek(i){return sD(i,this.locale)}startOfMonth(i){return Pk(i)}endOfMonth(i){return Tk(i)}format(i,a){return cD(i,a,this.locale,this.formats)}isEqual(i,a){return Iw(i,a)}isValid(i){return AD(i)}isWithinRange(i,a){return TD(i,a)}isAfter(i,a){return dp(i,a)}isAfterDay(i,a){return ED(i,a)}isBefore(i,a){return!dp(i,a)&&!Iw(i,a)}isSameDay(i,a){return DD(i,a)}isSameMonth(i,a){return VD(i,a)}isSameYear(i,a){return zD(i,a)}setMinutes(i,a){return BD(i,a)}setHours(i,a){return LD(i,a)}setMonth(i,a){return RD(i,a)}setDate(i,a){return FD(i,a)}setYear(i,a){return OD(i,a)}getDiff(i,a,o){return hp(i,a,o)}getWeekdays(i,a){const o=i!==void 0?Number(i):void 0;return uD(this.locale,o,a)}getYear(i){return qh(i)}getMonth(i){return vD(i)}getWeek(i,a,o){const c=a!==void 0?Number(a):void 0,f=o!==void 0?Number(o):void 0;return yD(i,this.locale,c,f)}getDate(i){return xD(i)}getNextMonth(i){return wD(i)}getPreviousMonth(i){return SD(i)}getHours(i){return kD(i)}getMinutes(i){return CD(i)}startOfDay(i){return Gh(i)}endOfDay(i){return V_(i)}startOfYear(i){return ID(i)}endOfYear(i){return PD(i)}}const Ek=Symbol.for("vuetify:date-options"),Pw=Symbol.for("vuetify:date-adapter");function ND(e,i){const a=ja({adapter:$D,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:a,instance:Mk(a,i)}}function jD(e,i,a){const o=e.getDiff(e.endOfDay(a??i),e.startOfDay(i),"days"),c=[i];for(let f=1;f<o;f++){const h=e.addDays(i,f);c.push(h)}return a&&c.push(e.endOfDay(a)),c}function Mk(e,i){const a=Ui(typeof e.adapter=="function"?new e.adapter({locale:e.locale[i.current.value]??i.current.value,formats:e.formats}):e.adapter);return xt(i.current,o=>{a.locale=e.locale[o]??o??a.locale}),a}function vf(){const e=vn(Ek);if(!e)throw new Error("[Vuetify] Could not find injected date options");const i=Zn();return Mk(e,i)}const Mp=["sm","md","lg","xl","xxl"],vy=Symbol.for("vuetify:display"),Tw={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},UD=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Tw;return ja(Tw,e)};function Aw(e){return jn&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function Ew(e){return jn&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function Mw(e){const i=jn&&!e?window.navigator.userAgent:"ssr";function a(L){return!!i.match(L)}const o=a(/android/i),c=a(/iphone|ipad|ipod/i),f=a(/cordova/i),h=a(/electron/i),l=a(/chrome/i),b=a(/edge/i),S=a(/firefox/i),w=a(/opera/i),k=a(/win/i),I=a(/mac/i),E=a(/linux/i);return{android:o,ios:c,cordova:f,electron:h,chrome:l,edge:b,firefox:S,opera:w,win:k,mac:I,linux:E,touch:sM,ssr:i==="ssr"}}function HD(e,i){const{thresholds:a,mobileBreakpoint:o}=UD(e),c=bt(Ew(i)),f=bt(Mw(i)),h=Ui({}),l=bt(Aw(i));function b(){c.value=Ew(),l.value=Aw()}function S(){b(),f.value=Mw()}return pi(()=>{const w=l.value<a.sm,k=l.value<a.md&&!w,I=l.value<a.lg&&!(k||w),E=l.value<a.xl&&!(I||k||w),L=l.value<a.xxl&&!(E||I||k||w),F=l.value>=a.xxl,z=w?"xs":k?"sm":I?"md":E?"lg":L?"xl":"xxl",B=typeof o=="number"?o:a[o],R=l.value<B;h.xs=w,h.sm=k,h.md=I,h.lg=E,h.xl=L,h.xxl=F,h.smAndUp=!w,h.mdAndUp=!(w||k),h.lgAndUp=!(w||k||I),h.xlAndUp=!(w||k||I||E),h.smAndDown=!(I||E||L||F),h.mdAndDown=!(E||L||F),h.lgAndDown=!(L||F),h.xlAndDown=!F,h.name=z,h.height=c.value,h.width=l.value,h.mobile=R,h.mobileBreakpoint=o,h.platform=f.value,h.thresholds=a}),jn&&(window.addEventListener("resize",b,{passive:!0}),Hi(()=>{window.removeEventListener("resize",b)},!0)),{...wu(h),update:S,ssr:!!i}}const Su=Re({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function Jr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Os();const a=vn(vy);if(!a)throw new Error("Could not find Vuetify display injection");const o=K(()=>e.mobile?!0:typeof e.mobileBreakpoint=="number"?a.width.value<e.mobileBreakpoint:e.mobileBreakpoint?a.width.value<a.thresholds.value[e.mobileBreakpoint]:e.mobile===null?a.mobile.value:!1),c=we(()=>i?{[`${i}--mobile`]:o.value}:{});return{...a,displayClasses:c,mobile:o}}const Dk=Symbol.for("vuetify:goto");function Vk(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:WM}}function qD(e){return z_(e)??(document.scrollingElement||document.body)}function z_(e){return typeof e=="string"?document.querySelector(e):S_(e)}function Rv(e,i,a){if(typeof e=="number")return i&&a?-e:e;let o=z_(e),c=0;for(;o;)c+=i?o.offsetLeft:o.offsetTop,o=o.offsetParent;return c}function GD(e,i){return{rtl:i.isRtl,options:ja(Vk(),e)}}async function Dw(e,i,a,o){const c=a?"scrollLeft":"scrollTop",f=ja((o==null?void 0:o.options)??Vk(),i),h=o==null?void 0:o.rtl.value,l=(typeof e=="number"?e:z_(e))??0,b=f.container==="parent"&&l instanceof HTMLElement?l.parentElement:qD(f.container),S=zs()?f.patterns.instant:typeof f.easing=="function"?f.easing:f.patterns[f.easing];if(!S)throw new TypeError(`Easing function "${f.easing}" not found.`);let w;if(typeof l=="number")w=Rv(l,a,h);else if(w=Rv(l,a,h)-Rv(b,a,h),f.layout){const L=window.getComputedStyle(l).getPropertyValue("--v-layout-top");L&&(w-=parseInt(L,10))}w+=f.offset,w=ZD(b,w,!!h,!!a);const k=b[c]??0;if(w===k)return Promise.resolve(w);const I=performance.now();return new Promise(E=>requestAnimationFrame(function L(F){const B=(F-I)/f.duration,R=Math.floor(k+(w-k)*S(ni(B,0,1)));if(b[c]=R,B>=1&&Math.abs(R-b[c])<10)return E(w);if(B>2)return E(b[c]);requestAnimationFrame(L)}))}function WD(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i=vn(Dk),{isRtl:a}=qi();if(!i)throw new Error("[Vuetify] Could not find injected goto instance");const o={...i,rtl:we(()=>i.rtl.value||a.value)};async function c(f,h){return Dw(f,ja(e,h),!1,o)}return c.horizontal=async(f,h)=>Dw(f,ja(e,h),!0,o),c}function ZD(e,i,a,o){const{scrollWidth:c,scrollHeight:f}=e,[h,l]=e===document.scrollingElement?[window.innerWidth,window.innerHeight]:[e.offsetWidth,e.offsetHeight];let b,S;return o?a?(b=-(c-h),S=0):(b=0,S=c-h):(b=0,S=f+-l),ni(i,b,S)}const KD={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",tableGroupCollapse:"mdi-chevron-down",tableGroupExpand:"mdi-chevron-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload",color:"mdi-palette",command:"mdi-apple-keyboard-command",ctrl:"mdi-apple-keyboard-control",space:"mdi-keyboard-space",shift:"mdi-apple-keyboard-shift",alt:"mdi-apple-keyboard-option",enter:"mdi-keyboard-return",arrowup:"mdi-arrow-up",arrowdown:"mdi-arrow-down",arrowleft:"mdi-arrow-left",arrowright:"mdi-arrow-right",backspace:"mdi-backspace",play:"mdi-play",pause:"mdi-pause",fullscreen:"mdi-fullscreen",fullscreenExit:"mdi-fullscreen-exit",volumeHigh:"mdi-volume-high",volumeMedium:"mdi-volume-medium",volumeLow:"mdi-volume-low",volumeOff:"mdi-volume-variant-off"},XD={component:e=>fs(B_,{...e,class:"mdi"})},Gt=[String,Function,Object,Array],yy=Symbol.for("vuetify:icons"),Dp=Re({icon:{type:Gt},tag:{type:[String,Object,Function],required:!0}},"icon"),_y=it()({name:"VComponentIcon",props:Dp(),setup(e,i){let{slots:a}=i;return()=>{const o=e.icon;return V(e.tag,null,{default:()=>{var c;return[e.icon?V(o,null,null):(c=a.default)==null?void 0:c.call(a)]}})}}}),L_=Lr({name:"VSvgIcon",inheritAttrs:!1,props:Dp(),setup(e,i){let{attrs:a}=i;return()=>V(e.tag,nt(a,{style:null}),{default:()=>[q("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(o=>Array.isArray(o)?q("path",{d:o[0],"fill-opacity":o[1]},null):q("path",{d:o},null)):q("path",{d:e.icon},null)])]})}}),YD=Lr({name:"VLigatureIcon",props:Dp(),setup(e){return()=>V(e.tag,null,{default:()=>[e.icon]})}}),B_=Lr({name:"VClassIcon",props:Dp(),setup(e){return()=>V(e.tag,{class:st(e.icon)},null)}});function JD(){return{svg:{component:L_},class:{component:B_}}}function QD(e){const i=JD(),a=(e==null?void 0:e.defaultSet)??"mdi";return a==="mdi"&&!i.mdi&&(i.mdi=XD),ja({defaultSet:a,sets:i,aliases:{...KD,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},e)}const eV=e=>{const i=vn(yy);if(!i)throw new Error("Missing Vuetify Icons provide!");return{iconData:K(()=>{var b;const o=rr(e);if(!o)return{component:_y};let c=o;if(typeof c=="string"&&(c=c.trim(),c.startsWith("$")&&(c=(b=i.aliases)==null?void 0:b[c.slice(1)])),Array.isArray(c))return{component:L_,icon:c};if(typeof c!="string")return{component:_y,icon:c};const f=Object.keys(i.sets).find(S=>typeof c=="string"&&c.startsWith(`${S}:`)),h=f?c.slice(f.length+1):c;return{component:i.sets[f??i.defaultSet].component,icon:h}})}},Wh=Symbol.for("vuetify:theme"),Dn=Re({theme:String},"theme");function Vw(){return{defaultTheme:"light",prefix:"v-",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#EEEEEE","theme-on-kbd":"#000000","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#424242","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet",scoped:!1,unimportant:!1,utilities:!0}}function tV(){var o,c;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vw();const i=Vw();if(!e)return{...i,isDisabled:!0};const a={};for(const[f,h]of Object.entries(e.themes??{})){const l=h.dark||f==="dark"?(o=i.themes)==null?void 0:o.dark:(c=i.themes)==null?void 0:c.light;a[f]=ja(l,h)}return ja(i,{...e,themes:a})}function tu(e,i,a,o){e.push(`${rV(i,o)} {
`,...a.map(c=>`  ${c};
`),`}
`)}function zw(e,i){const a=e.dark?2:1,o=e.dark?1:2,c=[];for(const[f,h]of Object.entries(e.colors)){const l=Vr(h);c.push(`--${i}theme-${f}: ${l.r},${l.g},${l.b}`),f.startsWith("on-")||c.push(`--${i}theme-${f}-overlay-multiplier: ${gy(h)>.18?a:o}`)}for(const[f,h]of Object.entries(e.variables)){const l=typeof h=="string"&&h.startsWith("#")?Vr(h):void 0,b=l?`${l.r}, ${l.g}, ${l.b}`:void 0;c.push(`--${i}${f}: ${b??h}`)}return c}function nV(e,i,a){const o={};if(a)for(const c of["lighten","darken"]){const f=c==="lighten"?OM:$M;for(const h of Dr(a[c],1))o[`${e}-${c}-${h}`]=_k(f(Vr(i),h))}return o}function iV(e,i){if(!i)return{};let a={};for(const o of i.colors){const c=e[o];c&&(a={...a,...nV(o,c,i)})}return a}function aV(e){const i={};for(const a of Object.keys(e)){if(a.startsWith("on-")||e[`on-${a}`])continue;const o=`on-${a}`,c=Vr(e[a]);i[o]=wk(c)}return i}function rV(e,i){if(!i)return e;const a=`:where(${i})`;return e===":root"?a:`${a} ${e}`}function sV(e,i,a){const o=oV(e,i);o&&(o.innerHTML=a)}function oV(e,i){if(!jn)return null;let a=document.getElementById(e);return a||(a=document.createElement("style"),a.id=e,a.type="text/css",i&&a.setAttribute("nonce",i),document.head.appendChild(a)),a}function lV(e){const i=tV(e),a=bt(i.defaultTheme),o=Qe(i.themes),c=bt("light"),f=K({get(){return a.value==="system"?c.value:a.value},set(B){a.value=B}}),h=K(()=>{const B={};for(const[R,Z]of Object.entries(o.value)){const Y={...Z.colors,...iV(Z.colors,i.variations)};B[R]={...Z,colors:{...Y,...aV(Y)}}}return B}),l=we(()=>h.value[f.value]),b=we(()=>a.value==="system"),S=K(()=>{var Y;const B=[],R=i.unimportant?"":" !important",Z=i.scoped?i.prefix:"";(Y=l.value)!=null&&Y.dark&&tu(B,":root",["color-scheme: dark"],i.scope),tu(B,":root",zw(l.value,i.prefix),i.scope);for(const[J,ae]of Object.entries(h.value))tu(B,`.${i.prefix}theme--${J}`,[`color-scheme: ${ae.dark?"dark":"normal"}`,...zw(ae,i.prefix)],i.scope);if(i.utilities){const J=[],ae=[],he=new Set(Object.values(h.value).flatMap(te=>Object.keys(te.colors)));for(const te of he)te.startsWith("on-")?tu(ae,`.${te}`,[`color: rgb(var(--${i.prefix}theme-${te}))${R}`],i.scope):(tu(J,`.${Z}bg-${te}`,[`--${i.prefix}theme-overlay-multiplier: var(--${i.prefix}theme-${te}-overlay-multiplier)`,`background-color: rgb(var(--${i.prefix}theme-${te}))${R}`,`color: rgb(var(--${i.prefix}theme-on-${te}))${R}`],i.scope),tu(ae,`.${Z}text-${te}`,[`color: rgb(var(--${i.prefix}theme-${te}))${R}`],i.scope),tu(ae,`.${Z}border-${te}`,[`--${i.prefix}border-color: var(--${i.prefix}theme-${te})`],i.scope));B.push(...J,...ae)}return B.map((J,ae)=>ae===0?J:`    ${J}`).join("")}),w=we(()=>i.isDisabled?void 0:`${i.prefix}theme--${f.value}`),k=we(()=>Object.keys(h.value));if(w_){let R=function(){c.value=B.matches?"dark":"light"};const B=window.matchMedia("(prefers-color-scheme: dark)");R(),B.addEventListener("change",R,{passive:!0}),n_()&&Hi(()=>{B.removeEventListener("change",R)})}function I(B){if(i.isDisabled)return;const R=B._context.provides.usehead;if(R){let Z=function(){return{style:[{textContent:S.value,id:i.stylesheetId,nonce:i.cspNonce||!1}]}};if(R.push){const Y=R.push(Z);jn&&xt(S,()=>{Y.patch(Z)})}else jn?(R.addHeadObjs(we(Z)),pi(()=>R.updateDOM())):R.addHeadObjs(Z())}else{let Z=function(){sV(i.stylesheetId,i.cspNonce,S.value)};jn?xt(S,Z,{immediate:!0}):Z()}}function E(B){B!=="system"&&!k.value.includes(B)||(f.value=B)}function L(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:k.value;const R=B.indexOf(f.value),Z=R===-1?0:(R+1)%B.length;E(B[Z])}function F(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["light","dark"];L(B)}const z=new Proxy(f,{get(B,R){return Reflect.get(B,R)},set(B,R,Z){return R==="value"&&fk(`theme.global.name.value = ${Z}`,`theme.change('${Z}')`),Reflect.set(B,R,Z)}});return{install:I,change:E,cycle:L,toggle:F,isDisabled:i.isDisabled,isSystem:b,name:f,themes:o,current:l,computedThemes:h,prefix:i.prefix,themeClasses:w,styles:S,global:{name:z,current:l}}}function $n(e){Vi("provideTheme");const i=vn(Wh,null);if(!i)throw new Error("Could not find Vuetify theme injection");const a=we(()=>e.theme??i.name.value),o=we(()=>i.themes.value[a.value]),c=we(()=>i.isDisabled?void 0:`${i.prefix}theme--${a.value}`),f={...i,name:a,current:o,themeClasses:c};return Jn(Wh,f),f}function Vp(){Vi("useTheme");const e=vn(Wh,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function Yr(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const a=sp(),o=Qe();if(jn){const c=new ResizeObserver(f=>{e==null||e(f,c),f.length&&(i==="content"?o.value=f[0].contentRect:o.value=f[0].target.getBoundingClientRect())});va(()=>{c.disconnect()}),xt(()=>a.el,(f,h)=>{h&&(c.unobserve(h),o.value=void 0),f&&c.observe(f)},{flush:"post"})}return{resizeRef:a,contentRect:hu(o)}}const Zh=Symbol.for("vuetify:layout"),zk=Symbol.for("vuetify:layout-item"),Lw=1e3,Lk=Re({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),ku=Re({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function Bk(){const e=vn(Zh);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function Cu(e){const i=vn(Zh);if(!i)throw new Error("[Vuetify] Could not find injected layout");const a=e.id??`layout-item-${Ia()}`,o=Vi("useLayoutItem");Jn(zk,{id:a});const c=bt(!1);h_(()=>c.value=!0),pS(()=>c.value=!1);const{layoutItemStyles:f,layoutItemScrimStyles:h}=i.register(o,{...e,active:K(()=>c.value?!1:e.active.value),id:a});return va(()=>i.unregister(a)),{layoutItemStyles:f,layoutRect:i.layoutRect,layoutItemScrimStyles:h}}const uV=(e,i,a,o)=>{let c={top:0,left:0,right:0,bottom:0};const f=[{id:"",layer:{...c}}];for(const h of e){const l=i.get(h),b=a.get(h),S=o.get(h);if(!l||!b||!S)continue;const w={...c,[l.value]:parseInt(c[l.value],10)+(S.value?parseInt(b.value,10):0)};f.push({id:h,layer:w}),c=w}return f};function Rk(e){const i=vn(Zh,null),a=K(()=>i?i.rootZIndex.value-100:Lw),o=Qe([]),c=Ui(new Map),f=Ui(new Map),h=Ui(new Map),l=Ui(new Map),b=Ui(new Map),{resizeRef:S,contentRect:w}=Yr(),k=K(()=>{const ae=new Map,he=e.overlaps??[];for(const te of he.filter(re=>re.includes(":"))){const[re,ie]=te.split(":");if(!o.value.includes(re)||!o.value.includes(ie))continue;const ue=c.get(re),Q=c.get(ie),pe=f.get(re),Ce=f.get(ie);!ue||!Q||!pe||!Ce||(ae.set(ie,{position:ue.value,amount:parseInt(pe.value,10)}),ae.set(re,{position:Q.value,amount:-parseInt(Ce.value,10)}))}return ae}),I=K(()=>{const ae=[...new Set([...h.values()].map(te=>te.value))].sort((te,re)=>te-re),he=[];for(const te of ae){const re=o.value.filter(ie=>{var ue;return((ue=h.get(ie))==null?void 0:ue.value)===te});he.push(...re)}return uV(he,c,f,l)}),E=K(()=>!Array.from(b.values()).some(ae=>ae.value)),L=K(()=>I.value[I.value.length-1].layer),F=we(()=>({"--v-layout-left":Tt(L.value.left),"--v-layout-right":Tt(L.value.right),"--v-layout-top":Tt(L.value.top),"--v-layout-bottom":Tt(L.value.bottom),...E.value?void 0:{transition:"none"}})),z=K(()=>I.value.slice(1).map((ae,he)=>{let{id:te}=ae;const{layer:re}=I.value[he],ie=f.get(te),ue=c.get(te);return{id:te,...re,size:Number(ie.value),position:ue.value}})),B=ae=>z.value.find(he=>he.id===ae),R=Vi("createLayout"),Z=bt(!1);Fi(()=>{Z.value=!0}),Jn(Zh,{register:(ae,he)=>{let{id:te,order:re,position:ie,layoutSize:ue,elementSize:Q,active:pe,disableTransitions:Ce,absolute:$e}=he;h.set(te,re),c.set(te,ie),f.set(te,ue),l.set(te,pe),Ce&&b.set(te,Ce);const Ye=Bc(zk,R==null?void 0:R.vnode).indexOf(ae);Ye>-1?o.value.splice(Ye,0,te):o.value.push(te);const qe=K(()=>z.value.findIndex(Fe=>Fe.id===te)),Te=K(()=>a.value+I.value.length*2-qe.value*2),Me=K(()=>{const Fe=ie.value==="left"||ie.value==="right",Be=ie.value==="right",lt=ie.value==="bottom",vt=Q.value??ue.value,kt=vt===0?"%":"px",ge={[ie.value]:0,zIndex:Te.value,transform:`translate${Fe?"X":"Y"}(${(pe.value?0:-(vt===0?100:vt))*(Be||lt?-1:1)}${kt})`,position:$e.value||a.value!==Lw?"absolute":"fixed",...E.value?void 0:{transition:"none"}};if(!Z.value)return ge;const je=z.value[qe.value],rt=k.value.get(te);return rt&&(je[rt.position]+=rt.amount),{...ge,height:Fe?`calc(100% - ${je.top}px - ${je.bottom}px)`:Q.value?`${Q.value}px`:void 0,left:Be?void 0:`${je.left}px`,right:Be?`${je.right}px`:void 0,top:ie.value!=="bottom"?`${je.top}px`:void 0,bottom:ie.value!=="top"?`${je.bottom}px`:void 0,width:Fe?Q.value?`${Q.value}px`:void 0:`calc(100% - ${je.left}px - ${je.right}px)`}}),Ve=K(()=>({zIndex:Te.value-1}));return{layoutItemStyles:Me,layoutItemScrimStyles:Ve,zIndex:Te}},unregister:ae=>{h.delete(ae),c.delete(ae),f.delete(ae),l.delete(ae),b.delete(ae),o.value=o.value.filter(he=>he!==ae)},mainRect:L,mainStyles:F,getLayoutItem:B,items:z,layoutRect:w,rootZIndex:a});const Y=we(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),J=we(()=>({zIndex:i?a.value:void 0,position:i?"relative":void 0,overflow:i?"hidden":void 0}));return{layoutClasses:Y,layoutStyles:J,getLayoutItem:B,items:z,layoutRect:w,layoutRef:S}}function Fk(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:i,...a}=e,o=ja(i,a),{aliases:c={},components:f={},directives:h={}}=o,l=fl();return l.run(()=>{const b=UM(o.defaults),S=HD(o.display,o.ssr),w=lV(o.theme),k=QD(o.icons),I=eD(o.locale),E=ND(o.date,I),L=GD(o.goTo,I);function F(B){for(const Z in h)B.directive(Z,h[Z]);for(const Z in f)B.component(Z,f[Z]);for(const Z in c)B.component(Z,Lr({...c[Z],name:Z,aliasName:c[Z].name}));const R=fl();if(R.run(()=>{w.install(B)}),B.onUnmount(()=>R.stop()),B.provide(Wc,b),B.provide(vy,S),B.provide(Wh,w),B.provide(yy,k),B.provide(Zc,I),B.provide(Ek,E.options),B.provide(Pw,E.instance),B.provide(Dk,L),jn&&o.ssr)if(B.$nuxt)B.$nuxt.hook("app:suspense:resolve",()=>{S.update()});else{const{mount:Z}=B;B.mount=function(){const Y=Z(...arguments);return kn(()=>S.update()),B.mount=Z,Y}}B.mixin({computed:{$vuetify(){return Ui({defaults:Ec.call(this,Wc),display:Ec.call(this,vy),theme:Ec.call(this,Wh),icons:Ec.call(this,yy),locale:Ec.call(this,Zc),date:Ec.call(this,Pw)})}}})}function z(){l.stop()}return{install:F,unmount:z,defaults:b,display:S,theme:w,icons:k,locale:I,date:E,goTo:L}})}const cV="3.10.4";Fk.version=cV;function Ec(e){var o,c;const i=this.$,a=((o=i.parent)==null?void 0:o.provides)??((c=i.vnode.appContext)==null?void 0:c.provides);if(a&&e in a)return a[e]}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Lc=typeof document<"u";function Ok(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function dV(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Ok(e.default)}const ei=Object.assign;function Fv(e,i){const a={};for(const o in i){const c=i[o];a[o]=cs(c)?c.map(e):e(c)}return a}const zh=()=>{},cs=Array.isArray,$k=/#/g,hV=/&/g,fV=/\//g,mV=/=/g,pV=/\?/g,Nk=/\+/g,gV=/%5B/g,vV=/%5D/g,jk=/%5E/g,yV=/%60/g,Uk=/%7B/g,_V=/%7C/g,Hk=/%7D/g,bV=/%20/g;function R_(e){return encodeURI(""+e).replace(_V,"|").replace(gV,"[").replace(vV,"]")}function xV(e){return R_(e).replace(Uk,"{").replace(Hk,"}").replace(jk,"^")}function by(e){return R_(e).replace(Nk,"%2B").replace(bV,"+").replace($k,"%23").replace(hV,"%26").replace(yV,"`").replace(Uk,"{").replace(Hk,"}").replace(jk,"^")}function wV(e){return by(e).replace(mV,"%3D")}function SV(e){return R_(e).replace($k,"%23").replace(pV,"%3F")}function kV(e){return e==null?"":SV(e).replace(fV,"%2F")}function Kh(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const CV=/\/$/,IV=e=>e.replace(CV,"");function Ov(e,i,a="/"){let o,c={},f="",h="";const l=i.indexOf("#");let b=i.indexOf("?");return l<b&&l>=0&&(b=-1),b>-1&&(o=i.slice(0,b),f=i.slice(b+1,l>-1?l:i.length),c=e(f)),l>-1&&(o=o||i.slice(0,l),h=i.slice(l,i.length)),o=EV(o??i,a),{fullPath:o+(f&&"?")+f+h,path:o,query:c,hash:Kh(h)}}function PV(e,i){const a=i.query?e(i.query):"";return i.path+(a&&"?")+a+(i.hash||"")}function Bw(e,i){return!i||!e.toLowerCase().startsWith(i.toLowerCase())?e:e.slice(i.length)||"/"}function TV(e,i,a){const o=i.matched.length-1,c=a.matched.length-1;return o>-1&&o===c&&Kc(i.matched[o],a.matched[c])&&qk(i.params,a.params)&&e(i.query)===e(a.query)&&i.hash===a.hash}function Kc(e,i){return(e.aliasOf||e)===(i.aliasOf||i)}function qk(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const a in e)if(!AV(e[a],i[a]))return!1;return!0}function AV(e,i){return cs(e)?Rw(e,i):cs(i)?Rw(i,e):e===i}function Rw(e,i){return cs(i)?e.length===i.length&&e.every((a,o)=>a===i[o]):e.length===1&&e[0]===i}function EV(e,i){if(e.startsWith("/"))return e;if(!e)return i;const a=i.split("/"),o=e.split("/"),c=o[o.length-1];(c===".."||c===".")&&o.push("");let f=a.length-1,h,l;for(h=0;h<o.length;h++)if(l=o[h],l!==".")if(l==="..")f>1&&f--;else break;return a.slice(0,f).join("/")+"/"+o.slice(h).join("/")}const il={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Xh;(function(e){e.pop="pop",e.push="push"})(Xh||(Xh={}));var Lh;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Lh||(Lh={}));function MV(e){if(!e)if(Lc){const i=document.querySelector("base");e=i&&i.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),IV(e)}const DV=/^[^#]+#/;function VV(e,i){return e.replace(DV,"#")+i}function zV(e,i){const a=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:i.behavior,left:o.left-a.left-(i.left||0),top:o.top-a.top-(i.top||0)}}const zp=()=>({left:window.scrollX,top:window.scrollY});function LV(e){let i;if("el"in e){const a=e.el,o=typeof a=="string"&&a.startsWith("#"),c=typeof a=="string"?o?document.getElementById(a.slice(1)):document.querySelector(a):a;if(!c)return;i=zV(c,e)}else i=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(i):window.scrollTo(i.left!=null?i.left:window.scrollX,i.top!=null?i.top:window.scrollY)}function Fw(e,i){return(history.state?history.state.position-i:-1)+e}const xy=new Map;function BV(e,i){xy.set(e,i)}function RV(e){const i=xy.get(e);return xy.delete(e),i}let FV=()=>location.protocol+"//"+location.host;function Gk(e,i){const{pathname:a,search:o,hash:c}=i,f=e.indexOf("#");if(f>-1){let l=c.includes(e.slice(f))?e.slice(f).length:1,b=c.slice(l);return b[0]!=="/"&&(b="/"+b),Bw(b,"")}return Bw(a,e)+o+c}function OV(e,i,a,o){let c=[],f=[],h=null;const l=({state:I})=>{const E=Gk(e,location),L=a.value,F=i.value;let z=0;if(I){if(a.value=E,i.value=I,h&&h===L){h=null;return}z=F?I.position-F.position:0}else o(E);c.forEach(B=>{B(a.value,L,{delta:z,type:Xh.pop,direction:z?z>0?Lh.forward:Lh.back:Lh.unknown})})};function b(){h=a.value}function S(I){c.push(I);const E=()=>{const L=c.indexOf(I);L>-1&&c.splice(L,1)};return f.push(E),E}function w(){const{history:I}=window;I.state&&I.replaceState(ei({},I.state,{scroll:zp()}),"")}function k(){for(const I of f)I();f=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",w)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",w,{passive:!0}),{pauseListeners:b,listen:S,destroy:k}}function Ow(e,i,a,o=!1,c=!1){return{back:e,current:i,forward:a,replaced:o,position:window.history.length,scroll:c?zp():null}}function $V(e){const{history:i,location:a}=window,o={value:Gk(e,a)},c={value:i.state};c.value||f(o.value,{back:null,current:o.value,forward:null,position:i.length-1,replaced:!0,scroll:null},!0);function f(b,S,w){const k=e.indexOf("#"),I=k>-1?(a.host&&document.querySelector("base")?e:e.slice(k))+b:FV()+e+b;try{i[w?"replaceState":"pushState"](S,"",I),c.value=S}catch(E){console.error(E),a[w?"replace":"assign"](I)}}function h(b,S){const w=ei({},i.state,Ow(c.value.back,b,c.value.forward,!0),S,{position:c.value.position});f(b,w,!0),o.value=b}function l(b,S){const w=ei({},c.value,i.state,{forward:b,scroll:zp()});f(w.current,w,!0);const k=ei({},Ow(o.value,b,null),{position:w.position+1},S);f(b,k,!1),o.value=b}return{location:o,state:c,push:l,replace:h}}function NV(e){e=MV(e);const i=$V(e),a=OV(e,i.state,i.location,i.replace);function o(f,h=!0){h||a.pauseListeners(),history.go(f)}const c=ei({location:"",base:e,go:o,createHref:VV.bind(null,e)},i,a);return Object.defineProperty(c,"location",{enumerable:!0,get:()=>i.location.value}),Object.defineProperty(c,"state",{enumerable:!0,get:()=>i.state.value}),c}function jV(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),NV(e)}function UV(e){return typeof e=="string"||e&&typeof e=="object"}function Wk(e){return typeof e=="string"||typeof e=="symbol"}const Zk=Symbol("");var $w;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})($w||($w={}));function Xc(e,i){return ei(new Error,{type:e,[Zk]:!0},i)}function so(e,i){return e instanceof Error&&Zk in e&&(i==null||!!(e.type&i))}const Nw="[^/]+?",HV={sensitive:!1,strict:!1,start:!0,end:!0},qV=/[.+*?^${}()[\]/\\]/g;function GV(e,i){const a=ei({},HV,i),o=[];let c=a.start?"^":"";const f=[];for(const S of e){const w=S.length?[]:[90];a.strict&&!S.length&&(c+="/");for(let k=0;k<S.length;k++){const I=S[k];let E=40+(a.sensitive?.25:0);if(I.type===0)k||(c+="/"),c+=I.value.replace(qV,"\\$&"),E+=40;else if(I.type===1){const{value:L,repeatable:F,optional:z,regexp:B}=I;f.push({name:L,repeatable:F,optional:z});const R=B||Nw;if(R!==Nw){E+=10;try{new RegExp(`(${R})`)}catch(Y){throw new Error(`Invalid custom RegExp for param "${L}" (${R}): `+Y.message)}}let Z=F?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;k||(Z=z&&S.length<2?`(?:/${Z})`:"/"+Z),z&&(Z+="?"),c+=Z,E+=20,z&&(E+=-8),F&&(E+=-20),R===".*"&&(E+=-50)}w.push(E)}o.push(w)}if(a.strict&&a.end){const S=o.length-1;o[S][o[S].length-1]+=.7000000000000001}a.strict||(c+="/?"),a.end?c+="$":a.strict&&!c.endsWith("/")&&(c+="(?:/|$)");const h=new RegExp(c,a.sensitive?"":"i");function l(S){const w=S.match(h),k={};if(!w)return null;for(let I=1;I<w.length;I++){const E=w[I]||"",L=f[I-1];k[L.name]=E&&L.repeatable?E.split("/"):E}return k}function b(S){let w="",k=!1;for(const I of e){(!k||!w.endsWith("/"))&&(w+="/"),k=!1;for(const E of I)if(E.type===0)w+=E.value;else if(E.type===1){const{value:L,repeatable:F,optional:z}=E,B=L in S?S[L]:"";if(cs(B)&&!F)throw new Error(`Provided param "${L}" is an array but it is not repeatable (* or + modifiers)`);const R=cs(B)?B.join("/"):B;if(!R)if(z)I.length<2&&(w.endsWith("/")?w=w.slice(0,-1):k=!0);else throw new Error(`Missing required param "${L}"`);w+=R}}return w||"/"}return{re:h,score:o,keys:f,parse:l,stringify:b}}function WV(e,i){let a=0;for(;a<e.length&&a<i.length;){const o=i[a]-e[a];if(o)return o;a++}return e.length<i.length?e.length===1&&e[0]===80?-1:1:e.length>i.length?i.length===1&&i[0]===80?1:-1:0}function Kk(e,i){let a=0;const o=e.score,c=i.score;for(;a<o.length&&a<c.length;){const f=WV(o[a],c[a]);if(f)return f;a++}if(Math.abs(c.length-o.length)===1){if(jw(o))return 1;if(jw(c))return-1}return c.length-o.length}function jw(e){const i=e[e.length-1];return e.length>0&&i[i.length-1]<0}const ZV={type:0,value:""},KV=/[a-zA-Z0-9_]/;function XV(e){if(!e)return[[]];if(e==="/")return[[ZV]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function i(E){throw new Error(`ERR (${a})/"${S}": ${E}`)}let a=0,o=a;const c=[];let f;function h(){f&&c.push(f),f=[]}let l=0,b,S="",w="";function k(){S&&(a===0?f.push({type:0,value:S}):a===1||a===2||a===3?(f.length>1&&(b==="*"||b==="+")&&i(`A repeatable param (${S}) must be alone in its segment. eg: '/:ids+.`),f.push({type:1,value:S,regexp:w,repeatable:b==="*"||b==="+",optional:b==="*"||b==="?"})):i("Invalid state to consume buffer"),S="")}function I(){S+=b}for(;l<e.length;){if(b=e[l++],b==="\\"&&a!==2){o=a,a=4;continue}switch(a){case 0:b==="/"?(S&&k(),h()):b===":"?(k(),a=1):I();break;case 4:I(),a=o;break;case 1:b==="("?a=2:KV.test(b)?I():(k(),a=0,b!=="*"&&b!=="?"&&b!=="+"&&l--);break;case 2:b===")"?w[w.length-1]=="\\"?w=w.slice(0,-1)+b:a=3:w+=b;break;case 3:k(),a=0,b!=="*"&&b!=="?"&&b!=="+"&&l--,w="";break;default:i("Unknown state");break}}return a===2&&i(`Unfinished custom RegExp for param "${S}"`),k(),h(),c}function YV(e,i,a){const o=GV(XV(e.path),a),c=ei(o,{record:e,parent:i,children:[],alias:[]});return i&&!c.record.aliasOf==!i.record.aliasOf&&i.children.push(c),c}function JV(e,i){const a=[],o=new Map;i=Gw({strict:!1,end:!0,sensitive:!1},i);function c(k){return o.get(k)}function f(k,I,E){const L=!E,F=Hw(k);F.aliasOf=E&&E.record;const z=Gw(i,k),B=[F];if("alias"in k){const Y=typeof k.alias=="string"?[k.alias]:k.alias;for(const J of Y)B.push(Hw(ei({},F,{components:E?E.record.components:F.components,path:J,aliasOf:E?E.record:F})))}let R,Z;for(const Y of B){const{path:J}=Y;if(I&&J[0]!=="/"){const ae=I.record.path,he=ae[ae.length-1]==="/"?"":"/";Y.path=I.record.path+(J&&he+J)}if(R=YV(Y,I,z),E?E.alias.push(R):(Z=Z||R,Z!==R&&Z.alias.push(R),L&&k.name&&!qw(R)&&h(k.name)),Xk(R)&&b(R),F.children){const ae=F.children;for(let he=0;he<ae.length;he++)f(ae[he],R,E&&E.children[he])}E=E||R}return Z?()=>{h(Z)}:zh}function h(k){if(Wk(k)){const I=o.get(k);I&&(o.delete(k),a.splice(a.indexOf(I),1),I.children.forEach(h),I.alias.forEach(h))}else{const I=a.indexOf(k);I>-1&&(a.splice(I,1),k.record.name&&o.delete(k.record.name),k.children.forEach(h),k.alias.forEach(h))}}function l(){return a}function b(k){const I=tz(k,a);a.splice(I,0,k),k.record.name&&!qw(k)&&o.set(k.record.name,k)}function S(k,I){let E,L={},F,z;if("name"in k&&k.name){if(E=o.get(k.name),!E)throw Xc(1,{location:k});z=E.record.name,L=ei(Uw(I.params,E.keys.filter(Z=>!Z.optional).concat(E.parent?E.parent.keys.filter(Z=>Z.optional):[]).map(Z=>Z.name)),k.params&&Uw(k.params,E.keys.map(Z=>Z.name))),F=E.stringify(L)}else if(k.path!=null)F=k.path,E=a.find(Z=>Z.re.test(F)),E&&(L=E.parse(F),z=E.record.name);else{if(E=I.name?o.get(I.name):a.find(Z=>Z.re.test(I.path)),!E)throw Xc(1,{location:k,currentLocation:I});z=E.record.name,L=ei({},I.params,k.params),F=E.stringify(L)}const B=[];let R=E;for(;R;)B.unshift(R.record),R=R.parent;return{name:z,path:F,params:L,matched:B,meta:ez(B)}}e.forEach(k=>f(k));function w(){a.length=0,o.clear()}return{addRoute:f,resolve:S,removeRoute:h,clearRoutes:w,getRoutes:l,getRecordMatcher:c}}function Uw(e,i){const a={};for(const o of i)o in e&&(a[o]=e[o]);return a}function Hw(e){const i={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:QV(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(i,"mods",{value:{}}),i}function QV(e){const i={},a=e.props||!1;if("component"in e)i.default=a;else for(const o in e.components)i[o]=typeof a=="object"?a[o]:a;return i}function qw(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ez(e){return e.reduce((i,a)=>ei(i,a.meta),{})}function Gw(e,i){const a={};for(const o in e)a[o]=o in i?i[o]:e[o];return a}function tz(e,i){let a=0,o=i.length;for(;a!==o;){const f=a+o>>1;Kk(e,i[f])<0?o=f:a=f+1}const c=nz(e);return c&&(o=i.lastIndexOf(c,o-1)),o}function nz(e){let i=e;for(;i=i.parent;)if(Xk(i)&&Kk(e,i)===0)return i}function Xk({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function iz(e){const i={};if(e===""||e==="?")return i;const o=(e[0]==="?"?e.slice(1):e).split("&");for(let c=0;c<o.length;++c){const f=o[c].replace(Nk," "),h=f.indexOf("="),l=Kh(h<0?f:f.slice(0,h)),b=h<0?null:Kh(f.slice(h+1));if(l in i){let S=i[l];cs(S)||(S=i[l]=[S]),S.push(b)}else i[l]=b}return i}function Ww(e){let i="";for(let a in e){const o=e[a];if(a=wV(a),o==null){o!==void 0&&(i+=(i.length?"&":"")+a);continue}(cs(o)?o.map(f=>f&&by(f)):[o&&by(o)]).forEach(f=>{f!==void 0&&(i+=(i.length?"&":"")+a,f!=null&&(i+="="+f))})}return i}function az(e){const i={};for(const a in e){const o=e[a];o!==void 0&&(i[a]=cs(o)?o.map(c=>c==null?null:""+c):o==null?o:""+o)}return i}const rz=Symbol(""),Zw=Symbol(""),F_=Symbol(""),O_=Symbol(""),wy=Symbol("");function bh(){let e=[];function i(o){return e.push(o),()=>{const c=e.indexOf(o);c>-1&&e.splice(c,1)}}function a(){e=[]}return{add:i,list:()=>e.slice(),reset:a}}function ll(e,i,a,o,c,f=h=>h()){const h=o&&(o.enterCallbacks[c]=o.enterCallbacks[c]||[]);return()=>new Promise((l,b)=>{const S=I=>{I===!1?b(Xc(4,{from:a,to:i})):I instanceof Error?b(I):UV(I)?b(Xc(2,{from:i,to:I})):(h&&o.enterCallbacks[c]===h&&typeof I=="function"&&h.push(I),l())},w=f(()=>e.call(o&&o.instances[c],i,a,S));let k=Promise.resolve(w);e.length<3&&(k=k.then(S)),k.catch(I=>b(I))})}function $v(e,i,a,o,c=f=>f()){const f=[];for(const h of e)for(const l in h.components){let b=h.components[l];if(!(i!=="beforeRouteEnter"&&!h.instances[l]))if(Ok(b)){const w=(b.__vccOpts||b)[i];w&&f.push(ll(w,a,o,h,l,c))}else{let S=b();f.push(()=>S.then(w=>{if(!w)throw new Error(`Couldn't resolve component "${l}" at "${h.path}"`);const k=dV(w)?w.default:w;h.mods[l]=w,h.components[l]=k;const E=(k.__vccOpts||k)[i];return E&&ll(E,a,o,h,l,c)()}))}}return f}function Kw(e){const i=vn(F_),a=vn(O_),o=K(()=>{const b=en(e.to);return i.resolve(b)}),c=K(()=>{const{matched:b}=o.value,{length:S}=b,w=b[S-1],k=a.matched;if(!w||!k.length)return-1;const I=k.findIndex(Kc.bind(null,w));if(I>-1)return I;const E=Xw(b[S-2]);return S>1&&Xw(w)===E&&k[k.length-1].path!==E?k.findIndex(Kc.bind(null,b[S-2])):I}),f=K(()=>c.value>-1&&cz(a.params,o.value.params)),h=K(()=>c.value>-1&&c.value===a.matched.length-1&&qk(a.params,o.value.params));function l(b={}){if(uz(b)){const S=i[en(e.replace)?"replace":"push"](en(e.to)).catch(zh);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>S),S}return Promise.resolve()}return{route:o,href:K(()=>o.value.href),isActive:f,isExactActive:h,navigate:l}}function sz(e){return e.length===1?e[0]:e}const oz=hs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Kw,setup(e,{slots:i}){const a=Ui(Kw(e)),{options:o}=vn(F_),c=K(()=>({[Yw(e.activeClass,o.linkActiveClass,"router-link-active")]:a.isActive,[Yw(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:a.isExactActive}));return()=>{const f=i.default&&sz(i.default(a));return e.custom?f:fs("a",{"aria-current":a.isExactActive?e.ariaCurrentValue:null,href:a.href,onClick:a.navigate,class:c.value},f)}}}),lz=oz;function uz(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const i=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(i))return}return e.preventDefault&&e.preventDefault(),!0}}function cz(e,i){for(const a in i){const o=i[a],c=e[a];if(typeof o=="string"){if(o!==c)return!1}else if(!cs(c)||c.length!==o.length||o.some((f,h)=>f!==c[h]))return!1}return!0}function Xw(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Yw=(e,i,a)=>e??i??a,dz=hs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:i,slots:a}){const o=vn(wy),c=K(()=>e.route||o.value),f=vn(Zw,0),h=K(()=>{let S=en(f);const{matched:w}=c.value;let k;for(;(k=w[S])&&!k.components;)S++;return S}),l=K(()=>c.value.matched[h.value]);Jn(Zw,K(()=>h.value+1)),Jn(rz,l),Jn(wy,c);const b=Qe();return xt(()=>[b.value,l.value,e.name],([S,w,k],[I,E,L])=>{w&&(w.instances[k]=S,E&&E!==w&&S&&S===I&&(w.leaveGuards.size||(w.leaveGuards=E.leaveGuards),w.updateGuards.size||(w.updateGuards=E.updateGuards))),S&&w&&(!E||!Kc(w,E)||!I)&&(w.enterCallbacks[k]||[]).forEach(F=>F(S))},{flush:"post"}),()=>{const S=c.value,w=e.name,k=l.value,I=k&&k.components[w];if(!I)return Jw(a.default,{Component:I,route:S});const E=k.props[w],L=E?E===!0?S.params:typeof E=="function"?E(S):E:null,z=fs(I,ei({},L,i,{onVnodeUnmounted:B=>{B.component.isUnmounted&&(k.instances[w]=null)},ref:b}));return Jw(a.default,{Component:z,route:S})||z}}});function Jw(e,i){if(!e)return null;const a=e(i);return a.length===1?a[0]:a}const hz=dz;function fz(e){const i=JV(e.routes,e),a=e.parseQuery||iz,o=e.stringifyQuery||Ww,c=e.history,f=bh(),h=bh(),l=bh(),b=bt(il);let S=il;Lc&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=Fv.bind(null,ge=>""+ge),k=Fv.bind(null,kV),I=Fv.bind(null,Kh);function E(ge,je){let rt,ft;return Wk(ge)?(rt=i.getRecordMatcher(ge),ft=je):ft=ge,i.addRoute(ft,rt)}function L(ge){const je=i.getRecordMatcher(ge);je&&i.removeRoute(je)}function F(){return i.getRoutes().map(ge=>ge.record)}function z(ge){return!!i.getRecordMatcher(ge)}function B(ge,je){if(je=ei({},je||b.value),typeof ge=="string"){const Se=Ov(a,ge,je.path),xe=i.resolve({path:Se.path},je),le=c.createHref(Se.fullPath);return ei(Se,xe,{params:I(xe.params),hash:Kh(Se.hash),redirectedFrom:void 0,href:le})}let rt;if(ge.path!=null)rt=ei({},ge,{path:Ov(a,ge.path,je.path).path});else{const Se=ei({},ge.params);for(const xe in Se)Se[xe]==null&&delete Se[xe];rt=ei({},ge,{params:k(Se)}),je.params=k(je.params)}const ft=i.resolve(rt,je),Rt=ge.hash||"";ft.params=w(I(ft.params));const fe=PV(o,ei({},ge,{hash:xV(Rt),path:ft.path})),se=c.createHref(fe);return ei({fullPath:fe,hash:Rt,query:o===Ww?az(ge.query):ge.query||{}},ft,{redirectedFrom:void 0,href:se})}function R(ge){return typeof ge=="string"?Ov(a,ge,b.value.path):ei({},ge)}function Z(ge,je){if(S!==ge)return Xc(8,{from:je,to:ge})}function Y(ge){return he(ge)}function J(ge){return Y(ei(R(ge),{replace:!0}))}function ae(ge){const je=ge.matched[ge.matched.length-1];if(je&&je.redirect){const{redirect:rt}=je;let ft=typeof rt=="function"?rt(ge):rt;return typeof ft=="string"&&(ft=ft.includes("?")||ft.includes("#")?ft=R(ft):{path:ft},ft.params={}),ei({query:ge.query,hash:ge.hash,params:ft.path!=null?{}:ge.params},ft)}}function he(ge,je){const rt=S=B(ge),ft=b.value,Rt=ge.state,fe=ge.force,se=ge.replace===!0,Se=ae(rt);if(Se)return he(ei(R(Se),{state:typeof Se=="object"?ei({},Rt,Se.state):Rt,force:fe,replace:se}),je||rt);const xe=rt;xe.redirectedFrom=je;let le;return!fe&&TV(o,ft,rt)&&(le=Xc(16,{to:xe,from:ft}),Ve(ft,ft,!0,!1)),(le?Promise.resolve(le):ie(xe,ft)).catch(Ke=>so(Ke)?so(Ke,2)?Ke:Me(Ke):qe(Ke,xe,ft)).then(Ke=>{if(Ke){if(so(Ke,2))return he(ei({replace:se},R(Ke.to),{state:typeof Ke.to=="object"?ei({},Rt,Ke.to.state):Rt,force:fe}),je||xe)}else Ke=Q(xe,ft,!0,se,Rt);return ue(xe,ft,Ke),Ke})}function te(ge,je){const rt=Z(ge,je);return rt?Promise.reject(rt):Promise.resolve()}function re(ge){const je=lt.values().next().value;return je&&typeof je.runWithContext=="function"?je.runWithContext(ge):ge()}function ie(ge,je){let rt;const[ft,Rt,fe]=mz(ge,je);rt=$v(ft.reverse(),"beforeRouteLeave",ge,je);for(const Se of ft)Se.leaveGuards.forEach(xe=>{rt.push(ll(xe,ge,je))});const se=te.bind(null,ge,je);return rt.push(se),kt(rt).then(()=>{rt=[];for(const Se of f.list())rt.push(ll(Se,ge,je));return rt.push(se),kt(rt)}).then(()=>{rt=$v(Rt,"beforeRouteUpdate",ge,je);for(const Se of Rt)Se.updateGuards.forEach(xe=>{rt.push(ll(xe,ge,je))});return rt.push(se),kt(rt)}).then(()=>{rt=[];for(const Se of fe)if(Se.beforeEnter)if(cs(Se.beforeEnter))for(const xe of Se.beforeEnter)rt.push(ll(xe,ge,je));else rt.push(ll(Se.beforeEnter,ge,je));return rt.push(se),kt(rt)}).then(()=>(ge.matched.forEach(Se=>Se.enterCallbacks={}),rt=$v(fe,"beforeRouteEnter",ge,je,re),rt.push(se),kt(rt))).then(()=>{rt=[];for(const Se of h.list())rt.push(ll(Se,ge,je));return rt.push(se),kt(rt)}).catch(Se=>so(Se,8)?Se:Promise.reject(Se))}function ue(ge,je,rt){l.list().forEach(ft=>re(()=>ft(ge,je,rt)))}function Q(ge,je,rt,ft,Rt){const fe=Z(ge,je);if(fe)return fe;const se=je===il,Se=Lc?history.state:{};rt&&(ft||se?c.replace(ge.fullPath,ei({scroll:se&&Se&&Se.scroll},Rt)):c.push(ge.fullPath,Rt)),b.value=ge,Ve(ge,je,rt,se),Me()}let pe;function Ce(){pe||(pe=c.listen((ge,je,rt)=>{if(!vt.listening)return;const ft=B(ge),Rt=ae(ft);if(Rt){he(ei(Rt,{replace:!0,force:!0}),ft).catch(zh);return}S=ft;const fe=b.value;Lc&&BV(Fw(fe.fullPath,rt.delta),zp()),ie(ft,fe).catch(se=>so(se,12)?se:so(se,2)?(he(ei(R(se.to),{force:!0}),ft).then(Se=>{so(Se,20)&&!rt.delta&&rt.type===Xh.pop&&c.go(-1,!1)}).catch(zh),Promise.reject()):(rt.delta&&c.go(-rt.delta,!1),qe(se,ft,fe))).then(se=>{se=se||Q(ft,fe,!1),se&&(rt.delta&&!so(se,8)?c.go(-rt.delta,!1):rt.type===Xh.pop&&so(se,20)&&c.go(-1,!1)),ue(ft,fe,se)}).catch(zh)}))}let $e=bh(),Xe=bh(),Ye;function qe(ge,je,rt){Me(ge);const ft=Xe.list();return ft.length?ft.forEach(Rt=>Rt(ge,je,rt)):console.error(ge),Promise.reject(ge)}function Te(){return Ye&&b.value!==il?Promise.resolve():new Promise((ge,je)=>{$e.add([ge,je])})}function Me(ge){return Ye||(Ye=!ge,Ce(),$e.list().forEach(([je,rt])=>ge?rt(ge):je()),$e.reset()),ge}function Ve(ge,je,rt,ft){const{scrollBehavior:Rt}=e;if(!Lc||!Rt)return Promise.resolve();const fe=!rt&&RV(Fw(ge.fullPath,0))||(ft||!rt)&&history.state&&history.state.scroll||null;return kn().then(()=>Rt(ge,je,fe)).then(se=>se&&LV(se)).catch(se=>qe(se,ge,je))}const Fe=ge=>c.go(ge);let Be;const lt=new Set,vt={currentRoute:b,listening:!0,addRoute:E,removeRoute:L,clearRoutes:i.clearRoutes,hasRoute:z,getRoutes:F,resolve:B,options:e,push:Y,replace:J,go:Fe,back:()=>Fe(-1),forward:()=>Fe(1),beforeEach:f.add,beforeResolve:h.add,afterEach:l.add,onError:Xe.add,isReady:Te,install(ge){const je=this;ge.component("RouterLink",lz),ge.component("RouterView",hz),ge.config.globalProperties.$router=je,Object.defineProperty(ge.config.globalProperties,"$route",{enumerable:!0,get:()=>en(b)}),Lc&&!Be&&b.value===il&&(Be=!0,Y(c.location).catch(Rt=>{}));const rt={};for(const Rt in il)Object.defineProperty(rt,Rt,{get:()=>b.value[Rt],enumerable:!0});ge.provide(F_,je),ge.provide(O_,X1(rt)),ge.provide(wy,b);const ft=ge.unmount;lt.add(ge),ge.unmount=function(){lt.delete(ge),lt.size<1&&(S=il,pe&&pe(),pe=null,b.value=il,Be=!1,Ye=!1),ft()}}};function kt(ge){return ge.reduce((je,rt)=>je.then(()=>re(rt)),Promise.resolve())}return vt}function mz(e,i){const a=[],o=[],c=[],f=Math.max(i.matched.length,e.matched.length);for(let h=0;h<f;h++){const l=i.matched[h];l&&(e.matched.find(S=>Kc(S,l))?o.push(l):a.push(l));const b=e.matched[h];b&&(i.matched.find(S=>Kc(S,b))||c.push(b))}return[a,o,c]}function pz(e){return vn(O_)}const Lp=b_("pricing",()=>{const e=Qe([]),i=Qe(null),a=Qe(8),o=Qe(4),c=Qe(.25),f=Qe(.3),h=Qe(139),l=Qe(12),b=Qe(3.5),S=Qe(0),w=Qe(1),k=Qe(1.35);async function I(){try{const B=await fetch("/shipping-calculator/data/presets.json");e.value=await B.json(),e.value.length>0&&E(e.value[0])}catch(z){console.error("Failed to load presets",z)}}function E(z){i.value=z,o.value=z.base_rate,c.value=z.per_mile,f.value=z.per_lb,h.value=z.dim_divisor,l.value=z.fuel_pct,b.value=z.residential_fee,S.value=z.peak_pct,w.value=z.service_multiplier.standard,k.value=z.service_multiplier.expedited}function L(z){const B={id:`custom-${Date.now()}`,label:z,base_rate:o.value,per_mile:c.value,per_lb:f.value,dim_divisor:h.value,fuel_pct:l.value,service_multiplier:{standard:w.value,expedited:k.value},zone_multiplier_overrides:{},residential_fee:b.value,peak_pct:S.value};return e.value.push(B),i.value=B,B}const F=K(()=>({base_rate:o.value,per_mile:c.value,per_lb:f.value,dim_divisor:h.value,fuel_pct:l.value,residential_fee:b.value,peak_pct:S.value,service_multiplier:{standard:w.value,expedited:k.value}}));return{presets:e,currentPreset:i,confidencePct:a,base_rate:o,per_mile:c,per_lb:f,dim_divisor:h,fuel_pct:l,residential_fee:b,peak_pct:S,service_multiplier_standard:w,service_multiplier_expedited:k,currentParams:F,loadPresets:I,applyPreset:E,saveAsPreset:L}}),mn=Re({tag:{type:[String,Object,Function],default:"div"}},"tag"),gz=Re({...Ft(),...mn()},"VCardActions"),Yk=it()({name:"VCardActions",props:gz(),setup(e,i){let{slots:a}=i;return ki({VBtn:{slim:!0,variant:"text"}}),ct(()=>V(e.tag,{class:st(["v-card-actions",e.class]),style:St(e.style)},a)),{}}}),vz=Re({opacity:[Number,String],...Ft(),...mn()},"VCardSubtitle"),Jk=it()({name:"VCardSubtitle",props:vz(),setup(e,i){let{slots:a}=i;return ct(()=>V(e.tag,{class:st(["v-card-subtitle",e.class]),style:St([{"--v-card-subtitle-opacity":e.opacity},e.style])},a)),{}}}),gl=_o("v-card-title"),yz=Re({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),pn=it(!1)({name:"VDefaultsProvider",props:yz(),setup(e,i){let{slots:a}=i;const{defaults:o,disabled:c,reset:f,root:h,scoped:l}=wu(e);return ki(o,{reset:f,root:h,scoped:l,disabled:c}),()=>{var b;return(b=a.default)==null?void 0:b.call(a)}}});function $_(e){return C_(()=>{const{class:i,style:a}=_z(e);return{colorClasses:i,colorStyles:a}})}function ga(e){const{colorClasses:i,colorStyles:a}=$_(()=>({text:rr(e)}));return{textColorClasses:i,textColorStyles:a}}function Un(e){const{colorClasses:i,colorStyles:a}=$_(()=>({background:rr(e)}));return{backgroundColorClasses:i,backgroundColorStyles:a}}function _z(e){const i=rr(e),a=[],o={};if(i.background)if(my(i.background)){if(o.backgroundColor=i.background,!i.text&&LM(i.background)){const c=Vr(i.background);if(c.a==null||c.a===1){const f=wk(c);o.color=f,o.caretColor=f}}}else a.push(`bg-${i.background}`);return i.text&&(my(i.text)?(o.color=i.text,o.caretColor=i.text):a.push(`text-${i.text}`)),{class:a,style:o}}const bz=["x-small","small","default","large","x-large"],$s=Re({size:{type:[String,Number],default:"default"}},"size");function td(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Os();return C_(()=>{const a=e.size;let o,c;return rp(bz,a)?o=`${i}--size-${a}`:a&&(c={width:Tt(a),height:Tt(a)}),{sizeClasses:o,sizeStyles:c}})}const xz=Re({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:Gt,opacity:[String,Number],...Ft(),...$s(),...mn({tag:"i"}),...Dn()},"VIcon"),un=it()({name:"VIcon",props:xz(),setup(e,i){let{attrs:a,slots:o}=i;const c=bt(),{themeClasses:f}=Vp(),{iconData:h}=eV(()=>c.value||e.icon),{sizeClasses:l}=td(e),{textColorClasses:b,textColorStyles:S}=ga(()=>e.color);return ct(()=>{var I,E;const w=(I=o.default)==null?void 0:I.call(o);w&&(c.value=(E=sk(w).filter(L=>L.type===hf&&L.children&&typeof L.children=="string")[0])==null?void 0:E.children);const k=!!(a.onClick||a.onClickOnce);return V(h.value.component,{tag:e.tag,icon:h.value.icon,class:st(["v-icon","notranslate",f.value,l.value,b.value,{"v-icon--clickable":k,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:St([{"--v-icon-opacity":e.opacity},l.value?void 0:{fontSize:Tt(e.size),height:Tt(e.size),width:Tt(e.size)},S.value,e.style]),role:k?"button":void 0,"aria-hidden":!k,tabindex:k?e.disabled?-1:0:void 0},{default:()=>[w]})}),{}}}),Oi=Re({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function $i(e){return{dimensionStyles:K(()=>{const a={},o=Tt(e.height),c=Tt(e.maxHeight),f=Tt(e.maxWidth),h=Tt(e.minHeight),l=Tt(e.minWidth),b=Tt(e.width);return o!=null&&(a.height=o),c!=null&&(a.maxHeight=c),f!=null&&(a.maxWidth=f),h!=null&&(a.minHeight=h),l!=null&&(a.minWidth=l),b!=null&&(a.width=b),a})}}function wz(e){return{aspectStyles:K(()=>{const i=Number(e.aspectRatio);return i?{paddingBottom:String(1/i*100)+"%"}:void 0})}}const Qk=Re({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Ft(),...Oi()},"VResponsive"),Sy=it()({name:"VResponsive",props:Qk(),setup(e,i){let{slots:a}=i;const{aspectStyles:o}=wz(e),{dimensionStyles:c}=$i(e);return ct(()=>{var f;return q("div",{class:st(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:St([c.value,e.style])},[q("div",{class:"v-responsive__sizer",style:St(o.value)},null),(f=a.additional)==null?void 0:f.call(a),a.default&&q("div",{class:st(["v-responsive__content",e.contentClass])},[a.default()])])}),{}}}),gi=Re({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function Ci(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Os();return{roundedClasses:K(()=>{const o=wi(e)?e.value:e.rounded,c=wi(e)?!1:e.tile,f=[];if(c||o===!1)f.push("rounded-0");else if(o===!0||o==="")f.push(`${i}--rounded`);else if(typeof o=="string"||o===0)for(const h of String(o).split(" "))f.push(`rounded-${h}`);return f})}}const ps=Re({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),Ua=(e,i)=>{let{slots:a}=i;const{transition:o,disabled:c,group:f,...h}=e,{component:l=f?__:pl,...b}=Uh(o)?o:{};let S;return Uh(o)?S=nt(b,vM({disabled:c,group:f}),h):S=nt({name:c||!o?"":o},h),fs(l,S,a)};function Sz(e,i){if(!x_)return;const a=i.modifiers||{},o=i.value,{handler:c,options:f}=typeof o=="object"?o:{handler:o,options:{}},h=new IntersectionObserver(function(){var k;let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],b=arguments.length>1?arguments[1]:void 0;const S=(k=e._observe)==null?void 0:k[i.instance.$.uid];if(!S)return;const w=l.some(I=>I.isIntersecting);c&&(!a.quiet||S.init)&&(!a.once||w||S.init)&&c(w,l,b),w&&a.once?eC(e,i):S.init=!0},f);e._observe=Object(e._observe),e._observe[i.instance.$.uid]={init:!1,observer:h},h.observe(e)}function eC(e,i){var o;const a=(o=e._observe)==null?void 0:o[i.instance.$.uid];a&&(a.observer.unobserve(e),delete e._observe[i.instance.$.uid])}const ds={mounted:Sz,unmounted:eC},tC=Re({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...Qk(),...Ft(),...gi(),...ps()},"VImg"),Xr=it()({name:"VImg",directives:{vIntersect:ds},props:tC(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,i){let{emit:a,slots:o}=i;const{backgroundColorClasses:c,backgroundColorStyles:f}=Un(()=>e.color),{roundedClasses:h}=Ci(e),l=Vi("VImg"),b=bt(""),S=Qe(),w=bt(e.eager?"loading":"idle"),k=bt(),I=bt(),E=K(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),L=K(()=>E.value.aspect||k.value/I.value||0);xt(()=>e.src,()=>{F(w.value!=="idle")}),xt(L,(Q,pe)=>{!Q&&pe&&S.value&&Y(S.value)}),Qc(()=>F());function F(Q){if(!(e.eager&&Q)&&!(x_&&!Q&&!e.eager)){if(w.value="loading",E.value.lazySrc){const pe=new Image;pe.src=E.value.lazySrc,Y(pe,null)}E.value.src&&kn(()=>{var pe;a("loadstart",((pe=S.value)==null?void 0:pe.currentSrc)||E.value.src),setTimeout(()=>{var Ce;if(!l.isUnmounted)if((Ce=S.value)!=null&&Ce.complete){if(S.value.naturalWidth||B(),w.value==="error")return;L.value||Y(S.value,null),w.value==="loading"&&z()}else L.value||Y(S.value),R()})})}}function z(){var Q;l.isUnmounted||(R(),Y(S.value),w.value="loaded",a("load",((Q=S.value)==null?void 0:Q.currentSrc)||E.value.src))}function B(){var Q;l.isUnmounted||(w.value="error",a("error",((Q=S.value)==null?void 0:Q.currentSrc)||E.value.src))}function R(){const Q=S.value;Q&&(b.value=Q.currentSrc||Q.src)}let Z=-1;va(()=>{clearTimeout(Z)});function Y(Q){let pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const Ce=()=>{if(clearTimeout(Z),l.isUnmounted)return;const{naturalHeight:$e,naturalWidth:Xe}=Q;$e||Xe?(k.value=Xe,I.value=$e):!Q.complete&&w.value==="loading"&&pe!=null?Z=window.setTimeout(Ce,pe):(Q.currentSrc.endsWith(".svg")||Q.currentSrc.startsWith("data:image/svg+xml"))&&(k.value=1,I.value=1)};Ce()}const J=we(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),ae=()=>{var Ce;if(!E.value.src||w.value==="idle")return null;const Q=q("img",{class:st(["v-img__img",J.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:E.value.src,srcset:E.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:S,onLoad:z,onError:B},null),pe=(Ce=o.sources)==null?void 0:Ce.call(o);return V(Ua,{transition:e.transition,appear:!0},{default:()=>[yi(pe?q("picture",{class:"v-img__picture"},[pe,Q]):Q,[[ms,w.value==="loaded"]])]})},he=()=>V(Ua,{transition:e.transition},{default:()=>[E.value.lazySrc&&w.value!=="loaded"&&q("img",{class:st(["v-img__img","v-img__img--preload",J.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:E.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),te=()=>o.placeholder?V(Ua,{transition:e.transition,appear:!0},{default:()=>[(w.value==="loading"||w.value==="error"&&!o.error)&&q("div",{class:"v-img__placeholder"},[o.placeholder()])]}):null,re=()=>o.error?V(Ua,{transition:e.transition,appear:!0},{default:()=>[w.value==="error"&&q("div",{class:"v-img__error"},[o.error()])]}):null,ie=()=>e.gradient?q("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,ue=bt(!1);{const Q=xt(L,pe=>{pe&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{ue.value=!0})}),Q())})}return ct(()=>{const Q=Sy.filterProps(e);return yi(V(Sy,nt({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!ue.value},c.value,h.value,e.class],style:[{width:Tt(e.width==="auto"?k.value:e.width)},f.value,e.style]},Q,{aspectRatio:L.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>q(Bt,null,[V(ae,null,null),V(he,null,null),V(ie,null,null),V(te,null,null),V(re,null,null)]),default:o.default}),[[ds,{handler:F,options:e.options},null,{once:!0}]])}),{currentSrc:b,image:S,state:w,naturalWidth:k,naturalHeight:I}}}),sr=Re({border:[Boolean,Number,String]},"border");function gr(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Os();return{borderClasses:K(()=>{const o=e.border;return o===!0||o===""?`${i}--border`:typeof o=="string"||o===0?String(o).split(" ").map(c=>`border-${c}`):[]})}}const kz=[null,"default","comfortable","compact"],Ji=Re({density:{type:String,default:"default",validator:e=>kz.includes(e)}},"density");function Ga(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Os();return{densityClasses:we(()=>`${i}--density-${e.density}`)}}const Cz=["elevated","flat","tonal","outlined","text","plain"];function wl(e,i){return q(Bt,null,[e&&q("span",{key:"overlay",class:st(`${i}__overlay`)},null),q("span",{key:"underlay",class:st(`${i}__underlay`)},null)])}const Qr=Re({color:String,variant:{type:String,default:"elevated",validator:e=>Cz.includes(e)}},"variant");function Iu(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Os();const a=we(()=>{const{variant:f}=rr(e);return`${i}--variant-${f}`}),{colorClasses:o,colorStyles:c}=$_(()=>{const{variant:f,color:h}=rr(e);return{[["elevated","flat"].includes(f)?"background":"text"]:h}});return{colorClasses:o,colorStyles:c,variantClasses:a}}const Iz=Re({start:Boolean,end:Boolean,icon:Gt,image:String,text:String,...sr(),...Ft(),...Ji(),...gi(),...$s(),...mn(),...Dn(),...Qr({variant:"flat"})},"VAvatar"),zr=it()({name:"VAvatar",props:Iz(),setup(e,i){let{slots:a}=i;const{themeClasses:o}=$n(e),{borderClasses:c}=gr(e),{colorClasses:f,colorStyles:h,variantClasses:l}=Iu(e),{densityClasses:b}=Ga(e),{roundedClasses:S}=Ci(e),{sizeClasses:w,sizeStyles:k}=td(e);return ct(()=>V(e.tag,{class:st(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},o.value,c.value,f.value,b.value,S.value,w.value,l.value,e.class]),style:St([h.value,k.value,e.style])},{default:()=>[a.default?V(pn,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[a.default()]}):e.image?V(Xr,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?V(un,{key:"icon",icon:e.icon},null):e.text,wl(!1,"v-avatar")]})),{}}}),Pz=Re({appendAvatar:String,appendIcon:Gt,prependAvatar:String,prependIcon:Gt,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Ft(),...Ji(),...mn()},"VCardItem"),nC=it()({name:"VCardItem",props:Pz(),setup(e,i){let{slots:a}=i;return ct(()=>{const o=!!(e.prependAvatar||e.prependIcon),c=!!(o||a.prepend),f=!!(e.appendAvatar||e.appendIcon),h=!!(f||a.append),l=!!(e.title!=null||a.title),b=!!(e.subtitle!=null||a.subtitle);return V(e.tag,{class:st(["v-card-item",e.class]),style:St(e.style)},{default:()=>{var S;return[c&&q("div",{key:"prepend",class:"v-card-item__prepend"},[a.prepend?V(pn,{key:"prepend-defaults",disabled:!o,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},a.prepend):q(Bt,null,[e.prependAvatar&&V(zr,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&V(un,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),q("div",{class:"v-card-item__content"},[l&&V(gl,{key:"title"},{default:()=>{var w;return[((w=a.title)==null?void 0:w.call(a))??Nn(e.title)]}}),b&&V(Jk,{key:"subtitle"},{default:()=>{var w;return[((w=a.subtitle)==null?void 0:w.call(a))??Nn(e.subtitle)]}}),(S=a.default)==null?void 0:S.call(a)]),h&&q("div",{key:"append",class:"v-card-item__append"},[a.append?V(pn,{key:"append-defaults",disabled:!f,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},a.append):q(Bt,null,[e.appendIcon&&V(un,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&V(zr,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])]}})}),{}}}),Tz=Re({opacity:[Number,String],...Ft(),...mn()},"VCardText"),Ms=it()({name:"VCardText",props:Tz(),setup(e,i){let{slots:a}=i;return ct(()=>V(e.tag,{class:st(["v-card-text",e.class]),style:St([{"--v-card-text-opacity":e.opacity},e.style])},a)),{}}}),Gi=Re({elevation:{type:[Number,String],validator(e){const i=parseInt(e);return!isNaN(i)&&i>=0&&i<=24}}},"elevation");function ra(e){return{elevationClasses:we(()=>{const a=wi(e)?e.value:e.elevation;return a==null?[]:[`elevation-${a}`]})}}function yf(e,i){const a=Qe(),o=bt(!1);if(x_){const c=new IntersectionObserver(f=>{o.value=!!f.find(h=>h.isIntersecting)},i);Hi(()=>{c.disconnect()}),xt(a,(f,h)=>{h&&(c.unobserve(h),o.value=!1),f&&c.observe(f)},{flush:"post"})}return{intersectionRef:a,isIntersecting:o}}const Qw={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},bo=Re({location:String},"location");function Pu(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2?arguments[2]:void 0;const{isRtl:o}=qi();return{locationStyles:K(()=>{if(!e.location)return{};const{side:f,align:h}=hy(e.location.split(" ").length>1?e.location:`${e.location} center`,o.value);function l(S){return a?a(S):0}const b={};return f!=="center"&&(i?b[Qw[f]]=`calc(100% - ${l(f)}px)`:b[f]=0),h!=="center"?i?b[Qw[h]]=`calc(100% - ${l(h)}px)`:b[h]=0:(f==="center"?b.top=b.left="50%":b[{top:"left",bottom:"left",left:"top",right:"top"}[f]]="50%",b.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[f]),b})}}const Az=Re({chunkCount:{type:[Number,String],default:null},chunkWidth:{type:[Number,String],default:null},chunkGap:{type:[Number,String],default:4}},"chunks");function Ez(e,i){const a=we(()=>!!e.chunkCount||!!e.chunkWidth),o=K(()=>{const l=rr(i);if(!l)return 0;if(!e.chunkCount)return Number(e.chunkWidth);const b=Number(e.chunkCount);return(l-Number(e.chunkGap)*(b-1))/b}),c=we(()=>Number(e.chunkGap)),f=K(()=>{if(!a.value)return{};const l=Tt(c.value),b=Tt(o.value);return{maskRepeat:"repeat-x",maskImage:`linear-gradient(90deg, #000, #000 ${b}, transparent ${b}, transparent)`,maskSize:`calc(${b} + ${l}) 100%`}});function h(l){const b=rr(i);if(!b)return l;const S=100*c.value/b,w=100*(o.value+c.value)/b,k=Math.floor((l+S)/w);return ni(0,k*w-S/2,100)}return{hasChunks:a,chunksMaskStyles:f,snapValueToChunk:h}}const Mz=Re({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Az(),...Ft(),...bo({location:"top"}),...gi(),...mn(),...Dn()},"VProgressLinear"),Bp=it()({name:"VProgressLinear",props:Mz(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const o=Qe(),c=Zt(e,"modelValue"),{isRtl:f,rtlClasses:h}=qi(),{themeClasses:l}=$n(e),{locationStyles:b}=Pu(e),{textColorClasses:S,textColorStyles:w}=ga(()=>e.color),{backgroundColorClasses:k,backgroundColorStyles:I}=Un(()=>e.bgColor||e.color),{backgroundColorClasses:E,backgroundColorStyles:L}=Un(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:F,backgroundColorStyles:z}=Un(()=>e.color),{roundedClasses:B}=Ci(e),{intersectionRef:R,isIntersecting:Z}=yf(),Y=K(()=>parseFloat(e.max)),J=K(()=>parseFloat(e.height)),ae=K(()=>ni(parseFloat(e.bufferValue)/Y.value*100,0,100)),he=K(()=>ni(parseFloat(c.value)/Y.value*100,0,100)),te=K(()=>f.value!==e.reverse),re=K(()=>e.indeterminate?"fade-transition":"slide-x-transition"),ie=bt(0),{hasChunks:ue,chunksMaskStyles:Q,snapValueToChunk:pe}=Ez(e,ie);ka(ue,()=>{const{resizeRef:Ye}=Yr(qe=>ie.value=qe[0].contentRect.width);pi(()=>Ye.value=o.value)});const Ce=K(()=>ue.value?pe(ae.value):ae.value),$e=K(()=>ue.value?pe(he.value):he.value);function Xe(Ye){if(!R.value)return;const{left:qe,right:Te,width:Me}=R.value.getBoundingClientRect(),Ve=te.value?Me-Ye.clientX+(Te-Me):Ye.clientX-qe;c.value=Math.round(Ve/Me*Y.value)}return pi(()=>{R.value=o.value}),ct(()=>V(e.tag,{ref:o,class:st(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&Z.value,"v-progress-linear--reverse":te.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},B.value,l.value,h.value,e.class]),style:St([{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?Tt(J.value):0,"--v-progress-linear-height":Tt(J.value),...e.absolute?b.value:{}},Q.value,e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(c.value),Y.value),onClick:e.clickable&&Xe},{default:()=>[e.stream&&q("div",{key:"stream",class:st(["v-progress-linear__stream",S.value]),style:{...w.value,[te.value?"left":"right"]:Tt(-J.value),borderTop:`${Tt(J.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${Tt(J.value/4)})`,width:Tt(100-ae.value,"%"),"--v-progress-linear-stream-to":Tt(J.value*(te.value?1:-1))}},null),q("div",{class:st(["v-progress-linear__background",k.value]),style:St([I.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),q("div",{class:st(["v-progress-linear__buffer",E.value]),style:St([L.value,{opacity:parseFloat(e.bufferOpacity),width:Tt(Ce.value,"%")}])},null),V(pl,{name:re.value},{default:()=>[e.indeterminate?q("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(Ye=>q("div",{key:Ye,class:st(["v-progress-linear__indeterminate",Ye,F.value]),style:St(z.value)},null))]):q("div",{class:st(["v-progress-linear__determinate",F.value]),style:St([z.value,{width:Tt($e.value,"%")}])},null)]}),a.default&&q("div",{class:"v-progress-linear__content"},[a.default({value:he.value,buffer:ae.value})])]})),{}}}),Rp=Re({loading:[Boolean,String]},"loader");function _f(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Os();return{loaderClasses:we(()=>({[`${i}--loading`]:e.loading}))}}function bf(e,i){var o;let{slots:a}=i;return q("div",{class:st(`${e.name}__loader`)},[((o=a.default)==null?void 0:o.call(a,{color:e.color,isActive:e.active}))||V(Bp,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const Dz=["static","relative","fixed","absolute","sticky"],nd=Re({position:{type:String,validator:e=>Dz.includes(e)}},"position");function id(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Os();return{positionClasses:we(()=>e.position?`${i}--${e.position}`:void 0)}}function Vz(){const e=Vi("useRoute");return K(()=>{var i;return(i=e==null?void 0:e.proxy)==null?void 0:i.$route})}function iC(){var e,i;return(i=(e=Vi("useRouter"))==null?void 0:e.proxy)==null?void 0:i.$router}function xf(e,i){var k,I;const a=EA("RouterLink"),o=we(()=>!!(e.href||e.to)),c=K(()=>(o==null?void 0:o.value)||sw(i,"click")||sw(e,"click"));if(typeof a=="string"||!("useLink"in a)){const E=we(()=>e.href);return{isLink:o,isRouterLink:we(()=>!1),isClickable:c,href:E,linkProps:Ui({href:E})}}const f=a.useLink({to:we(()=>e.to||""),replace:we(()=>e.replace)}),h=K(()=>e.to?f:void 0),l=Vz(),b=K(()=>{var E,L,F;return h.value?e.exact?l.value?((F=h.value.isExactActive)==null?void 0:F.value)&&ia(h.value.route.value.query,l.value.query):((L=h.value.isExactActive)==null?void 0:L.value)??!1:((E=h.value.isActive)==null?void 0:E.value)??!1:!1}),S=K(()=>{var E;return e.to?(E=h.value)==null?void 0:E.route.value.href:e.href}),w=we(()=>!!e.to);return{isLink:o,isRouterLink:w,isClickable:c,isActive:b,route:(k=h.value)==null?void 0:k.route,navigate:(I=h.value)==null?void 0:I.navigate,href:S,linkProps:Ui({href:S,"aria-current":we(()=>b.value?"page":void 0),"aria-disabled":we(()=>e.disabled&&o.value?"true":void 0),tabindex:we(()=>e.disabled&&o.value?"-1":void 0)})}}const wf=Re({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let Nv=!1;function zz(e,i){let a=!1,o,c;jn&&(e!=null&&e.beforeEach)&&(kn(()=>{window.addEventListener("popstate",f),o=e.beforeEach((h,l,b)=>{Nv?a?i(b):b():setTimeout(()=>a?i(b):b()),Nv=!0}),c=e==null?void 0:e.afterEach(()=>{Nv=!1})}),Hi(()=>{window.removeEventListener("popstate",f),o==null||o(),c==null||c()}));function f(h){var l;(l=h.state)!=null&&l.replaced||(a=!0,setTimeout(()=>a=!1))}}const ky=Symbol("rippleStop"),Lz=80;function e1(e,i){e.style.transform=i,e.style.webkitTransform=i}function Cy(e){return e.constructor.name==="TouchEvent"}function aC(e){return e.constructor.name==="KeyboardEvent"}const Bz=function(e,i){var k;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=0,c=0;if(!aC(e)){const I=i.getBoundingClientRect(),E=Cy(e)?e.touches[e.touches.length-1]:e;o=E.clientX-I.left,c=E.clientY-I.top}let f=0,h=.3;(k=i._ripple)!=null&&k.circle?(h=.15,f=i.clientWidth/2,f=a.center?f:f+Math.sqrt((o-f)**2+(c-f)**2)/4):f=Math.sqrt(i.clientWidth**2+i.clientHeight**2)/2;const l=`${(i.clientWidth-f*2)/2}px`,b=`${(i.clientHeight-f*2)/2}px`,S=a.center?l:`${o-f}px`,w=a.center?b:`${c-f}px`;return{radius:f,scale:h,x:S,y:w,centerX:l,centerY:b}},fp={show(e,i){var E;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((E=i==null?void 0:i._ripple)!=null&&E.enabled))return;const o=document.createElement("span"),c=document.createElement("span");o.appendChild(c),o.className="v-ripple__container",a.class&&(o.className+=` ${a.class}`);const{radius:f,scale:h,x:l,y:b,centerX:S,centerY:w}=Bz(e,i,a),k=`${f*2}px`;c.className="v-ripple__animation",c.style.width=k,c.style.height=k,i.appendChild(o);const I=window.getComputedStyle(i);I&&I.position==="static"&&(i.style.position="relative",i.dataset.previousPosition="static"),c.classList.add("v-ripple__animation--enter"),c.classList.add("v-ripple__animation--visible"),e1(c,`translate(${l}, ${b}) scale3d(${h},${h},${h})`),c.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{c.classList.remove("v-ripple__animation--enter"),c.classList.add("v-ripple__animation--in"),e1(c,`translate(${S}, ${w}) scale3d(1,1,1)`)})})},hide(e){var f;if(!((f=e==null?void 0:e._ripple)!=null&&f.enabled))return;const i=e.getElementsByClassName("v-ripple__animation");if(i.length===0)return;const a=Array.from(i).findLast(h=>!h.dataset.isHiding);if(a)a.dataset.isHiding="true";else return;const o=performance.now()-Number(a.dataset.activated),c=Math.max(250-o,0);setTimeout(()=>{a.classList.remove("v-ripple__animation--in"),a.classList.add("v-ripple__animation--out"),setTimeout(()=>{var l;e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),((l=a.parentNode)==null?void 0:l.parentNode)===e&&e.removeChild(a.parentNode)},300)},c)}};function rC(e){return typeof e>"u"||!!e}function Yh(e){const i={},a=e.currentTarget;if(!(!(a!=null&&a._ripple)||a._ripple.touched||e[ky])){if(e[ky]=!0,Cy(e))a._ripple.touched=!0,a._ripple.isTouch=!0;else if(a._ripple.isTouch)return;if(i.center=a._ripple.centered||aC(e),a._ripple.class&&(i.class=a._ripple.class),Cy(e)){if(a._ripple.showTimerCommit)return;a._ripple.showTimerCommit=()=>{fp.show(e,a,i)},a._ripple.showTimer=window.setTimeout(()=>{var o;(o=a==null?void 0:a._ripple)!=null&&o.showTimerCommit&&(a._ripple.showTimerCommit(),a._ripple.showTimerCommit=null)},Lz)}else fp.show(e,a,i)}}function t1(e){e[ky]=!0}function Ar(e){const i=e.currentTarget;if(i!=null&&i._ripple){if(window.clearTimeout(i._ripple.showTimer),e.type==="touchend"&&i._ripple.showTimerCommit){i._ripple.showTimerCommit(),i._ripple.showTimerCommit=null,i._ripple.showTimer=window.setTimeout(()=>{Ar(e)});return}window.setTimeout(()=>{i._ripple&&(i._ripple.touched=!1)}),fp.hide(i)}}function sC(e){const i=e.currentTarget;i!=null&&i._ripple&&(i._ripple.showTimerCommit&&(i._ripple.showTimerCommit=null),window.clearTimeout(i._ripple.showTimer))}let Jh=!1;function n1(e,i){!Jh&&i.includes(e.key)&&(Jh=!0,Yh(e))}function oC(e){Jh=!1,Ar(e)}function lC(e){Jh&&(Jh=!1,Ar(e))}function uC(e,i,a){const{value:o,modifiers:c}=i,f=rC(o);f||fp.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=f,e._ripple.centered=c.center,e._ripple.circle=c.circle;const h=Uh(o)?o:{};h.class&&(e._ripple.class=h.class);const l=h.keys??["Enter","Space"];if(e._ripple.keyDownHandler=b=>n1(b,l),f&&!a){if(c.stop){e.addEventListener("touchstart",t1,{passive:!0}),e.addEventListener("mousedown",t1);return}e.addEventListener("touchstart",Yh,{passive:!0}),e.addEventListener("touchend",Ar,{passive:!0}),e.addEventListener("touchmove",sC,{passive:!0}),e.addEventListener("touchcancel",Ar),e.addEventListener("mousedown",Yh),e.addEventListener("mouseup",Ar),e.addEventListener("mouseleave",Ar),e.addEventListener("keydown",b=>n1(b,l)),e.addEventListener("keyup",oC),e.addEventListener("blur",lC),e.addEventListener("dragstart",Ar,{passive:!0})}else!f&&a&&cC(e)}function cC(e){var i;e.removeEventListener("mousedown",Yh),e.removeEventListener("touchstart",Yh),e.removeEventListener("touchend",Ar),e.removeEventListener("touchmove",sC),e.removeEventListener("touchcancel",Ar),e.removeEventListener("mouseup",Ar),e.removeEventListener("mouseleave",Ar),(i=e._ripple)!=null&&i.keyDownHandler&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",oC),e.removeEventListener("dragstart",Ar),e.removeEventListener("blur",lC)}function Rz(e,i){uC(e,i,!1)}function Fz(e){cC(e),delete e._ripple}function Oz(e,i){if(i.value===i.oldValue)return;const a=rC(i.oldValue);uC(e,i,a)}const qa={mounted:Rz,unmounted:Fz,updated:Oz},$z=Re({appendAvatar:String,appendIcon:Gt,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:Gt,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...sr(),...Ft(),...Ji(),...Oi(),...Gi(),...Rp(),...bo(),...nd(),...gi(),...wf(),...mn(),...Dn(),...Qr({variant:"elevated"})},"VCard"),ss=it()({name:"VCard",directives:{vRipple:qa},props:$z(),setup(e,i){let{attrs:a,slots:o}=i;const{themeClasses:c}=$n(e),{borderClasses:f}=gr(e),{colorClasses:h,colorStyles:l,variantClasses:b}=Iu(e),{densityClasses:S}=Ga(e),{dimensionStyles:w}=$i(e),{elevationClasses:k}=ra(e),{loaderClasses:I}=_f(e),{locationStyles:E}=Pu(e),{positionClasses:L}=id(e),{roundedClasses:F}=Ci(e),z=xf(e,a);return ct(()=>{const B=e.link!==!1&&z.isLink.value,R=!e.disabled&&e.link!==!1&&(e.link||z.isClickable.value),Z=B?"a":e.tag,Y=!!(o.title||e.title!=null),J=!!(o.subtitle||e.subtitle!=null),ae=Y||J,he=!!(o.append||e.appendAvatar||e.appendIcon),te=!!(o.prepend||e.prependAvatar||e.prependIcon),re=!!(o.image||e.image),ie=ae||te||he,ue=!!(o.text||e.text!=null);return yi(V(Z,nt(z.linkProps,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":R},c.value,f.value,h.value,S.value,k.value,I.value,L.value,F.value,b.value,e.class],style:[l.value,w.value,E.value,e.style],onClick:R&&z.navigate,tabindex:e.disabled?-1:void 0}),{default:()=>{var Q;return[re&&q("div",{key:"image",class:"v-card__image"},[o.image?V(pn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},o.image):V(Xr,{key:"image-img",cover:!0,src:e.image},null)]),V(bf,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:o.loader}),ie&&V(nC,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:o.item,prepend:o.prepend,title:o.title,subtitle:o.subtitle,append:o.append}),ue&&V(Ms,{key:"text"},{default:()=>{var pe;return[((pe=o.text)==null?void 0:pe.call(o))??e.text]}}),(Q=o.default)==null?void 0:Q.call(o),o.actions&&V(Yk,null,{default:o.actions}),wl(R,"v-card")]}}),[[qa,R&&e.ripple]])}),{}}}),Qh=Symbol.for("vuetify:v-expansion-panel"),Nz=Re({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Br(e,i,a){return it()({name:e,props:Nz({mode:a,origin:i}),setup(o,c){let{slots:f}=c;const h={onBeforeEnter(l){o.origin&&(l.style.transformOrigin=o.origin)},onLeave(l){if(o.leaveAbsolute){const{offsetTop:b,offsetLeft:S,offsetWidth:w,offsetHeight:k}=l;l._transitionInitialStyles={position:l.style.position,top:l.style.top,left:l.style.left,width:l.style.width,height:l.style.height},l.style.position="absolute",l.style.top=`${b}px`,l.style.left=`${S}px`,l.style.width=`${w}px`,l.style.height=`${k}px`}o.hideOnLeave&&l.style.setProperty("display","none","important")},onAfterLeave(l){if(o.leaveAbsolute&&(l!=null&&l._transitionInitialStyles)){const{position:b,top:S,left:w,width:k,height:I}=l._transitionInitialStyles;delete l._transitionInitialStyles,l.style.position=b||"",l.style.top=S||"",l.style.left=w||"",l.style.width=k||"",l.style.height=I||""}}};return()=>{const l=o.group?__:pl;return fs(l,{name:o.disabled?"":e,css:!o.disabled,...o.group?void 0:{mode:o.mode},...o.disabled?{}:h},f.default)}}})}function dC(e,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return it()({name:e,props:{mode:{type:String,default:a},disabled:{type:Boolean,default:zs()},group:Boolean},setup(o,c){let{slots:f}=c;const h=o.group?__:pl;return()=>fs(h,{name:o.disabled?"":e,css:!o.disabled,...o.disabled?{}:i},f.default)}})}function hC(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const a=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",o=ar(`offset-${a}`);return{onBeforeEnter(h){h._parent=h.parentNode,h._initialStyle={transition:h.style.transition,overflow:h.style.overflow,[a]:h.style[a]}},onEnter(h){const l=h._initialStyle;if(!l)return;h.style.setProperty("transition","none","important"),h.style.overflow="hidden";const b=`${h[o]}px`;h.style[a]="0",h.offsetHeight,h.style.transition=l.transition,e&&h._parent&&h._parent.classList.add(e),requestAnimationFrame(()=>{h.style[a]=b})},onAfterEnter:f,onEnterCancelled:f,onLeave(h){h._initialStyle={transition:"",overflow:h.style.overflow,[a]:h.style[a]},h.style.overflow="hidden",h.style[a]=`${h[o]}px`,h.offsetHeight,requestAnimationFrame(()=>h.style[a]="0")},onAfterLeave:c,onLeaveCancelled:c};function c(h){e&&h._parent&&h._parent.classList.remove(e),f(h)}function f(h){if(!h._initialStyle)return;const l=h._initialStyle[a];h.style.overflow=h._initialStyle.overflow,l!=null&&(h.style[a]=l),delete h._initialStyle}}const jz=Re({target:[Object,Array]},"v-dialog-transition"),jv=new WeakMap,Fp=it()({name:"VDialogTransition",props:jz(),setup(e,i){let{slots:a}=i;const o={onBeforeEnter(c){c.style.pointerEvents="none",c.style.visibility="hidden"},async onEnter(c,f){var I;await new Promise(E=>requestAnimationFrame(E)),await new Promise(E=>requestAnimationFrame(E)),c.style.visibility="";const h=a1(e.target,c),{x:l,y:b,sx:S,sy:w,speed:k}=h;if(jv.set(c,h),zs())uo(c,[{opacity:0},{}],{duration:125*k,easing:bw}).finished.then(()=>f());else{const E=uo(c,[{transform:`translate(${l}px, ${b}px) scale(${S}, ${w})`,opacity:0},{}],{duration:225*k,easing:bw});(I=i1(c))==null||I.forEach(L=>{uo(L,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*k,easing:Hh})}),E.finished.then(()=>f())}},onAfterEnter(c){c.style.removeProperty("pointer-events")},onBeforeLeave(c){c.style.pointerEvents="none"},async onLeave(c,f){var I;await new Promise(E=>requestAnimationFrame(E));let h;!jv.has(c)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?h=a1(e.target,c):h=jv.get(c);const{x:l,y:b,sx:S,sy:w,speed:k}=h;zs()?uo(c,[{},{opacity:0}],{duration:85*k,easing:xw}).finished.then(()=>f()):(uo(c,[{},{transform:`translate(${l}px, ${b}px) scale(${S}, ${w})`,opacity:0}],{duration:125*k,easing:xw}).finished.then(()=>f()),(I=i1(c))==null||I.forEach(L=>{uo(L,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*k,easing:Hh})}))},onAfterLeave(c){c.style.removeProperty("pointer-events")}};return()=>e.target?V(pl,nt({name:"dialog-transition"},o,{css:!1}),a):V(pl,{name:"dialog-transition"},a)}});function i1(e){var a;const i=(a=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:a.children;return i&&[...i]}function a1(e,i){const a=hk(e),o=I_(i),[c,f]=getComputedStyle(i).transformOrigin.split(" ").map(B=>parseFloat(B)),[h,l]=getComputedStyle(i).getPropertyValue("--v-overlay-anchor-origin").split(" ");let b=a.left+a.width/2;h==="left"||l==="left"?b-=a.width/2:(h==="right"||l==="right")&&(b+=a.width/2);let S=a.top+a.height/2;h==="top"||l==="top"?S-=a.height/2:(h==="bottom"||l==="bottom")&&(S+=a.height/2);const w=a.width/o.width,k=a.height/o.height,I=Math.max(1,w,k),E=w/I||0,L=k/I||0,F=o.width*o.height/(window.innerWidth*window.innerHeight),z=F>.12?Math.min(1.5,(F-.12)*10+1):1;return{x:b-(c+o.left),y:S-(f+o.top),sx:E,sy:L,speed:z}}const Uz=Br("fab-transition","center center","out-in"),Hz=Br("dialog-bottom-transition"),qz=Br("dialog-top-transition"),ef=Br("fade-transition"),N_=Br("scale-transition"),Gz=Br("scroll-x-transition"),Wz=Br("scroll-x-reverse-transition"),Zz=Br("scroll-y-transition"),Kz=Br("scroll-y-reverse-transition"),Xz=Br("slide-x-transition"),Yz=Br("slide-x-reverse-transition"),j_=Br("slide-y-transition"),Jz=Br("slide-y-reverse-transition"),Op=dC("expand-transition",hC()),U_=dC("expand-x-transition",hC("",!0)),H_=Re({eager:Boolean},"lazy");function q_(e,i){const a=bt(!1),o=we(()=>a.value||e.eager||i.value);xt(i,()=>a.value=!0);function c(){e.eager||(a.value=!1)}return{isBooted:a,hasContent:o,onAfterLeave:c}}const fC=Re({...Ft(),...H_()},"VExpansionPanelText"),As=it()({name:"VExpansionPanelText",props:fC(),setup(e,i){let{slots:a}=i;const o=vn(Qh);if(!o)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:c,onAfterLeave:f}=q_(e,o.isSelected);return ct(()=>V(Op,{onAfterLeave:f},{default:()=>{var h;return[yi(q("div",{class:st(["v-expansion-panel-text",e.class]),style:St(e.style)},[a.default&&c.value&&q("div",{class:"v-expansion-panel-text__wrapper"},[(h=a.default)==null?void 0:h.call(a)])]),[[ms,o.isSelected.value]])]}})),{}}}),mC=Re({color:String,expandIcon:{type:Gt,default:"$expand"},collapseIcon:{type:Gt,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...Ft(),...Oi()},"VExpansionPanelTitle"),Es=it()({name:"VExpansionPanelTitle",directives:{vRipple:qa},props:mC(),setup(e,i){let{slots:a}=i;const o=vn(Qh);if(!o)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:c,backgroundColorStyles:f}=Un(()=>e.color),{dimensionStyles:h}=$i(e),l=K(()=>({collapseIcon:e.collapseIcon,disabled:o.disabled.value,expanded:o.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),b=we(()=>o.isSelected.value?e.collapseIcon:e.expandIcon);return ct(()=>{var S;return yi(q("button",{class:st(["v-expansion-panel-title",{"v-expansion-panel-title--active":o.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},c.value,e.class]),style:St([f.value,h.value,e.style]),type:"button",tabindex:o.disabled.value?-1:void 0,disabled:o.disabled.value,"aria-expanded":o.isSelected.value,onClick:e.readonly?void 0:o.toggle},[q("span",{class:"v-expansion-panel-title__overlay"},null),(S=a.default)==null?void 0:S.call(a,l.value),!e.hideActions&&V(pn,{defaults:{VIcon:{icon:b.value}}},{default:()=>{var w;return[q("span",{class:"v-expansion-panel-title__icon"},[((w=a.actions)==null?void 0:w.call(a,l.value))??V(un,null,null)])]}})]),[[qa,e.ripple]])}),{}}}),Tu=Re({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),Au=Re({value:null,disabled:Boolean,selectedClass:String},"group-item");function vl(e,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const o=Vi("useGroupItem");if(!o)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const c=Ia();Jn(Symbol.for(`${i.description}:id`),c);const f=vn(i,null);if(!f){if(!a)return f;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${i.description}`)}const h=we(()=>e.value),l=K(()=>!!(f.disabled.value||e.disabled));function b(){f==null||f.register({id:c,value:h,disabled:l},o)}function S(){f==null||f.unregister(c)}Fi(()=>b()),va(()=>S());const w=K(()=>f.isSelected(c)),k=K(()=>f.items.value[0].id===c),I=K(()=>f.items.value[f.items.value.length-1].id===c),E=K(()=>w.value&&[f.selectedClass.value,e.selectedClass]);return xt(w,L=>{o.emit("group:selected",{value:L})},{flush:"sync"}),{id:c,isSelected:w,isFirst:k,isLast:I,toggle:()=>f.select(c,!w.value),select:L=>f.select(c,L),selectedClass:E,value:h,disabled:l,group:f,register:b,unregister:S}}function Sl(e,i){let a=!1;const o=Ui([]),c=Zt(e,"modelValue",[],I=>I===void 0?[]:pC(o,I===null?[null]:Si(I)),I=>{const E=eL(o,I);return e.multiple?E:E[0]}),f=Vi("useGroup");function h(I,E){const L=I,F=Symbol.for(`${i.description}:id`),B=Bc(F,f==null?void 0:f.vnode).indexOf(E);en(L.value)===void 0&&(L.value=B,L.useIndexAsValue=!0),B>-1?o.splice(B,0,L):o.push(L)}function l(I){if(a)return;b();const E=o.findIndex(L=>L.id===I);o.splice(E,1)}function b(){const I=o.find(E=>!E.disabled);I&&e.mandatory==="force"&&!c.value.length&&(c.value=[I.id])}Fi(()=>{b()}),va(()=>{a=!0}),f_(()=>{for(let I=0;I<o.length;I++)o[I].useIndexAsValue&&(o[I].value=I)});function S(I,E){const L=o.find(F=>F.id===I);if(!(E&&(L!=null&&L.disabled)))if(e.multiple){const F=c.value.slice(),z=F.findIndex(R=>R===I),B=~z;if(E=E??!B,B&&e.mandatory&&F.length<=1||!B&&e.max!=null&&F.length+1>e.max)return;z<0&&E?F.push(I):z>=0&&!E&&F.splice(z,1),c.value=F}else{const F=c.value.includes(I);if(e.mandatory&&F||!F&&!E)return;c.value=E??!F?[I]:[]}}function w(I){if(e.multiple,c.value.length){const E=c.value[0],L=o.findIndex(B=>B.id===E);let F=(L+I)%o.length,z=o[F];for(;z.disabled&&F!==L;)F=(F+I)%o.length,z=o[F];if(z.disabled)return;c.value=[o[F].id]}else{const E=o.find(L=>!L.disabled);E&&(c.value=[E.id])}}const k={register:h,unregister:l,selected:c,select:S,disabled:we(()=>e.disabled),prev:()=>w(o.length-1),next:()=>w(1),isSelected:I=>c.value.includes(I),selectedClass:we(()=>e.selectedClass),items:we(()=>o),getItemIndex:I=>Qz(o,I)};return Jn(i,k),k}function Qz(e,i){const a=pC(e,[i]);return a.length?e.findIndex(o=>o.id===a[0]):-1}function pC(e,i){const a=[];return i.forEach(o=>{const c=e.find(h=>ia(o,h.value)),f=e[o];(c==null?void 0:c.value)!==void 0?a.push(c.id):f!=null&&f.useIndexAsValue&&a.push(f.id)}),a}function eL(e,i){const a=[];return i.forEach(o=>{const c=e.findIndex(f=>f.id===o);if(~c){const f=e[c];a.push(f.value!==void 0?f.value:c)}}),a}const gC=Re({title:String,text:String,bgColor:String,...Gi(),...Au(),...gi(),...mn(),...mC(),...fC()},"VExpansionPanel"),ul=it()({name:"VExpansionPanel",props:gC(),emits:{"group:selected":e=>!0},setup(e,i){let{slots:a}=i;const o=vl(e,Qh),{backgroundColorClasses:c,backgroundColorStyles:f}=Un(()=>e.bgColor),{elevationClasses:h}=ra(e),{roundedClasses:l}=Ci(e),b=we(()=>(o==null?void 0:o.disabled.value)||e.disabled),S=K(()=>o.group.items.value.reduce((I,E,L)=>(o.group.selected.value.includes(E.id)&&I.push(L),I),[])),w=K(()=>{const I=o.group.items.value.findIndex(E=>E.id===o.id);return!o.isSelected.value&&S.value.some(E=>E-I===1)}),k=K(()=>{const I=o.group.items.value.findIndex(E=>E.id===o.id);return!o.isSelected.value&&S.value.some(E=>E-I===-1)});return Jn(Qh,o),ct(()=>{const I=!!(a.text||e.text),E=!!(a.title||e.title),L=Es.filterProps(e),F=As.filterProps(e);return V(e.tag,{class:st(["v-expansion-panel",{"v-expansion-panel--active":o.isSelected.value,"v-expansion-panel--before-active":w.value,"v-expansion-panel--after-active":k.value,"v-expansion-panel--disabled":b.value},l.value,c.value,e.class]),style:St([f.value,e.style])},{default:()=>[q("div",{class:st(["v-expansion-panel__shadow",...h.value])},null),V(pn,{defaults:{VExpansionPanelTitle:{...L},VExpansionPanelText:{...F}}},{default:()=>{var z;return[E&&V(Es,{key:"title"},{default:()=>[a.title?a.title():e.title]}),I&&V(As,{key:"text"},{default:()=>[a.text?a.text():e.text]}),(z=a.default)==null?void 0:z.call(a)]}})]})}),{groupItem:o}}}),tL=["default","accordion","inset","popout"],nL=Re({flat:Boolean,...Tu(),...pr(gC(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...Dn(),...Ft(),...mn(),variant:{type:String,default:"default",validator:e=>tL.includes(e)}},"VExpansionPanels"),G_=it()({name:"VExpansionPanels",props:nL(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const{next:o,prev:c}=Sl(e,Qh),{themeClasses:f}=$n(e),h=we(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return ki({VExpansionPanel:{bgColor:we(()=>e.bgColor),collapseIcon:we(()=>e.collapseIcon),color:we(()=>e.color),eager:we(()=>e.eager),elevation:we(()=>e.elevation),expandIcon:we(()=>e.expandIcon),focusable:we(()=>e.focusable),hideActions:we(()=>e.hideActions),readonly:we(()=>e.readonly),ripple:we(()=>e.ripple),rounded:we(()=>e.rounded),static:we(()=>e.static)}}),ct(()=>V(e.tag,{class:st(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},f.value,h.value,e.class]),style:St(e.style)},{default:()=>{var l;return[(l=a.default)==null?void 0:l.call(a,{prev:c,next:o})]}})),{next:o,prev:c}}}),vC=Symbol.for("vuetify:form"),iL=Re({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function aL(e){const i=Zt(e,"modelValue"),a=we(()=>e.disabled),o=we(()=>e.readonly),c=bt(!1),f=Qe([]),h=Qe([]);async function l(){const w=[];let k=!0;h.value=[],c.value=!0;for(const I of f.value){const E=await I.validate();if(E.length>0&&(k=!1,w.push({id:I.id,errorMessages:E})),!k&&e.fastFail)break}return h.value=w,c.value=!1,{valid:k,errors:h.value}}function b(){f.value.forEach(w=>w.reset())}function S(){f.value.forEach(w=>w.resetValidation())}return xt(f,()=>{let w=0,k=0;const I=[];for(const E of f.value)E.isValid===!1?(k++,I.push({id:E.id,errorMessages:E.errorMessages})):E.isValid===!0&&w++;h.value=I,i.value=k>0?!1:w===f.value.length?!0:null},{deep:!0,flush:"post"}),Jn(vC,{register:w=>{let{id:k,vm:I,validate:E,reset:L,resetValidation:F}=w;f.value.some(z=>z.id===k),f.value.push({id:k,validate:E,reset:L,resetValidation:F,vm:wp(I),isValid:null,errorMessages:[]})},unregister:w=>{f.value=f.value.filter(k=>k.id!==w)},update:(w,k,I)=>{const E=f.value.find(L=>L.id===w);E&&(E.isValid=k,E.errorMessages=I)},isDisabled:a,isReadonly:o,isValidating:c,isValid:i,items:f,validateOn:we(()=>e.validateOn)}),{errors:h,isDisabled:a,isReadonly:o,isValidating:c,isValid:i,items:f,validate:l,reset:b,resetValidation:S}}function ad(e){const i=vn(vC,null);return{...i,isReadonly:K(()=>!!((e==null?void 0:e.readonly)??(i==null?void 0:i.isReadonly.value))),isDisabled:K(()=>!!((e==null?void 0:e.disabled)??(i==null?void 0:i.isDisabled.value)))}}const W_=Symbol.for("vuetify:v-slider");function Iy(e,i,a){const o=a==="vertical",c=i.getBoundingClientRect(),f="touches"in e?e.touches[0]:e;return o?f.clientY-(c.top+c.height/2):f.clientX-(c.left+c.width/2)}function rL(e,i){return"touches"in e&&e.touches.length?e.touches[0][i]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][i]:e[i]}const yC=Re({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,noKeyboard:Boolean,...gi(),...Gi({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),_C=e=>{const i=K(()=>parseFloat(e.min)),a=K(()=>parseFloat(e.max)),o=K(()=>Number(e.step)>0?parseFloat(e.step):0),c=K(()=>Math.max(nw(o.value),nw(i.value)));function f(h){if(h=parseFloat(h),o.value<=0)return h;const l=ni(h,i.value,a.value),b=i.value%o.value;let S=Math.round((l-b)/o.value)*o.value+b;return l>S&&S+o.value>a.value&&(S=a.value),parseFloat(Math.min(S,a.value).toFixed(c.value))}return{min:i,max:a,step:o,decimals:c,roundValue:f}},bC=e=>{let{props:i,steps:a,onSliderStart:o,onSliderMove:c,onSliderEnd:f,getActiveThumb:h}=e;const l=ad(i),{isRtl:b}=qi(),S=we(()=>i.reverse),w=K(()=>i.direction==="vertical"),k=K(()=>w.value!==S.value),{min:I,max:E,step:L,decimals:F,roundValue:z}=a,B=K(()=>parseInt(i.thumbSize,10)),R=K(()=>parseInt(i.tickSize,10)),Z=K(()=>parseInt(i.trackSize,10)),Y=K(()=>(E.value-I.value)/L.value),J=K(()=>i.error||l.isDisabled.value?void 0:i.thumbColor??i.color),ae=K(()=>i.error||l.isDisabled.value?void 0:i.thumbColor),he=K(()=>i.error||l.isDisabled.value?void 0:i.trackColor??i.color),te=K(()=>i.error||l.isDisabled.value?void 0:i.trackFillColor??i.color),re=bt(!1),ie=bt(0),ue=Qe(),Q=Qe();function pe(ge){var Ke;const je=(Ke=ue.value)==null?void 0:Ke.$el;if(!je)return;const rt=i.direction==="vertical",ft=rt?"top":"left",Rt=rt?"height":"width",fe=rt?"clientY":"clientX",{[ft]:se,[Rt]:Se}=je.getBoundingClientRect(),xe=rL(ge,fe);let le=ni((xe-se-ie.value)/Se)||0;return(rt?k.value:k.value!==b.value)&&(le=1-le),z(I.value+le*(E.value-I.value))}const Ce=ge=>{const je=pe(ge);je!=null&&f({value:je}),re.value=!1,ie.value=0},$e=ge=>{const je=pe(ge);Q.value=h(ge),Q.value&&(re.value=!0,Q.value.contains(ge.target)?ie.value=Iy(ge,Q.value,i.direction):(ie.value=0,je!=null&&c({value:je})),je!=null&&o({value:je}),kn(()=>{var rt;return(rt=Q.value)==null?void 0:rt.focus()}))},Xe={passive:!0,capture:!0};function Ye(ge){const je=pe(ge);je!=null&&c({value:je})}function qe(ge){ge.stopPropagation(),ge.preventDefault(),Ce(ge),window.removeEventListener("mousemove",Ye,Xe),window.removeEventListener("mouseup",qe)}function Te(ge){var je;Ce(ge),window.removeEventListener("touchmove",Ye,Xe),(je=ge.target)==null||je.removeEventListener("touchend",Te)}function Me(ge){var je;$e(ge),window.addEventListener("touchmove",Ye,Xe),(je=ge.target)==null||je.addEventListener("touchend",Te,{passive:!1})}function Ve(ge){ge.button===0&&(ge.preventDefault(),$e(ge),window.addEventListener("mousemove",Ye,Xe),window.addEventListener("mouseup",qe,{passive:!1}))}const Fe=ge=>{const je=(ge-I.value)/(E.value-I.value)*100;return ni(isNaN(je)?0:je,0,100)},Be=we(()=>i.showTicks),lt=K(()=>Be.value?i.ticks?Array.isArray(i.ticks)?i.ticks.map(ge=>({value:ge,position:Fe(ge),label:ge.toString()})):Object.keys(i.ticks).map(ge=>({value:parseFloat(ge),position:Fe(parseFloat(ge)),label:i.ticks[ge]})):Y.value!==1/0?Dr(Y.value+1).map(ge=>{const je=I.value+ge*L.value;return{value:je,position:Fe(je)}}):[]:[]),vt=K(()=>lt.value.some(ge=>{let{label:je}=ge;return!!je})),kt={activeThumbRef:Q,color:we(()=>i.color),decimals:F,disabled:l.isDisabled,direction:we(()=>i.direction),elevation:we(()=>i.elevation),hasLabels:vt,isReversed:S,indexFromEnd:k,min:I,max:E,mousePressed:re,noKeyboard:we(()=>i.noKeyboard),numTicks:Y,onSliderMousedown:Ve,onSliderTouchstart:Me,parsedTicks:lt,parseMouseMove:pe,position:Fe,readonly:l.isReadonly,rounded:we(()=>i.rounded),roundValue:z,showTicks:Be,startOffset:ie,step:L,thumbSize:B,thumbColor:J,thumbLabelColor:ae,thumbLabel:we(()=>i.thumbLabel),ticks:we(()=>i.ticks),tickSize:R,trackColor:he,trackContainerRef:ue,trackFillColor:te,trackSize:Z,vertical:w};return Jn(W_,kt),kt},sL=Re({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,noKeyboard:Boolean,...Ft()},"VSliderThumb"),Py=it()({name:"VSliderThumb",directives:{vRipple:qa},props:sL(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a,emit:o}=i;const c=vn(W_),{isRtl:f,rtlClasses:h}=qi();if(!c)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:l,max:b,thumbColor:S,thumbLabelColor:w,step:k,disabled:I,thumbSize:E,thumbLabel:L,direction:F,isReversed:z,vertical:B,readonly:R,elevation:Z,mousePressed:Y,decimals:J,indexFromEnd:ae}=c,he=K(()=>I.value?void 0:Z.value),{elevationClasses:te}=ra(he),{textColorClasses:re,textColorStyles:ie}=ga(S),{backgroundColorClasses:ue,backgroundColorStyles:Q}=Un(w),{pageup:pe,pagedown:Ce,end:$e,home:Xe,left:Ye,right:qe,down:Te,up:Me}=uy,Ve=[pe,Ce,$e,Xe,Ye,qe,Te,Me],Fe=K(()=>k.value?[1,2,3]:[1,5,10]);function Be(vt,kt){if(e.noKeyboard||!Ve.includes(vt.key))return;vt.preventDefault();const ge=k.value||.1,je=(b.value-l.value)/ge;if([Ye,qe,Te,Me].includes(vt.key)){const ft=(B.value?[f.value?Ye:qe,z.value?Te:Me]:ae.value!==f.value?[Ye,Me]:[qe,Me]).includes(vt.key)?1:-1,Rt=vt.shiftKey?2:vt.ctrlKey?1:0;ft===-1&&kt===b.value&&!Rt&&!Number.isInteger(je)?kt=kt-je%1*ge:kt=kt+ft*ge*Fe.value[Rt]}else if(vt.key===Xe)kt=l.value;else if(vt.key===$e)kt=b.value;else{const rt=vt.key===Ce?1:-1;kt=kt-rt*ge*(je>100?je/10:10)}return Math.max(e.min,Math.min(e.max,kt))}function lt(vt){const kt=Be(vt,e.modelValue);kt!=null&&o("update:modelValue",kt)}return ct(()=>{const vt=Tt(ae.value?100-e.position:e.position,"%");return q("div",{class:st(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&Y.value},e.class,h.value]),style:St([{"--v-slider-thumb-position":vt,"--v-slider-thumb-size":Tt(E.value)},e.style]),role:"slider",tabindex:I.value?-1:0,"aria-label":e.name,"aria-valuemin":l.value,"aria-valuemax":b.value,"aria-valuenow":e.modelValue,"aria-readonly":!!R.value,"aria-orientation":F.value,onKeydown:R.value?void 0:lt},[q("div",{class:st(["v-slider-thumb__surface",re.value,te.value]),style:St(ie.value)},null),yi(q("div",{class:st(["v-slider-thumb__ripple",re.value]),style:St(ie.value)},null),[[qa,e.ripple,null,{circle:!0,center:!0}]]),V(N_,{origin:"bottom center"},{default:()=>{var kt;return[yi(q("div",{class:"v-slider-thumb__label-container"},[q("div",{class:st(["v-slider-thumb__label",ue.value]),style:St(Q.value)},[q("div",null,[((kt=a["thumb-label"])==null?void 0:kt.call(a,{modelValue:e.modelValue}))??e.modelValue.toFixed(k.value?J.value:1)]),q("div",{class:"v-slider-thumb__label-wedge"},null)])]),[[ms,L.value&&e.focused||L.value==="always"]])]}})])}),{}}}),oL=Re({start:{type:Number,required:!0},stop:{type:Number,required:!0},...Ft()},"VSliderTrack"),xC=it()({name:"VSliderTrack",props:oL(),emits:{},setup(e,i){let{slots:a}=i;const o=vn(W_);if(!o)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:c,parsedTicks:f,rounded:h,showTicks:l,tickSize:b,trackColor:S,trackFillColor:w,trackSize:k,vertical:I,min:E,max:L,indexFromEnd:F}=o,{roundedClasses:z}=Ci(h),{backgroundColorClasses:B,backgroundColorStyles:R}=Un(w),{backgroundColorClasses:Z,backgroundColorStyles:Y}=Un(S),J=K(()=>`inset-${I.value?"block":"inline"}-${F.value?"end":"start"}`),ae=K(()=>I.value?"height":"width"),he=K(()=>({[J.value]:"0%",[ae.value]:"100%"})),te=K(()=>e.stop-e.start),re=K(()=>({[J.value]:Tt(e.start,"%"),[ae.value]:Tt(te.value,"%")})),ie=K(()=>l.value?(I.value?f.value.slice().reverse():f.value).map((Q,pe)=>{var $e;const Ce=Q.value!==E.value&&Q.value!==L.value?Tt(Q.position,"%"):void 0;return q("div",{key:Q.value,class:st(["v-slider-track__tick",{"v-slider-track__tick--filled":Q.position>=e.start&&Q.position<=e.stop,"v-slider-track__tick--first":Q.value===E.value,"v-slider-track__tick--last":Q.value===L.value}]),style:{[J.value]:Ce}},[(Q.label||a["tick-label"])&&q("div",{class:"v-slider-track__tick-label"},[(($e=a["tick-label"])==null?void 0:$e.call(a,{tick:Q,index:pe}))??Q.label])])}):[]);return ct(()=>q("div",{class:st(["v-slider-track",z.value,e.class]),style:St([{"--v-slider-track-size":Tt(k.value),"--v-slider-tick-size":Tt(b.value)},e.style])},[q("div",{class:st(["v-slider-track__background",Z.value,{"v-slider-track__background--opacity":!!c.value||!w.value}]),style:{...he.value,...Y.value}},null),q("div",{class:st(["v-slider-track__fill",B.value]),style:{...re.value,...R.value}},null),l.value&&q("div",{class:st(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":l.value==="always"}])},[ie.value])])),{}}});function wC(e){const{t:i}=Zn();function a(o){let{name:c,color:f,...h}=o;const l={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[c],b=e[`onClick:${c}`];function S(k){k.key!=="Enter"&&k.key!==" "||(k.preventDefault(),k.stopPropagation(),mf(b,new PointerEvent("click",k)))}const w=b&&l?i(`$vuetify.input.${l}`,e.label??""):void 0;return V(un,nt({icon:e[`${c}Icon`],"aria-label":w,onClick:b,onKeydown:S,color:f},h),null)}return{InputIcon:a}}const lL=Re({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Ft(),...ps({transition:{component:j_,leaveAbsolute:!0,group:!0}})},"VMessages"),SC=it()({name:"VMessages",props:lL(),setup(e,i){let{slots:a}=i;const o=K(()=>Si(e.messages)),{textColorClasses:c,textColorStyles:f}=ga(()=>e.color);return ct(()=>V(Ua,{transition:e.transition,tag:"div",class:st(["v-messages",c.value,e.class]),style:St([f.value,e.style])},{default:()=>[e.active&&o.value.map((h,l)=>q("div",{class:"v-messages__message",key:`${l}-${o.value}`},[a.message?a.message({message:h}):h]))]})),{}}}),Sf=Re({focused:Boolean,"onUpdate:focused":pa()},"focus");function xo(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Os();const a=Zt(e,"focused"),o=we(()=>({[`${i}--focused`]:a.value}));function c(){a.value=!0}function f(){a.value=!1}return{focusClasses:o,isFocused:a,focus:c,blur:f}}const uL=Symbol.for("vuetify:rules");function cL(e){const i=vn(uL,null);if(!e){if(!i)throw new Error("Could not find Vuetify rules injection");return i.aliases}return(i==null?void 0:i.resolve(e))??we(e)}const kC=Re({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...Sf()},"validation");function CC(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Os(),a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ia();const o=Zt(e,"modelValue"),c=K(()=>e.validationValue===void 0?o.value:e.validationValue),f=ad(e),h=cL(()=>e.rules),l=Qe([]),b=bt(!0),S=K(()=>!!(Si(o.value===""?null:o.value).length||Si(c.value===""?null:c.value).length)),w=K(()=>{var Y;return(Y=e.errorMessages)!=null&&Y.length?Si(e.errorMessages).concat(l.value).slice(0,Math.max(0,Number(e.maxErrors))):l.value}),k=K(()=>{var ae;let Y=(e.validateOn??((ae=f.validateOn)==null?void 0:ae.value))||"input";Y==="lazy"&&(Y="input lazy"),Y==="eager"&&(Y="input eager");const J=new Set((Y==null?void 0:Y.split(" "))??[]);return{input:J.has("input"),blur:J.has("blur")||J.has("input")||J.has("invalid-input"),invalidInput:J.has("invalid-input"),lazy:J.has("lazy"),eager:J.has("eager")}}),I=K(()=>{var Y;return e.error||(Y=e.errorMessages)!=null&&Y.length?!1:e.rules.length?b.value?l.value.length||k.value.lazy?null:!0:!l.value.length:!0}),E=bt(!1),L=K(()=>({[`${i}--error`]:I.value===!1,[`${i}--dirty`]:S.value,[`${i}--disabled`]:f.isDisabled.value,[`${i}--readonly`]:f.isReadonly.value})),F=Vi("validation"),z=K(()=>e.name??en(a));Qc(()=>{var Y;(Y=f.register)==null||Y.call(f,{id:z.value,vm:F,validate:Z,reset:B,resetValidation:R})}),va(()=>{var Y;(Y=f.unregister)==null||Y.call(f,z.value)}),Fi(async()=>{var Y;k.value.lazy||await Z(!k.value.eager),(Y=f.update)==null||Y.call(f,z.value,I.value,w.value)}),ka(()=>k.value.input||k.value.invalidInput&&I.value===!1,()=>{xt(c,()=>{if(c.value!=null)Z();else if(e.focused){const Y=xt(()=>e.focused,J=>{J||Z(),Y()})}})}),ka(()=>k.value.blur,()=>{xt(()=>e.focused,Y=>{Y||Z()})}),xt([I,w],()=>{var Y;(Y=f.update)==null||Y.call(f,z.value,I.value,w.value)});async function B(){o.value=null,await kn(),await R()}async function R(){b.value=!0,k.value.lazy?l.value=[]:await Z(!k.value.eager)}async function Z(){let Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const J=[];E.value=!0;for(const ae of h.value){if(J.length>=Number(e.maxErrors??1))break;const te=await(typeof ae=="function"?ae:()=>ae)(c.value);if(te!==!0){if(te!==!1&&typeof te!="string"){console.warn(`${te} is not a valid value. Rule functions must return boolean true or a string.`);continue}J.push(te||"")}}return l.value=J,E.value=!1,b.value=Y,l.value}return{errorMessages:w,isDirty:S,isDisabled:f.isDisabled,isReadonly:f.isReadonly,isPristine:b,isValid:I,isValidating:E,reset:B,resetValidation:R,validate:Z,validationClasses:L}}const wo=Re({id:String,appendIcon:Gt,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:Gt,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":pa(),"onClick:append":pa(),...Ft(),...Ji(),...pr(Oi(),["maxWidth","minWidth","width"]),...Dn(),...kC()},"VInput"),Ca=it()({name:"VInput",props:{...wo()},emits:{"update:modelValue":e=>!0},setup(e,i){let{attrs:a,slots:o,emit:c}=i;const{densityClasses:f}=Ga(e),{dimensionStyles:h}=$i(e),{themeClasses:l}=$n(e),{rtlClasses:b}=qi(),{InputIcon:S}=wC(e),w=Ia(),k=K(()=>e.id||`input-${w}`),{errorMessages:I,isDirty:E,isDisabled:L,isReadonly:F,isPristine:z,isValid:B,isValidating:R,reset:Z,resetValidation:Y,validate:J,validationClasses:ae}=CC(e,"v-input",k),he=K(()=>{var Ce;return(Ce=e.errorMessages)!=null&&Ce.length||!z.value&&I.value.length?I.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages}),te=we(()=>he.value.length>0),re=we(()=>!e.hideDetails||e.hideDetails==="auto"&&(te.value||!!o.details)),ie=K(()=>re.value?`${k.value}-messages`:void 0),ue=K(()=>({id:k,messagesId:ie,isDirty:E,isDisabled:L,isReadonly:F,isPristine:z,isValid:B,isValidating:R,hasDetails:re,reset:Z,resetValidation:Y,validate:J})),Q=we(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),pe=we(()=>{if(e.iconColor)return e.iconColor===!0?Q.value:e.iconColor});return ct(()=>{var Xe,Ye,qe,Te;const Ce=!!(o.prepend||e.prependIcon),$e=!!(o.append||e.appendIcon);return q("div",{class:st(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},f.value,l.value,b.value,ae.value,e.class]),style:St([h.value,e.style])},[Ce&&q("div",{key:"prepend",class:"v-input__prepend"},[(Xe=o.prepend)==null?void 0:Xe.call(o,ue.value),e.prependIcon&&V(S,{key:"prepend-icon",name:"prepend",color:pe.value},null)]),o.default&&q("div",{class:"v-input__control"},[(Ye=o.default)==null?void 0:Ye.call(o,ue.value)]),$e&&q("div",{key:"append",class:"v-input__append"},[e.appendIcon&&V(S,{key:"append-icon",name:"append",color:pe.value},null),(qe=o.append)==null?void 0:qe.call(o,ue.value)]),re.value&&q("div",{id:ie.value,class:"v-input__details",role:"alert","aria-live":"polite"},[V(SC,{active:te.value,messages:he.value},{message:o.message}),(Te=o.details)==null?void 0:Te.call(o,ue.value)])])}),{reset:Z,resetValidation:Y,validate:J,isValid:B,errorMessages:I}}}),dL=Re({text:String,onClick:pa(),...Ft(),...Dn()},"VLabel"),rd=it()({name:"VLabel",props:dL(),setup(e,i){let{slots:a}=i;return ct(()=>{var o;return q("label",{class:st(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:St(e.style),onClick:e.onClick},[e.text,(o=a.default)==null?void 0:o.call(a)])}),{}}}),Uv=Symbol("Forwarded refs");function Hv(e,i){let a=e;for(;a;){const o=Reflect.getOwnPropertyDescriptor(a,i);if(o)return o;a=Object.getPrototypeOf(a)}}function sa(e){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return e[Uv]=a,new Proxy(e,{get(c,f){if(Reflect.has(c,f))return Reflect.get(c,f);if(!(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))){for(const h of a)if(h.value&&Reflect.has(h.value,f)){const l=Reflect.get(h.value,f);return typeof l=="function"?l.bind(h.value):l}}},has(c,f){if(Reflect.has(c,f))return!0;if(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))return!1;for(const h of a)if(h.value&&Reflect.has(h.value,f))return!0;return!1},set(c,f,h){if(Reflect.has(c,f))return Reflect.set(c,f,h);if(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))return!1;for(const l of a)if(l.value&&Reflect.has(l.value,f))return Reflect.set(l.value,f,h);return!1},getOwnPropertyDescriptor(c,f){var l;const h=Reflect.getOwnPropertyDescriptor(c,f);if(h)return h;if(!(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))){for(const b of a){if(!b.value)continue;const S=Hv(b.value,f)??("_"in b.value?Hv((l=b.value._)==null?void 0:l.setupState,f):void 0);if(S)return S}for(const b of a){const S=b.value&&b.value[Uv];if(!S)continue;const w=S.slice();for(;w.length;){const k=w.shift(),I=Hv(k.value,f);if(I)return I;const E=k.value&&k.value[Uv];E&&w.push(...E)}}}}})}const hL=Re({...Sf(),...yC(),...wo(),modelValue:{type:[Number,String],default:0}},"VSlider"),Gr=it()({name:"VSlider",props:hL(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,i){let{slots:a,emit:o}=i;const c=Qe(),f=Qe(),{rtlClasses:h}=qi(),l=_C(e),b=Zt(e,"modelValue",void 0,re=>l.roundValue(re??l.min.value)),{min:S,max:w,mousePressed:k,roundValue:I,onSliderMousedown:E,onSliderTouchstart:L,trackContainerRef:F,position:z,hasLabels:B,disabled:R,readonly:Z,noKeyboard:Y}=bC({props:e,steps:l,onSliderStart:()=>{o("start",b.value)},onSliderEnd:re=>{let{value:ie}=re;const ue=I(ie);b.value=ue,o("end",ue)},onSliderMove:re=>{let{value:ie}=re;return b.value=I(ie)},getActiveThumb:()=>{var re;return(re=c.value)==null?void 0:re.$el}}),{isFocused:J,focus:ae,blur:he}=xo(e),te=K(()=>z(b.value));return ct(()=>{const re=Ca.filterProps(e),ie=!!(e.label||a.label||a.prepend);return V(Ca,nt({ref:f,class:["v-slider",{"v-slider--has-labels":!!a["tick-label"]||B.value,"v-slider--focused":J.value,"v-slider--pressed":k.value,"v-slider--disabled":e.disabled},h.value,e.class],style:e.style},re,{focused:J.value}),{...a,prepend:ie?ue=>{var Q,pe;return q(Bt,null,[((Q=a.label)==null?void 0:Q.call(a,ue))??(e.label?V(rd,{id:ue.id.value,class:"v-slider__label",text:e.label},null):void 0),(pe=a.prepend)==null?void 0:pe.call(a,ue)])}:void 0,default:ue=>{let{id:Q,messagesId:pe}=ue;return q("div",{class:"v-slider__container",onMousedown:Z.value?void 0:E,onTouchstartPassive:Z.value?void 0:L},[q("input",{id:Q.value,name:e.name||Q.value,disabled:!!R.value,readonly:!!Z.value,tabindex:"-1",value:b.value},null),V(xC,{ref:F,start:0,stop:te.value},{"tick-label":a["tick-label"]}),V(Py,{ref:c,"aria-describedby":pe.value,focused:J.value,noKeyboard:Y.value,min:S.value,max:w.value,modelValue:b.value,"onUpdate:modelValue":Ce=>b.value=Ce,position:te.value,elevation:e.elevation,onFocus:ae,onBlur:he,ripple:e.ripple,name:e.name},{"thumb-label":a["thumb-label"]})])}})}),sa({focus:()=>{var re;return(re=c.value)==null?void 0:re.$el.focus()}},f)}}),fL=Re({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Ft(),...ps({transition:{component:j_}})},"VCounter"),$p=it()({name:"VCounter",functional:!0,props:fL(),setup(e,i){let{slots:a}=i;const o=we(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return ct(()=>V(Ua,{transition:e.transition},{default:()=>[yi(q("div",{class:st(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:St(e.style)},[a.default?a.default({counter:o.value,max:e.max,value:e.value}):o.value]),[[ms,e.active]])]})),{}}}),mL=Re({floating:Boolean,...Ft()},"VFieldLabel"),kh=it()({name:"VFieldLabel",props:mL(),setup(e,i){let{slots:a}=i;return ct(()=>V(rd,{class:st(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:St(e.style)},a)),{}}}),pL=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],kf=Re({appendInnerIcon:Gt,bgColor:String,clearable:Boolean,clearIcon:{type:Gt,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:Gt,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>pL.includes(e)},"onClick:clear":pa(),"onClick:appendInner":pa(),"onClick:prependInner":pa(),...Ft(),...Rp(),...gi(),...Dn()},"VField"),yl=it()({name:"VField",inheritAttrs:!1,props:{id:String,...Sf(),...kf()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,i){let{attrs:a,emit:o,slots:c}=i;const{themeClasses:f}=$n(e),{loaderClasses:h}=_f(e),{focusClasses:l,isFocused:b,focus:S,blur:w}=xo(e),{InputIcon:k}=wC(e),{roundedClasses:I}=Ci(e),{rtlClasses:E}=qi(),L=we(()=>e.dirty||e.active),F=we(()=>!!(e.label||c.label)),z=we(()=>!e.singleLine&&F.value),B=Ia(),R=K(()=>e.id||`input-${B}`),Z=we(()=>e.details?`${R.value}-messages`:void 0),Y=Qe(),J=Qe(),ae=Qe(),he=K(()=>["plain","underlined"].includes(e.variant)),te=K(()=>e.error||e.disabled?void 0:L.value&&b.value?e.color:e.baseColor),re=K(()=>{if(!(!e.iconColor||e.glow&&!b.value))return e.iconColor===!0?te.value:e.iconColor}),{backgroundColorClasses:ie,backgroundColorStyles:ue}=Un(()=>e.bgColor),{textColorClasses:Q,textColorStyles:pe}=ga(te);xt(L,Xe=>{if(z.value&&!zs()){const Ye=Y.value.$el,qe=J.value.$el;requestAnimationFrame(()=>{const Te=I_(Ye),Me=qe.getBoundingClientRect(),Ve=Me.x-Te.x,Fe=Me.y-Te.y-(Te.height/2-Me.height/2),Be=Me.width/.75,lt=Math.abs(Be-Te.width)>1?{maxWidth:Tt(Be)}:void 0,vt=getComputedStyle(Ye),kt=getComputedStyle(qe),ge=parseFloat(vt.transitionDuration)*1e3||150,je=parseFloat(kt.getPropertyValue("--v-field-label-scale")),rt=kt.getPropertyValue("color");Ye.style.visibility="visible",qe.style.visibility="hidden",uo(Ye,{transform:`translate(${Ve}px, ${Fe}px) scale(${je})`,color:rt,...lt},{duration:ge,easing:Hh,direction:Xe?"normal":"reverse"}).finished.then(()=>{Ye.style.removeProperty("visibility"),qe.style.removeProperty("visibility")})})}},{flush:"post"});const Ce=K(()=>({isActive:L,isFocused:b,controlRef:ae,blur:w,focus:S}));function $e(Xe){Xe.target!==document.activeElement&&Xe.preventDefault()}return ct(()=>{var Ve,Fe,Be;const Xe=e.variant==="outlined",Ye=!!(c["prepend-inner"]||e.prependInnerIcon),qe=!!(e.clearable||c.clear)&&!e.disabled,Te=!!(c["append-inner"]||e.appendInnerIcon||qe),Me=()=>c.label?c.label({...Ce.value,label:e.label,props:{for:R.value}}):e.label;return q("div",nt({class:["v-field",{"v-field--active":L.value,"v-field--appended":Te,"v-field--center-affix":e.centerAffix??!he.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":Ye,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!Me(),[`v-field--variant-${e.variant}`]:!0},f.value,ie.value,l.value,h.value,I.value,E.value,e.class],style:[ue.value,e.style],onClick:$e},a),[q("div",{class:"v-field__overlay"},null),V(bf,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:c.loader}),Ye&&q("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&V(k,{key:"prepend-icon",name:"prependInner",color:re.value},null),(Ve=c["prepend-inner"])==null?void 0:Ve.call(c,Ce.value)]),q("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&z.value&&V(kh,{key:"floating-label",ref:J,class:st([Q.value]),floating:!0,for:R.value,"aria-hidden":!L.value,style:St(pe.value)},{default:()=>[Me()]}),F.value&&V(kh,{key:"label",ref:Y,for:R.value},{default:()=>[Me()]}),((Fe=c.default)==null?void 0:Fe.call(c,{...Ce.value,props:{id:R.value,class:"v-field__input","aria-describedby":Z.value},focus:S,blur:w}))??q("div",{id:R.value,class:"v-field__input","aria-describedby":Z.value},null)]),qe&&V(U_,{key:"clear"},{default:()=>[yi(q("div",{class:"v-field__clearable",onMousedown:lt=>{lt.preventDefault(),lt.stopPropagation()}},[V(pn,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[c.clear?c.clear({...Ce.value,props:{onFocus:S,onBlur:w,onClick:e["onClick:clear"],tabindex:-1}}):V(k,{name:"clear",onFocus:S,onBlur:w,tabindex:-1},null)]})]),[[ms,e.dirty]])]}),Te&&q("div",{key:"append",class:"v-field__append-inner"},[(Be=c["append-inner"])==null?void 0:Be.call(c,Ce.value),e.appendInnerIcon&&V(k,{key:"append-icon",name:"appendInner",color:re.value},null)]),q("div",{class:st(["v-field__outline",Q.value]),style:St(pe.value)},[Xe&&q(Bt,null,[q("div",{class:"v-field__outline__start"},null),z.value&&q("div",{class:"v-field__outline__notch"},[V(kh,{ref:J,floating:!0,for:R.value,"aria-hidden":!L.value},{default:()=>[Me()]})]),q("div",{class:"v-field__outline__end"},null)]),he.value&&z.value&&V(kh,{ref:J,floating:!0,for:R.value,"aria-hidden":!L.value},{default:()=>[Me()]})])])}),{controlRef:ae,fieldIconColor:re}}}),IC=Re({autocomplete:String},"autocomplete");function PC(e){const i=Ia(),a=bt(0),o=we(()=>e.autocomplete==="suppress"),c=we(()=>o.value?`${e.name}-${i}-${a.value}`:e.name),f=we(()=>o.value?"off":e.autocomplete);return{isSuppressing:o,fieldAutocomplete:f,fieldName:c,update:()=>a.value=new Date().getTime()}}function TC(e){function i(a,o){var c,f;!e.autofocus||!a||(f=(c=o[0].target)==null?void 0:c.focus)==null||f.call(c)}return{onIntersect:i}}const gL=["color","file","time","date","datetime-local","week","month"],Cf=Re({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...IC(),...wo(),...kf()},"VTextField"),xi=it()({name:"VTextField",directives:{vIntersect:ds},inheritAttrs:!1,props:Cf(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,i){let{attrs:a,emit:o,slots:c}=i;const f=Zt(e,"modelValue"),{isFocused:h,focus:l,blur:b}=xo(e),{onIntersect:S}=TC(e),w=K(()=>typeof e.counterValue=="function"?e.counterValue(f.value):typeof e.counterValue=="number"?e.counterValue:(f.value??"").toString().length),k=K(()=>{if(a.maxlength)return a.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),I=K(()=>["plain","underlined"].includes(e.variant)),E=Qe(),L=Qe(),F=Qe(),z=PC(e),B=K(()=>gL.includes(e.type)||e.persistentPlaceholder||h.value||e.active);function R(){z.isSuppressing.value&&z.update(),h.value||l(),kn(()=>{var he;F.value!==document.activeElement&&((he=F.value)==null||he.focus())})}function Z(he){o("mousedown:control",he),he.target!==F.value&&(R(),he.preventDefault())}function Y(he){o("click:control",he)}function J(he,te){he.stopPropagation(),R(),kn(()=>{f.value=null,te(),mf(e["onClick:clear"],he)})}function ae(he){var re;const te=he.target;if(f.value=te.value,(re=e.modelModifiers)!=null&&re.trim&&["text","search","password","tel","url"].includes(e.type)){const ie=[te.selectionStart,te.selectionEnd];kn(()=>{te.selectionStart=ie[0],te.selectionEnd=ie[1]})}}return ct(()=>{const he=!!(c.counter||e.counter!==!1&&e.counter!=null),te=!!(he||c.details),[re,ie]=xl(a),{modelValue:ue,...Q}=Ca.filterProps(e),pe=yl.filterProps(e);return V(Ca,nt({ref:E,modelValue:f.value,"onUpdate:modelValue":Ce=>f.value=Ce,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":I.value},e.class],style:e.style},re,Q,{centerAffix:!I.value,focused:h.value}),{...c,default:Ce=>{let{id:$e,isDisabled:Xe,isDirty:Ye,isReadonly:qe,isValid:Te,hasDetails:Me,reset:Ve}=Ce;return V(yl,nt({ref:L,onMousedown:Z,onClick:Y,"onClick:clear":Fe=>J(Fe,Ve),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},Wn(pe,["onClick:clear"]),{id:$e.value,active:B.value||Ye.value,dirty:Ye.value||e.dirty,disabled:Xe.value,focused:h.value,details:Me.value,error:Te.value===!1}),{...c,default:Fe=>{let{props:{class:Be,...lt}}=Fe;const vt=yi(q("input",nt({ref:F,value:f.value,onInput:ae,autofocus:e.autofocus,readonly:qe.value,disabled:Xe.value,name:z.fieldName.value,autocomplete:z.fieldAutocomplete.value,placeholder:e.placeholder,size:1,role:e.role,type:e.type,onFocus:l,onBlur:b},lt,ie),null),[[ds,{handler:S},null,{once:!0}]]);return q(Bt,null,[e.prefix&&q("span",{class:"v-text-field__prefix"},[q("span",{class:"v-text-field__prefix__text"},[e.prefix])]),c.default?q("div",{class:st(Be),"data-no-activator":""},[c.default(),vt]):go(vt,{class:Be}),e.suffix&&q("span",{class:"v-text-field__suffix"},[q("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:te?Ce=>{var $e;return q(Bt,null,[($e=c.details)==null?void 0:$e.call(c,Ce),he&&q(Bt,null,[q("span",null,null),V($p,{active:e.persistentCounter||h.value,value:w.value,max:k.value,disabled:e.disabled},c.counter)])])}:void 0})}),sa({},E,L,F)}}),vL={class:"pa-4"},yL=hs({__name:"PricingControls",setup(e){const i=Lp();return(a,o)=>(Yi(),hl("div",vL,[V(gl,{class:"px-0"},{default:Ge(()=>[...o[19]||(o[19]=[Lt("Pricing Controls",-1)])]),_:1}),V(G_,{multiple:"",class:"slider-panels"},{default:Ge(()=>[V(ul,null,{default:Ge(()=>[V(Es,null,{default:Ge(()=>[V(un,{start:""},{default:Ge(()=>[...o[20]||(o[20]=[Lt("mdi-currency-usd",-1)])]),_:1}),o[21]||(o[21]=Lt(" Base Rates ",-1))]),_:1}),V(As,null,{default:Ge(()=>[V(xi,{modelValue:en(i).base_rate,"onUpdate:modelValue":o[0]||(o[0]=c=>en(i).base_rate=c),modelModifiers:{number:!0},label:"Base Rate ($)",type:"number",step:"0.1",density:"compact"},null,8,["modelValue"]),V(Gr,{modelValue:en(i).per_mile,"onUpdate:modelValue":o[2]||(o[2]=c=>en(i).per_mile=c),label:"Per Mile ($)",min:"0",max:"1",step:"0.01","thumb-label":""},{append:Ge(()=>[V(xi,{modelValue:en(i).per_mile,"onUpdate:modelValue":o[1]||(o[1]=c=>en(i).per_mile=c),modelModifiers:{number:!0},type:"number",step:"0.01",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1},8,["modelValue"]),V(Gr,{modelValue:en(i).per_lb,"onUpdate:modelValue":o[4]||(o[4]=c=>en(i).per_lb=c),label:"Per Lb ($)",min:"0",max:"1",step:"0.01","thumb-label":""},{append:Ge(()=>[V(xi,{modelValue:en(i).per_lb,"onUpdate:modelValue":o[3]||(o[3]=c=>en(i).per_lb=c),modelModifiers:{number:!0},type:"number",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),V(ul,null,{default:Ge(()=>[V(Es,null,{default:Ge(()=>[V(un,{start:""},{default:Ge(()=>[...o[22]||(o[22]=[Lt("mdi-cube-outline",-1)])]),_:1}),o[23]||(o[23]=Lt(" Dimensional ",-1))]),_:1}),V(As,null,{default:Ge(()=>[V(Gr,{modelValue:en(i).dim_divisor,"onUpdate:modelValue":o[6]||(o[6]=c=>en(i).dim_divisor=c),label:"DIM Divisor",min:"100",max:"200",step:"1","thumb-label":""},{append:Ge(()=>[V(xi,{modelValue:en(i).dim_divisor,"onUpdate:modelValue":o[5]||(o[5]=c=>en(i).dim_divisor=c),modelModifiers:{number:!0},type:"number",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),V(ul,null,{default:Ge(()=>[V(Es,null,{default:Ge(()=>[V(un,{start:""},{default:Ge(()=>[...o[24]||(o[24]=[Lt("mdi-gas-station",-1)])]),_:1}),o[25]||(o[25]=Lt(" Surcharges ",-1))]),_:1}),V(As,null,{default:Ge(()=>[V(Gr,{modelValue:en(i).fuel_pct,"onUpdate:modelValue":o[8]||(o[8]=c=>en(i).fuel_pct=c),label:"Fuel Surcharge (%)",min:"0",max:"30",step:"0.5","thumb-label":""},{append:Ge(()=>[V(xi,{modelValue:en(i).fuel_pct,"onUpdate:modelValue":o[7]||(o[7]=c=>en(i).fuel_pct=c),modelModifiers:{number:!0},type:"number",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1},8,["modelValue"]),V(Gr,{modelValue:en(i).peak_pct,"onUpdate:modelValue":o[10]||(o[10]=c=>en(i).peak_pct=c),label:"Peak Season (%)",min:"0",max:"20",step:"0.5","thumb-label":""},{append:Ge(()=>[V(xi,{modelValue:en(i).peak_pct,"onUpdate:modelValue":o[9]||(o[9]=c=>en(i).peak_pct=c),modelModifiers:{number:!0},type:"number",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),V(ul,null,{default:Ge(()=>[V(Es,null,{default:Ge(()=>[V(un,{start:""},{default:Ge(()=>[...o[26]||(o[26]=[Lt("mdi-home",-1)])]),_:1}),o[27]||(o[27]=Lt(" Fees ",-1))]),_:1}),V(As,null,{default:Ge(()=>[V(Gr,{modelValue:en(i).residential_fee,"onUpdate:modelValue":o[12]||(o[12]=c=>en(i).residential_fee=c),label:"Residential Fee ($)",min:"0",max:"10",step:"0.5","thumb-label":""},{append:Ge(()=>[V(xi,{modelValue:en(i).residential_fee,"onUpdate:modelValue":o[11]||(o[11]=c=>en(i).residential_fee=c),modelModifiers:{number:!0},type:"number",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),V(ul,null,{default:Ge(()=>[V(Es,null,{default:Ge(()=>[V(un,{start:""},{default:Ge(()=>[...o[28]||(o[28]=[Lt("mdi-truck",-1)])]),_:1}),o[29]||(o[29]=Lt(" Service Levels ",-1))]),_:1}),V(As,null,{default:Ge(()=>[V(Gr,{modelValue:en(i).service_multiplier_standard,"onUpdate:modelValue":o[14]||(o[14]=c=>en(i).service_multiplier_standard=c),label:"Standard Multiplier",min:"0.5",max:"2",step:"0.05","thumb-label":""},{append:Ge(()=>[V(xi,{modelValue:en(i).service_multiplier_standard,"onUpdate:modelValue":o[13]||(o[13]=c=>en(i).service_multiplier_standard=c),modelModifiers:{number:!0},type:"number",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1},8,["modelValue"]),V(Gr,{modelValue:en(i).service_multiplier_expedited,"onUpdate:modelValue":o[16]||(o[16]=c=>en(i).service_multiplier_expedited=c),label:"Expedited Multiplier",min:"0.5",max:"2",step:"0.05","thumb-label":""},{append:Ge(()=>[V(xi,{modelValue:en(i).service_multiplier_expedited,"onUpdate:modelValue":o[15]||(o[15]=c=>en(i).service_multiplier_expedited=c),modelModifiers:{number:!0},type:"number",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),V(ul,null,{default:Ge(()=>[V(Es,null,{default:Ge(()=>[V(un,{start:""},{default:Ge(()=>[...o[30]||(o[30]=[Lt("mdi-chart-bell-curve",-1)])]),_:1}),o[31]||(o[31]=Lt(" Confidence ",-1))]),_:1}),V(As,null,{default:Ge(()=>[V(Gr,{modelValue:en(i).confidencePct,"onUpdate:modelValue":o[18]||(o[18]=c=>en(i).confidencePct=c),label:"Confidence Band (%)",min:"0",max:"20",step:"1","thumb-label":""},{append:Ge(()=>[V(xi,{modelValue:en(i).confidencePct,"onUpdate:modelValue":o[17]||(o[17]=c=>en(i).confidencePct=c),modelModifiers:{number:!0},type:"number",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]))}}),Np=(e,i)=>{const a=e.__vccOpts||e;for(const[o,c]of i)a[o]=c;return a},_L=Np(yL,[["__scopeId","data-v-f42d9c73"]]),AC=Re({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...sr(),...Ft(),...Ji(),...Gi(),...gi(),...mn(),...Dn(),...Qr()},"VBtnGroup"),Ty=it()({name:"VBtnGroup",props:AC(),setup(e,i){let{slots:a}=i;const{themeClasses:o}=$n(e),{densityClasses:c}=Ga(e),{borderClasses:f}=gr(e),{elevationClasses:h}=ra(e),{roundedClasses:l}=Ci(e);ki({VBtn:{height:we(()=>e.direction==="horizontal"?"auto":null),baseColor:we(()=>e.baseColor),color:we(()=>e.color),density:we(()=>e.density),flat:!0,variant:we(()=>e.variant)}}),ct(()=>V(e.tag,{class:st(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},o.value,f.value,c.value,h.value,l.value,e.class]),style:St(e.style)},a))}}),Z_=Symbol.for("vuetify:v-btn-toggle"),bL=Re({...AC(),...Tu()},"VBtnToggle"),xL=it()({name:"VBtnToggle",props:bL(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const{isSelected:o,next:c,prev:f,select:h,selected:l}=Sl(e,Z_);return ct(()=>{const b=Ty.filterProps(e);return V(Ty,nt({class:["v-btn-toggle",e.class]},b,{style:e.style}),{default:()=>{var S;return[(S=a.default)==null?void 0:S.call(a,{isSelected:o,next:c,prev:f,select:h,selected:l})]}})}),{next:c,prev:f,select:h}}}),wL=Re({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Ft(),...$s(),...mn({tag:"div"}),...Dn()},"VProgressCircular"),pu=it()({name:"VProgressCircular",props:wL(),setup(e,i){let{slots:a}=i;const o=20,c=2*Math.PI*o,f=Qe(),{themeClasses:h}=$n(e),{sizeClasses:l,sizeStyles:b}=td(e),{textColorClasses:S,textColorStyles:w}=ga(()=>e.color),{textColorClasses:k,textColorStyles:I}=ga(()=>e.bgColor),{intersectionRef:E,isIntersecting:L}=yf(),{resizeRef:F,contentRect:z}=Yr(),B=we(()=>ni(parseFloat(e.modelValue),0,100)),R=we(()=>Number(e.width)),Z=we(()=>b.value?Number(e.size):z.value?z.value.width:Math.max(R.value,32)),Y=we(()=>o/(1-R.value/Z.value)*2),J=we(()=>R.value/Z.value*Y.value),ae=we(()=>Tt((100-B.value)/100*c));return pi(()=>{E.value=f.value,F.value=f.value}),ct(()=>V(e.tag,{ref:f,class:st(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":L.value,"v-progress-circular--disable-shrink":e.indeterminate&&(e.indeterminate==="disable-shrink"||zs())},h.value,l.value,S.value,e.class]),style:St([b.value,w.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:B.value},{default:()=>[q("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${Y.value} ${Y.value}`},[q("circle",{class:st(["v-progress-circular__underlay",k.value]),style:St(I.value),fill:"transparent",cx:"50%",cy:"50%",r:o,"stroke-width":J.value,"stroke-dasharray":c,"stroke-dashoffset":0},null),q("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:o,"stroke-width":J.value,"stroke-dasharray":c,"stroke-dashoffset":ae.value},null)]),a.default&&q("div",{class:"v-progress-circular__content"},[a.default({value:B.value})])]})),{}}});function SL(e,i){xt(()=>{var a;return(a=e.isActive)==null?void 0:a.value},a=>{e.isLink.value&&a!=null&&i&&kn(()=>{i(a)})},{immediate:!0})}const jp=Re({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:Z_},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:Gt,appendIcon:Gt,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,spaced:String,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...sr(),...Ft(),...Ji(),...Oi(),...Gi(),...Au(),...Rp(),...bo(),...nd(),...gi(),...wf(),...$s(),...mn({tag:"button"}),...Dn(),...Qr({variant:"elevated"})},"VBtn"),gn=it()({name:"VBtn",props:jp(),emits:{"group:selected":e=>!0},setup(e,i){let{attrs:a,slots:o}=i;const{themeClasses:c}=$n(e),{borderClasses:f}=gr(e),{densityClasses:h}=Ga(e),{dimensionStyles:l}=$i(e),{elevationClasses:b}=ra(e),{loaderClasses:S}=_f(e),{locationStyles:w}=Pu(e),{positionClasses:k}=id(e),{roundedClasses:I}=Ci(e),{sizeClasses:E,sizeStyles:L}=td(e),F=vl(e,e.symbol,!1),z=xf(e,a),B=K(()=>{var ue;return e.active!==void 0?e.active:z.isRouterLink.value?(ue=z.isActive)==null?void 0:ue.value:F==null?void 0:F.isSelected.value}),R=we(()=>B.value?e.activeColor??e.color:e.color),Z=K(()=>{var Q,pe;return{color:(F==null?void 0:F.isSelected.value)&&(!z.isLink.value||((Q=z.isActive)==null?void 0:Q.value))||!F||((pe=z.isActive)==null?void 0:pe.value)?R.value??e.baseColor:e.baseColor,variant:e.variant}}),{colorClasses:Y,colorStyles:J,variantClasses:ae}=Iu(Z),he=K(()=>(F==null?void 0:F.disabled.value)||e.disabled),te=we(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),re=K(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function ie(ue){var Q;he.value||z.isLink.value&&(ue.metaKey||ue.ctrlKey||ue.shiftKey||ue.button!==0||a.target==="_blank")||(z.isRouterLink.value?(Q=z.navigate)==null||Q.call(z,ue):F==null||F.toggle())}return SL(z,F==null?void 0:F.select),ct(()=>{const ue=z.isLink.value?"a":e.tag,Q=!!(e.prependIcon||o.prepend),pe=!!(e.appendIcon||o.append),Ce=!!(e.icon&&e.icon!==!0);return yi(V(ue,nt(z.linkProps,{type:ue==="a"?void 0:"button",class:["v-btn",F==null?void 0:F.selectedClass.value,{"v-btn--active":B.value,"v-btn--block":e.block,"v-btn--disabled":he.value,"v-btn--elevated":te.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},e.spaced?["v-btn--spaced",`v-btn--spaced-${e.spaced}`]:[],c.value,f.value,Y.value,h.value,b.value,S.value,k.value,I.value,E.value,ae.value,e.class],style:[J.value,l.value,w.value,L.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:he.value&&ue!=="a"||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:ie,value:re.value}),{default:()=>{var $e;return[wl(!0,"v-btn"),!e.icon&&Q&&q("span",{key:"prepend",class:"v-btn__prepend"},[o.prepend?V(pn,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},o.prepend):V(un,{key:"prepend-icon",icon:e.prependIcon},null)]),q("span",{class:"v-btn__content","data-no-activator":""},[!o.default&&Ce?V(un,{key:"content-icon",icon:e.icon},null):V(pn,{key:"content-defaults",disabled:!Ce,defaults:{VIcon:{icon:e.icon}}},{default:()=>{var Xe;return[((Xe=o.default)==null?void 0:Xe.call(o))??Nn(e.text)]}})]),!e.icon&&pe&&q("span",{key:"append",class:"v-btn__append"},[o.append?V(pn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},o.append):V(un,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&q("span",{key:"loader",class:"v-btn__loader"},[(($e=o.loader)==null?void 0:$e.call(o))??V(pu,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}}),[[qa,!he.value&&e.ripple,"",{center:!!e.icon}]])}),{group:F}}}),kL=Re({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...Ft(),...Dn()},"VDivider"),Ha=it()({name:"VDivider",props:kL(),setup(e,i){let{attrs:a,slots:o}=i;const{themeClasses:c}=$n(e),{textColorClasses:f,textColorStyles:h}=ga(()=>e.color),l=K(()=>{const b={};return e.length&&(b[e.vertical?"height":"width"]=Tt(e.length)),e.thickness&&(b[e.vertical?"borderRightWidth":"borderTopWidth"]=Tt(e.thickness)),b});return ct(()=>{const b=q("hr",{class:st([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},c.value,f.value,e.class]),style:St([l.value,h.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":!a.role||a.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${a.role||"separator"}`},null);return o.default?q("div",{class:st(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[b,q("div",{class:"v-divider__content"},[o.default()]),b]):b}),{}}}),Ay=Symbol.for("vuetify:list");function EC(){let{filterable:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filterable:!1};const i=vn(Ay,{filterable:!1,hasPrepend:bt(!1),updateHasPrepend:()=>null}),a={filterable:i.filterable||e,hasPrepend:bt(!1),updateHasPrepend:o=>{o&&(a.hasPrepend.value=o)}};return Jn(Ay,a),i}function MC(){return vn(Ay,null)}const K_=e=>{const i={activate:a=>{let{id:o,value:c,activated:f}=a;return o=rn(o),e&&!c&&f.size===1&&f.has(o)||(c?f.add(o):f.delete(o)),f},in:(a,o,c)=>{let f=new Set;if(a!=null)for(const h of Si(a))f=i.activate({id:h,value:!0,activated:new Set(f),children:o,parents:c});return f},out:a=>Array.from(a)};return i},DC=e=>{const i=K_(e);return{activate:o=>{let{activated:c,id:f,...h}=o;f=rn(f);const l=c.has(f)?new Set([f]):new Set;return i.activate({...h,id:f,activated:l})},in:(o,c,f)=>{let h=new Set;if(o!=null){const l=Si(o);l.length&&(h=i.in(l.slice(0,1),c,f))}return h},out:(o,c,f)=>i.out(o,c,f)}},CL=e=>{const i=K_(e);return{activate:o=>{let{id:c,activated:f,children:h,...l}=o;return c=rn(c),h.has(c)?f:i.activate({id:c,activated:f,children:h,...l})},in:i.in,out:i.out}},IL=e=>{const i=DC(e);return{activate:o=>{let{id:c,activated:f,children:h,...l}=o;return c=rn(c),h.has(c)?f:i.activate({id:c,activated:f,children:h,...l})},in:i.in,out:i.out}},PL={open:e=>{let{id:i,value:a,opened:o,parents:c}=e;if(a){const f=new Set;f.add(i);let h=c.get(i);for(;h!=null;)f.add(h),h=c.get(h);return f}else return o.delete(i),o},select:()=>null},VC={open:e=>{let{id:i,value:a,opened:o,parents:c}=e;if(a){let f=c.get(i);for(o.add(i);f!=null&&f!==i;)o.add(f),f=c.get(f);return o}else o.delete(i);return o},select:()=>null},TL={open:VC.open,select:e=>{let{id:i,value:a,opened:o,parents:c}=e;if(!a)return o;const f=[];let h=c.get(i);for(;h!=null;)f.push(h),h=c.get(h);return new Set(f)}},X_=e=>{const i={select:a=>{let{id:o,value:c,selected:f}=a;if(o=rn(o),e&&!c){const h=Array.from(f.entries()).reduce((l,b)=>{let[S,w]=b;return w==="on"&&l.push(S),l},[]);if(h.length===1&&h[0]===o)return f}return f.set(o,c?"on":"off"),f},in:(a,o,c,f)=>{const h=new Map;for(const l of a||[])i.select({id:l,value:!0,selected:h,children:o,parents:c,disabled:f});return h},out:a=>{const o=[];for(const[c,f]of a.entries())f==="on"&&o.push(c);return o}};return i},zC=e=>{const i=X_(e);return{select:o=>{let{selected:c,id:f,...h}=o;f=rn(f);const l=c.has(f)?new Map([[f,c.get(f)]]):new Map;return i.select({...h,id:f,selected:l})},in:(o,c,f,h)=>o!=null&&o.length?i.in(o.slice(0,1),c,f,h):new Map,out:(o,c,f)=>i.out(o,c,f)}},AL=e=>{const i=X_(e);return{select:o=>{let{id:c,selected:f,children:h,...l}=o;return c=rn(c),h.has(c)?f:i.select({id:c,selected:f,children:h,...l})},in:i.in,out:i.out}},EL=e=>{const i=zC(e);return{select:o=>{let{id:c,selected:f,children:h,...l}=o;return c=rn(c),h.has(c)?f:i.select({id:c,selected:f,children:h,...l})},in:i.in,out:i.out}},LC=e=>{const i={select:a=>{let{id:o,value:c,selected:f,children:h,parents:l,disabled:b}=a;o=rn(o);const S=new Map(f),w=[o];for(;w.length;){const I=w.shift();b.has(I)||f.set(rn(I),c?"on":"off"),h.has(I)&&w.push(...h.get(I))}let k=rn(l.get(o));for(;k;){let I=!0,E=!0;for(const L of h.get(k)){const F=rn(L);if(!b.has(F)&&(f.get(F)!=="on"&&(I=!1),f.has(F)&&f.get(F)!=="off"&&(E=!1),!I&&!E))break}f.set(k,I?"on":E?"off":"indeterminate"),k=rn(l.get(k))}return e&&!c&&Array.from(f.entries()).reduce((E,L)=>{let[F,z]=L;return z==="on"&&E.push(F),E},[]).length===0?S:f},in:(a,o,c,f)=>{let h=new Map;for(const l of a||[])h=i.select({id:l,value:!0,selected:h,children:o,parents:c,disabled:f});return h},out:(a,o)=>{const c=[];for(const[f,h]of a.entries())h==="on"&&!o.has(f)&&c.push(f);return c}};return i},ML=e=>{const i=LC(e);return{select:i.select,in:i.in,out:(o,c,f)=>{const h=[];for(const[l,b]of o.entries())if(b==="on"){if(f.has(l)){const S=f.get(l);if(o.get(S)==="on")continue}h.push(l)}return h}}},tf=Symbol.for("vuetify:nested"),BC={id:bt(),root:{register:()=>null,unregister:()=>null,children:Qe(new Map),parents:Qe(new Map),disabled:Qe(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:Qe(!1),selectable:Qe(!1),opened:Qe(new Set),activated:Qe(new Set),selected:Qe(new Map),selectedValues:Qe([]),getPath:()=>[]}},DL=Re({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),VL=e=>{let i=!1;const a=bt(new Map),o=bt(new Map),c=bt(new Set),f=Zt(e,"opened",e.opened,F=>new Set(Array.isArray(F)?F.map(z=>rn(z)):F),F=>[...F.values()]),h=K(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return CL(e.mandatory);case"single-leaf":return IL(e.mandatory);case"independent":return K_(e.mandatory);case"single-independent":default:return DC(e.mandatory)}}),l=K(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return EL(e.mandatory);case"leaf":return AL(e.mandatory);case"independent":return X_(e.mandatory);case"single-independent":return zC(e.mandatory);case"trunk":return ML(e.mandatory);case"classic":default:return LC(e.mandatory)}}),b=K(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return TL;case"single":return PL;case"multiple":default:return VC}}),S=Zt(e,"activated",e.activated,F=>h.value.in(F,a.value,o.value),F=>h.value.out(F,a.value,o.value)),w=Zt(e,"selected",e.selected,F=>l.value.in(F,a.value,o.value,c.value),F=>l.value.out(F,a.value,o.value));va(()=>{i=!0});function k(F){const z=[];let B=rn(F);for(;B!==void 0;)z.unshift(B),B=o.value.get(B);return z}const I=Vi("nested"),E=new Set,L={id:bt(),root:{opened:f,activatable:we(()=>e.activatable),selectable:we(()=>e.selectable),activated:S,selected:w,selectedValues:K(()=>{const F=[];for(const[z,B]of w.value.entries())B==="on"&&F.push(z);return F}),register:(F,z,B,R)=>{if(E.has(F)){k(F).map(String).join(" -> "),k(z).concat(F).map(String).join(" -> ");return}else E.add(F);z&&F!==z&&o.value.set(F,z),B&&c.value.add(F),R&&a.value.set(F,[]),z!=null&&a.value.set(z,[...a.value.get(z)||[],F])},unregister:F=>{if(i)return;E.delete(F),a.value.delete(F),c.value.delete(F);const z=o.value.get(F);if(z){const B=a.value.get(z)??[];a.value.set(z,B.filter(R=>R!==F))}o.value.delete(F)},open:(F,z,B)=>{I.emit("click:open",{id:F,value:z,path:k(F),event:B});const R=b.value.open({id:F,value:z,opened:new Set(f.value),children:a.value,parents:o.value,event:B});R&&(f.value=R)},openOnSelect:(F,z,B)=>{const R=b.value.select({id:F,value:z,selected:new Map(w.value),opened:new Set(f.value),children:a.value,parents:o.value,event:B});R&&(f.value=R)},select:(F,z,B)=>{I.emit("click:select",{id:F,value:z,path:k(F),event:B});const R=l.value.select({id:F,value:z,selected:new Map(w.value),children:a.value,parents:o.value,disabled:c.value,event:B});R&&(w.value=R),L.root.openOnSelect(F,z,B)},activate:(F,z,B)=>{if(!e.activatable)return L.root.select(F,!0,B);I.emit("click:activate",{id:F,value:z,path:k(F),event:B});const R=h.value.activate({id:F,value:z,activated:new Set(S.value),children:a.value,parents:o.value,event:B});if(R.size!==S.value.size)S.value=R;else{for(const Z of R)if(!S.value.has(Z)){S.value=R;return}for(const Z of S.value)if(!R.has(Z)){S.value=R;return}}},children:a,parents:o,disabled:c,getPath:k}};return Jn(tf,L),L.root},RC=(e,i,a)=>{const o=vn(tf,BC),c=Symbol("nested item"),f=K(()=>{const l=rn(rr(e));return l!==void 0?l:c}),h={...o,id:f,open:(l,b)=>o.root.open(f.value,l,b),openOnSelect:(l,b)=>o.root.openOnSelect(f.value,l,b),isOpen:K(()=>o.root.opened.value.has(f.value)),parent:K(()=>o.root.parents.value.get(f.value)),activate:(l,b)=>o.root.activate(f.value,l,b),isActivated:K(()=>o.root.activated.value.has(f.value)),select:(l,b)=>o.root.select(f.value,l,b),isSelected:K(()=>o.root.selected.value.get(f.value)==="on"),isIndeterminate:K(()=>o.root.selected.value.get(f.value)==="indeterminate"),isLeaf:K(()=>!o.root.children.value.get(f.value)),isGroupActivator:o.isGroupActivator};return Qc(()=>{o.isGroupActivator||o.root.register(f.value,o.id.value,rr(i),a)}),va(()=>{o.isGroupActivator||o.root.unregister(f.value)}),a&&Jn(tf,h),h},zL=()=>{const e=vn(tf,BC);Jn(tf,{...e,isGroupActivator:!0})};function Eu(){const e=bt(!1);return Fi(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:we(()=>e.value?void 0:{transition:"none !important"}),isBooted:hu(e)}}const LL=Lr({name:"VListGroupActivator",setup(e,i){let{slots:a}=i;return zL(),()=>{var o;return(o=a.default)==null?void 0:o.call(a)}}}),FC=Re({activeColor:String,baseColor:String,color:String,collapseIcon:{type:Gt,default:"$collapse"},disabled:Boolean,expandIcon:{type:Gt,default:"$expand"},rawId:[String,Number],prependIcon:Gt,appendIcon:Gt,fluid:Boolean,subgroup:Boolean,title:String,value:null,...Ft(),...mn()},"VListGroup"),nf=it()({name:"VListGroup",props:FC(),setup(e,i){let{slots:a}=i;const{isOpen:o,open:c,id:f}=RC(()=>e.value,()=>e.disabled,!0),h=K(()=>`v-list-group--id-${String(e.rawId??f.value)}`),l=MC(),{isBooted:b}=Eu();function S(E){var L;["INPUT","TEXTAREA"].includes((L=E.target)==null?void 0:L.tagName)||c(!o.value,E)}const w=K(()=>({onClick:S,class:"v-list-group__header",id:h.value})),k=K(()=>o.value?e.collapseIcon:e.expandIcon),I=K(()=>({VListItem:{activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&k.value,appendIcon:e.appendIcon||!e.subgroup&&k.value,title:e.title,value:e.value}}));return ct(()=>V(e.tag,{class:st(["v-list-group",{"v-list-group--prepend":l==null?void 0:l.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":o.value},e.class]),style:St(e.style)},{default:()=>[a.activator&&V(pn,{defaults:I.value},{default:()=>[V(LL,null,{default:()=>[a.activator({props:w.value,isOpen:o.value})]})]}),V(Ua,{transition:{component:Op},disabled:!b.value},{default:()=>{var E;return[yi(q("div",{class:"v-list-group__items",role:"group","aria-labelledby":h.value},[(E=a.default)==null?void 0:E.call(a)]),[[ms,o.value]])]}})]})),{isOpen:o}}}),BL=Re({opacity:[Number,String],...Ft(),...mn()},"VListItemSubtitle"),Ba=it()({name:"VListItemSubtitle",props:BL(),setup(e,i){let{slots:a}=i;return ct(()=>V(e.tag,{class:st(["v-list-item-subtitle",e.class]),style:St([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},a)),{}}}),Ra=_o("v-list-item-title"),OC=Re({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:Gt,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:Gt,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:pa(),onClickOnce:pa(),...sr(),...Ft(),...Ji(),...Oi(),...Gi(),...gi(),...wf(),...mn(),...Dn(),...Qr({variant:"text"})},"VListItem"),ri=it()({name:"VListItem",directives:{vRipple:qa},props:OC(),emits:{click:e=>!0},setup(e,i){let{attrs:a,slots:o,emit:c}=i;const f=xf(e,a),h=K(()=>e.value===void 0?f.href.value:e.value),{activate:l,isActivated:b,select:S,isOpen:w,isSelected:k,isIndeterminate:I,isGroupActivator:E,root:L,parent:F,openOnSelect:z,id:B}=RC(h,()=>e.disabled,!1),R=MC(),Z=K(()=>{var ge;return e.active!==!1&&(e.active||((ge=f.isActive)==null?void 0:ge.value)||(L.activatable.value?b.value:k.value))}),Y=we(()=>e.link!==!1&&f.isLink.value),J=K(()=>!!R&&(L.selectable.value||L.activatable.value||e.value!=null)),ae=K(()=>!e.disabled&&e.link!==!1&&(e.link||f.isClickable.value||J.value)),he=K(()=>R?J.value?"option":"listitem":void 0),te=K(()=>{if(J.value)return L.activatable.value?b.value:L.selectable.value?k.value:Z.value}),re=we(()=>e.rounded||e.nav),ie=we(()=>e.color??e.activeColor),ue=we(()=>({color:Z.value?ie.value??e.baseColor:e.baseColor,variant:e.variant}));xt(()=>{var ge;return(ge=f.isActive)==null?void 0:ge.value},ge=>{ge&&Q()}),Qc(()=>{var ge;(ge=f.isActive)!=null&&ge.value&&Q()});function Q(){F.value!=null&&L.open(F.value,!0),z(!0)}const{themeClasses:pe}=$n(e),{borderClasses:Ce}=gr(e),{colorClasses:$e,colorStyles:Xe,variantClasses:Ye}=Iu(ue),{densityClasses:qe}=Ga(e),{dimensionStyles:Te}=$i(e),{elevationClasses:Me}=ra(e),{roundedClasses:Ve}=Ci(re),Fe=we(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),Be=we(()=>e.ripple!==void 0&&e.ripple&&(R!=null&&R.filterable)?{keys:["Enter"]}:e.ripple),lt=K(()=>({isActive:Z.value,select:S,isOpen:w.value,isSelected:k.value,isIndeterminate:I.value}));function vt(ge){var je,rt;c("click",ge),!["INPUT","TEXTAREA"].includes((je=ge.target)==null?void 0:je.tagName)&&ae.value&&((rt=f.navigate)==null||rt.call(f,ge),!E&&(L.activatable.value?l(!b.value,ge):(L.selectable.value||e.value!=null&&!Y.value)&&S(!k.value,ge)))}function kt(ge){const je=ge.target;["INPUT","TEXTAREA"].includes(je.tagName)||(ge.key==="Enter"||ge.key===" "&&!(R!=null&&R.filterable))&&(ge.preventDefault(),ge.stopPropagation(),ge.target.dispatchEvent(new MouseEvent("click",ge)))}return ct(()=>{const ge=Y.value?"a":e.tag,je=o.title||e.title!=null,rt=o.subtitle||e.subtitle!=null,ft=!!(e.appendAvatar||e.appendIcon),Rt=!!(ft||o.append),fe=!!(e.prependAvatar||e.prependIcon),se=!!(fe||o.prepend);return R==null||R.updateHasPrepend(se),e.activeColor&&fk("active-color",["color","base-color"]),yi(V(ge,nt(f.linkProps,{class:["v-list-item",{"v-list-item--active":Z.value,"v-list-item--disabled":e.disabled,"v-list-item--link":ae.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!se&&(R==null?void 0:R.hasPrepend.value),"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&Z.value},pe.value,Ce.value,$e.value,qe.value,Me.value,Fe.value,Ve.value,Ye.value,e.class],style:[Xe.value,Te.value,e.style],tabindex:ae.value?R?-2:0:void 0,"aria-selected":te.value,role:he.value,onClick:vt,onKeydown:ae.value&&!Y.value&&kt}),{default:()=>{var Se;return[wl(ae.value||Z.value,"v-list-item"),se&&q("div",{key:"prepend",class:"v-list-item__prepend"},[o.prepend?V(pn,{key:"prepend-defaults",disabled:!fe,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var xe;return[(xe=o.prepend)==null?void 0:xe.call(o,lt.value)]}}):q(Bt,null,[e.prependAvatar&&V(zr,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&V(un,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),q("div",{class:"v-list-item__spacer"},null)]),q("div",{class:"v-list-item__content","data-no-activator":""},[je&&V(Ra,{key:"title"},{default:()=>{var xe;return[((xe=o.title)==null?void 0:xe.call(o,{title:e.title}))??Nn(e.title)]}}),rt&&V(Ba,{key:"subtitle"},{default:()=>{var xe;return[((xe=o.subtitle)==null?void 0:xe.call(o,{subtitle:e.subtitle}))??Nn(e.subtitle)]}}),(Se=o.default)==null?void 0:Se.call(o,lt.value)]),Rt&&q("div",{key:"append",class:"v-list-item__append"},[o.append?V(pn,{key:"append-defaults",disabled:!ft,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var xe;return[(xe=o.append)==null?void 0:xe.call(o,lt.value)]}}):q(Bt,null,[e.appendIcon&&V(un,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&V(zr,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),q("div",{class:"v-list-item__spacer"},null)])]}}),[[qa,ae.value&&Be.value]])}),{activate:l,isActivated:b,isGroupActivator:E,isSelected:k,list:R,select:S,root:L,id:B,link:f}}}),RL=Re({color:String,inset:Boolean,sticky:Boolean,title:String,...Ft(),...mn()},"VListSubheader"),sd=it()({name:"VListSubheader",props:RL(),setup(e,i){let{slots:a}=i;const{textColorClasses:o,textColorStyles:c}=ga(()=>e.color);return ct(()=>{const f=!!(a.default||e.title);return V(e.tag,{class:st(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},o.value,e.class]),style:St([{textColorStyles:c},e.style])},{default:()=>{var h;return[f&&q("div",{class:"v-list-subheader__text"},[((h=a.default)==null?void 0:h.call(a))??e.title])]}})}),{}}}),FL=Re({items:Array,returnObject:Boolean},"VListChildren"),$C=it()({name:"VListChildren",props:FL(),setup(e,i){let{slots:a}=i;return EC(),()=>{var o,c;return((o=a.default)==null?void 0:o.call(a))??((c=e.items)==null?void 0:c.map(f=>{var I,E;let{children:h,props:l,type:b,raw:S}=f;if(b==="divider")return((I=a.divider)==null?void 0:I.call(a,{props:l}))??V(Ha,l,null);if(b==="subheader")return((E=a.subheader)==null?void 0:E.call(a,{props:l}))??V(sd,l,null);const w={subtitle:a.subtitle?L=>{var F;return(F=a.subtitle)==null?void 0:F.call(a,{...L,item:S})}:void 0,prepend:a.prepend?L=>{var F;return(F=a.prepend)==null?void 0:F.call(a,{...L,item:S})}:void 0,append:a.append?L=>{var F;return(F=a.append)==null?void 0:F.call(a,{...L,item:S})}:void 0,title:a.title?L=>{var F;return(F=a.title)==null?void 0:F.call(a,{...L,item:S})}:void 0},k=nf.filterProps(l);return h?V(nf,nt(k,{value:e.returnObject?S:l==null?void 0:l.value,rawId:l==null?void 0:l.value}),{activator:L=>{let{props:F}=L;const z=nt(l,F,{value:e.returnObject?S:l.value});return a.header?a.header({props:z}):V(ri,z,w)},default:()=>V($C,{items:h,returnObject:e.returnObject},a)}):a.item?a.item({props:l}):V(ri,nt(l,{value:e.returnObject?S:l.value}),w)}))}}}),NC=Re({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),OL=new Set(["item","divider","subheader"]);function os(e,i){const a=Ri(i,e.itemTitle,i),o=Ri(i,e.itemValue,a),c=Ri(i,e.itemChildren),f=e.itemProps===!0?typeof i=="object"&&i!=null&&!Array.isArray(i)?"children"in i?Wn(i,["children"]):i:void 0:Ri(i,e.itemProps);let h=Ri(i,e.itemType,"item");OL.has(h)||(h="item");const l={title:a,value:o,...f};return{type:h,title:String(l.title??""),value:l.value,props:l,children:h==="item"&&Array.isArray(c)?jC(e,c):void 0,raw:i}}os.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];function jC(e,i){const a=pr(e,os.neededProps),o=[];for(const c of i)o.push(os(a,c));return o}function Y_(e){const i=K(()=>jC(e,e.items)),a=K(()=>i.value.some(l=>l.value===null)),o=bt(new Map),c=bt([]);pi(()=>{const l=i.value,b=new Map,S=[];for(let w=0;w<l.length;w++){const k=l[w];if(dy(k.value)||k.value===null){let I=b.get(k.value);I||(I=[],b.set(k.value,I)),I.push(k)}else S.push(k)}o.value=b,c.value=S});function f(l){const b=o.value,S=i.value,w=c.value,k=a.value,I=e.returnObject,E=!!e.valueComparator,L=e.valueComparator||ia,F=pr(e,os.neededProps),z=[];e:for(const B of l){if(!k&&B===null)continue;if(I&&typeof B=="string"){z.push(os(F,B));continue}const R=b.get(B);if(E||!R){for(const Z of E?S:w)if(L(B,Z.value)){z.push(Z);continue e}z.push(os(F,B));continue}z.push(...R)}return z}function h(l){return e.returnObject?l.map(b=>{let{raw:S}=b;return S}):l.map(b=>{let{value:S}=b;return S})}return{items:i,transformIn:f,transformOut:h}}const $L=new Set(["item","divider","subheader"]);function NL(e,i){const a=dy(i)?i:Ri(i,e.itemTitle),o=dy(i)?i:Ri(i,e.itemValue,void 0),c=Ri(i,e.itemChildren),f=e.itemProps===!0?Wn(i,["children"]):Ri(i,e.itemProps);let h=Ri(i,e.itemType,"item");$L.has(h)||(h="item");const l={title:a,value:o,...f};return{type:h,title:l.title,value:l.value,props:l,children:h==="item"&&c?UC(e,c):void 0,raw:i}}function UC(e,i){const a=[];for(const o of i)a.push(NL(e,o));return a}function HC(e){return{items:K(()=>UC(e,e.items))}}const qC=Re({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:Gt,collapseIcon:Gt,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":pa(),"onClick:select":pa(),"onUpdate:opened":pa(),...DL({selectStrategy:"single-leaf",openStrategy:"list"}),...sr(),...Ft(),...Ji(),...Oi(),...Gi(),...NC(),...gi(),...mn(),...Dn(),...Qr({variant:"text"})},"VList"),vo=it()({name:"VList",props:qC(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,i){let{slots:a}=i;const{items:o}=HC(e),{themeClasses:c}=$n(e),{backgroundColorClasses:f,backgroundColorStyles:h}=Un(()=>e.bgColor),{borderClasses:l}=gr(e),{densityClasses:b}=Ga(e),{dimensionStyles:S}=$i(e),{elevationClasses:w}=ra(e),{roundedClasses:k}=Ci(e),{children:I,open:E,parents:L,select:F,getPath:z}=VL(e),B=we(()=>e.lines?`v-list--${e.lines}-line`:void 0),R=we(()=>e.activeColor),Z=we(()=>e.baseColor),Y=we(()=>e.color),J=we(()=>e.selectable||e.activatable);EC({filterable:e.filterable}),ki({VListGroup:{activeColor:R,baseColor:Z,color:Y,expandIcon:we(()=>e.expandIcon),collapseIcon:we(()=>e.collapseIcon)},VListItem:{activeClass:we(()=>e.activeClass),activeColor:R,baseColor:Z,color:Y,density:we(()=>e.density),disabled:we(()=>e.disabled),lines:we(()=>e.lines),nav:we(()=>e.nav),slim:we(()=>e.slim),variant:we(()=>e.variant)}});const ae=bt(!1),he=Qe();function te(Ce){ae.value=!0}function re(Ce){ae.value=!1}function ie(Ce){var $e;!ae.value&&!(Ce.relatedTarget&&(($e=he.value)!=null&&$e.contains(Ce.relatedTarget)))&&pe()}function ue(Ce){const $e=Ce.target;if(!(!he.value||$e.tagName==="INPUT"&&["Home","End"].includes(Ce.key)||$e.tagName==="TEXTAREA")){if(Ce.key==="ArrowDown")pe("next");else if(Ce.key==="ArrowUp")pe("prev");else if(Ce.key==="Home")pe("first");else if(Ce.key==="End")pe("last");else return;Ce.preventDefault()}}function Q(Ce){ae.value=!0}function pe(Ce){if(he.value)return uu(he.value,Ce)}return ct(()=>V(e.tag,{ref:he,class:st(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},c.value,f.value,l.value,b.value,w.value,B.value,k.value,e.class]),style:St([h.value,S.value,e.style]),tabindex:e.disabled?-1:0,role:J.value?"listbox":"list","aria-activedescendant":void 0,onFocusin:te,onFocusout:re,onFocus:ie,onKeydown:ue,onMousedown:Q},{default:()=>[V($C,{items:o.value,returnObject:e.returnObject},a)]})),{open:E,select:F,focus:pe,children:I,parents:L,getPath:z}}}),jL=_o("v-list-img"),UL=Re({start:Boolean,end:Boolean,...Ft(),...mn()},"VListItemAction"),J_=it()({name:"VListItemAction",props:UL(),setup(e,i){let{slots:a}=i;return ct(()=>V(e.tag,{class:st(["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class]),style:St(e.style)},a)),{}}}),HL=Re({start:Boolean,end:Boolean,...Ft(),...mn()},"VListItemMedia"),qL=it()({name:"VListItemMedia",props:HL(),setup(e,i){let{slots:a}=i;return ct(()=>V(e.tag,{class:st(["v-list-item-media",{"v-list-item-media--start":e.start,"v-list-item-media--end":e.end},e.class]),style:St(e.style)},a)),{}}}),GL={class:"pa-4"},WL=hs({__name:"PresetsPanel",setup(e){const i=Lp(),a=Qe("");function o(){a.value&&(i.saveAsPreset(a.value),a.value="")}function c(){if(!i.currentPreset)return;const f=JSON.stringify(i.currentPreset,null,2),h=new Blob([f],{type:"application/json"}),l=URL.createObjectURL(h),b=document.createElement("a");b.href=l,b.download=`preset-${i.currentPreset.id}.json`,b.click(),URL.revokeObjectURL(l)}return(f,h)=>(Yi(),hl("div",GL,[V(gl,{class:"px-0"},{default:Ge(()=>[...h[1]||(h[1]=[Lt("Pricing Presets",-1)])]),_:1}),V(vo,null,{default:Ge(()=>[(Yi(!0),hl(Bt,null,MA(en(i).presets,l=>{var b;return Yi(),Wr(ri,{key:l.id,active:((b=en(i).currentPreset)==null?void 0:b.id)===l.id,onClick:S=>en(i).applyPreset(l)},{default:Ge(()=>[V(Ra,null,{default:Ge(()=>[Lt(Nn(l.label),1)]),_:2},1024),V(Ba,null,{default:Ge(()=>[Lt(" Base: $"+Nn(l.base_rate)+" | Fuel: "+Nn(l.fuel_pct)+"% ",1)]),_:2},1024)]),_:2},1032,["active","onClick"])}),128))]),_:1}),V(Ha,{class:"my-4"}),V(xi,{modelValue:a.value,"onUpdate:modelValue":h[0]||(h[0]=l=>a.value=l),label:"New Preset Name",density:"compact","hide-details":""},null,8,["modelValue"]),V(gn,{color:"primary",block:"",class:"mt-2",onClick:o,disabled:!a.value},{default:Ge(()=>[V(un,{start:""},{default:Ge(()=>[...h[2]||(h[2]=[Lt("mdi-content-save",-1)])]),_:1}),h[3]||(h[3]=Lt(" Save Current as Preset ",-1))]),_:1},8,["disabled"]),V(gn,{color:"secondary",variant:"outlined",block:"",class:"mt-2",onClick:c},{default:Ge(()=>[V(un,{start:""},{default:Ge(()=>[...h[4]||(h[4]=[Lt("mdi-download",-1)])]),_:1}),h[5]||(h[5]=Lt(" Export Preset JSON ",-1))]),_:1})]))}}),ZL=Re({...Ft(),...Wn(Lk(),["fullHeight"]),...Dn()},"VApp"),GC=it()({name:"VApp",props:ZL(),setup(e,i){let{slots:a}=i;const o=$n(e),{layoutClasses:c,getLayoutItem:f,items:h,layoutRef:l}=Rk({...e,fullHeight:!0}),{rtlClasses:b}=qi();return ct(()=>{var S;return q("div",{ref:l,class:st(["v-application",o.themeClasses.value,c.value,b.value,e.class]),style:St([e.style])},[q("div",{class:"v-application__wrap"},[(S=a.default)==null?void 0:S.call(a)])])}),{getLayoutItem:f,items:h,theme:o}}}),WC=Re({text:String,...Ft(),...mn()},"VToolbarTitle"),af=it()({name:"VToolbarTitle",props:WC(),setup(e,i){let{slots:a}=i;return ct(()=>{const o=!!(a.default||a.text||e.text);return V(e.tag,{class:st(["v-toolbar-title",e.class]),style:St(e.style)},{default:()=>{var c;return[o&&q("div",{class:"v-toolbar-title__placeholder"},[a.text?a.text():e.text,(c=a.default)==null?void 0:c.call(a)])]}})}),{}}}),KL=[null,"prominent","default","comfortable","compact"],ZC=Re({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>KL.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...sr(),...Ft(),...Gi(),...gi(),...mn({tag:"header"}),...Dn()},"VToolbar"),Ey=it()({name:"VToolbar",props:ZC(),setup(e,i){var E;let{slots:a}=i;const{backgroundColorClasses:o,backgroundColorStyles:c}=Un(()=>e.color),{borderClasses:f}=gr(e),{elevationClasses:h}=ra(e),{roundedClasses:l}=Ci(e),{themeClasses:b}=$n(e),{rtlClasses:S}=qi(),w=bt(e.extended===null?!!((E=a.extension)!=null&&E.call(a)):e.extended),k=K(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),I=K(()=>w.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ki({VBtn:{variant:"text"}}),ct(()=>{var B;const L=!!(e.title||a.title),F=!!(a.image||e.image),z=(B=a.extension)==null?void 0:B.call(a);return w.value=e.extended===null?!!z:e.extended,V(e.tag,{class:st(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},o.value,f.value,h.value,l.value,b.value,S.value,e.class]),style:St([c.value,e.style])},{default:()=>[F&&q("div",{key:"image",class:"v-toolbar__image"},[a.image?V(pn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},a.image):V(Xr,{key:"image-img",cover:!0,src:e.image},null)]),V(pn,{defaults:{VTabs:{height:Tt(k.value)}}},{default:()=>{var R,Z,Y;return[q("div",{class:"v-toolbar__content",style:{height:Tt(k.value)}},[a.prepend&&q("div",{class:"v-toolbar__prepend"},[(R=a.prepend)==null?void 0:R.call(a)]),L&&V(af,{key:"title",text:e.title},{text:a.title}),(Z=a.default)==null?void 0:Z.call(a),a.append&&q("div",{class:"v-toolbar__append"},[(Y=a.append)==null?void 0:Y.call(a)])])]}}),V(pn,{defaults:{VTabs:{height:Tt(I.value)}}},{default:()=>[V(Op,null,{default:()=>[w.value&&q("div",{class:"v-toolbar__extension",style:{height:Tt(I.value)}},[z])]})]})]})}),{contentHeight:k,extensionHeight:I}}}),XL=Re({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function YL(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:a}=i;let o=0,c=0;const f=Qe(null),h=bt(0),l=bt(0),b=bt(0),S=bt(!1),w=bt(!1),k=K(()=>Number(e.scrollThreshold)),I=K(()=>ni((k.value-h.value)/k.value||0)),E=()=>{const L=f.value;if(!L||a&&!a.value)return;o=h.value,h.value="window"in L?L.pageYOffset:L.scrollTop;const F=L instanceof Window?document.documentElement.scrollHeight:L.scrollHeight;if(c!==F){c=F;return}w.value=h.value<o,b.value=Math.abs(h.value-k.value)};return xt(w,()=>{l.value=l.value||h.value}),xt(S,()=>{l.value=0}),Fi(()=>{xt(()=>e.scrollTarget,L=>{var z;const F=L?document.querySelector(L):window;F&&F!==f.value&&((z=f.value)==null||z.removeEventListener("scroll",E),f.value=F,f.value.addEventListener("scroll",E,{passive:!0}))},{immediate:!0})}),va(()=>{var L;(L=f.value)==null||L.removeEventListener("scroll",E)}),a&&xt(a,E,{immediate:!0}),{scrollThreshold:k,currentScroll:h,currentThreshold:b,isScrollActive:S,scrollRatio:I,isScrollingUp:w,savedScroll:l}}const JL=Re({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...ZC(),...ku(),...XL(),height:{type:[Number,String],default:64}},"VAppBar"),My=it()({name:"VAppBar",props:JL(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const o=Qe(),c=Zt(e,"modelValue"),f=K(()=>{var Z;const R=new Set(((Z=e.scrollBehavior)==null?void 0:Z.split(" "))??[]);return{hide:R.has("hide"),fullyHide:R.has("fully-hide"),inverted:R.has("inverted"),collapse:R.has("collapse"),elevate:R.has("elevate"),fadeImage:R.has("fade-image")}}),h=K(()=>{const R=f.value;return R.hide||R.fullyHide||R.inverted||R.collapse||R.elevate||R.fadeImage||!c.value}),{currentScroll:l,scrollThreshold:b,isScrollingUp:S,scrollRatio:w}=YL(e,{canScroll:h}),k=we(()=>f.value.hide||f.value.fullyHide),I=K(()=>e.collapse||f.value.collapse&&(f.value.inverted?w.value>0:w.value===0)),E=K(()=>e.flat||f.value.fullyHide&&!c.value||f.value.elevate&&(f.value.inverted?l.value>0:l.value===0)),L=K(()=>f.value.fadeImage?f.value.inverted?1-w.value:w.value:void 0),F=K(()=>{var Y,J;if(f.value.hide&&f.value.inverted)return 0;const R=((Y=o.value)==null?void 0:Y.contentHeight)??0,Z=((J=o.value)==null?void 0:J.extensionHeight)??0;return k.value?l.value<b.value||f.value.fullyHide?R+Z:R:R+Z});ka(()=>!!e.scrollBehavior,()=>{pi(()=>{k.value?f.value.inverted?c.value=l.value>b.value:c.value=S.value||l.value<b.value:c.value=!0})});const{ssrBootStyles:z}=Eu(),{layoutItemStyles:B}=Cu({id:e.name,order:K(()=>parseInt(e.order,10)),position:we(()=>e.location),layoutSize:F,elementSize:bt(void 0),active:c,absolute:we(()=>e.absolute)});return ct(()=>{const R=Ey.filterProps(e);return V(Ey,nt({ref:o,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...B.value,"--v-toolbar-image-opacity":L.value,height:void 0,...z.value},e.style]},R,{collapse:I.value,flat:E.value}),a)}),{}}}),QL=Re({...Wn(jp({icon:"$menu",variant:"text"}),["spaced"])},"VAppBarNavIcon"),KC=it()({name:"VAppBarNavIcon",props:QL(),setup(e,i){let{slots:a}=i;return ct(()=>V(gn,nt(e,{class:["v-app-bar-nav-icon"]}),a)),{}}}),eB=it()({name:"VAppBarTitle",props:WC(),setup(e,i){let{slots:a}=i;return ct(()=>V(af,nt(e,{class:"v-app-bar-title"}),a)),{}}}),tB=Re({fluid:{type:Boolean,default:!1},...Ft(),...Oi(),...mn()},"VContainer"),Dy=it()({name:"VContainer",props:tB(),setup(e,i){let{slots:a}=i;const{rtlClasses:o}=qi(),{dimensionStyles:c}=$i(e);return ct(()=>V(e.tag,{class:st(["v-container",{"v-container--fluid":e.fluid},o.value,e.class]),style:St([c.value,e.style])},a)),{}}}),XC=Mp.reduce((e,i)=>(e[i]={type:[Boolean,String,Number],default:!1},e),{}),YC=Mp.reduce((e,i)=>{const a="offset"+Fs(i);return e[a]={type:[String,Number],default:null},e},{}),JC=Mp.reduce((e,i)=>{const a="order"+Fs(i);return e[a]={type:[String,Number],default:null},e},{}),r1={col:Object.keys(XC),offset:Object.keys(YC),order:Object.keys(JC)};function nB(e,i,a){let o=e;if(!(a==null||a===!1)){if(i){const c=i.replace(e,"");o+=`-${c}`}return e==="col"&&(o="v-"+o),e==="col"&&(a===""||a===!0)||(o+=`-${a}`),o.toLowerCase()}}const iB=["auto","start","end","center","baseline","stretch"],aB=Re({cols:{type:[Boolean,String,Number],default:!1},...XC,offset:{type:[String,Number],default:null},...YC,order:{type:[String,Number],default:null},...JC,alignSelf:{type:String,default:null,validator:e=>iB.includes(e)},...Ft(),...mn()},"VCol"),na=it()({name:"VCol",props:aB(),setup(e,i){let{slots:a}=i;const o=K(()=>{const c=[];let f;for(f in r1)r1[f].forEach(l=>{const b=e[l],S=nB(f,l,b);S&&c.push(S)});const h=c.some(l=>l.startsWith("v-col-"));return c.push({"v-col":!h||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),c});return()=>{var c;return fs(e.tag,{class:[o.value,e.class],style:e.style},(c=a.default)==null?void 0:c.call(a))}}}),Q_=["start","end","center"],QC=["space-between","space-around","space-evenly"];function eb(e,i){return Mp.reduce((a,o)=>{const c=e+Fs(o);return a[c]=i(),a},{})}const rB=[...Q_,"baseline","stretch"],e2=e=>rB.includes(e),t2=eb("align",()=>({type:String,default:null,validator:e2})),sB=[...Q_,...QC],n2=e=>sB.includes(e),i2=eb("justify",()=>({type:String,default:null,validator:n2})),oB=[...Q_,...QC,"stretch"],a2=e=>oB.includes(e),r2=eb("alignContent",()=>({type:String,default:null,validator:a2})),s1={align:Object.keys(t2),justify:Object.keys(i2),alignContent:Object.keys(r2)},lB={align:"align",justify:"justify",alignContent:"align-content"};function uB(e,i,a){let o=lB[e];if(a!=null){if(i){const c=i.replace(e,"");o+=`-${c}`}return o+=`-${a}`,o.toLowerCase()}}const cB=Re({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:e2},...t2,justify:{type:String,default:null,validator:n2},...i2,alignContent:{type:String,default:null,validator:a2},...r2,...Ft(),...mn()},"VRow"),fo=it()({name:"VRow",props:cB(),setup(e,i){let{slots:a}=i;const o=K(()=>{const c=[];let f;for(f in s1)s1[f].forEach(h=>{const l=e[h],b=uB(f,h,l);b&&c.push(b)});return c.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),c});return()=>{var c;return fs(e.tag,{class:["v-row",o.value,e.class],style:e.style},(c=a.default)==null?void 0:c.call(a))}}}),rf=_o("v-spacer","div","VSpacer"),dB=Re({scrollable:Boolean,...Ft(),...Oi(),...mn({tag:"main"})},"VMain"),s2=it()({name:"VMain",props:dB(),setup(e,i){let{slots:a}=i;const{dimensionStyles:o}=$i(e),{mainStyles:c}=Bk(),{ssrBootStyles:f}=Eu();return ct(()=>V(e.tag,{class:st(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:St([c.value,f.value,o.value,e.style])},{default:()=>{var h,l;return[e.scrollable?q("div",{class:"v-main__scroller"},[(h=a.default)==null?void 0:h.call(a)]):(l=a.default)==null?void 0:l.call(a)]}})),{}}});function hB(e){let{rootEl:i,isSticky:a,layoutItemStyles:o}=e;const c=bt(!1),f=bt(0),h=K(()=>{const S=typeof c.value=="boolean"?"top":c.value;return[a.value?{top:"auto",bottom:"auto",height:void 0}:void 0,c.value?{[S]:Tt(f.value)}:{top:o.value.top}]});Fi(()=>{xt(a,S=>{S?window.addEventListener("scroll",b,{passive:!0}):window.removeEventListener("scroll",b)},{immediate:!0})}),va(()=>{window.removeEventListener("scroll",b)});let l=0;function b(){const S=l>window.scrollY?"up":"down",w=i.value.getBoundingClientRect(),k=parseFloat(o.value.top??0),I=window.scrollY-Math.max(0,f.value-k),E=w.height+Math.max(f.value,k)-window.scrollY-window.innerHeight,L=parseFloat(getComputedStyle(i.value).getPropertyValue("--v-body-scroll-y"))||0;w.height<window.innerHeight-k?(c.value="top",f.value=k):S==="up"&&c.value==="bottom"||S==="down"&&c.value==="top"?(f.value=window.scrollY+w.top-L,c.value=!0):S==="down"&&E<=0?(f.value=0,c.value="bottom"):S==="up"&&I<=0&&(L?c.value!=="top"&&(f.value=-I+L+k,c.value="top"):(f.value=w.top+I,c.value="top")),l=window.scrollY}return{isStuck:c,stickyStyles:h}}const fB=100,mB=20;function o1(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function l1(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let i=0;for(let a=e.length-1;a>0;a--){if(e[a].t===e[a-1].t)continue;const o=o1(i),c=(e[a].d-e[a-1].d)/(e[a].t-e[a-1].t);i+=(c-o)*Math.abs(c),a===e.length-1&&(i*=.5)}return o1(i)*1e3}function pB(){const e={};function i(c){Array.from(c.changedTouches).forEach(f=>{(e[f.identifier]??(e[f.identifier]=new ok(mB))).push([c.timeStamp,f])})}function a(c){Array.from(c.changedTouches).forEach(f=>{delete e[f.identifier]})}function o(c){var S;const f=(S=e[c])==null?void 0:S.values().reverse();if(!f)throw new Error(`No samples for touch id ${c}`);const h=f[0],l=[],b=[];for(const w of f){if(h[0]-w[0]>fB)break;l.push({t:w[0],d:w[1].clientX}),b.push({t:w[0],d:w[1].clientY})}return{x:l1(l),y:l1(b),get direction(){const{x:w,y:k}=this,[I,E]=[Math.abs(w),Math.abs(k)];return I>E&&w>=0?"right":I>E&&w<=0?"left":E>I&&k>=0?"down":E>I&&k<=0?"up":gB()}}}return{addMovement:i,endTouch:a,getVelocity:o}}function gB(){throw new Error}function vB(e){let{el:i,isActive:a,isTemporary:o,width:c,touchless:f,position:h}=e;Fi(()=>{window.addEventListener("touchstart",R,{passive:!0}),window.addEventListener("touchmove",Z,{passive:!1}),window.addEventListener("touchend",Y,{passive:!0})}),va(()=>{window.removeEventListener("touchstart",R),window.removeEventListener("touchmove",Z),window.removeEventListener("touchend",Y)});const l=K(()=>["left","right"].includes(h.value)),{addMovement:b,endTouch:S,getVelocity:w}=pB();let k=!1;const I=bt(!1),E=bt(0),L=bt(0);let F;function z(ae,he){return(h.value==="left"?ae:h.value==="right"?document.documentElement.clientWidth-ae:h.value==="top"?ae:h.value==="bottom"?document.documentElement.clientHeight-ae:Mc())-(he?c.value:0)}function B(ae){let he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const te=h.value==="left"?(ae-L.value)/c.value:h.value==="right"?(document.documentElement.clientWidth-ae-L.value)/c.value:h.value==="top"?(ae-L.value)/c.value:h.value==="bottom"?(document.documentElement.clientHeight-ae-L.value)/c.value:Mc();return he?ni(te):te}function R(ae){if(f.value)return;const he=ae.changedTouches[0].clientX,te=ae.changedTouches[0].clientY,re=25,ie=h.value==="left"?he<re:h.value==="right"?he>document.documentElement.clientWidth-re:h.value==="top"?te<re:h.value==="bottom"?te>document.documentElement.clientHeight-re:Mc(),ue=a.value&&(h.value==="left"?he<c.value:h.value==="right"?he>document.documentElement.clientWidth-c.value:h.value==="top"?te<c.value:h.value==="bottom"?te>document.documentElement.clientHeight-c.value:Mc());(ie||ue||a.value&&o.value)&&(F=[he,te],L.value=z(l.value?he:te,a.value),E.value=B(l.value?he:te),k=L.value>-20&&L.value<80,S(ae),b(ae))}function Z(ae){const he=ae.changedTouches[0].clientX,te=ae.changedTouches[0].clientY;if(k){if(!ae.cancelable){k=!1;return}const ie=Math.abs(he-F[0]),ue=Math.abs(te-F[1]);(l.value?ie>ue&&ie>3:ue>ie&&ue>3)?(I.value=!0,k=!1):(l.value?ue:ie)>3&&(k=!1)}if(!I.value)return;ae.preventDefault(),b(ae);const re=B(l.value?he:te,!1);E.value=Math.max(0,Math.min(1,re)),re>1?L.value=z(l.value?he:te,!0):re<0&&(L.value=z(l.value?he:te,!1))}function Y(ae){if(k=!1,!I.value)return;b(ae),I.value=!1;const he=w(ae.changedTouches[0].identifier),te=Math.abs(he.x),re=Math.abs(he.y);(l.value?te>re&&te>400:re>te&&re>3)?a.value=he.direction===({left:"right",right:"left",top:"down",bottom:"up"}[h.value]||Mc()):a.value=E.value>.5}const J=K(()=>I.value?{transform:h.value==="left"?`translateX(calc(-100% + ${E.value*c.value}px))`:h.value==="right"?`translateX(calc(100% - ${E.value*c.value}px))`:h.value==="top"?`translateY(calc(-100% + ${E.value*c.value}px))`:h.value==="bottom"?`translateY(calc(100% - ${E.value*c.value}px))`:Mc(),transition:"none"}:void 0);return ka(I,()=>{var te,re;const ae=((te=i.value)==null?void 0:te.style.transform)??null,he=((re=i.value)==null?void 0:re.style.transition)??null;pi(()=>{var ie,ue,Q,pe;(ue=i.value)==null||ue.style.setProperty("transform",((ie=J.value)==null?void 0:ie.transform)||"none"),(pe=i.value)==null||pe.style.setProperty("transition",((Q=J.value)==null?void 0:Q.transition)||null)}),Hi(()=>{var ie,ue;(ie=i.value)==null||ie.style.setProperty("transform",ae),(ue=i.value)==null||ue.style.setProperty("transition",he)})}),{isDragging:I,dragProgress:E,dragStyles:J}}function Mc(){throw new Error}const tb=Re({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function nb(e,i){let a=()=>{};function o(h){a==null||a();const l=Number(h?e.openDelay:e.closeDelay);return new Promise(b=>{a=fM(l,()=>{i==null||i(h),b(h)})})}function c(){return o(!0)}function f(){return o(!1)}return{clearDelay:a,runOpenDelay:c,runCloseDelay:f}}function Mu(){const i=Vi("useScopeId").vnode.scopeId;return{scopeId:i?{[i]:""}:void 0}}const yB=["start","end","left","right","top","bottom"],_B=Re({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>yB.includes(e)},sticky:Boolean,...sr(),...Ft(),...tb(),...Su({mobile:null}),...Gi(),...ku(),...gi(),...mn({tag:"nav"}),...Dn()},"VNavigationDrawer"),qm=it()({name:"VNavigationDrawer",props:_B(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,i){let{attrs:a,emit:o,slots:c}=i;const{isRtl:f}=qi(),{themeClasses:h}=$n(e),{borderClasses:l}=gr(e),{backgroundColorClasses:b,backgroundColorStyles:S}=Un(()=>e.color),{elevationClasses:w}=ra(e),{displayClasses:k,mobile:I}=Jr(e),{roundedClasses:E}=Ci(e),L=iC(),F=Zt(e,"modelValue",null,Me=>!!Me),{ssrBootStyles:z}=Eu(),{scopeId:B}=Mu(),R=Qe(),Z=bt(!1),{runOpenDelay:Y,runCloseDelay:J}=nb(e,Me=>{Z.value=Me}),ae=K(()=>e.rail&&e.expandOnHover&&Z.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),he=K(()=>fy(e.location,f.value)),te=we(()=>e.persistent),re=K(()=>!e.permanent&&(I.value||e.temporary)),ie=K(()=>e.sticky&&!re.value&&he.value!=="bottom");ka(()=>e.expandOnHover&&e.rail!=null,()=>{xt(Z,Me=>o("update:rail",!Me))}),ka(()=>!e.disableResizeWatcher,()=>{xt(re,Me=>!e.permanent&&kn(()=>F.value=!Me))}),ka(()=>!e.disableRouteWatcher&&!!L,()=>{xt(L.currentRoute,()=>re.value&&(F.value=!1))}),xt(()=>e.permanent,Me=>{Me&&(F.value=!0)}),e.modelValue==null&&!re.value&&(F.value=e.permanent||!I.value);const{isDragging:ue,dragProgress:Q}=vB({el:R,isActive:F,isTemporary:re,width:ae,touchless:we(()=>e.touchless),position:he}),pe=K(()=>{const Me=re.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):ae.value;return ue.value?Me*Q.value:Me}),{layoutItemStyles:Ce,layoutItemScrimStyles:$e}=Cu({id:e.name,order:K(()=>parseInt(e.order,10)),position:he,layoutSize:pe,elementSize:ae,active:hu(F),disableTransitions:we(()=>ue.value),absolute:K(()=>e.absolute||ie.value&&typeof Xe.value!="string")}),{isStuck:Xe,stickyStyles:Ye}=hB({rootEl:R,isSticky:ie,layoutItemStyles:Ce}),qe=Un(()=>typeof e.scrim=="string"?e.scrim:null),Te=K(()=>({...ue.value?{opacity:Q.value*.2,transition:"none"}:void 0,...$e.value}));return ki({VList:{bgColor:"transparent"}}),ct(()=>{const Me=c.image||e.image;return q(Bt,null,[V(e.tag,nt({ref:R,onMouseenter:Y,onMouseleave:J,class:["v-navigation-drawer",`v-navigation-drawer--${he.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":Z.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":re.value,"v-navigation-drawer--persistent":te.value,"v-navigation-drawer--active":F.value,"v-navigation-drawer--sticky":ie.value},h.value,b.value,l.value,k.value,w.value,E.value,e.class],style:[S.value,Ce.value,z.value,Ye.value,e.style]},B,a),{default:()=>{var Ve,Fe,Be;return[Me&&q("div",{key:"image",class:"v-navigation-drawer__img"},[c.image?V(pn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},c.image):V(Xr,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),c.prepend&&q("div",{class:"v-navigation-drawer__prepend"},[(Ve=c.prepend)==null?void 0:Ve.call(c)]),q("div",{class:"v-navigation-drawer__content"},[(Fe=c.default)==null?void 0:Fe.call(c)]),c.append&&q("div",{class:"v-navigation-drawer__append"},[(Be=c.append)==null?void 0:Be.call(c)])]}}),V(pl,{name:"fade-transition"},{default:()=>[re.value&&(ue.value||F.value)&&!!e.scrim&&q("div",nt({class:["v-navigation-drawer__scrim",qe.backgroundColorClasses.value],style:[Te.value,qe.backgroundColorStyles.value],onClick:()=>{te.value||(F.value=!1)}},B),null)]})])}),{isStuck:Xe}}}),bB=Re({...Ft(),...Qr({variant:"text"})},"VToolbarItems"),xB=it()({name:"VToolbarItems",props:bB(),setup(e,i){let{slots:a}=i;return ki({VBtn:{color:we(()=>e.color),height:"inherit",variant:we(()=>e.variant)}}),ct(()=>{var o;return q("div",{class:st(["v-toolbar-items",e.class]),style:St(e.style)},[(o=a.default)==null?void 0:o.call(a)])}),{}}}),wB=hs({__name:"App",setup(e){const i=Vp(),a=pz(),o=Qe(!1),c=Qe(!0),f=Qe(!0),h=K(()=>a.path==="/scanner"),l=K(()=>a.path.startsWith("/shipping"));function b(){const S=i.global.current.value.dark?"light":"dark";i.global.name.value=S}return(S,w)=>{const k=_S("router-view");return Yi(),Wr(GC,null,{default:Ge(()=>[l.value?(Yi(),hl(Bt,{key:0},[V(My,{color:"primary",prominent:""},{default:Ge(()=>[V(KC,{onClick:w[0]||(w[0]=I=>o.value=!o.value)}),V(af,null,{default:Ge(()=>[...w[6]||(w[6]=[Lt("Shipping Calculator",-1)])]),_:1}),V(rf),V(gn,{icon:"",onClick:w[1]||(w[1]=I=>S.$router.push("/"))},{default:Ge(()=>[V(un,null,{default:Ge(()=>[...w[7]||(w[7]=[Lt("mdi-home",-1)])]),_:1})]),_:1}),V(gn,{icon:"",onClick:b},{default:Ge(()=>[V(un,null,{default:Ge(()=>[Lt(Nn(en(i).global.current.value.dark?"mdi-white-balance-sunny":"mdi-weather-night"),1)]),_:1})]),_:1})]),_:1}),V(qm,{modelValue:o.value,"onUpdate:modelValue":w[2]||(w[2]=I=>o.value=I),temporary:""},{default:Ge(()=>[V(vo,null,{default:Ge(()=>[V(ri,{to:"/shipping","prepend-icon":"mdi-calculator",title:"Estimator"}),V(ri,{to:"/shipping/zones","prepend-icon":"mdi-map",title:"Zones"}),V(ri,{to:"/shipping/batch","prepend-icon":"mdi-file-delimited",title:"Batch Pricing"}),V(ri,{to:"/shipping/settings","prepend-icon":"mdi-cog",title:"Settings"})]),_:1})]),_:1},8,["modelValue"]),V(qm,{modelValue:c.value,"onUpdate:modelValue":w[3]||(w[3]=I=>c.value=I),width:"320",location:"left",permanent:""},{default:Ge(()=>[V(_L)]),_:1},8,["modelValue"]),V(qm,{modelValue:f.value,"onUpdate:modelValue":w[4]||(w[4]=I=>f.value=I),width:"280",location:"right"},{default:Ge(()=>[V(WL)]),_:1},8,["modelValue"])],64)):h.value?Nc("",!0):(Yi(),Wr(My,{key:1,color:"primary"},{default:Ge(()=>[V(af,{style:{cursor:"pointer"},onClick:w[5]||(w[5]=I=>S.$router.push("/"))},{default:Ge(()=>[...w[8]||(w[8]=[Lt(" Joseph's Guinea Pig Hay Co. ",-1)])]),_:1}),V(rf),V(gn,{icon:"",onClick:b},{default:Ge(()=>[V(un,null,{default:Ge(()=>[Lt(Nn(en(i).global.current.value.dark?"mdi-white-balance-sunny":"mdi-weather-night"),1)]),_:1})]),_:1})]),_:1})),V(s2,{style:St(h.value?"padding: 0 !important":"")},{default:Ge(()=>[V(k)]),_:1},8,["style"])]),_:1})}}}),SB="modulepreload",kB=function(e){return"/shipping-calculator/"+e},u1={},Dc=function(i,a,o){let c=Promise.resolve();if(a&&a.length>0){let h=function(S){return Promise.all(S.map(w=>Promise.resolve(w).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),b=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));c=h(a.map(S=>{if(S=kB(S),S in u1)return;u1[S]=!0;const w=S.endsWith(".css"),k=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${S}"]${k}`))return;const I=document.createElement("link");if(I.rel=w?"stylesheet":SB,w||(I.as="script"),I.crossOrigin="",I.href=S,b&&I.setAttribute("nonce",b),document.head.appendChild(I),w)return new Promise((E,L)=>{I.addEventListener("load",E),I.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${S}`)))})}))}function f(h){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=h,window.dispatchEvent(l),!l.defaultPrevented)throw h}return c.then(h=>{for(const l of h||[])l.status==="rejected"&&f(l.reason);return i().catch(f)})},CB="/shipping-calculator/happy-haystack-banner.webp",IB="/shipping-calculator/happy-haystack-logo.webp",PB="/shipping-calculator/happy-haystack-tagline.webp",TB="/shipping-calculator/hay-features.webp",AB="/shipping-calculator/hay-product.webp",EB="/shipping-calculator/hay-haven-product.webp",MB=["src"],DB=["src"],VB=["src"],zB=hs({__name:"HomeView",setup(e){return(i,a)=>(Yi(),Wr(Dy,{fluid:"",class:"pa-0"},{default:Ge(()=>[V(fo,{justify:"center"},{default:Ge(()=>[V(na,{cols:"12"},{default:Ge(()=>[V(ss,{class:"mb-6",elevation:"0",tile:""},{default:Ge(()=>[V(Xr,{src:en(CB),height:"300",cover:"",class:"align-end"},{default:Ge(()=>[V(gl,{class:"text-h3 text-white pa-6",style:{"text-shadow":"2px 2px 4px rgba(0,0,0,0.7)"}},{default:Ge(()=>[q("img",{src:en(IB),alt:"Happy Haystack Logo",style:{height:"80px","margin-right":"16px"}},null,8,MB)]),_:1})]),_:1},8,["src"]),V(Ms,{class:"pa-8"},{default:Ge(()=>[V(fo,{justify:"center"},{default:Ge(()=>[V(na,{cols:"12",md:"5"},{default:Ge(()=>[q("img",{src:en(PB),alt:"Happy Haystack",style:{width:"100%","max-width":"100%"}},null,8,DB)]),_:1}),V(na,{cols:"12",md:"5"},{default:Ge(()=>[q("img",{src:en(TB),alt:"Hay Features",style:{width:"100%","max-width":"100%"}},null,8,VB)]),_:1})]),_:1})]),_:1})]),_:1}),V(Dy,null,{default:Ge(()=>[V(ss,{class:"mx-auto",elevation:"8","max-width":"1200"},{default:Ge(()=>[V(gl,{class:"text-h4 text-center py-6 bg-primary"},{default:Ge(()=>[...a[3]||(a[3]=[Lt(" Business Management Tools ",-1)])]),_:1}),V(Ms,{class:"pa-8"},{default:Ge(()=>[a[14]||(a[14]=q("p",{class:"text-h6 text-center mb-8"},"Select a tool to get started",-1)),V(fo,null,{default:Ge(()=>[V(na,{cols:"12",md:"4"},{default:Ge(()=>[V(ss,{class:"app-card",elevation:"2",hover:"",onClick:a[0]||(a[0]=o=>i.$router.push("/shipping"))},{default:Ge(()=>[V(Ms,{class:"text-center pa-6"},{default:Ge(()=>[V(un,{size:"64",color:"primary",class:"mb-4"},{default:Ge(()=>[...a[4]||(a[4]=[Lt("mdi-package-variant",-1)])]),_:1}),a[5]||(a[5]=q("div",{class:"text-h5 mb-2"},"Shipping Calculator",-1)),a[6]||(a[6]=q("p",{class:"text-body-2"},"Calculate shipping costs and manage zones for product delivery",-1))]),_:1})]),_:1})]),_:1}),V(na,{cols:"12",md:"4"},{default:Ge(()=>[V(ss,{class:"app-card",elevation:"2",hover:"",onClick:a[1]||(a[1]=o=>i.$router.push("/scanner"))},{default:Ge(()=>[V(Ms,{class:"text-center pa-6"},{default:Ge(()=>[V(un,{size:"64",color:"primary",class:"mb-4"},{default:Ge(()=>[...a[7]||(a[7]=[Lt("mdi-barcode-scan",-1)])]),_:1}),a[8]||(a[8]=q("div",{class:"text-h5 mb-2"},"Warehouse Scanner",-1)),a[9]||(a[9]=q("p",{class:"text-body-2"},"Scan barcodes and update inventory database",-1))]),_:1})]),_:1})]),_:1}),V(na,{cols:"12",md:"4"},{default:Ge(()=>[V(ss,{class:"app-card",elevation:"2",hover:"",onClick:a[2]||(a[2]=o=>i.$router.push("/amazon-seller"))},{default:Ge(()=>[V(Ms,{class:"text-center pa-6"},{default:Ge(()=>[V(un,{size:"64",color:"primary",class:"mb-4"},{default:Ge(()=>[...a[10]||(a[10]=[Lt("mdi-store",-1)])]),_:1}),a[11]||(a[11]=q("div",{class:"text-h5 mb-2"},"Amazon Seller",-1)),a[12]||(a[12]=q("p",{class:"text-body-2"},"Manage products, listings, and store content on Amazon",-1))]),_:1})]),_:1})]),_:1})]),_:1}),V(fo,{class:"mt-8"},{default:Ge(()=>[V(na,{cols:"12"},{default:Ge(()=>[...a[13]||(a[13]=[q("p",{class:"text-h6 text-center mb-4"},"Our Products",-1)])]),_:1}),V(na,{cols:"12",md:"6"},{default:Ge(()=>[V(ss,{elevation:"2"},{default:Ge(()=>[V(Xr,{src:en(AB),height:"400",contain:""},null,8,["src"])]),_:1})]),_:1}),V(na,{cols:"12",md:"6"},{default:Ge(()=>[V(ss,{elevation:"2"},{default:Ge(()=>[V(Xr,{src:en(EB),height:"400",contain:""},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),LB=Np(zB,[["__scopeId","data-v-511997e6"]]);function BB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gm={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */var RB=Gm.exports,c1;function FB(){return c1||(c1=1,(function(e,i){(function(a,o){e.exports=o()})(RB,(function(){var a={},o={};function c(h,l,b){if(o[h]=b,h==="index"){var S="var sharedModule = {}; ("+o.shared+")(sharedModule); ("+o.worker+")(sharedModule);",w={};return o.shared(w),o.index(a,w),typeof window<"u"&&a.setWorkerUrl(window.URL.createObjectURL(new Blob([S],{type:"text/javascript"}))),a}}c("shared",["exports"],(function(h){function l(r,n,s,d){return new(s||(s=Promise))((function(g,_){function x(D){try{T(d.next(D))}catch(O){_(O)}}function C(D){try{T(d.throw(D))}catch(O){_(O)}}function T(D){var O;D.done?g(D.value):(O=D.value,O instanceof s?O:new s((function(N){N(O)}))).then(x,C)}T((d=d.apply(r,n||[])).next())}))}function b(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}typeof SuppressedError=="function"&&SuppressedError;var S=w;function w(r,n){this.x=r,this.y=n}w.prototype={clone:function(){return new w(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,n){return this.clone()._rotateAround(r,n)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var n=r.x-this.x,s=r.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,n){return Math.atan2(this.x*n-this.y*r,this.x*r+this.y*n)},_matMult:function(r){var n=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=n,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var n=Math.cos(r),s=Math.sin(r),d=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=d,this},_rotateAround:function(r,n){var s=Math.cos(r),d=Math.sin(r),g=n.y+d*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-d*(this.y-n.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},w.convert=function(r){return r instanceof w?r:Array.isArray(r)?new w(r[0],r[1]):r};var k=b(S),I=E;function E(r,n,s,d){this.cx=3*r,this.bx=3*(s-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(d-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=n,this.p2x=s,this.p2y=d}E.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,n){if(n===void 0&&(n=1e-6),r<0)return 0;if(r>1)return 1;for(var s=r,d=0;d<8;d++){var g=this.sampleCurveX(s)-r;if(Math.abs(g)<n)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=g/_}var x=0,C=1;for(s=r,d=0;d<20&&(g=this.sampleCurveX(s),!(Math.abs(g-r)<n));d++)r>g?x=s:C=s,s=.5*(C-x)+x;return s},solve:function(r,n){return this.sampleCurveY(this.solveCurveX(r,n))}};var L=b(I);let F,z;function B(){return F==null&&(F=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),F}function R(){if(z==null&&(z=!1,B())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let d=0;d<25;d++){const g=4*d;n.fillStyle=`rgb(${g},${g+1},${g+2})`,n.fillRect(d%5,Math.floor(d/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let d=0;d<100;d++)if(d%4!=3&&s[d]!==d){z=!0;break}}}return z||!1}function Z(r,n,s,d){const g=new L(r,n,s,d);return _=>g.solve(_)}const Y=Z(.25,.1,.25,1);function J(r,n,s){return Math.min(s,Math.max(n,r))}function ae(r,n,s){const d=s-n,g=((r-n)%d+d)%d+n;return g===n?s:g}function he(r,...n){for(const s of n)for(const d in s)r[d]=s[d];return r}let te=1;function re(r,n,s){const d={};for(const g in r)d[g]=n.call(this,r[g],g,r);return d}function ie(r,n,s){const d={};for(const g in r)n.call(this,r[g],g,r)&&(d[g]=r[g]);return d}function ue(r){return Array.isArray(r)?r.map(ue):typeof r=="object"&&r?re(r,ue):r}const Q={};function pe(r){Q[r]||(typeof console<"u"&&console.warn(r),Q[r]=!0)}function Ce(r,n,s){return(s.y-r.y)*(n.x-r.x)>(n.y-r.y)*(s.x-r.x)}function $e(r){return typeof WorkerGlobalScope<"u"&&r!==void 0&&r instanceof WorkerGlobalScope}let Xe=null;function Ye(r){return typeof ImageBitmap<"u"&&r instanceof ImageBitmap}const qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Te(r,n,s,d,g){return l(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(r,{timestamp:0});try{const x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const C=x.startsWith("BGR"),T=new Uint8ClampedArray(d*g*4);if(yield _.copyTo(T,(function(D,O,N,H,X){const ne=4*Math.max(-O,0),oe=(Math.max(0,N)-N)*H*4+ne,ye=4*H,Ie=Math.max(0,O),Ze=Math.max(0,N);return{rect:{x:Ie,y:Ze,width:Math.min(D.width,O+H)-Ie,height:Math.min(D.height,N+X)-Ze},layout:[{offset:oe,stride:ye}]}})(r,n,s,d,g)),C)for(let D=0;D<T.length;D+=4){const O=T[D];T[D]=T[D+2],T[D+2]=O}return T}finally{_.close()}}))}let Me,Ve;const Fe="AbortError";function Be(){return new Error(Fe)}const lt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function vt(r){return lt.REGISTERED_PROTOCOLS[r.substring(0,r.indexOf("://"))]}const kt="global-dispatcher";class ge extends Error{constructor(n,s,d,g){super(`AJAXError: ${s} (${n}): ${d}`),this.status=n,this.statusText=s,this.url=d,this.body=g}}const je=()=>$e(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,rt=function(r,n){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){const d=vt(r.url);if(d)return d(r,n);if($e(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,targetMapId:kt},n)}if(!(/^file:/.test(s=r.url)||/^file:/.test(je())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(d,g){return l(this,void 0,void 0,(function*(){const _=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:je(),signal:g.signal});d.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");const x=yield fetch(_);if(!x.ok){const D=yield x.blob();throw new ge(x.status,x.statusText,d.url,D)}let C;C=d.type==="arrayBuffer"||d.type==="image"?x.arrayBuffer():d.type==="json"?x.json():x.text();const T=yield C;if(g.signal.aborted)throw Be();return{data:T,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}}))})(r,n);if($e(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,mustQueue:!0,targetMapId:kt},n)}var s;return(function(d,g){return new Promise(((_,x)=>{var C;const T=new XMLHttpRequest;T.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(T.responseType="arraybuffer");for(const D in d.headers)T.setRequestHeader(D,d.headers[D]);d.type==="json"&&(T.responseType="text",!((C=d.headers)===null||C===void 0)&&C.Accept||T.setRequestHeader("Accept","application/json")),T.withCredentials=d.credentials==="include",T.onerror=()=>{x(new Error(T.statusText))},T.onload=()=>{if(!g.signal.aborted)if((T.status>=200&&T.status<300||T.status===0)&&T.response!==null){let D=T.response;if(d.type==="json")try{D=JSON.parse(T.response)}catch(O){return void x(O)}_({data:D,cacheControl:T.getResponseHeader("Cache-Control"),expires:T.getResponseHeader("Expires")})}else{const D=new Blob([T.response],{type:T.getResponseHeader("Content-Type")});x(new ge(T.status,T.statusText,d.url,D))}},g.signal.addEventListener("abort",(()=>{T.abort(),x(Be())})),T.send(d.body)}))})(r,n)};function ft(r){if(!r||r.indexOf("://")<=0||r.indexOf("data:image/")===0||r.indexOf("blob:")===0)return!0;const n=new URL(r),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function Rt(r,n,s){s[r]&&s[r].indexOf(n)!==-1||(s[r]=s[r]||[],s[r].push(n))}function fe(r,n,s){if(s&&s[r]){const d=s[r].indexOf(n);d!==-1&&s[r].splice(d,1)}}class se{constructor(n,s={}){he(this,s),this.type=n}}class Se extends se{constructor(n,s={}){super("error",he({error:n},s))}}class xe{on(n,s){return this._listeners=this._listeners||{},Rt(n,s,this._listeners),this}off(n,s){return fe(n,s,this._listeners),fe(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Rt(n,s,this._oneTimeListeners),this):new Promise((d=>this.once(n,d)))}fire(n,s){typeof n=="string"&&(n=new se(n,s||{}));const d=n.type;if(this.listens(d)){n.target=this;const g=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const C of g)C.call(this,n);const _=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const C of _)fe(d,C,this._oneTimeListeners),C.call(this,n);const x=this._eventedParent;x&&(he(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof Se&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var le={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ke=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ht(r,n){const s={};for(const d in r)d!=="ref"&&(s[d]=r[d]);return Ke.forEach((d=>{d in n&&(s[d]=n[d])})),s}function et(r,n){if(Array.isArray(r)){if(!Array.isArray(n)||r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(!et(r[s],n[s]))return!1;return!0}if(typeof r=="object"&&r!==null&&n!==null){if(typeof n!="object"||Object.keys(r).length!==Object.keys(n).length)return!1;for(const s in r)if(!et(r[s],n[s]))return!1;return!0}return r===n}function tt(r,n){r.push(n)}function dt(r,n,s){tt(s,{command:"addSource",args:[r,n[r]]})}function yt(r,n,s){tt(n,{command:"removeSource",args:[r]}),s[r]=!0}function It(r,n,s,d){yt(r,s,d),dt(r,n,s)}function Ut(r,n,s){let d;for(d in r[s])if(Object.prototype.hasOwnProperty.call(r[s],d)&&d!=="data"&&!et(r[s][d],n[s][d]))return!1;for(d in n[s])if(Object.prototype.hasOwnProperty.call(n[s],d)&&d!=="data"&&!et(r[s][d],n[s][d]))return!1;return!0}function nn(r,n,s,d,g,_){r=r||{},n=n||{};for(const x in r)Object.prototype.hasOwnProperty.call(r,x)&&(et(r[x],n[x])||s.push({command:_,args:[d,x,n[x],g]}));for(const x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(r,x)&&(et(r[x],n[x])||s.push({command:_,args:[d,x,n[x],g]}))}function bn(r){return r.id}function Pn(r,n){return r[n.id]=n,r}class mt{constructor(n,s,d,g){this.message=(n?`${n}: `:"")+d,g&&(this.identifier=g),s!=null&&s.__line__&&(this.line=s.__line__)}}function Hn(r,...n){for(const s of n)for(const d in s)r[d]=s[d];return r}class Fn extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Ei{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[d,g]of s)this.bindings[d]=g}concat(n){return new Ei(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Ni={kind:"null"},Pt={kind:"number"},xn={kind:"string"},Jt={kind:"boolean"},di={kind:"color"},Pa={kind:"object"},hn={kind:"value"},Rr={kind:"collator"},es={kind:"formatted"},gs={kind:"padding"},Fr={kind:"resolvedImage"},ke={kind:"variableAnchorOffsetCollection"};function W(r,n){return{kind:"array",itemType:r,N:n}}function G(r){if(r.kind==="array"){const n=G(r.itemType);return typeof r.N=="number"?`array<${n}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${n}>`}return r.kind}const ce=[Ni,Pt,xn,Jt,di,es,Pa,W(hn),gs,Fr,ke];function _e(r,n){if(n.kind==="error")return null;if(r.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!_e(r.itemType,n.itemType))&&(typeof r.N!="number"||r.N===n.N))return null}else{if(r.kind===n.kind)return null;if(r.kind==="value"){for(const s of ce)if(!_e(s,n))return null}}return`Expected ${G(r)} but found ${G(n)} instead.`}function Le(r,n){return n.some((s=>s.kind===r.kind))}function Ne(r,n){return n.some((s=>s==="null"?r===null:s==="array"?Array.isArray(r):s==="object"?r&&!Array.isArray(r)&&typeof r=="object":s===typeof r))}function We(r,n){return r.kind==="array"&&n.kind==="array"?r.itemType.kind===n.itemType.kind&&typeof r.N=="number":r.kind===n.kind}const Ee=.96422,ut=.82521,_t=4/29,at=6/29,At=3*at*at,an=at*at*at,sn=Math.PI/180,Vn=180/Math.PI;function yn(r){return(r%=360)<0&&(r+=360),r}function zn([r,n,s,d]){let g,_;const x=zi((.2225045*(r=Tn(r))+.7168786*(n=Tn(n))+.0606169*(s=Tn(s)))/1);r===n&&n===s?g=_=x:(g=zi((.4360747*r+.3850649*n+.1430804*s)/Ee),_=zi((.0139322*r+.0971045*n+.7141733*s)/ut));const C=116*x-16;return[C<0?0:C,500*(g-x),200*(x-_),d]}function Tn(r){return r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function zi(r){return r>an?Math.pow(r,1/3):r/At+_t}function _i([r,n,s,d]){let g=(r+16)/116,_=isNaN(n)?g:g+n/500,x=isNaN(s)?g:g-s/200;return g=1*qn(g),_=Ee*qn(_),x=ut*qn(x),[Cn(3.1338561*_-1.6168667*g-.4906146*x),Cn(-.9787684*_+1.9161415*g+.033454*x),Cn(.0719453*_-.2289914*g+1.4052427*x),d]}function Cn(r){return(r=r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055)<0?0:r>1?1:r}function qn(r){return r>at?r*r*r:At*(r-_t)}function hi(r){return parseInt(r.padEnd(2,r),16)/255}function Wi(r,n){return Qi(n?r/100:r,0,1)}function Qi(r,n,s){return Math.min(Math.max(n,r),s)}function ya(r){return!r.some(Number.isNaN)}const So={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Gn{constructor(n,s,d,g=1,_=!0){this.r=n,this.g=s,this.b=d,this.a=g,_||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[n,s,d,g]))}static parse(n){if(n instanceof Gn)return n;if(typeof n!="string")return;const s=(function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=So[d];if(g){const[x,C,T]=g;return[x/255,C/255,T/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const x=d.length<6?1:2;let C=1;return[hi(d.slice(C,C+=x)),hi(d.slice(C,C+=x)),hi(d.slice(C,C+=x)),hi(d.slice(C,C+x)||"ff")]}if(d.startsWith("rgb")){const x=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[C,T,D,O,N,H,X,ne,oe,ye,Ie,Ze]=x,ze=[O||" ",X||" ",ye].join("");if(ze==="  "||ze==="  /"||ze===",,"||ze===",,,"){const He=[D,H,oe].join(""),ot=He==="%%%"?100:He===""?255:0;if(ot){const wt=[Qi(+T/ot,0,1),Qi(+N/ot,0,1),Qi(+ne/ot,0,1),Ie?Wi(+Ie,Ze):1];if(ya(wt))return wt}}return}}const _=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,C,T,D,O,N,H,X,ne]=_,oe=[T||" ",O||" ",H].join("");if(oe==="  "||oe==="  /"||oe===",,"||oe===",,,"){const ye=[+C,Qi(+D,0,100),Qi(+N,0,100),X?Wi(+X,ne):1];if(ya(ye))return(function([Ie,Ze,ze,He]){function ot(wt){const Nt=(wt+Ie/30)%12,on=Ze*Math.min(ze,1-ze);return ze-on*Math.max(-1,Math.min(Nt-3,9-Nt,1))}return Ie=yn(Ie),Ze/=100,ze/=100,[ot(0),ot(8),ot(4),He]})(ye)}}})(n);return s?new Gn(...s,!1):void 0}get rgb(){const{r:n,g:s,b:d,a:g}=this,_=g||1/0;return this.overwriteGetter("rgb",[n/_,s/_,d/_,g])}get hcl(){return this.overwriteGetter("hcl",(function(n){const[s,d,g,_]=zn(n),x=Math.sqrt(d*d+g*g);return[Math.round(1e4*x)?yn(Math.atan2(g,d)*Vn):NaN,x,s,_]})(this.rgb))}get lab(){return this.overwriteGetter("lab",zn(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,d,g]=this.rgb;return`rgba(${[n,s,d].map((_=>Math.round(255*_))).join(",")},${g})`}}Gn.black=new Gn(0,0,0,1),Gn.white=new Gn(1,1,1,1),Gn.transparent=new Gn(0,0,0,0),Gn.red=new Gn(1,0,0,1);class ud{constructor(n,s,d){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class cd{constructor(n,s,d,g,_){this.text=n,this.image=s,this.scale=d,this.fontStack=g,this.textColor=_}}class Wa{constructor(n){this.sections=n}static fromString(n){return new Wa([new cd(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((n=>n.text.length!==0||n.image&&n.image.name.length!==0))}static factory(n){return n instanceof Wa?n:Wa.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map((n=>n.text)).join("")}}class Za{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Za)return n;if(typeof n=="number")return new Za([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Za(n)}}toString(){return JSON.stringify(this.values)}}const rg=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class or{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof or)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const d=n[s],g=n[s+1];if(typeof d!="string"||!rg.has(d)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new or(n)}}toString(){return JSON.stringify(this.values)}}class Ka{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Ka({name:n,available:!1}):null}}function ko(r,n,s,d){return typeof r=="number"&&r>=0&&r<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[r,n,s,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[r,n,s,d]:[r,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ns(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Gn||r instanceof ud||r instanceof Wa||r instanceof Za||r instanceof or||r instanceof Ka)return!0;if(Array.isArray(r)){for(const n of r)if(!Ns(n))return!1;return!0}if(typeof r=="object"){for(const n in r)if(!Ns(r[n]))return!1;return!0}return!1}function Li(r){if(r===null)return Ni;if(typeof r=="string")return xn;if(typeof r=="boolean")return Jt;if(typeof r=="number")return Pt;if(r instanceof Gn)return di;if(r instanceof ud)return Rr;if(r instanceof Wa)return es;if(r instanceof Za)return gs;if(r instanceof or)return ke;if(r instanceof Ka)return Fr;if(Array.isArray(r)){const n=r.length;let s;for(const d of r){const g=Li(d);if(s){if(s===g)continue;s=hn;break}s=g}return W(s||hn,n)}return Pa}function kl(r){const n=typeof r;return r===null?"":n==="string"||n==="number"||n==="boolean"?String(r):r instanceof Gn||r instanceof Wa||r instanceof Za||r instanceof or||r instanceof Ka?r.toString():JSON.stringify(r)}class vr{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ns(n[1]))return s.error("invalid value");const d=n[1];let g=Li(d);const _=s.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new vr(g,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Mi{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Du={string:xn,number:Pt,boolean:Jt,object:Pa};class yr{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let d,g=1;const _=n[0];if(_==="array"){let C,T;if(n.length>2){const D=n[1];if(typeof D!="string"||!(D in Du)||D==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);C=Du[D],g++}else C=hn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);T=n[2],g++}d=W(C,T)}else{if(!Du[_])throw new Error(`Types doesn't contain name = ${_}`);d=Du[_]}const x=[];for(;g<n.length;g++){const C=s.parse(n[g],g,hn);if(!C)return null;x.push(C)}return new yr(d,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const d=this.args[s].evaluate(n);if(!_e(this.type,Li(d)))return d;if(s===this.args.length-1)throw new Mi(`Expected value to be of type ${G(this.type)}, but found ${G(Li(d))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}const dd={"to-boolean":Jt,"to-color":di,"to-number":Pt,"to-string":xn};class _r{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const d=n[0];if(!dd[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&n.length!==2)return s.error("Expected one argument.");const g=dd[d],_=[];for(let x=1;x<n.length;x++){const C=s.parse(n[x],x,hn);if(!C)return null;_.push(C)}return new _r(g,_)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,d;for(const g of this.args){if(s=g.evaluate(n),d=null,s instanceof Gn)return s;if(typeof s=="string"){const _=n.parseColor(s);if(_)return _}else if(Array.isArray(s)&&(d=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:ko(s[0],s[1],s[2],s[3]),!d))return new Gn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Mi(d||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const d of this.args){s=d.evaluate(n);const g=Za.parse(s);if(g)return g}throw new Mi(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const d of this.args){s=d.evaluate(n);const g=or.parse(s);if(g)return g}throw new Mi(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const d of this.args){if(s=d.evaluate(n),s===null)return 0;const g=Number(s);if(!isNaN(g))return g}throw new Mi(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return Wa.fromString(kl(this.args[0].evaluate(n)));case"resolvedImage":return Ka.fromString(kl(this.args[0].evaluate(n)));default:return kl(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}const sg=["Unknown","Point","LineString","Polygon"];class Vu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?sg[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=Gn.parse(n)),s}}class js{constructor(n,s,d=[],g,_=new Ei,x=[]){this.registry=n,this.path=d,this.key=d.map((C=>`[${C}]`)).join(""),this.scope=_,this.errors=x,this.expectedType=g,this._isConstant=s}parse(n,s,d,g,_={}){return s?this.concat(s,d,g)._parse(n,_):this._parse(n,_)}_parse(n,s){function d(g,_,x){return x==="assert"?new yr(_,[g]):x==="coerce"?new _r(_,[g]):g}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=n[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let x=_.parse(n,this);if(!x)return null;if(this.expectedType){const C=this.expectedType,T=x.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||T.kind!=="value")if(C.kind!=="color"&&C.kind!=="formatted"&&C.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string")if(C.kind!=="padding"||T.kind!=="value"&&T.kind!=="number"&&T.kind!=="array")if(C.kind!=="variableAnchorOffsetCollection"||T.kind!=="value"&&T.kind!=="array"){if(this.checkSubtype(C,T))return null}else x=d(x,C,s.typeAnnotation||"coerce");else x=d(x,C,s.typeAnnotation||"coerce");else x=d(x,C,s.typeAnnotation||"coerce");else x=d(x,C,s.typeAnnotation||"assert")}if(!(x instanceof vr)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const C=new Vu;try{x=new vr(x.type,x.evaluate(C))}catch(T){return this.error(T.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,d){const g=typeof n=="number"?this.path.concat(n):this.path,_=d?this.scope.concat(d):this.scope;return new js(this.registry,this._isConstant,g,s||null,_,this.errors)}error(n,...s){const d=`${this.key}${s.map((g=>`[${g}]`)).join("")}`;this.errors.push(new Fn(d,n))}checkSubtype(n,s){const d=_e(n,s);return d&&this.error(d),d}}class vs{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const d=[];for(let _=1;_<n.length-1;_+=2){const x=n[_];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",_);const C=s.parse(n[_+1],_+1);if(!C)return null;d.push([x,C])}const g=s.parse(n[n.length-1],n.length-1,s.expectedType,d);return g?new vs(d,g):null}outputDefined(){return this.result.outputDefined()}}class Rn{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const d=n[1];return s.scope.has(d)?new Rn(d,s.scope.get(d)):s.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class hd{constructor(n,s,d){this.type=n,this.index=s,this.input=d}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,Pt),g=s.parse(n[2],2,W(s.expectedType||hn));return d&&g?new hd(g.type.itemType,d,g):null}evaluate(n){const s=this.index.evaluate(n),d=this.input.evaluate(n);if(s<0)throw new Mi(`Array index out of bounds: ${s} < 0.`);if(s>=d.length)throw new Mi(`Array index out of bounds: ${s} > ${d.length-1}.`);if(s!==Math.floor(s))throw new Mi(`Array index must be an integer, but found ${s} instead.`);return d[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class fd{constructor(n,s){this.type=Jt,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,hn),g=s.parse(n[2],2,hn);return d&&g?Le(d.type,[Jt,xn,Pt,Ni,hn])?new fd(d,g):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${G(d.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!d)return!1;if(!Ne(s,["boolean","string","number","null"]))throw new Mi(`Expected first argument to be of type boolean, string, number or null, but found ${G(Li(s))} instead.`);if(!Ne(d,["string","array"]))throw new Mi(`Expected second argument to be of type array or string, but found ${G(Li(d))} instead.`);return d.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Co{constructor(n,s,d){this.type=Pt,this.needle=n,this.haystack=s,this.fromIndex=d}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,hn),g=s.parse(n[2],2,hn);if(!d||!g)return null;if(!Le(d.type,[Jt,xn,Pt,Ni,hn]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${G(d.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,Pt);return _?new Co(d,g,_):null}return new Co(d,g)}evaluate(n){const s=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!Ne(s,["boolean","string","number","null"]))throw new Mi(`Expected first argument to be of type boolean, string, number or null, but found ${G(Li(s))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(n)),Ne(d,["string"])){const _=d.indexOf(s,g);return _===-1?-1:[...d.slice(0,_)].length}if(Ne(d,["array"]))return d.indexOf(s,g);throw new Mi(`Expected second argument to be of type array or string, but found ${G(Li(d))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class md{constructor(n,s,d,g,_,x){this.inputType=n,this.type=s,this.input=d,this.cases=g,this.outputs=_,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let d,g;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);const _={},x=[];for(let D=2;D<n.length-1;D+=2){let O=n[D];const N=n[D+1];Array.isArray(O)||(O=[O]);const H=s.concat(D);if(O.length===0)return H.error("Expected at least one branch label.");for(const ne of O){if(typeof ne!="number"&&typeof ne!="string")return H.error("Branch labels must be numbers or strings.");if(typeof ne=="number"&&Math.abs(ne)>Number.MAX_SAFE_INTEGER)return H.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ne=="number"&&Math.floor(ne)!==ne)return H.error("Numeric branch labels must be integer values.");if(d){if(H.checkSubtype(d,Li(ne)))return null}else d=Li(ne);if(_[String(ne)]!==void 0)return H.error("Branch labels must be unique.");_[String(ne)]=x.length}const X=s.parse(N,D,g);if(!X)return null;g=g||X.type,x.push(X)}const C=s.parse(n[1],1,hn);if(!C)return null;const T=s.parse(n[n.length-1],n.length-1,g);return T?C.type.kind!=="value"&&s.concat(1).checkSubtype(d,C.type)?null:new md(d,g,C,_,x,T):null}evaluate(n){const s=this.input.evaluate(n);return(Li(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))&&this.otherwise.outputDefined()}}class zu{constructor(n,s,d){this.type=n,this.branches=s,this.otherwise=d}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let d;s.expectedType&&s.expectedType.kind!=="value"&&(d=s.expectedType);const g=[];for(let x=1;x<n.length-1;x+=2){const C=s.parse(n[x],x,Jt);if(!C)return null;const T=s.parse(n[x+1],x+1,d);if(!T)return null;g.push([C,T]),d=d||T.type}const _=s.parse(n[n.length-1],n.length-1,d);if(!_)return null;if(!d)throw new Error("Can't infer output type");return new zu(d,g,_)}evaluate(n){for(const[s,d]of this.branches)if(s.evaluate(n))return d.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,d]of this.branches)n(s),n(d);n(this.otherwise)}outputDefined(){return this.branches.every((([n,s])=>s.outputDefined()))&&this.otherwise.outputDefined()}}class Cl{constructor(n,s,d,g){this.type=n,this.input=s,this.beginIndex=d,this.endIndex=g}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,hn),g=s.parse(n[2],2,Pt);if(!d||!g)return null;if(!Le(d.type,[W(hn),xn,hn]))return s.error(`Expected first argument to be of type array or string, but found ${G(d.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,Pt);return _?new Cl(d.type,d,g,_):null}return new Cl(d.type,d,g)}evaluate(n){const s=this.input.evaluate(n),d=this.beginIndex.evaluate(n);let g;if(this.endIndex&&(g=this.endIndex.evaluate(n)),Ne(s,["string"]))return[...s].slice(d,g).join("");if(Ne(s,["array"]))return s.slice(d,g);throw new Mi(`Expected first argument to be of type array or string, but found ${G(Li(s))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Lu(r,n){const s=r.length-1;let d,g,_=0,x=s,C=0;for(;_<=x;)if(C=Math.floor((_+x)/2),d=r[C],g=r[C+1],d<=n){if(C===s||n<g)return C;_=C+1}else{if(!(d>n))throw new Mi("Input is not a number.");x=C-1}return 0}class Io{constructor(n,s,d){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[g,_]of d)this.labels.push(g),this.outputs.push(_)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const d=s.parse(n[1],1,Pt);if(!d)return null;const g=[];let _=null;s.expectedType&&s.expectedType.kind!=="value"&&(_=s.expectedType);for(let x=1;x<n.length;x+=2){const C=x===1?-1/0:n[x],T=n[x+1],D=x,O=x+1;if(typeof C!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(g.length&&g[g.length-1][0]>=C)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const N=s.parse(T,O,_);if(!N)return null;_=_||N.type,g.push([C,N])}return new Io(_,d,g)}evaluate(n){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(n);const g=this.input.evaluate(n);if(g<=s[0])return d[0].evaluate(n);const _=s.length;return g>=s[_-1]?d[_-1].evaluate(n):d[Lu(s,g)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))}}function Pf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var og=Tf;function Tf(r,n,s,d){this.cx=3*r,this.bx=3*(s-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(d-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=n,this.p2x=s,this.p2y=d}Tf.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,n){if(n===void 0&&(n=1e-6),r<0)return 0;if(r>1)return 1;for(var s=r,d=0;d<8;d++){var g=this.sampleCurveX(s)-r;if(Math.abs(g)<n)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=g/_}var x=0,C=1;for(s=r,d=0;d<20&&(g=this.sampleCurveX(s),!(Math.abs(g-r)<n));d++)r>g?x=s:C=s,s=.5*(C-x)+x;return s},solve:function(r,n){return this.sampleCurveY(this.solveCurveX(r,n))}};var lg=Pf(og);function Us(r,n,s){return r+s*(n-r)}function Il(r,n,s){return r.map(((d,g)=>Us(d,n[g],s)))}const Ta={number:Us,color:function(r,n,s,d="rgb"){switch(d){case"rgb":{const[g,_,x,C]=Il(r.rgb,n.rgb,s);return new Gn(g,_,x,C,!1)}case"hcl":{const[g,_,x,C]=r.hcl,[T,D,O,N]=n.hcl;let H,X;if(isNaN(g)||isNaN(T))isNaN(g)?isNaN(T)?H=NaN:(H=T,x!==1&&x!==0||(X=D)):(H=g,O!==1&&O!==0||(X=_));else{let Ze=T-g;T>g&&Ze>180?Ze-=360:T<g&&g-T>180&&(Ze+=360),H=g+s*Ze}const[ne,oe,ye,Ie]=(function([Ze,ze,He,ot]){return Ze=isNaN(Ze)?0:Ze*sn,_i([He,Math.cos(Ze)*ze,Math.sin(Ze)*ze,ot])})([H,X??Us(_,D,s),Us(x,O,s),Us(C,N,s)]);return new Gn(ne,oe,ye,Ie,!1)}case"lab":{const[g,_,x,C]=_i(Il(r.lab,n.lab,s));return new Gn(g,_,x,C,!1)}}},array:Il,padding:function(r,n,s){return new Za(Il(r.values,n.values,s))},variableAnchorOffsetCollection:function(r,n,s){const d=r.values,g=n.values;if(d.length!==g.length)throw new Mi(`Cannot interpolate values of different length. from: ${r.toString()}, to: ${n.toString()}`);const _=[];for(let x=0;x<d.length;x+=2){if(d[x]!==g[x])throw new Mi(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${d[x]}, to[${x}]: ${g[x]}`);_.push(d[x]);const[C,T]=d[x+1],[D,O]=g[x+1];_.push([Us(C,D,s),Us(T,O,s)])}return new or(_)}};class Aa{constructor(n,s,d,g,_){this.type=n,this.operator=s,this.interpolation=d,this.input=g,this.labels=[],this.outputs=[];for(const[x,C]of _)this.labels.push(x),this.outputs.push(C)}static interpolationFactor(n,s,d,g){let _=0;if(n.name==="exponential")_=Bu(s,n.base,d,g);else if(n.name==="linear")_=Bu(s,1,d,g);else if(n.name==="cubic-bezier"){const x=n.controlPoints;_=new lg(x[0],x[1],x[2],x[3]).solve(Bu(s,1,d,g))}return _}static parse(n,s){let[d,g,_,...x]=n;if(!Array.isArray(g)||g.length===0)return s.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const D=g[1];if(typeof D!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:D}}else{if(g[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const D=g.slice(1);if(D.length!==4||D.some((O=>typeof O!="number"||O<0||O>1)))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:D}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(_=s.parse(_,2,Pt),!_)return null;const C=[];let T=null;d==="interpolate-hcl"||d==="interpolate-lab"?T=di:s.expectedType&&s.expectedType.kind!=="value"&&(T=s.expectedType);for(let D=0;D<x.length;D+=2){const O=x[D],N=x[D+1],H=D+3,X=D+4;if(typeof O!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(C.length&&C[C.length-1][0]>=O)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);const ne=s.parse(N,X,T);if(!ne)return null;T=T||ne.type,C.push([O,ne])}return We(T,Pt)||We(T,di)||We(T,gs)||We(T,ke)||We(T,W(Pt))?new Aa(T,d,g,_,C):s.error(`Type ${G(T)} is not interpolatable.`)}evaluate(n){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(n);const g=this.input.evaluate(n);if(g<=s[0])return d[0].evaluate(n);const _=s.length;if(g>=s[_-1])return d[_-1].evaluate(n);const x=Lu(s,g),C=Aa.interpolationFactor(this.interpolation,g,s[x],s[x+1]),T=d[x].evaluate(n),D=d[x+1].evaluate(n);switch(this.operator){case"interpolate":return Ta[this.type.kind](T,D,C);case"interpolate-hcl":return Ta.color(T,D,C,"hcl");case"interpolate-lab":return Ta.color(T,D,C,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))}}function Bu(r,n,s,d){const g=d-s,_=r-s;return g===0?0:n===1?_/g:(Math.pow(n,_)-1)/(Math.pow(n,g)-1)}class Ru{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let d=null;const g=s.expectedType;g&&g.kind!=="value"&&(d=g);const _=[];for(const C of n.slice(1)){const T=s.parse(C,1+_.length,d,void 0,{typeAnnotation:"omit"});if(!T)return null;d=d||T.type,_.push(T)}if(!d)throw new Error("No output type");const x=g&&_.some((C=>_e(g,C.type)));return new Ru(x?hn:d,_)}evaluate(n){let s,d=null,g=0;for(const _ of this.args)if(g++,d=_.evaluate(n),d&&d instanceof Ka&&!d.available&&(s||(s=d.name),d=null,g===this.args.length&&(d=s)),d!==null)break;return d}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}function Fu(r,n){return r==="=="||r==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Af(r,n,s,d){return d.compare(n,s)===0}function Po(r,n,s){const d=r!=="=="&&r!=="!=";return class o2{constructor(_,x,C){this.type=Jt,this.lhs=_,this.rhs=x,this.collator=C,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const C=_[0];let T=x.parse(_[1],1,hn);if(!T)return null;if(!Fu(C,T.type))return x.concat(1).error(`"${C}" comparisons are not supported for type '${G(T.type)}'.`);let D=x.parse(_[2],2,hn);if(!D)return null;if(!Fu(C,D.type))return x.concat(2).error(`"${C}" comparisons are not supported for type '${G(D.type)}'.`);if(T.type.kind!==D.type.kind&&T.type.kind!=="value"&&D.type.kind!=="value")return x.error(`Cannot compare types '${G(T.type)}' and '${G(D.type)}'.`);d&&(T.type.kind==="value"&&D.type.kind!=="value"?T=new yr(D.type,[T]):T.type.kind!=="value"&&D.type.kind==="value"&&(D=new yr(T.type,[D])));let O=null;if(_.length===4){if(T.type.kind!=="string"&&D.type.kind!=="string"&&T.type.kind!=="value"&&D.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(O=x.parse(_[3],3,Rr),!O)return null}return new o2(T,D,O)}evaluate(_){const x=this.lhs.evaluate(_),C=this.rhs.evaluate(_);if(d&&this.hasUntypedArgument){const T=Li(x),D=Li(C);if(T.kind!==D.kind||T.kind!=="string"&&T.kind!=="number")throw new Mi(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${T.kind}, ${D.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const T=Li(x),D=Li(C);if(T.kind!=="string"||D.kind!=="string")return n(_,x,C)}return this.collator?s(_,x,C,this.collator.evaluate(_)):n(_,x,C)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const ug=Po("==",(function(r,n,s){return n===s}),Af),Ef=Po("!=",(function(r,n,s){return n!==s}),(function(r,n,s,d){return!Af(0,n,s,d)})),Mf=Po("<",(function(r,n,s){return n<s}),(function(r,n,s,d){return d.compare(n,s)<0})),cg=Po(">",(function(r,n,s){return n>s}),(function(r,n,s,d){return d.compare(n,s)>0})),dg=Po("<=",(function(r,n,s){return n<=s}),(function(r,n,s,d){return d.compare(n,s)<=0})),Df=Po(">=",(function(r,n,s){return n>=s}),(function(r,n,s,d){return d.compare(n,s)>=0}));class Pl{constructor(n,s,d){this.type=Rr,this.locale=d,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const d=n[1];if(typeof d!="object"||Array.isArray(d))return s.error("Collator options argument must be an object.");const g=s.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Jt);if(!g)return null;const _=s.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Jt);if(!_)return null;let x=null;return d.locale&&(x=s.parse(d.locale,1,xn),!x)?null:new Pl(g,_,x)}evaluate(n){return new ud(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class pd{constructor(n,s,d,g,_){this.type=xn,this.number=n,this.locale=s,this.currency=d,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const d=s.parse(n[1],1,Pt);if(!d)return null;const g=n[2];if(typeof g!="object"||Array.isArray(g))return s.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=s.parse(g.locale,1,xn),!_))return null;let x=null;if(g.currency&&(x=s.parse(g.currency,1,xn),!x))return null;let C=null;if(g["min-fraction-digits"]&&(C=s.parse(g["min-fraction-digits"],1,Pt),!C))return null;let T=null;return g["max-fraction-digits"]&&(T=s.parse(g["max-fraction-digits"],1,Pt),!T)?null:new pd(d,_,x,C,T)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Ou{constructor(n){this.type=es,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const d=n[1];if(!Array.isArray(d)&&typeof d=="object")return s.error("First argument must be an image or text section.");const g=[];let _=!1;for(let x=1;x<=n.length-1;++x){const C=n[x];if(_&&typeof C=="object"&&!Array.isArray(C)){_=!1;let T=null;if(C["font-scale"]&&(T=s.parse(C["font-scale"],1,Pt),!T))return null;let D=null;if(C["text-font"]&&(D=s.parse(C["text-font"],1,W(xn)),!D))return null;let O=null;if(C["text-color"]&&(O=s.parse(C["text-color"],1,di),!O))return null;const N=g[g.length-1];N.scale=T,N.font=D,N.textColor=O}else{const T=s.parse(n[x],1,hn);if(!T)return null;const D=T.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:T,scale:null,font:null,textColor:null})}}return new Ou(g)}evaluate(n){return new Wa(this.sections.map((s=>{const d=s.content.evaluate(n);return Li(d)===Fr?new cd("",d,null,null,null):new cd(kl(d),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)})))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class gd{constructor(n){this.type=Fr,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const d=s.parse(n[1],1,xn);return d?new gd(d):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),d=Ka.fromString(s);return d&&n.availableImages&&(d.available=n.availableImages.indexOf(s)>-1),d}eachChild(n){n(this.input)}outputDefined(){return!1}}class vd{constructor(n){this.type=Pt,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const d=s.parse(n[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${G(d.type)} instead.`):new vd(d):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new Mi(`Expected value to be of type string or array, but found ${G(Li(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Or=8192;function hg(r,n){const s=(180+r[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,g=Math.pow(2,n.z);return[Math.round(s*g*Or),Math.round(d*g*Or)]}function yd(r,n){const s=Math.pow(2,n.z);return[(g=(r[0]/Or+n.x)/s,360*g-180),(d=(r[1]/Or+n.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,g}function Hs(r,n){r[0]=Math.min(r[0],n[0]),r[1]=Math.min(r[1],n[1]),r[2]=Math.max(r[2],n[0]),r[3]=Math.max(r[3],n[1])}function ys(r,n){return!(r[0]<=n[0]||r[2]>=n[2]||r[1]<=n[1]||r[3]>=n[3])}function On(r,n,s){const d=r[0]-n[0],g=r[1]-n[1],_=r[0]-s[0],x=r[1]-s[1];return d*x-_*g==0&&d*_<=0&&g*x<=0}function $u(r,n,s,d){return(g=[d[0]-s[0],d[1]-s[1]])[0]*(_=[n[0]-r[0],n[1]-r[1]])[1]-g[1]*_[0]!=0&&!(!zf(r,n,s,d)||!zf(s,d,r,n));var g,_}function fg(r,n,s){for(const d of s)for(let g=0;g<d.length-1;++g)if($u(r,n,d[g],d[g+1]))return!0;return!1}function To(r,n,s=!1){let d=!1;for(const C of n)for(let T=0;T<C.length-1;T++){if(On(r,C[T],C[T+1]))return s;(_=C[T])[1]>(g=r)[1]!=(x=C[T+1])[1]>g[1]&&g[0]<(x[0]-_[0])*(g[1]-_[1])/(x[1]-_[1])+_[0]&&(d=!d)}var g,_,x;return d}function mg(r,n){for(const s of n)if(To(r,s))return!0;return!1}function Vf(r,n){for(const s of r)if(!To(s,n))return!1;for(let s=0;s<r.length-1;++s)if(fg(r[s],r[s+1],n))return!1;return!0}function pg(r,n){for(const s of n)if(Vf(r,s))return!0;return!1}function zf(r,n,s,d){const g=d[0]-s[0],_=d[1]-s[1],x=(r[0]-s[0])*_-g*(r[1]-s[1]),C=(n[0]-s[0])*_-g*(n[1]-s[1]);return x>0&&C<0||x<0&&C>0}function _d(r,n,s){const d=[];for(let g=0;g<r.length;g++){const _=[];for(let x=0;x<r[g].length;x++){const C=hg(r[g][x],s);Hs(n,C),_.push(C)}d.push(_)}return d}function Lf(r,n,s){const d=[];for(let g=0;g<r.length;g++){const _=_d(r[g],n,s);d.push(_)}return d}function Bf(r,n,s,d){if(r[0]<s[0]||r[0]>s[2]){const g=.5*d;let _=r[0]-s[0]>g?-d:s[0]-r[0]>g?d:0;_===0&&(_=r[0]-s[2]>g?-d:s[2]-r[0]>g?d:0),r[0]+=_}Hs(n,r)}function Rf(r,n,s,d){const g=Math.pow(2,d.z)*Or,_=[d.x*Or,d.y*Or],x=[];for(const C of r)for(const T of C){const D=[T.x+_[0],T.y+_[1]];Bf(D,n,s,g),x.push(D)}return x}function Ff(r,n,s,d){const g=Math.pow(2,d.z)*Or,_=[d.x*Or,d.y*Or],x=[];for(const T of r){const D=[];for(const O of T){const N=[O.x+_[0],O.y+_[1]];Hs(n,N),D.push(N)}x.push(D)}if(n[2]-n[0]<=g/2){(C=n)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const T of x)for(const D of T)Bf(D,n,s,g)}var C;return x}class qs{constructor(n,s){this.type=Jt,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ns(n[1])){const d=n[1];if(d.type==="FeatureCollection"){const g=[];for(const _ of d.features){const{type:x,coordinates:C}=_.geometry;x==="Polygon"&&g.push(C),x==="MultiPolygon"&&g.push(...C)}if(g.length)return new qs(d,{type:"MultiPolygon",coordinates:g})}else if(d.type==="Feature"){const g=d.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new qs(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new qs(d,d)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return(function(s,d){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(d.type==="Polygon"){const C=_d(d.coordinates,_,x),T=Rf(s.geometry(),g,_,x);if(!ys(g,_))return!1;for(const D of T)if(!To(D,C))return!1}if(d.type==="MultiPolygon"){const C=Lf(d.coordinates,_,x),T=Rf(s.geometry(),g,_,x);if(!ys(g,_))return!1;for(const D of T)if(!mg(D,C))return!1}return!0})(n,this.geometries);if(n.geometryType()==="LineString")return(function(s,d){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(d.type==="Polygon"){const C=_d(d.coordinates,_,x),T=Ff(s.geometry(),g,_,x);if(!ys(g,_))return!1;for(const D of T)if(!Vf(D,C))return!1}if(d.type==="MultiPolygon"){const C=Lf(d.coordinates,_,x),T=Ff(s.geometry(),g,_,x);if(!ys(g,_))return!1;for(const D of T)if(!pg(D,C))return!1}return!0})(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Of=class{constructor(r=[],n=((s,d)=>s<d?-1:s>d?1:0)){if(this.data=r,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:n,compare:s}=this,d=n[r];for(;r>0;){const g=r-1>>1,_=n[g];if(s(d,_)>=0)break;n[r]=_,r=g}n[r]=d}_down(r){const{data:n,compare:s}=this,d=this.length>>1,g=n[r];for(;r<d;){let _=1+(r<<1);const x=_+1;if(x<this.length&&s(n[x],n[_])<0&&(_=x),s(n[_],g)>=0)break;n[r]=n[_],r=_}n[r]=g}};function gg(r,n,s,d,g){$f(r,n,s,d||r.length-1,g||vg)}function $f(r,n,s,d,g){for(;d>s;){if(d-s>600){var _=d-s+1,x=n-s+1,C=Math.log(_),T=.5*Math.exp(2*C/3),D=.5*Math.sqrt(C*T*(_-T)/_)*(x-_/2<0?-1:1);$f(r,n,Math.max(s,Math.floor(n-x*T/_+D)),Math.min(d,Math.floor(n+(_-x)*T/_+D)),g)}var O=r[n],N=s,H=d;for(Tl(r,s,n),g(r[d],O)>0&&Tl(r,s,d);N<H;){for(Tl(r,N,H),N++,H--;g(r[N],O)<0;)N++;for(;g(r[H],O)>0;)H--}g(r[s],O)===0?Tl(r,s,H):Tl(r,++H,d),H<=n&&(s=H+1),n<=H&&(d=H-1)}}function Tl(r,n,s){var d=r[n];r[n]=r[s],r[s]=d}function vg(r,n){return r<n?-1:r>n?1:0}function Nu(r,n){if(r.length<=1)return[r];const s=[];let d,g;for(const _ of r){const x=_g(_);x!==0&&(_.area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(d&&s.push(d),d=[_]):d.push(_))}if(d&&s.push(d),n>1)for(let _=0;_<s.length;_++)s[_].length<=n||(gg(s[_],n,1,s[_].length-1,yg),s[_]=s[_].slice(0,n));return s}function yg(r,n){return n.area-r.area}function _g(r){let n=0;for(let s,d,g=0,_=r.length,x=_-1;g<_;x=g++)s=r[g],d=r[x],n+=(d.x-s.x)*(s.y+d.y);return n}const Nf=1/298.257223563,jf=Nf*(2-Nf),Uf=Math.PI/180;class bd{constructor(n){const s=6378.137*Uf*1e3,d=Math.cos(n*Uf),g=1/(1-jf*(1-d*d)),_=Math.sqrt(g);this.kx=s*_*d,this.ky=s*_*g*(1-jf)}distance(n,s){const d=this.wrap(n[0]-s[0])*this.kx,g=(n[1]-s[1])*this.ky;return Math.sqrt(d*d+g*g)}pointOnLine(n,s){let d,g,_,x,C=1/0;for(let T=0;T<n.length-1;T++){let D=n[T][0],O=n[T][1],N=this.wrap(n[T+1][0]-D)*this.kx,H=(n[T+1][1]-O)*this.ky,X=0;N===0&&H===0||(X=(this.wrap(s[0]-D)*this.kx*N+(s[1]-O)*this.ky*H)/(N*N+H*H),X>1?(D=n[T+1][0],O=n[T+1][1]):X>0&&(D+=N/this.kx*X,O+=H/this.ky*X)),N=this.wrap(s[0]-D)*this.kx,H=(s[1]-O)*this.ky;const ne=N*N+H*H;ne<C&&(C=ne,d=D,g=O,_=T,x=X)}return{point:[d,g],index:_,t:Math.max(0,Math.min(1,x))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function Hf(r,n){return n[0]-r[0]}function ju(r){return r[1]-r[0]+1}function ts(r,n){return r[1]>=r[0]&&r[1]<n}function xd(r,n){if(r[0]>r[1])return[null,null];const s=ju(r);if(n){if(s===2)return[r,null];const g=Math.floor(s/2);return[[r[0],r[0]+g],[r[0]+g,r[1]]]}if(s===1)return[r,null];const d=Math.floor(s/2)-1;return[[r[0],r[0]+d],[r[0]+d+1,r[1]]]}function wd(r,n){if(!ts(n,r.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let d=n[0];d<=n[1];++d)Hs(s,r[d]);return s}function Sd(r){const n=[1/0,1/0,-1/0,-1/0];for(const s of r)for(const d of s)Hs(n,d);return n}function Uu(r){return r[0]!==-1/0&&r[1]!==-1/0&&r[2]!==1/0&&r[3]!==1/0}function kd(r,n,s){if(!Uu(r)||!Uu(n))return NaN;let d=0,g=0;return r[2]<n[0]&&(d=n[0]-r[2]),r[0]>n[2]&&(d=r[0]-n[2]),r[1]>n[3]&&(g=r[1]-n[3]),r[3]<n[1]&&(g=n[1]-r[3]),s.distance([0,0],[d,g])}function Gs(r,n,s){const d=s.pointOnLine(n,r);return s.distance(r,d.point)}function Cd(r,n,s,d,g){const _=Math.min(Gs(r,[s,d],g),Gs(n,[s,d],g)),x=Math.min(Gs(s,[r,n],g),Gs(d,[r,n],g));return Math.min(_,x)}function bg(r,n,s,d,g){if(!ts(n,r.length)||!ts(d,s.length))return 1/0;let _=1/0;for(let x=n[0];x<n[1];++x){const C=r[x],T=r[x+1];for(let D=d[0];D<d[1];++D){const O=s[D],N=s[D+1];if($u(C,T,O,N))return 0;_=Math.min(_,Cd(C,T,O,N,g))}}return _}function Ii(r,n,s,d,g){if(!ts(n,r.length)||!ts(d,s.length))return NaN;let _=1/0;for(let x=n[0];x<=n[1];++x)for(let C=d[0];C<=d[1];++C)if(_=Math.min(_,g.distance(r[x],s[C])),_===0)return _;return _}function xg(r,n,s){if(To(r,n,!0))return 0;let d=1/0;for(const g of n){const _=g[0],x=g[g.length-1];if(_!==x&&(d=Math.min(d,Gs(r,[x,_],s)),d===0))return d;const C=s.pointOnLine(g,r);if(d=Math.min(d,s.distance(r,C.point)),d===0)return d}return d}function In(r,n,s,d){if(!ts(n,r.length))return NaN;for(let _=n[0];_<=n[1];++_)if(To(r[_],s,!0))return 0;let g=1/0;for(let _=n[0];_<n[1];++_){const x=r[_],C=r[_+1];for(const T of s)for(let D=0,O=T.length,N=O-1;D<O;N=D++){const H=T[N],X=T[D];if($u(x,C,H,X))return 0;g=Math.min(g,Cd(x,C,H,X,d))}}return g}function Hu(r,n){for(const s of r)for(const d of s)if(To(d,n,!0))return!0;return!1}function ii(r,n,s,d=1/0){const g=Sd(r),_=Sd(n);if(d!==1/0&&kd(g,_,s)>=d)return d;if(ys(g,_)){if(Hu(r,n))return 0}else if(Hu(n,r))return 0;let x=1/0;for(const C of r)for(let T=0,D=C.length,O=D-1;T<D;O=T++){const N=C[O],H=C[T];for(const X of n)for(let ne=0,oe=X.length,ye=oe-1;ne<oe;ye=ne++){const Ie=X[ye],Ze=X[ne];if($u(N,H,Ie,Ze))return 0;x=Math.min(x,Cd(N,H,Ie,Ze,s))}}return x}function Kn(r,n,s,d,g,_){if(!_)return;const x=kd(wd(d,_),g,s);x<n&&r.push([x,_,[0,0]])}function Ws(r,n,s,d,g,_,x){if(!_||!x)return;const C=kd(wd(d,_),wd(g,x),s);C<n&&r.push([C,_,x])}function Al(r,n,s,d,g=1/0){let _=Math.min(d.distance(r[0],s[0][0]),g);if(_===0)return _;const x=new Of([[0,[0,r.length-1],[0,0]]],Hf),C=Sd(s);for(;x.length>0;){const T=x.pop();if(T[0]>=_)continue;const D=T[1],O=n?50:100;if(ju(D)<=O){if(!ts(D,r.length))return NaN;if(n){const N=In(r,D,s,d);if(isNaN(N)||N===0)return N;_=Math.min(_,N)}else for(let N=D[0];N<=D[1];++N){const H=xg(r[N],s,d);if(_=Math.min(_,H),_===0)return 0}}else{const N=xd(D,n);Kn(x,_,d,r,C,N[0]),Kn(x,_,d,r,C,N[1])}}return _}function El(r,n,s,d,g,_=1/0){let x=Math.min(_,g.distance(r[0],s[0]));if(x===0)return x;const C=new Of([[0,[0,r.length-1],[0,s.length-1]]],Hf);for(;C.length>0;){const T=C.pop();if(T[0]>=x)continue;const D=T[1],O=T[2],N=n?50:100,H=d?50:100;if(ju(D)<=N&&ju(O)<=H){if(!ts(D,r.length)&&ts(O,s.length))return NaN;let X;if(n&&d)X=bg(r,D,s,O,g),x=Math.min(x,X);else if(n&&!d){const ne=r.slice(D[0],D[1]+1);for(let oe=O[0];oe<=O[1];++oe)if(X=Gs(s[oe],ne,g),x=Math.min(x,X),x===0)return x}else if(!n&&d){const ne=s.slice(O[0],O[1]+1);for(let oe=D[0];oe<=D[1];++oe)if(X=Gs(r[oe],ne,g),x=Math.min(x,X),x===0)return x}else X=Ii(r,D,s,O,g),x=Math.min(x,X)}else{const X=xd(D,n),ne=xd(O,d);Ws(C,x,g,r,s,X[0],ne[0]),Ws(C,x,g,r,s,X[0],ne[1]),Ws(C,x,g,r,s,X[1],ne[0]),Ws(C,x,g,r,s,X[1],ne[1])}}return x}function Id(r){return r.type==="MultiPolygon"?r.coordinates.map((n=>({type:"Polygon",coordinates:n}))):r.type==="MultiLineString"?r.coordinates.map((n=>({type:"LineString",coordinates:n}))):r.type==="MultiPoint"?r.coordinates.map((n=>({type:"Point",coordinates:n}))):[r]}class Zs{constructor(n,s){this.type=Pt,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ns(n[1])){const d=n[1];if(d.type==="FeatureCollection")return new Zs(d,d.features.map((g=>Id(g.geometry))).flat());if(d.type==="Feature")return new Zs(d,Id(d.geometry));if("type"in d&&"coordinates"in d)return new Zs(d,Id(d))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return(function(s,d){const g=s.geometry(),_=g.flat().map((T=>yd([T.x,T.y],s.canonical)));if(g.length===0)return NaN;const x=new bd(_[0][1]);let C=1/0;for(const T of d){switch(T.type){case"Point":C=Math.min(C,El(_,!1,[T.coordinates],!1,x,C));break;case"LineString":C=Math.min(C,El(_,!1,T.coordinates,!0,x,C));break;case"Polygon":C=Math.min(C,Al(_,!1,T.coordinates,x,C))}if(C===0)return C}return C})(n,this.geometries);if(n.geometryType()==="LineString")return(function(s,d){const g=s.geometry(),_=g.flat().map((T=>yd([T.x,T.y],s.canonical)));if(g.length===0)return NaN;const x=new bd(_[0][1]);let C=1/0;for(const T of d){switch(T.type){case"Point":C=Math.min(C,El(_,!0,[T.coordinates],!1,x,C));break;case"LineString":C=Math.min(C,El(_,!0,T.coordinates,!0,x,C));break;case"Polygon":C=Math.min(C,Al(_,!0,T.coordinates,x,C))}if(C===0)return C}return C})(n,this.geometries);if(n.geometryType()==="Polygon")return(function(s,d){const g=s.geometry();if(g.length===0||g[0].length===0)return NaN;const _=Nu(g,0).map((T=>T.map((D=>D.map((O=>yd([O.x,O.y],s.canonical))))))),x=new bd(_[0][0][0][1]);let C=1/0;for(const T of d)for(const D of _){switch(T.type){case"Point":C=Math.min(C,Al([T.coordinates],!1,D,x,C));break;case"LineString":C=Math.min(C,Al(T.coordinates,!0,D,x,C));break;case"Polygon":C=Math.min(C,ii(D,T.coordinates,x,C))}if(C===0)return C}return C})(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Ao={"==":ug,"!=":Ef,">":cg,"<":Mf,">=":Df,"<=":dg,array:yr,at:hd,boolean:yr,case:zu,coalesce:Ru,collator:Pl,format:Ou,image:gd,in:fd,"index-of":Co,interpolate:Aa,"interpolate-hcl":Aa,"interpolate-lab":Aa,length:vd,let:vs,literal:vr,match:md,number:yr,"number-format":pd,object:yr,slice:Cl,step:Io,string:yr,"to-boolean":_r,"to-color":_r,"to-number":_r,"to-string":_r,var:Rn,within:qs,distance:Zs};class lr{constructor(n,s,d,g){this.name=n,this.type=s,this._evaluate=d,this.args=g}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const d=n[0],g=lr.definitions[d];if(!g)return s.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,C=x.filter((([D])=>!Array.isArray(D)||D.length===n.length-1));let T=null;for(const[D,O]of C){T=new js(s.registry,Ml,s.path,null,s.scope);const N=[];let H=!1;for(let X=1;X<n.length;X++){const ne=n[X],oe=Array.isArray(D)?D[X-1]:D.type,ye=T.parse(ne,1+N.length,oe);if(!ye){H=!0;break}N.push(ye)}if(!H)if(Array.isArray(D)&&D.length!==N.length)T.error(`Expected ${D.length} arguments, but found ${N.length} instead.`);else{for(let X=0;X<N.length;X++){const ne=Array.isArray(D)?D[X]:D.type,oe=N[X];T.concat(X+1).checkSubtype(ne,oe.type)}if(T.errors.length===0)return new lr(d,_,O,N)}}if(C.length===1)s.errors.push(...T.errors);else{const D=(C.length?C:x).map((([N])=>{return H=N,Array.isArray(H)?`(${H.map(G).join(", ")})`:`(${G(H.type)}...)`;var H})).join(" | "),O=[];for(let N=1;N<n.length;N++){const H=s.parse(n[N],1+O.length);if(!H)return null;O.push(G(H.type))}s.error(`Expected arguments of type ${D}, but found (${O.join(", ")}) instead.`)}return null}static register(n,s){lr.definitions=s;for(const d in s)n[d]=lr}}function Pd(r,[n,s,d,g]){n=n.evaluate(r),s=s.evaluate(r),d=d.evaluate(r);const _=g?g.evaluate(r):1,x=ko(n,s,d,_);if(x)throw new Mi(x);return new Gn(n/255,s/255,d/255,_,!1)}function Td(r,n){return r in n}function Ad(r,n){const s=n[r];return s===void 0?null:s}function Ks(r){return{type:r}}function Ml(r){if(r instanceof Rn)return Ml(r.boundExpression);if(r instanceof lr&&r.name==="error"||r instanceof Pl||r instanceof qs||r instanceof Zs)return!1;const n=r instanceof _r||r instanceof yr;let s=!0;return r.eachChild((d=>{s=n?s&&Ml(d):s&&d instanceof vr})),!!s&&Dl(r)&&Vl(r,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Dl(r){if(r instanceof lr&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof qs||r instanceof Zs)return!1;let n=!0;return r.eachChild((s=>{n&&!Dl(s)&&(n=!1)})),n}function Eo(r){if(r instanceof lr&&r.name==="feature-state")return!1;let n=!0;return r.eachChild((s=>{n&&!Eo(s)&&(n=!1)})),n}function Vl(r,n){if(r instanceof lr&&n.indexOf(r.name)>=0)return!1;let s=!0;return r.eachChild((d=>{s&&!Vl(d,n)&&(s=!1)})),s}function qu(r){return{result:"success",value:r}}function Mo(r){return{result:"error",value:r}}function Do(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function qf(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Ed(r){return!!r.expression&&r.expression.interpolated}function Ln(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function Gu(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function wg(r){return r}function Gf(r,n){const s=n.type==="color",d=r.stops&&typeof r.stops[0][0]=="object",g=d||!(d||r.property!==void 0),_=r.type||(Ed(n)?"exponential":"interval");if(s||n.type==="padding"){const O=s?Gn.parse:Za.parse;(r=Hn({},r)).stops&&(r.stops=r.stops.map((N=>[N[0],O(N[1])]))),r.default=O(r.default?r.default:n.default)}if(r.colorSpace&&(x=r.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${r.colorSpace}"`);var x;let C,T,D;if(_==="exponential")C=Zf;else if(_==="interval")C=Wu;else if(_==="categorical"){C=Wf,T=Object.create(null);for(const O of r.stops)T[O[0]]=O[1];D=typeof r.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);C=Kf}if(d){const O={},N=[];for(let ne=0;ne<r.stops.length;ne++){const oe=r.stops[ne],ye=oe[0].zoom;O[ye]===void 0&&(O[ye]={zoom:ye,type:r.type,property:r.property,default:r.default,stops:[]},N.push(ye)),O[ye].stops.push([oe[0].value,oe[1]])}const H=[];for(const ne of N)H.push([O[ne].zoom,Gf(O[ne],n)]);const X={name:"linear"};return{kind:"composite",interpolationType:X,interpolationFactor:Aa.interpolationFactor.bind(void 0,X),zoomStops:H.map((ne=>ne[0])),evaluate:({zoom:ne},oe)=>Zf({stops:H,base:r.base},n,ne).evaluate(ne,oe)}}if(g){const O=_==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:O,interpolationFactor:Aa.interpolationFactor.bind(void 0,O),zoomStops:r.stops.map((N=>N[0])),evaluate:({zoom:N})=>C(r,n,N,T,D)}}return{kind:"source",evaluate(O,N){const H=N&&N.properties?N.properties[r.property]:void 0;return H===void 0?Vo(r.default,n.default):C(r,n,H,T,D)}}}function Vo(r,n,s){return r!==void 0?r:n!==void 0?n:s!==void 0?s:void 0}function Wf(r,n,s,d,g){return Vo(typeof s===g?d[s]:void 0,r.default,n.default)}function Wu(r,n,s){if(Ln(s)!=="number")return Vo(r.default,n.default);const d=r.stops.length;if(d===1||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[d-1][0])return r.stops[d-1][1];const g=Lu(r.stops.map((_=>_[0])),s);return r.stops[g][1]}function Zf(r,n,s){const d=r.base!==void 0?r.base:1;if(Ln(s)!=="number")return Vo(r.default,n.default);const g=r.stops.length;if(g===1||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[g-1][0])return r.stops[g-1][1];const _=Lu(r.stops.map((O=>O[0])),s),x=(function(O,N,H,X){const ne=X-H,oe=O-H;return ne===0?0:N===1?oe/ne:(Math.pow(N,oe)-1)/(Math.pow(N,ne)-1)})(s,d,r.stops[_][0],r.stops[_+1][0]),C=r.stops[_][1],T=r.stops[_+1][1],D=Ta[n.type]||wg;return typeof C.evaluate=="function"?{evaluate(...O){const N=C.evaluate.apply(void 0,O),H=T.evaluate.apply(void 0,O);if(N!==void 0&&H!==void 0)return D(N,H,x,r.colorSpace)}}:D(C,T,x,r.colorSpace)}function Kf(r,n,s){switch(n.type){case"color":s=Gn.parse(s);break;case"formatted":s=Wa.fromString(s.toString());break;case"resolvedImage":s=Ka.fromString(s.toString());break;case"padding":s=Za.parse(s);break;default:Ln(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return Vo(s,r.default,n.default)}lr.register(Ao,{error:[{kind:"error"},[xn],(r,[n])=>{throw new Mi(n.evaluate(r))}],typeof:[xn,[hn],(r,[n])=>G(Li(n.evaluate(r)))],"to-rgba":[W(Pt,4),[di],(r,[n])=>{const[s,d,g,_]=n.evaluate(r).rgb;return[255*s,255*d,255*g,_]}],rgb:[di,[Pt,Pt,Pt],Pd],rgba:[di,[Pt,Pt,Pt,Pt],Pd],has:{type:Jt,overloads:[[[xn],(r,[n])=>Td(n.evaluate(r),r.properties())],[[xn,Pa],(r,[n,s])=>Td(n.evaluate(r),s.evaluate(r))]]},get:{type:hn,overloads:[[[xn],(r,[n])=>Ad(n.evaluate(r),r.properties())],[[xn,Pa],(r,[n,s])=>Ad(n.evaluate(r),s.evaluate(r))]]},"feature-state":[hn,[xn],(r,[n])=>Ad(n.evaluate(r),r.featureState||{})],properties:[Pa,[],r=>r.properties()],"geometry-type":[xn,[],r=>r.geometryType()],id:[hn,[],r=>r.id()],zoom:[Pt,[],r=>r.globals.zoom],"heatmap-density":[Pt,[],r=>r.globals.heatmapDensity||0],"line-progress":[Pt,[],r=>r.globals.lineProgress||0],accumulated:[hn,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[Pt,Ks(Pt),(r,n)=>{let s=0;for(const d of n)s+=d.evaluate(r);return s}],"*":[Pt,Ks(Pt),(r,n)=>{let s=1;for(const d of n)s*=d.evaluate(r);return s}],"-":{type:Pt,overloads:[[[Pt,Pt],(r,[n,s])=>n.evaluate(r)-s.evaluate(r)],[[Pt],(r,[n])=>-n.evaluate(r)]]},"/":[Pt,[Pt,Pt],(r,[n,s])=>n.evaluate(r)/s.evaluate(r)],"%":[Pt,[Pt,Pt],(r,[n,s])=>n.evaluate(r)%s.evaluate(r)],ln2:[Pt,[],()=>Math.LN2],pi:[Pt,[],()=>Math.PI],e:[Pt,[],()=>Math.E],"^":[Pt,[Pt,Pt],(r,[n,s])=>Math.pow(n.evaluate(r),s.evaluate(r))],sqrt:[Pt,[Pt],(r,[n])=>Math.sqrt(n.evaluate(r))],log10:[Pt,[Pt],(r,[n])=>Math.log(n.evaluate(r))/Math.LN10],ln:[Pt,[Pt],(r,[n])=>Math.log(n.evaluate(r))],log2:[Pt,[Pt],(r,[n])=>Math.log(n.evaluate(r))/Math.LN2],sin:[Pt,[Pt],(r,[n])=>Math.sin(n.evaluate(r))],cos:[Pt,[Pt],(r,[n])=>Math.cos(n.evaluate(r))],tan:[Pt,[Pt],(r,[n])=>Math.tan(n.evaluate(r))],asin:[Pt,[Pt],(r,[n])=>Math.asin(n.evaluate(r))],acos:[Pt,[Pt],(r,[n])=>Math.acos(n.evaluate(r))],atan:[Pt,[Pt],(r,[n])=>Math.atan(n.evaluate(r))],min:[Pt,Ks(Pt),(r,n)=>Math.min(...n.map((s=>s.evaluate(r))))],max:[Pt,Ks(Pt),(r,n)=>Math.max(...n.map((s=>s.evaluate(r))))],abs:[Pt,[Pt],(r,[n])=>Math.abs(n.evaluate(r))],round:[Pt,[Pt],(r,[n])=>{const s=n.evaluate(r);return s<0?-Math.round(-s):Math.round(s)}],floor:[Pt,[Pt],(r,[n])=>Math.floor(n.evaluate(r))],ceil:[Pt,[Pt],(r,[n])=>Math.ceil(n.evaluate(r))],"filter-==":[Jt,[xn,hn],(r,[n,s])=>r.properties()[n.value]===s.value],"filter-id-==":[Jt,[hn],(r,[n])=>r.id()===n.value],"filter-type-==":[Jt,[xn],(r,[n])=>r.geometryType()===n.value],"filter-<":[Jt,[xn,hn],(r,[n,s])=>{const d=r.properties()[n.value],g=s.value;return typeof d==typeof g&&d<g}],"filter-id-<":[Jt,[hn],(r,[n])=>{const s=r.id(),d=n.value;return typeof s==typeof d&&s<d}],"filter->":[Jt,[xn,hn],(r,[n,s])=>{const d=r.properties()[n.value],g=s.value;return typeof d==typeof g&&d>g}],"filter-id->":[Jt,[hn],(r,[n])=>{const s=r.id(),d=n.value;return typeof s==typeof d&&s>d}],"filter-<=":[Jt,[xn,hn],(r,[n,s])=>{const d=r.properties()[n.value],g=s.value;return typeof d==typeof g&&d<=g}],"filter-id-<=":[Jt,[hn],(r,[n])=>{const s=r.id(),d=n.value;return typeof s==typeof d&&s<=d}],"filter->=":[Jt,[xn,hn],(r,[n,s])=>{const d=r.properties()[n.value],g=s.value;return typeof d==typeof g&&d>=g}],"filter-id->=":[Jt,[hn],(r,[n])=>{const s=r.id(),d=n.value;return typeof s==typeof d&&s>=d}],"filter-has":[Jt,[hn],(r,[n])=>n.value in r.properties()],"filter-has-id":[Jt,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[Jt,[W(xn)],(r,[n])=>n.value.indexOf(r.geometryType())>=0],"filter-id-in":[Jt,[W(hn)],(r,[n])=>n.value.indexOf(r.id())>=0],"filter-in-small":[Jt,[xn,W(hn)],(r,[n,s])=>s.value.indexOf(r.properties()[n.value])>=0],"filter-in-large":[Jt,[xn,W(hn)],(r,[n,s])=>(function(d,g,_,x){for(;_<=x;){const C=_+x>>1;if(g[C]===d)return!0;g[C]>d?x=C-1:_=C+1}return!1})(r.properties()[n.value],s.value,0,s.value.length-1)],all:{type:Jt,overloads:[[[Jt,Jt],(r,[n,s])=>n.evaluate(r)&&s.evaluate(r)],[Ks(Jt),(r,n)=>{for(const s of n)if(!s.evaluate(r))return!1;return!0}]]},any:{type:Jt,overloads:[[[Jt,Jt],(r,[n,s])=>n.evaluate(r)||s.evaluate(r)],[Ks(Jt),(r,n)=>{for(const s of n)if(s.evaluate(r))return!0;return!1}]]},"!":[Jt,[Jt],(r,[n])=>!n.evaluate(r)],"is-supported-script":[Jt,[xn],(r,[n])=>{const s=r.globals&&r.globals.isSupportedScript;return!s||s(n.evaluate(r))}],upcase:[xn,[xn],(r,[n])=>n.evaluate(r).toUpperCase()],downcase:[xn,[xn],(r,[n])=>n.evaluate(r).toLowerCase()],concat:[xn,Ks(hn),(r,n)=>n.map((s=>kl(s.evaluate(r)))).join("")],"resolved-locale":[xn,[Rr],(r,[n])=>n.evaluate(r).resolvedLocale()]});class Zu{constructor(n,s){var d;this.expression=n,this._warningHistory={},this._evaluator=new Vu,this._defaultValue=s?(d=s).type==="color"&&Gu(d.default)?new Gn(0,0,0,0):d.type==="color"?Gn.parse(d.default)||null:d.type==="padding"?Za.parse(d.default)||null:d.type==="variableAnchorOffsetCollection"?or.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,d,g,_,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=d,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,d,g,_,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=d||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new Mi(`Expected value to be one of ${Object.keys(this._enumValues).map((T=>JSON.stringify(T))).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function Ku(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Ao}function zo(r,n){const s=new js(Ao,Ml,[],n?(function(g){const _={color:di,string:xn,number:Pt,enum:xn,boolean:Jt,formatted:es,padding:gs,resolvedImage:Fr,variableAnchorOffsetCollection:ke};return g.type==="array"?W(_[g.value]||hn,g.length):_[g.type]})(n):void 0),d=s.parse(r,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?qu(new Zu(d,n)):Mo(s.errors)}class Lo{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Eo(s.expression)}evaluateWithoutErrorHandling(n,s,d,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,d,g,_,x)}evaluate(n,s,d,g,_,x){return this._styleExpression.evaluate(n,s,d,g,_,x)}}class Bo{constructor(n,s,d,g){this.kind=n,this.zoomStops=d,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Eo(s.expression),this.interpolationType=g}evaluateWithoutErrorHandling(n,s,d,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,d,g,_,x)}evaluate(n,s,d,g,_,x){return this._styleExpression.evaluate(n,s,d,g,_,x)}interpolationFactor(n,s,d){return this.interpolationType?Aa.interpolationFactor(this.interpolationType,n,s,d):0}}function Md(r,n){const s=zo(r,n);if(s.result==="error")return s;const d=s.value.expression,g=Dl(d);if(!g&&!Do(n))return Mo([new Fn("","data expressions not supported")]);const _=Vl(d,["zoom"]);if(!_&&!qf(n))return Mo([new Fn("","zoom expressions not supported")]);const x=zl(d);return x||_?x instanceof Fn?Mo([x]):x instanceof Aa&&!Ed(n)?Mo([new Fn("",'"interpolate" expressions cannot be used with this property')]):qu(x?new Bo(g?"camera":"composite",s.value,x.labels,x instanceof Aa?x.interpolation:void 0):new Lo(g?"constant":"source",s.value)):Mo([new Fn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ro{constructor(n,s){this._parameters=n,this._specification=s,Hn(this,Gf(this._parameters,this._specification))}static deserialize(n){return new Ro(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function zl(r){let n=null;if(r instanceof vs)n=zl(r.result);else if(r instanceof Ru){for(const s of r.args)if(n=zl(s),n)break}else(r instanceof Io||r instanceof Aa)&&r.input instanceof lr&&r.input.name==="zoom"&&(n=r);return n instanceof Fn||r.eachChild((s=>{const d=zl(s);d instanceof Fn?n=d:!n&&d?n=new Fn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&d&&n!==d&&(n=new Fn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}function Xu(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const n of r.slice(1))if(!Xu(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Yu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Dd(r){if(r==null)return{filter:()=>!0,needGeometry:!1};Xu(r)||(r=Ju(r));const n=zo(r,Yu);if(n.result==="error")throw new Error(n.value.map((s=>`${s.key}: ${s.message}`)).join(", "));return{filter:(s,d,g)=>n.value.evaluate(s,d,{},g),needGeometry:Xf(r)}}function Sg(r,n){return r<n?-1:r>n?1:0}function Xf(r){if(!Array.isArray(r))return!1;if(r[0]==="within"||r[0]==="distance")return!0;for(let n=1;n<r.length;n++)if(Xf(r[n]))return!0;return!1}function Ju(r){if(!r)return!0;const n=r[0];return r.length<=1?n!=="any":n==="=="?Vd(r[1],r[2],"=="):n==="!="?oa(Vd(r[1],r[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Vd(r[1],r[2],n):n==="any"?(s=r.slice(1),["any"].concat(s.map(Ju))):n==="all"?["all"].concat(r.slice(1).map(Ju)):n==="none"?["all"].concat(r.slice(1).map(Ju).map(oa)):n==="in"?Ll(r[1],r.slice(2)):n==="!in"?oa(Ll(r[1],r.slice(2))):n==="has"?Bl(r[1]):n!=="!has"||oa(Bl(r[1]));var s}function Vd(r,n,s){switch(r){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,r,n]}}function Ll(r,n){if(n.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some((s=>typeof s!=typeof n[0]))?["filter-in-large",r,["literal",n.sort(Sg)]]:["filter-in-small",r,["literal",n]]}}function Bl(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function oa(r){return["!",r]}function Xs(r){const n=typeof r;if(n==="number"||n==="boolean"||n==="string"||r==null)return JSON.stringify(r);if(Array.isArray(r)){let g="[";for(const _ of r)g+=`${Xs(_)},`;return`${g}]`}const s=Object.keys(r).sort();let d="{";for(let g=0;g<s.length;g++)d+=`${JSON.stringify(s[g])}:${Xs(r[s[g]])},`;return`${d}}`}function Yf(r){let n="";for(const s of Ke)n+=`/${Xs(r[s])}`;return n}function Jf(r){const n=r.value;return n?[new mt(r.key,n,"constants have been deprecated as of v8")]:[]}function Pi(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function br(r){if(Array.isArray(r))return r.map(br);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const n={};for(const s in r)n[s]=br(r[s]);return n}return Pi(r)}function Xa(r){const n=r.key,s=r.value,d=r.valueSpec||{},g=r.objectElementValidators||{},_=r.style,x=r.styleSpec,C=r.validateSpec;let T=[];const D=Ln(s);if(D!=="object")return[new mt(n,s,`object expected, ${D} found`)];for(const O in s){const N=O.split(".")[0],H=d[N]||d["*"];let X;if(g[N])X=g[N];else if(d[N])X=C;else if(g["*"])X=g["*"];else{if(!d["*"]){T.push(new mt(n,s[O],`unknown property "${O}"`));continue}X=C}T=T.concat(X({key:(n&&`${n}.`)+O,value:s[O],valueSpec:H,style:_,styleSpec:x,object:s,objectKey:O,validateSpec:C},s))}for(const O in d)g[O]||d[O].required&&d[O].default===void 0&&s[O]===void 0&&T.push(new mt(n,s,`missing required property "${O}"`));return T}function Rl(r){const n=r.value,s=r.valueSpec,d=r.style,g=r.styleSpec,_=r.key,x=r.arrayElementValidator||r.validateSpec;if(Ln(n)!=="array")return[new mt(_,n,`array expected, ${Ln(n)} found`)];if(s.length&&n.length!==s.length)return[new mt(_,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new mt(_,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let C={type:s.value,values:s.values};g.$version<7&&(C.function=s.function),Ln(s.value)==="object"&&(C=s.value);let T=[];for(let D=0;D<n.length;D++)T=T.concat(x({array:n,arrayIndex:D,value:n[D],valueSpec:C,validateSpec:r.validateSpec,style:d,styleSpec:g,key:`${_}[${D}]`}));return T}function zd(r){const n=r.key,s=r.value,d=r.valueSpec;let g=Ln(s);return g==="number"&&s!=s&&(g="NaN"),g!=="number"?[new mt(n,s,`number expected, ${g} found`)]:"minimum"in d&&s<d.minimum?[new mt(n,s,`${s} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&s>d.maximum?[new mt(n,s,`${s} is greater than the maximum value ${d.maximum}`)]:[]}function Qu(r){const n=r.valueSpec,s=Pi(r.value.type);let d,g,_,x={};const C=s!=="categorical"&&r.value.property===void 0,T=!C,D=Ln(r.value.stops)==="array"&&Ln(r.value.stops[0])==="array"&&Ln(r.value.stops[0][0])==="object",O=Xa({key:r.key,value:r.value,valueSpec:r.styleSpec.function,validateSpec:r.validateSpec,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(X){if(s==="identity")return[new mt(X.key,X.value,'identity function may not have a "stops" property')];let ne=[];const oe=X.value;return ne=ne.concat(Rl({key:X.key,value:oe,valueSpec:X.valueSpec,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:N})),Ln(oe)==="array"&&oe.length===0&&ne.push(new mt(X.key,oe,"array must have at least one stop")),ne},default:function(X){return X.validateSpec({key:X.key,value:X.value,valueSpec:n,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec})}}});return s==="identity"&&C&&O.push(new mt(r.key,r.value,'missing required property "property"')),s==="identity"||r.value.stops||O.push(new mt(r.key,r.value,'missing required property "stops"')),s==="exponential"&&r.valueSpec.expression&&!Ed(r.valueSpec)&&O.push(new mt(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(T&&!Do(r.valueSpec)?O.push(new mt(r.key,r.value,"property functions not supported")):C&&!qf(r.valueSpec)&&O.push(new mt(r.key,r.value,"zoom functions not supported"))),s!=="categorical"&&!D||r.value.property!==void 0||O.push(new mt(r.key,r.value,'"property" property is required')),O;function N(X){let ne=[];const oe=X.value,ye=X.key;if(Ln(oe)!=="array")return[new mt(ye,oe,`array expected, ${Ln(oe)} found`)];if(oe.length!==2)return[new mt(ye,oe,`array length 2 expected, length ${oe.length} found`)];if(D){if(Ln(oe[0])!=="object")return[new mt(ye,oe,`object expected, ${Ln(oe[0])} found`)];if(oe[0].zoom===void 0)return[new mt(ye,oe,"object stop key must have zoom")];if(oe[0].value===void 0)return[new mt(ye,oe,"object stop key must have value")];if(_&&_>Pi(oe[0].zoom))return[new mt(ye,oe[0].zoom,"stop zoom values must appear in ascending order")];Pi(oe[0].zoom)!==_&&(_=Pi(oe[0].zoom),g=void 0,x={}),ne=ne.concat(Xa({key:`${ye}[0]`,value:oe[0],valueSpec:{zoom:{}},validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:zd,value:H}}))}else ne=ne.concat(H({key:`${ye}[0]`,value:oe[0],validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec},oe));return Ku(br(oe[1]))?ne.concat([new mt(`${ye}[1]`,oe[1],"expressions are not allowed in function stops.")]):ne.concat(X.validateSpec({key:`${ye}[1]`,value:oe[1],valueSpec:n,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec}))}function H(X,ne){const oe=Ln(X.value),ye=Pi(X.value),Ie=X.value!==null?X.value:ne;if(d){if(oe!==d)return[new mt(X.key,Ie,`${oe} stop domain type must match previous stop domain type ${d}`)]}else d=oe;if(oe!=="number"&&oe!=="string"&&oe!=="boolean")return[new mt(X.key,Ie,"stop domain value must be a number, string, or boolean")];if(oe!=="number"&&s!=="categorical"){let Ze=`number expected, ${oe} found`;return Do(n)&&s===void 0&&(Ze+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new mt(X.key,Ie,Ze)]}return s!=="categorical"||oe!=="number"||isFinite(ye)&&Math.floor(ye)===ye?s!=="categorical"&&oe==="number"&&g!==void 0&&ye<g?[new mt(X.key,Ie,"stop domain values must appear in ascending order")]:(g=ye,s==="categorical"&&ye in x?[new mt(X.key,Ie,"stop domain values must be unique")]:(x[ye]=!0,[])):[new mt(X.key,Ie,`integer expected, found ${ye}`)]}}function Fo(r){const n=(r.expressionContext==="property"?Md:zo)(br(r.value),r.valueSpec);if(n.result==="error")return n.value.map((d=>new mt(`${r.key}${d.key}`,r.value,d.message)));const s=n.value.expression||n.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!s.outputDefined())return[new mt(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!Eo(s))return[new mt(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!Eo(s))return[new mt(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!Vl(s,["zoom","feature-state"]))return[new mt(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!Dl(s))return[new mt(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ns(r){const n=r.key,s=r.value,d=r.valueSpec,g=[];return Array.isArray(d.values)?d.values.indexOf(Pi(s))===-1&&g.push(new mt(n,s,`expected one of [${d.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(d.values).indexOf(Pi(s))===-1&&g.push(new mt(n,s,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(s)} found`)),g}function Ld(r){return Xu(br(r.value))?Fo(Hn({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ec(r)}function ec(r){const n=r.value,s=r.key;if(Ln(n)!=="array")return[new mt(s,n,`array expected, ${Ln(n)} found`)];const d=r.styleSpec;let g,_=[];if(n.length<1)return[new mt(s,n,"filter array must have at least 1 element")];switch(_=_.concat(ns({key:`${s}[0]`,value:n[0],valueSpec:d.filter_operator,style:r.style,styleSpec:r.styleSpec})),Pi(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Pi(n[1])==="$type"&&_.push(new mt(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&_.push(new mt(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(g=Ln(n[1]),g!=="string"&&_.push(new mt(`${s}[1]`,n[1],`string expected, ${g} found`)));for(let x=2;x<n.length;x++)g=Ln(n[x]),Pi(n[1])==="$type"?_=_.concat(ns({key:`${s}[${x}]`,value:n[x],valueSpec:d.geometry_type,style:r.style,styleSpec:r.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new mt(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)_=_.concat(ec({key:`${s}[${x}]`,value:n[x],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":g=Ln(n[1]),n.length!==2?_.push(new mt(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new mt(`${s}[1]`,n[1],`string expected, ${g} found`))}return _}function Bd(r,n){const s=r.key,d=r.validateSpec,g=r.style,_=r.styleSpec,x=r.value,C=r.objectKey,T=_[`${n}_${r.layerType}`];if(!T)return[];const D=C.match(/^(.*)-transition$/);if(n==="paint"&&D&&T[D[1]]&&T[D[1]].transition)return d({key:s,value:x,valueSpec:_.transition,style:g,styleSpec:_});const O=r.valueSpec||T[C];if(!O)return[new mt(s,x,`unknown property "${C}"`)];let N;if(Ln(x)==="string"&&Do(O)&&!O.tokens&&(N=/^{([^}]+)}$/.exec(x)))return[new mt(s,x,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(N[1])} }\`.`)];const H=[];return r.layerType==="symbol"&&(C==="text-field"&&g&&!g.glyphs&&H.push(new mt(s,x,'use of "text-field" requires a style "glyphs" property')),C==="text-font"&&Gu(br(x))&&Pi(x.type)==="identity"&&H.push(new mt(s,x,'"text-font" does not support identity functions'))),H.concat(d({key:r.key,value:x,valueSpec:O,style:g,styleSpec:_,expressionContext:"property",propertyType:n,propertyKey:C}))}function tc(r){return Bd(r,"paint")}function Rd(r){return Bd(r,"layout")}function Fd(r){let n=[];const s=r.value,d=r.key,g=r.style,_=r.styleSpec;s.type||s.ref||n.push(new mt(d,s,'either "type" or "ref" is required'));let x=Pi(s.type);const C=Pi(s.ref);if(s.id){const T=Pi(s.id);for(let D=0;D<r.arrayIndex;D++){const O=g.layers[D];Pi(O.id)===T&&n.push(new mt(d,s.id,`duplicate layer id "${s.id}", previously used at line ${O.id.__line__}`))}}if("ref"in s){let T;["type","source","source-layer","filter","layout"].forEach((D=>{D in s&&n.push(new mt(d,s[D],`"${D}" is prohibited for ref layers`))})),g.layers.forEach((D=>{Pi(D.id)===C&&(T=D)})),T?T.ref?n.push(new mt(d,s.ref,"ref cannot reference another ref layer")):x=Pi(T.type):n.push(new mt(d,s.ref,`ref layer "${C}" not found`))}else if(x!=="background")if(s.source){const T=g.sources&&g.sources[s.source],D=T&&Pi(T.type);T?D==="vector"&&x==="raster"?n.push(new mt(d,s.source,`layer "${s.id}" requires a raster source`)):D!=="raster-dem"&&x==="hillshade"?n.push(new mt(d,s.source,`layer "${s.id}" requires a raster-dem source`)):D==="raster"&&x!=="raster"?n.push(new mt(d,s.source,`layer "${s.id}" requires a vector source`)):D!=="vector"||s["source-layer"]?D==="raster-dem"&&x!=="hillshade"?n.push(new mt(d,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||D==="geojson"&&T.lineMetrics||n.push(new mt(d,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new mt(d,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new mt(d,s.source,`source "${s.source}" not found`))}else n.push(new mt(d,s,'missing required property "source"'));return n=n.concat(Xa({key:d,value:s,valueSpec:_.layer,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,objectElementValidators:{"*":()=>[],type:()=>r.validateSpec({key:`${d}.type`,value:s.type,valueSpec:_.layer.type,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,object:s,objectKey:"type"}),filter:Ld,layout:T=>Xa({layer:s,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":D=>Rd(Hn({layerType:x},D))}}),paint:T=>Xa({layer:s,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":D=>tc(Hn({layerType:x},D))}})}})),n}function Ys(r){const n=r.value,s=r.key,d=Ln(n);return d!=="string"?[new mt(s,n,`string expected, ${d} found`)]:[]}const nc={promoteId:function({key:r,value:n}){if(Ln(n)==="string")return Ys({key:r,value:n});{const s=[];for(const d in n)s.push(...Ys({key:`${r}.${d}`,value:n[d]}));return s}}};function Fl(r){const n=r.value,s=r.key,d=r.styleSpec,g=r.style,_=r.validateSpec;if(!n.type)return[new mt(s,n,'"type" is required')];const x=Pi(n.type);let C;switch(x){case"vector":case"raster":return C=Xa({key:s,value:n,valueSpec:d[`source_${x.replace("-","_")}`],style:r.style,styleSpec:d,objectElementValidators:nc,validateSpec:_}),C;case"raster-dem":return C=(function(T){var D;const O=(D=T.sourceName)!==null&&D!==void 0?D:"",N=T.value,H=T.styleSpec,X=H.source_raster_dem,ne=T.style;let oe=[];const ye=Ln(N);if(N===void 0)return oe;if(ye!=="object")return oe.push(new mt("source_raster_dem",N,`object expected, ${ye} found`)),oe;const Ie=Pi(N.encoding)==="custom",Ze=["redFactor","greenFactor","blueFactor","baseShift"],ze=T.value.encoding?`"${T.value.encoding}"`:"Default";for(const He in N)!Ie&&Ze.includes(He)?oe.push(new mt(He,N[He],`In "${O}": "${He}" is only valid when "encoding" is set to "custom". ${ze} encoding found`)):X[He]?oe=oe.concat(T.validateSpec({key:He,value:N[He],valueSpec:X[He],validateSpec:T.validateSpec,style:ne,styleSpec:H})):oe.push(new mt(He,N[He],`unknown property "${He}"`));return oe})({sourceName:s,value:n,style:r.style,styleSpec:d,validateSpec:_}),C;case"geojson":if(C=Xa({key:s,value:n,valueSpec:d.source_geojson,style:g,styleSpec:d,validateSpec:_,objectElementValidators:nc}),n.cluster)for(const T in n.clusterProperties){const[D,O]=n.clusterProperties[T],N=typeof D=="string"?[D,["accumulated"],["get",T]]:D;C.push(...Fo({key:`${s}.${T}.map`,value:O,expressionContext:"cluster-map"})),C.push(...Fo({key:`${s}.${T}.reduce`,value:N,expressionContext:"cluster-reduce"}))}return C;case"video":return Xa({key:s,value:n,valueSpec:d.source_video,style:g,validateSpec:_,styleSpec:d});case"image":return Xa({key:s,value:n,valueSpec:d.source_image,style:g,validateSpec:_,styleSpec:d});case"canvas":return[new mt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ns({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Od(r){const n=r.value,s=r.styleSpec,d=s.light,g=r.style;let _=[];const x=Ln(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new mt("light",n,`object expected, ${x} found`)]),_;for(const C in n){const T=C.match(/^(.*)-transition$/);_=_.concat(T&&d[T[1]]&&d[T[1]].transition?r.validateSpec({key:C,value:n[C],valueSpec:s.transition,validateSpec:r.validateSpec,style:g,styleSpec:s}):d[C]?r.validateSpec({key:C,value:n[C],valueSpec:d[C],validateSpec:r.validateSpec,style:g,styleSpec:s}):[new mt(C,n[C],`unknown property "${C}"`)])}return _}function $d(r){const n=r.value,s=r.styleSpec,d=s.sky,g=r.style,_=Ln(n);if(n===void 0)return[];if(_!=="object")return[new mt("sky",n,`object expected, ${_} found`)];let x=[];for(const C in n)x=x.concat(d[C]?r.validateSpec({key:C,value:n[C],valueSpec:d[C],style:g,styleSpec:s}):[new mt(C,n[C],`unknown property "${C}"`)]);return x}function Nd(r){const n=r.value,s=r.styleSpec,d=s.terrain,g=r.style;let _=[];const x=Ln(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new mt("terrain",n,`object expected, ${x} found`)]),_;for(const C in n)_=_.concat(d[C]?r.validateSpec({key:C,value:n[C],valueSpec:d[C],validateSpec:r.validateSpec,style:g,styleSpec:s}):[new mt(C,n[C],`unknown property "${C}"`)]);return _}function jd(r){let n=[];const s=r.value,d=r.key;if(Array.isArray(s)){const g=[],_=[];for(const x in s)s[x].id&&g.includes(s[x].id)&&n.push(new mt(d,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),g.push(s[x].id),s[x].url&&_.includes(s[x].url)&&n.push(new mt(d,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),_.push(s[x].url),n=n.concat(Xa({key:`${d}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:r.validateSpec}));return n}return Ys({key:d,value:s})}const ic={"*":()=>[],array:Rl,boolean:function(r){const n=r.value,s=r.key,d=Ln(n);return d!=="boolean"?[new mt(s,n,`boolean expected, ${d} found`)]:[]},number:zd,color:function(r){const n=r.key,s=r.value,d=Ln(s);return d!=="string"?[new mt(n,s,`color expected, ${d} found`)]:Gn.parse(String(s))?[]:[new mt(n,s,`color expected, "${s}" found`)]},constants:Jf,enum:ns,filter:Ld,function:Qu,layer:Fd,object:Xa,source:Fl,light:Od,sky:$d,terrain:Nd,projection:function(r){const n=r.value,s=r.styleSpec,d=s.projection,g=r.style,_=Ln(n);if(n===void 0)return[];if(_!=="object")return[new mt("projection",n,`object expected, ${_} found`)];let x=[];for(const C in n)x=x.concat(d[C]?r.validateSpec({key:C,value:n[C],valueSpec:d[C],style:g,styleSpec:s}):[new mt(C,n[C],`unknown property "${C}"`)]);return x},string:Ys,formatted:function(r){return Ys(r).length===0?[]:Fo(r)},resolvedImage:function(r){return Ys(r).length===0?[]:Fo(r)},padding:function(r){const n=r.key,s=r.value;if(Ln(s)==="array"){if(s.length<1||s.length>4)return[new mt(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const d={type:"number"};let g=[];for(let _=0;_<s.length;_++)g=g.concat(r.validateSpec({key:`${n}[${_}]`,value:s[_],validateSpec:r.validateSpec,valueSpec:d}));return g}return zd({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(r){const n=r.key,s=r.value,d=Ln(s),g=r.styleSpec;if(d!=="array"||s.length<1||s.length%2!=0)return[new mt(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<s.length;x+=2)_=_.concat(ns({key:`${n}[${x}]`,value:s[x],valueSpec:g.layout_symbol["text-anchor"]})),_=_.concat(Rl({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:r.validateSpec,style:r.style,styleSpec:g}));return _},sprite:jd};function Ol(r){const n=r.value,s=r.valueSpec,d=r.styleSpec;return r.validateSpec=Ol,s.expression&&Gu(Pi(n))?Qu(r):s.expression&&Ku(br(n))?Fo(r):s.type&&ic[s.type]?ic[s.type](r):Xa(Hn({},r,{valueSpec:s.type?d[s.type]:s}))}function Qf(r){const n=r.value,s=r.key,d=Ys(r);return d.length||(n.indexOf("{fontstack}")===-1&&d.push(new mt(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&d.push(new mt(s,n,'"glyphs" url must include a "{range}" token'))),d}function ur(r,n=le){let s=[];return s=s.concat(Ol({key:"",value:r,valueSpec:n.$root,styleSpec:n,style:r,validateSpec:Ol,objectElementValidators:{glyphs:Qf,"*":()=>[]}})),r.constants&&(s=s.concat(Jf({key:"constants",value:r.constants}))),Ud(s)}function $r(r){return function(n){return r({...n,validateSpec:Ol})}}function Ud(r){return[].concat(r).sort(((n,s)=>n.line-s.line))}function xr(r){return function(...n){return Ud(r.apply(this,n))}}ur.source=xr($r(Fl)),ur.sprite=xr($r(jd)),ur.glyphs=xr($r(Qf)),ur.light=xr($r(Od)),ur.sky=xr($r($d)),ur.terrain=xr($r(Nd)),ur.layer=xr($r(Fd)),ur.filter=xr($r(Ld)),ur.paintProperty=xr($r(tc)),ur.layoutProperty=xr($r(Rd));const Js=ur,kg=Js.light,Cg=Js.sky,em=Js.paintProperty,tm=Js.layoutProperty;function Hd(r,n){let s=!1;if(n&&n.length)for(const d of n)r.fire(new Se(new Error(d.message))),s=!0;return s}class Oo{constructor(n,s,d){const g=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(d=x[2]);for(let T=0;T<this.d*this.d;T++){const D=x[3+T],O=x[3+T+1];g.push(D===O?null:x.subarray(D,O))}const C=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],C),this.bboxes=x.subarray(C),this.insert=this._insertReadonly}else{this.d=s+2*d;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=d,this.scale=s/n,this.uid=0;const _=d/s*n;this.min=-_,this.max=n+_}insert(n,s,d,g,_){this._forEachCell(s,d,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,d,g,_,x){this.cells[_].push(x)}query(n,s,d,g,_){const x=this.min,C=this.max;if(n<=x&&s<=x&&C<=d&&C<=g&&!_)return Array.prototype.slice.call(this.keys);{const T=[];return this._forEachCell(n,s,d,g,this._queryCell,T,{},_),T}}_queryCell(n,s,d,g,_,x,C,T){const D=this.cells[_];if(D!==null){const O=this.keys,N=this.bboxes;for(let H=0;H<D.length;H++){const X=D[H];if(C[X]===void 0){const ne=4*X;(T?T(N[ne+0],N[ne+1],N[ne+2],N[ne+3]):n<=N[ne+2]&&s<=N[ne+3]&&d>=N[ne+0]&&g>=N[ne+1])?(C[X]=!0,x.push(O[X])):C[X]=!1}}}}_forEachCell(n,s,d,g,_,x,C,T){const D=this._convertToCellCoord(n),O=this._convertToCellCoord(s),N=this._convertToCellCoord(d),H=this._convertToCellCoord(g);for(let X=D;X<=N;X++)for(let ne=O;ne<=H;ne++){const oe=this.d*ne+X;if((!T||T(this._convertFromCellCoord(X),this._convertFromCellCoord(ne),this._convertFromCellCoord(X+1),this._convertFromCellCoord(ne+1)))&&_.call(this,n,s,d,g,oe,x,C,T))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let d=0;for(let x=0;x<this.cells.length;x++)d+=this.cells[x].length;const g=new Int32Array(s+d+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=s;for(let x=0;x<n.length;x++){const C=n[x];g[3+x]=_,g.set(C,_),_+=C.length}return g[3+n.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+n.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(n,s){const d=n.toArrayBuffer();return s&&s.push(d),{buffer:d}}static deserialize(n){return new Oo(n.buffer)}}const cr={};function qt(r,n,s={}){if(cr[r])throw new Error(`${r} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:r,writeable:!1}),cr[r]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}qt("Object",Object),qt("TransferableGridIndex",Oo),qt("Color",Gn),qt("Error",Error),qt("AJAXError",ge),qt("ResolvedImage",Ka),qt("StylePropertyFunction",Ro),qt("StyleExpression",Zu,{omit:["_evaluator"]}),qt("ZoomDependentExpression",Bo),qt("ZoomConstantExpression",Lo),qt("CompoundExpression",lr,{omit:["_evaluate"]});for(const r in Ao)Ao[r]._classRegistryKey||qt(`Expression_${r}`,Ao[r]);function ac(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function qd(r){return r.$name||r.constructor._classRegistryKey}function nm(r){return!(function(n){if(n===null||typeof n!="object")return!1;const s=qd(n);return!(!s||s==="Object")})(r)&&(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||r instanceof Error||ac(r)||Ye(r)||ArrayBuffer.isView(r)||r instanceof ImageData)}function $o(r,n){if(nm(r))return(ac(r)||Ye(r))&&n&&n.push(r),ArrayBuffer.isView(r)&&n&&n.push(r.buffer),r instanceof ImageData&&n&&n.push(r.data.buffer),r;if(Array.isArray(r)){const _=[];for(const x of r)_.push($o(x,n));return _}if(typeof r!="object")throw new Error("can't serialize object of type "+typeof r);const s=qd(r);if(!s)throw new Error(`can't serialize object of unregistered class ${r.constructor.name}`);if(!cr[s])throw new Error(`${s} is not registered.`);const{klass:d}=cr[s],g=d.serialize?d.serialize(r,n):{};if(d.serialize){if(n&&g===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in r){if(!r.hasOwnProperty(_)||cr[s].omit.indexOf(_)>=0)continue;const x=r[_];g[_]=cr[s].shallow.indexOf(_)>=0?x:$o(x,n)}r instanceof Error&&(g.message=r.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(g.$name=s),g}function No(r){if(nm(r))return r;if(Array.isArray(r))return r.map(No);if(typeof r!="object")throw new Error("can't deserialize object of type "+typeof r);const n=qd(r)||"Object";if(!cr[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=cr[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(r);const d=Object.create(s.prototype);for(const g of Object.keys(r)){if(g==="$name")continue;const _=r[g];d[g]=cr[n].shallow.indexOf(g)>=0?_:No(_)}return d}class Gd{constructor(){this.first=!0}update(n,s){const d=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=d,!0))}}const En={"Latin-1 Supplement":r=>r>=128&&r<=255,"Hangul Jamo":r=>r>=4352&&r<=4607,Khmer:r=>r>=6016&&r<=6143,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Katakana:r=>r>=12448&&r<=12543,Kanbun:r=>r>=12688&&r<=12703,"CJK Strokes":r=>r>=12736&&r<=12783,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"Private Use Area":r=>r>=57344&&r<=63743,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function Wd(r){for(const n of r)if(Kd(n.charCodeAt(0)))return!0;return!1}function Ig(r){for(const n of r)if(!jo(n.charCodeAt(0)))return!1;return!0}function Zd(r){const n=r.map((s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch{return null}})).filter((s=>s));return new RegExp(n.join("|"),"u")}const Pg=Zd(["Arab","Dupl","Mong","Ougr","Syrc"]);function jo(r){return!Pg.test(String.fromCodePoint(r))}const im=Zd(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Kd(r){return!(r!==746&&r!==747&&(r<4352||!(En["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||En["CJK Compatibility"](r)||En["CJK Strokes"](r)||!(!En["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||En["Enclosed CJK Letters and Months"](r)||En["Ideographic Description Characters"](r)||En.Kanbun(r)||En.Katakana(r)&&r!==12540||!(!En["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!En["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||En["Vertical Forms"](r)||En["Yijing Hexagram Symbols"](r)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(r))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(r))||im.test(String.fromCodePoint(r)))))}function am(r){return!(Kd(r)||(function(n){return!!(En["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||En["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||En["Letterlike Symbols"](n)||En["Number Forms"](n)||En["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||En["Control Pictures"](n)&&n!==9251||En["Optical Character Recognition"](n)||En["Enclosed Alphanumerics"](n)||En["Geometric Shapes"](n)||En["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||En["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||En["CJK Symbols and Punctuation"](n)||En.Katakana(n)||En["Private Use Area"](n)||En["CJK Compatibility Forms"](n)||En["Small Form Variants"](n)||En["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)})(r))}const Tg=Zd(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Xd(r){return Tg.test(String.fromCodePoint(r))}function Ag(r,n){return!(!n&&Xd(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||En.Khmer(r))}function Eg(r){for(const n of r)if(Xd(n.charCodeAt(0)))return!0;return!1}const Ya=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(r){this.pluginStatus=r.pluginStatus,this.pluginURL=r.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(r){this.applyArabicShaping=r.applyArabicShaping,this.processBidirectionalText=r.processBidirectionalText,this.processStyledBidirectionalText=r.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class si{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Gd,this.transition={})}isSupportedScript(n){return(function(s,d){for(const g of s)if(!Ag(g.charCodeAt(0),d))return!1;return!0})(n,Ya.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),d=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*s}}}class Uo{constructor(n,s){this.property=n,this.value=s,this.expression=(function(d,g){if(Gu(d))return new Ro(d,g);if(Ku(d)){const _=Md(d,g);if(_.result==="error")throw new Error(_.value.map((x=>`${x.key}: ${x.message}`)).join(", "));return _.value}{let _=d;return g.type==="color"&&typeof d=="string"?_=Gn.parse(d):g.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(d)&&(_=or.parse(d)):_=Za.parse(d),{kind:"constant",evaluate:()=>_}}})(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,d){return this.property.possiblyEvaluate(this,n,s,d)}}class rc{constructor(n){this.property=n,this.value=new Uo(n,void 0)}transitioned(n,s){return new rm(this.property,this.value,s,he({},n.transition,this.transition),n.now)}untransitioned(){return new rm(this.property,this.value,null,{},0)}}class sc{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return ue(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new rc(this._values[n].property)),this._values[n].value=new Uo(this._values[n].property,s===null?void 0:ue(s))}getTransition(n){return ue(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new rc(this._values[n].property)),this._values[n].transition=ue(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(n[s]=d);const g=this.getTransition(s);g!==void 0&&(n[`${s}-transition`]=g)}return n}transitioned(n,s){const d=new $l(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].transitioned(n,s._values[g]);return d}untransitioned(){const n=new $l(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class rm{constructor(n,s,d,g,_){this.property=n,this.value=s,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,n.specification.transition&&(g.delay||g.duration)&&(this.prior=d)}possiblyEvaluate(n,s,d){const g=n.now||0,_=this.value.possiblyEvaluate(n,s,d),x=this.prior;if(x){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return x.possiblyEvaluate(n,s,d);{const C=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,d),_,(function(T){if(T<=0)return 0;if(T>=1)return 1;const D=T*T,O=D*T;return 4*(T<.5?O:3*(T-D)+O-.75)})(C))}}return _}}class $l{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,d){const g=new jl(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(n,s,d);return g}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Nl{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return ue(this._values[n].value)}setValue(n,s){this._values[n]=new Uo(this._values[n].property,s===null?void 0:ue(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(n[s]=d)}return n}possiblyEvaluate(n,s,d){const g=new jl(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(n,s,d);return g}}class Nr{constructor(n,s,d){this.property=n,this.value=s,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,d,g){return this.property.evaluate(this.value,this.parameters,n,s,d,g)}}class jl{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Kt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,d){const g=Ta[this.specification.type];return g?g(n,s,d):n}}class ln{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,d,g){return new Nr(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},d,g)}:n.expression,s)}interpolate(n,s,d){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Nr(this,{kind:"constant",value:void 0},n.parameters);const g=Ta[this.specification.type];if(g){const _=g(n.value.value,s.value.value,d);return new Nr(this,{kind:"constant",value:_},n.parameters)}return n}evaluate(n,s,d,g,_,x){return n.kind==="constant"?n.value:n.evaluate(s,d,g,_,x)}}class oc extends ln{possiblyEvaluate(n,s,d,g){if(n.value===void 0)return new Nr(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},d,g),x=n.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,C=this._calculate(x,x,x,s);return new Nr(this,{kind:"constant",value:C},s)}if(n.expression.kind==="camera"){const _=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Nr(this,{kind:"constant",value:_},s)}return new Nr(this,n.expression,s)}evaluate(n,s,d,g,_,x){if(n.kind==="source"){const C=n.evaluate(s,d,g,_,x);return this._calculate(C,C,C,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},d,g),n.evaluate({zoom:Math.floor(s.zoom)},d,g),n.evaluate({zoom:Math.floor(s.zoom)+1},d,g),s):n.value}_calculate(n,s,d,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:d,to:s}}interpolate(n){return n}}class lc{constructor(n){this.specification=n}possiblyEvaluate(n,s,d,g){if(n.value!==void 0){if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},d,g);return this._calculate(_,_,_,s)}return this._calculate(n.expression.evaluate(new si(Math.floor(s.zoom-1),s)),n.expression.evaluate(new si(Math.floor(s.zoom),s)),n.expression.evaluate(new si(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,d,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:d,to:s}}interpolate(n){return n}}class Yd{constructor(n){this.specification=n}possiblyEvaluate(n,s,d,g){return!!n.expression.evaluate(s,null,{},d,g)}interpolate(){return!1}}class y{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const d=n[s];d.specification.overridable&&this.overridableProperties.push(s);const g=this.defaultPropertyValues[s]=new Uo(d,void 0),_=this.defaultTransitionablePropertyValues[s]=new rc(d);this.defaultTransitioningPropertyValues[s]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=g.possiblyEvaluate({})}}}qt("DataDrivenProperty",ln),qt("DataConstantProperty",Kt),qt("CrossFadedDataDrivenProperty",oc),qt("CrossFadedProperty",lc),qt("ColorRampProperty",Yd);const t="-transition";class u extends xe{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Nl(s.layout)),s.paint)){this._transitionablePaint=new sc(s.paint);for(const d in n.paint)this.setPaintProperty(d,n.paint[d],{validate:!1});for(const d in n.layout)this.setLayoutProperty(d,n.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new jl(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,d={}){s!=null&&this._validate(tm,`layers.${this.id}.layout.${n}`,n,s,d)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(t)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,d={}){if(s!=null&&this._validate(em,`layers.${this.id}.paint.${n}`,n,s,d))return!1;if(n.endsWith(t))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const g=this._transitionablePaint._values[n],_=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),C=g.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const T=this._transitionablePaint._values[n].value;return T.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(n,C,T)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,d){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ie(n,((s,d)=>!(s===void 0||d==="layout"&&!Object.keys(s).length||d==="paint"&&!Object.keys(s).length)))}_validate(n,s,d,g,_={}){return(!_||_.validate!==!1)&&Hd(this,n.call(Js,{key:s,layerType:this.type,objectKey:d,value:g,styleSpec:le,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Nr&&Do(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const m={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class p{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class v{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function P(r,n=1){let s=0,d=0;return{members:r.map((g=>{const _=m[g.type].BYTES_PER_ELEMENT,x=s=A(s,Math.max(n,_)),C=g.components||1;return d=Math.max(d,_),s+=_*C,{name:g.name,type:g.type,components:C,offset:x}})),size:A(s,Math.max(d,n)),alignment:n}}function A(r,n){return Math.ceil(r/n)*n}class M extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const d=this.length;return this.resize(d+1),this.emplace(d,n,s)}emplace(n,s,d){const g=2*n;return this.int16[g+0]=s,this.int16[g+1]=d,n}}M.prototype.bytesPerElement=4,qt("StructArrayLayout2i4",M);class $ extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,d)}emplace(n,s,d,g){const _=3*n;return this.int16[_+0]=s,this.int16[_+1]=d,this.int16[_+2]=g,n}}$.prototype.bytesPerElement=6,qt("StructArrayLayout3i6",$);class j extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,d,g)}emplace(n,s,d,g,_){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=d,this.int16[x+2]=g,this.int16[x+3]=_,n}}j.prototype.bytesPerElement=8,qt("StructArrayLayout4i8",j);class U extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x){const C=this.length;return this.resize(C+1),this.emplace(C,n,s,d,g,_,x)}emplace(n,s,d,g,_,x,C){const T=6*n;return this.int16[T+0]=s,this.int16[T+1]=d,this.int16[T+2]=g,this.int16[T+3]=_,this.int16[T+4]=x,this.int16[T+5]=C,n}}U.prototype.bytesPerElement=12,qt("StructArrayLayout2i4i12",U);class ee extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x){const C=this.length;return this.resize(C+1),this.emplace(C,n,s,d,g,_,x)}emplace(n,s,d,g,_,x,C){const T=4*n,D=8*n;return this.int16[T+0]=s,this.int16[T+1]=d,this.uint8[D+4]=g,this.uint8[D+5]=_,this.uint8[D+6]=x,this.uint8[D+7]=C,n}}ee.prototype.bytesPerElement=8,qt("StructArrayLayout2i4ub8",ee);class de extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const d=this.length;return this.resize(d+1),this.emplace(d,n,s)}emplace(n,s,d){const g=2*n;return this.float32[g+0]=s,this.float32[g+1]=d,n}}de.prototype.bytesPerElement=8,qt("StructArrayLayout2f8",de);class me extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x,C,T,D,O){const N=this.length;return this.resize(N+1),this.emplace(N,n,s,d,g,_,x,C,T,D,O)}emplace(n,s,d,g,_,x,C,T,D,O,N){const H=10*n;return this.uint16[H+0]=s,this.uint16[H+1]=d,this.uint16[H+2]=g,this.uint16[H+3]=_,this.uint16[H+4]=x,this.uint16[H+5]=C,this.uint16[H+6]=T,this.uint16[H+7]=D,this.uint16[H+8]=O,this.uint16[H+9]=N,n}}me.prototype.bytesPerElement=20,qt("StructArrayLayout10ui20",me);class be extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x,C,T,D,O,N,H){const X=this.length;return this.resize(X+1),this.emplace(X,n,s,d,g,_,x,C,T,D,O,N,H)}emplace(n,s,d,g,_,x,C,T,D,O,N,H,X){const ne=12*n;return this.int16[ne+0]=s,this.int16[ne+1]=d,this.int16[ne+2]=g,this.int16[ne+3]=_,this.uint16[ne+4]=x,this.uint16[ne+5]=C,this.uint16[ne+6]=T,this.uint16[ne+7]=D,this.int16[ne+8]=O,this.int16[ne+9]=N,this.int16[ne+10]=H,this.int16[ne+11]=X,n}}be.prototype.bytesPerElement=24,qt("StructArrayLayout4i4ui4i24",be);class Pe extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,d)}emplace(n,s,d,g){const _=3*n;return this.float32[_+0]=s,this.float32[_+1]=d,this.float32[_+2]=g,n}}Pe.prototype.bytesPerElement=12,qt("StructArrayLayout3f12",Pe);class Ae extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}Ae.prototype.bytesPerElement=4,qt("StructArrayLayout1ul4",Ae);class De extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x,C,T,D){const O=this.length;return this.resize(O+1),this.emplace(O,n,s,d,g,_,x,C,T,D)}emplace(n,s,d,g,_,x,C,T,D,O){const N=10*n,H=5*n;return this.int16[N+0]=s,this.int16[N+1]=d,this.int16[N+2]=g,this.int16[N+3]=_,this.int16[N+4]=x,this.int16[N+5]=C,this.uint32[H+3]=T,this.uint16[N+8]=D,this.uint16[N+9]=O,n}}De.prototype.bytesPerElement=20,qt("StructArrayLayout6i1ul2ui20",De);class ve extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x){const C=this.length;return this.resize(C+1),this.emplace(C,n,s,d,g,_,x)}emplace(n,s,d,g,_,x,C){const T=6*n;return this.int16[T+0]=s,this.int16[T+1]=d,this.int16[T+2]=g,this.int16[T+3]=_,this.int16[T+4]=x,this.int16[T+5]=C,n}}ve.prototype.bytesPerElement=12,qt("StructArrayLayout2i2i2i12",ve);class Oe extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,d,g,_)}emplace(n,s,d,g,_,x){const C=4*n,T=8*n;return this.float32[C+0]=s,this.float32[C+1]=d,this.float32[C+2]=g,this.int16[T+6]=_,this.int16[T+7]=x,n}}Oe.prototype.bytesPerElement=16,qt("StructArrayLayout2f1f2i16",Oe);class Ue extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x){const C=this.length;return this.resize(C+1),this.emplace(C,n,s,d,g,_,x)}emplace(n,s,d,g,_,x,C){const T=16*n,D=4*n,O=8*n;return this.uint8[T+0]=s,this.uint8[T+1]=d,this.float32[D+1]=g,this.float32[D+2]=_,this.int16[O+6]=x,this.int16[O+7]=C,n}}Ue.prototype.bytesPerElement=16,qt("StructArrayLayout2ub2f2i16",Ue);class Je extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,d)}emplace(n,s,d,g){const _=3*n;return this.uint16[_+0]=s,this.uint16[_+1]=d,this.uint16[_+2]=g,n}}Je.prototype.bytesPerElement=6,qt("StructArrayLayout3ui6",Je);class gt extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x,C,T,D,O,N,H,X,ne,oe,ye,Ie){const Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,n,s,d,g,_,x,C,T,D,O,N,H,X,ne,oe,ye,Ie)}emplace(n,s,d,g,_,x,C,T,D,O,N,H,X,ne,oe,ye,Ie,Ze){const ze=24*n,He=12*n,ot=48*n;return this.int16[ze+0]=s,this.int16[ze+1]=d,this.uint16[ze+2]=g,this.uint16[ze+3]=_,this.uint32[He+2]=x,this.uint32[He+3]=C,this.uint32[He+4]=T,this.uint16[ze+10]=D,this.uint16[ze+11]=O,this.uint16[ze+12]=N,this.float32[He+7]=H,this.float32[He+8]=X,this.uint8[ot+36]=ne,this.uint8[ot+37]=oe,this.uint8[ot+38]=ye,this.uint32[He+10]=Ie,this.int16[ze+22]=Ze,n}}gt.prototype.bytesPerElement=48,qt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",gt);class Ct extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x,C,T,D,O,N,H,X,ne,oe,ye,Ie,Ze,ze,He,ot,wt,Nt,on,Ot,Vt,Qt,Wt){const Ht=this.length;return this.resize(Ht+1),this.emplace(Ht,n,s,d,g,_,x,C,T,D,O,N,H,X,ne,oe,ye,Ie,Ze,ze,He,ot,wt,Nt,on,Ot,Vt,Qt,Wt)}emplace(n,s,d,g,_,x,C,T,D,O,N,H,X,ne,oe,ye,Ie,Ze,ze,He,ot,wt,Nt,on,Ot,Vt,Qt,Wt,Ht){const pt=32*n,tn=16*n;return this.int16[pt+0]=s,this.int16[pt+1]=d,this.int16[pt+2]=g,this.int16[pt+3]=_,this.int16[pt+4]=x,this.int16[pt+5]=C,this.int16[pt+6]=T,this.int16[pt+7]=D,this.uint16[pt+8]=O,this.uint16[pt+9]=N,this.uint16[pt+10]=H,this.uint16[pt+11]=X,this.uint16[pt+12]=ne,this.uint16[pt+13]=oe,this.uint16[pt+14]=ye,this.uint16[pt+15]=Ie,this.uint16[pt+16]=Ze,this.uint16[pt+17]=ze,this.uint16[pt+18]=He,this.uint16[pt+19]=ot,this.uint16[pt+20]=wt,this.uint16[pt+21]=Nt,this.uint16[pt+22]=on,this.uint32[tn+12]=Ot,this.float32[tn+13]=Vt,this.float32[tn+14]=Qt,this.uint16[pt+30]=Wt,this.uint16[pt+31]=Ht,n}}Ct.prototype.bytesPerElement=64,qt("StructArrayLayout8i15ui1ul2f2ui64",Ct);class zt extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}zt.prototype.bytesPerElement=4,qt("StructArrayLayout1f4",zt);class jt extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,d)}emplace(n,s,d,g){const _=3*n;return this.uint16[6*n+0]=s,this.float32[_+1]=d,this.float32[_+2]=g,n}}jt.prototype.bytesPerElement=12,qt("StructArrayLayout1ui2f12",jt);class Mt extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,d)}emplace(n,s,d,g){const _=4*n;return this.uint32[2*n+0]=s,this.uint16[_+2]=d,this.uint16[_+3]=g,n}}Mt.prototype.bytesPerElement=8,qt("StructArrayLayout1ul2ui8",Mt);class Et extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const d=this.length;return this.resize(d+1),this.emplace(d,n,s)}emplace(n,s,d){const g=2*n;return this.uint16[g+0]=s,this.uint16[g+1]=d,n}}Et.prototype.bytesPerElement=4,qt("StructArrayLayout2ui4",Et);class Xt extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}Xt.prototype.bytesPerElement=2,qt("StructArrayLayout1ui2",Xt);class fn extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,d,g)}emplace(n,s,d,g,_){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=d,this.float32[x+2]=g,this.float32[x+3]=_,n}}fn.prototype.bytesPerElement=16,qt("StructArrayLayout4f16",fn);class Dt extends p{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}Dt.prototype.size=20;class $t extends De{get(n){return new Dt(this,n)}}qt("CollisionBoxArray",$t);class cn extends p{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}cn.prototype.size=48;class oi extends gt{get(n){return new cn(this,n)}}qt("PlacedSymbolArray",oi);class wn extends p{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}wn.prototype.size=64;class An extends Ct{get(n){return new wn(this,n)}}qt("SymbolInstanceArray",An);class li extends zt{getoffsetX(n){return this.float32[1*n+0]}}qt("GlyphOffsetArray",li);class la extends ${getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}qt("SymbolLineVertexArray",la);class wr extends p{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}wr.prototype.size=12;class ui extends jt{get(n){return new wr(this,n)}}qt("TextAnchorOffsetArray",ui);class Ea extends p{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ea.prototype.size=8;class _a extends Mt{get(n){return new Ea(this,n)}}qt("FeatureIndexArray",_a);class ua extends M{}class ba extends M{}class jr extends M{}class Ho extends U{}class uc extends ee{}class qo extends de{}class dr extends me{}class cc extends be{}class Jd extends Pe{}class hr extends Ae{}class fr extends ve{}class _s extends Ue{}class Sr extends Je{}class ea extends Et{}const ca=P([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ja}=ca;class Mn{constructor(n=[]){this.segments=n}prepareSegment(n,s,d,g){let _=this.segments[this.segments.length-1];return n>Mn.MAX_VERTEX_ARRAY_LENGTH&&pe(`Max vertices per segment is ${Mn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!_||_.vertexLength+n>Mn.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g)&&(_={vertexOffset:s.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},g!==void 0&&(_.sortKey=g),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,d,g){return new Mn([{vertexOffset:n,primitiveOffset:s,vertexLength:d,primitiveLength:g,vaos:{},sortKey:0}])}}function Qs(r,n){return 256*(r=J(Math.floor(r),0,255))+J(Math.floor(n),0,255)}Mn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,qt("SegmentVector",Mn);const Go=P([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Wo={exports:{}},sm={exports:{}};sm.exports=function(r,n){var s,d,g,_,x,C,T,D;for(d=r.length-(s=3&r.length),g=n,x=3432918353,C=461845907,D=0;D<d;)T=255&r.charCodeAt(D)|(255&r.charCodeAt(++D))<<8|(255&r.charCodeAt(++D))<<16|(255&r.charCodeAt(++D))<<24,++D,g=27492+(65535&(_=5*(65535&(g=(g^=T=(65535&(T=(T=(65535&T)*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*C+(((T>>>16)*C&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(T=0,s){case 3:T^=(255&r.charCodeAt(D+2))<<16;case 2:T^=(255&r.charCodeAt(D+1))<<8;case 1:g^=T=(65535&(T=(T=(65535&(T^=255&r.charCodeAt(D)))*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*C+(((T>>>16)*C&65535)<<16)&4294967295}return g^=r.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var Mg=sm.exports,om={exports:{}};om.exports=function(r,n){for(var s,d=r.length,g=n^d,_=0;d>=4;)s=1540483477*(65535&(s=255&r.charCodeAt(_)|(255&r.charCodeAt(++_))<<8|(255&r.charCodeAt(++_))<<16|(255&r.charCodeAt(++_))<<24))+((1540483477*(s>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),d-=4,++_;switch(d){case 3:g^=(255&r.charCodeAt(_+2))<<16;case 2:g^=(255&r.charCodeAt(_+1))<<8;case 1:g=1540483477*(65535&(g^=255&r.charCodeAt(_)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var bs=Mg,lm=om.exports;Wo.exports=bs,Wo.exports.murmur3=bs,Wo.exports.murmur2=lm;var dc=b(Wo.exports);class Ul{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,d,g){this.ids.push(hc(n)),this.positions.push(s,d,g)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=hc(n);let d=0,g=this.ids.length-1;for(;d<g;){const x=d+g>>1;this.ids[x]>=s?g=x:d=x+1}const _=[];for(;this.ids[d]===s;)_.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return _}static serialize(n,s){const d=new Float64Array(n.ids),g=new Uint32Array(n.positions);return fc(d,g,0,d.length-1),s&&s.push(d.buffer,g.buffer),{ids:d,positions:g}}static deserialize(n){const s=new Ul;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function hc(r){const n=+r;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:dc(String(r))}function fc(r,n,s,d){for(;s<d;){const g=r[s+d>>1];let _=s-1,x=d+1;for(;;){do _++;while(r[_]<g);do x--;while(r[x]>g);if(_>=x)break;Zo(r,_,x),Zo(n,3*_,3*x),Zo(n,3*_+1,3*x+1),Zo(n,3*_+2,3*x+2)}x-s<d-x?(fc(r,n,s,x),s=x+1):(fc(r,n,x+1,d),d=x)}}function Zo(r,n,s){const d=r[n];r[n]=r[s],r[s]=d}qt("FeaturePositionMap",Ul);class Hl{constructor(n,s){this.gl=n.gl,this.location=s}}class um extends Hl{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Tb extends Hl{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Ab extends Hl{constructor(n,s){super(n,s),this.current=Gn.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const $I=new Float32Array(16);function Dg(r){return[Qs(255*r.r,255*r.g),Qs(255*r.b,255*r.a)]}class Qd{constructor(n,s,d){this.value=n,this.uniformNames=s.map((g=>`u_${g}`)),this.type=d}setUniform(n,s,d){n.set(d.constantOr(this.value))}getBinding(n,s,d){return this.type==="color"?new Ab(n,s):new um(n,s)}}class mc{constructor(n,s){this.uniformNames=s.map((d=>`u_${d}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,d,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&n.set(_)}getBinding(n,s,d){return d.substr(0,9)==="u_pattern"?new Tb(n,s):new um(n,s)}}class eo{constructor(n,s,d,g){this.expression=n,this.type=d,this.maxValue=0,this.paintVertexAttributes=s.map((_=>({name:`a_${_}`,type:"Float32",components:d==="color"?2:1,offset:0}))),this.paintVertexArray=new g}populatePaintArray(n,s,d,g,_){const x=this.paintVertexArray.length,C=this.expression.evaluate(new si(0),s,{},g,[],_);this.paintVertexArray.resize(n),this._setPaintValue(x,n,C)}updatePaintArray(n,s,d,g){const _=this.expression.evaluate({zoom:0},d,g);this._setPaintValue(n,s,_)}_setPaintValue(n,s,d){if(this.type==="color"){const g=Dg(d);for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=n;g<s;g++)this.paintVertexArray.emplace(g,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class is{constructor(n,s,d,g,_,x){this.expression=n,this.uniformNames=s.map((C=>`u_${C}_t`)),this.type=d,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=s.map((C=>({name:`a_${C}`,type:"Float32",components:d==="color"?4:2,offset:0}))),this.paintVertexArray=new x}populatePaintArray(n,s,d,g,_){const x=this.expression.evaluate(new si(this.zoom),s,{},g,[],_),C=this.expression.evaluate(new si(this.zoom+1),s,{},g,[],_),T=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(T,n,x,C)}updatePaintArray(n,s,d,g){const _=this.expression.evaluate({zoom:this.zoom},d,g),x=this.expression.evaluate({zoom:this.zoom+1},d,g);this._setPaintValue(n,s,_,x)}_setPaintValue(n,s,d,g){if(this.type==="color"){const _=Dg(d),x=Dg(g);for(let C=n;C<s;C++)this.paintVertexArray.emplace(C,_[0],_[1],x[0],x[1])}else{for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,d,g);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(g))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const d=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,g=J(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);n.set(g)}getBinding(n,s,d){return new um(n,s)}}class Ko{constructor(n,s,d,g,_,x){this.expression=n,this.type=s,this.useIntegerZoom=d,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(n,s,d){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(g,n,s.patterns&&s.patterns[this.layerId],d)}updatePaintArray(n,s,d,g,_){this._setPaintValues(n,s,d.patterns&&d.patterns[this.layerId],_)}_setPaintValues(n,s,d,g){if(!g||!d)return;const{min:_,mid:x,max:C}=d,T=g[_],D=g[x],O=g[C];if(T&&D&&O)for(let N=n;N<s;N++)this.zoomInPaintVertexArray.emplace(N,D.tl[0],D.tl[1],D.br[0],D.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],D.pixelRatio,T.pixelRatio),this.zoomOutPaintVertexArray.emplace(N,D.tl[0],D.tl[1],D.br[0],D.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],D.pixelRatio,O.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Go.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Go.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Eb{constructor(n,s,d){this.binders={},this._buffers=[];const g=[];for(const _ in n.paint._values){if(!d(_))continue;const x=n.paint.get(_);if(!(x instanceof Nr&&Do(x.property.specification)))continue;const C=NI(_,n.type),T=x.value,D=x.property.specification.type,O=x.property.useIntegerZoom,N=x.property.specification["property-type"],H=N==="cross-faded"||N==="cross-faded-data-driven";if(T.kind==="constant")this.binders[_]=H?new mc(T.value,C):new Qd(T.value,C,D),g.push(`/u_${_}`);else if(T.kind==="source"||H){const X=Mb(_,D,"source");this.binders[_]=H?new Ko(T,D,O,s,X,n.id):new eo(T,C,D,X),g.push(`/a_${_}`)}else{const X=Mb(_,D,"composite");this.binders[_]=new is(T,C,D,O,s,X),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof eo||s instanceof is?s.maxValue:0}populatePaintArrays(n,s,d,g,_){for(const x in this.binders){const C=this.binders[x];(C instanceof eo||C instanceof is||C instanceof Ko)&&C.populatePaintArray(n,s,d,g,_)}}setConstantPatternPositions(n,s){for(const d in this.binders){const g=this.binders[d];g instanceof mc&&g.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,d,g,_){let x=!1;for(const C in n){const T=s.getPositions(C);for(const D of T){const O=d.feature(D.index);for(const N in this.binders){const H=this.binders[N];if((H instanceof eo||H instanceof is||H instanceof Ko)&&H.expression.isStateDependent===!0){const X=g.paint.get(N);H.expression=X.value,H.updatePaintArray(D.start,D.end,O,n[C],_),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const d=this.binders[s];(d instanceof Qd||d instanceof mc)&&n.push(...d.uniformNames.map((g=>`#define HAS_UNIFORM_${g}`)))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof eo||d instanceof is)for(let g=0;g<d.paintVertexAttributes.length;g++)n.push(d.paintVertexAttributes[g].name);else if(d instanceof Ko)for(let g=0;g<Go.members.length;g++)n.push(Go.members[g].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof Qd||d instanceof mc||d instanceof is)for(const g of d.uniformNames)n.push(g)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const d=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof Qd||_ instanceof mc||_ instanceof is){for(const x of _.uniformNames)if(s[x]){const C=_.getBinding(n,s[x],x);d.push({name:x,property:g,binding:C})}}}return d}setUniforms(n,s,d,g){for(const{name:_,property:x,binding:C}of s)this.binders[x].setUniform(C,g,d.get(x),_)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const d=this.binders[s];if(n&&d instanceof Ko){const g=n.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(d instanceof eo||d instanceof is)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(n){for(const s in this.binders){const d=this.binders[s];(d instanceof eo||d instanceof is||d instanceof Ko)&&d.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof eo||s instanceof is||s instanceof Ko)&&s.destroy()}}}class ql{constructor(n,s,d=(()=>!0)){this.programConfigurations={};for(const g of n)this.programConfigurations[g.id]=new Eb(g,s,d);this.needsUpload=!1,this._featureMap=new Ul,this._bufferOffset=0}populatePaintArrays(n,s,d,g,_,x){for(const C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(n,s,g,_,x);s.id!==void 0&&this._featureMap.add(s.id,d,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,d,g){for(const _ of d)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(n,this._featureMap,s,_,g)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function NI(r,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${n}-`,"").replace(/-/g,"_")]}function Mb(r,n,s){const d={color:{source:de,composite:fn},number:{source:zt,composite:de}},g=(function(_){return{"line-pattern":{source:dr,composite:dr},"fill-pattern":{source:dr,composite:dr},"fill-extrusion-pattern":{source:dr,composite:dr}}[_]})(r);return g&&g[s]||d[n][s]}qt("ConstantBinder",Qd),qt("CrossFadedConstantBinder",mc),qt("SourceExpressionBinder",eo),qt("CrossFadedCompositeBinder",Ko),qt("CompositeExpressionBinder",is),qt("ProgramConfiguration",Eb,{omit:["_buffers"]}),qt("ProgramConfigurationSet",ql);const Bi=8192,Vg=Math.pow(2,14)-1,Db=-Vg-1;function Gl(r){const n=Bi/r.extent,s=r.loadGeometry();for(let d=0;d<s.length;d++){const g=s[d];for(let _=0;_<g.length;_++){const x=g[_],C=Math.round(x.x*n),T=Math.round(x.y*n);x.x=J(C,Db,Vg),x.y=J(T,Db,Vg),(C<x.x||C>x.x+1||T<x.y||T>x.y+1)&&pe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Wl(r,n){return{type:r.type,id:r.id,properties:r.properties,geometry:n?Gl(r):[]}}function cm(r,n,s,d,g){r.emplaceBack(2*n+(d+1)/2,2*s+(g+1)/2)}class zg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new ba,this.indexArray=new Sr,this.segments=new Mn,this.programConfigurations=new ql(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,d){const g=this.layers[0],_=[];let x=null,C=!1;g.type==="circle"&&(x=g.layout.get("circle-sort-key"),C=!x.isConstant());for(const{feature:T,id:D,index:O,sourceLayerIndex:N}of n){const H=this.layers[0]._featureFilter.needGeometry,X=Wl(T,H);if(!this.layers[0]._featureFilter.filter(new si(this.zoom),X,d))continue;const ne=C?x.evaluate(X,{},d):void 0,oe={id:D,properties:T.properties,type:T.type,sourceLayerIndex:N,index:O,geometry:H?X.geometry:Gl(T),patterns:{},sortKey:ne};_.push(oe)}C&&_.sort(((T,D)=>T.sortKey-D.sortKey));for(const T of _){const{geometry:D,index:O,sourceLayerIndex:N}=T,H=n[O].feature;this.addFeature(T,D,O,d),s.featureIndex.insert(H,D,O,N,this.index)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ja),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,d,g){for(const _ of s)for(const x of _){const C=x.x,T=x.y;if(C<0||C>=Bi||T<0||T>=Bi)continue;const D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),O=D.vertexLength;cm(this.layoutVertexArray,C,T,-1,-1),cm(this.layoutVertexArray,C,T,1,-1),cm(this.layoutVertexArray,C,T,1,1),cm(this.layoutVertexArray,C,T,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+3,O+2),D.vertexLength+=4,D.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{},g)}}function Vb(r,n){for(let s=0;s<r.length;s++)if(pc(n,r[s]))return!0;for(let s=0;s<n.length;s++)if(pc(r,n[s]))return!0;return!!Lg(r,n)}function jI(r,n,s){return!!pc(r,n)||!!Bg(n,r,s)}function zb(r,n){if(r.length===1)return Bb(n,r[0]);for(let s=0;s<n.length;s++){const d=n[s];for(let g=0;g<d.length;g++)if(pc(r,d[g]))return!0}for(let s=0;s<r.length;s++)if(Bb(n,r[s]))return!0;for(let s=0;s<n.length;s++)if(Lg(r,n[s]))return!0;return!1}function UI(r,n,s){if(r.length>1){if(Lg(r,n))return!0;for(let d=0;d<n.length;d++)if(Bg(n[d],r,s))return!0}for(let d=0;d<r.length;d++)if(Bg(r[d],n,s))return!0;return!1}function Lg(r,n){if(r.length===0||n.length===0)return!1;for(let s=0;s<r.length-1;s++){const d=r[s],g=r[s+1];for(let _=0;_<n.length-1;_++)if(HI(d,g,n[_],n[_+1]))return!0}return!1}function HI(r,n,s,d){return Ce(r,s,d)!==Ce(n,s,d)&&Ce(r,n,s)!==Ce(r,n,d)}function Bg(r,n,s){const d=s*s;if(n.length===1)return r.distSqr(n[0])<d;for(let g=1;g<n.length;g++)if(Lb(r,n[g-1],n[g])<d)return!0;return!1}function Lb(r,n,s){const d=n.distSqr(s);if(d===0)return r.distSqr(n);const g=((r.x-n.x)*(s.x-n.x)+(r.y-n.y)*(s.y-n.y))/d;return r.distSqr(g<0?n:g>1?s:s.sub(n)._mult(g)._add(n))}function Bb(r,n){let s,d,g,_=!1;for(let x=0;x<r.length;x++){s=r[x];for(let C=0,T=s.length-1;C<s.length;T=C++)d=s[C],g=s[T],d.y>n.y!=g.y>n.y&&n.x<(g.x-d.x)*(n.y-d.y)/(g.y-d.y)+d.x&&(_=!_)}return _}function pc(r,n){let s=!1;for(let d=0,g=r.length-1;d<r.length;g=d++){const _=r[d],x=r[g];_.y>n.y!=x.y>n.y&&n.x<(x.x-_.x)*(n.y-_.y)/(x.y-_.y)+_.x&&(s=!s)}return s}function qI(r,n,s){const d=s[0],g=s[2];if(r.x<d.x&&n.x<d.x||r.x>g.x&&n.x>g.x||r.y<d.y&&n.y<d.y||r.y>g.y&&n.y>g.y)return!1;const _=Ce(r,n,s[0]);return _!==Ce(r,n,s[1])||_!==Ce(r,n,s[2])||_!==Ce(r,n,s[3])}function eh(r,n,s){const d=n.paint.get(r).value;return d.kind==="constant"?d.value:s.programConfigurations.get(n.id).getMaxValue(r)}function dm(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function hm(r,n,s,d,g){if(!n[0]&&!n[1])return r;const _=k.convert(n)._mult(g);s==="viewport"&&_._rotate(-d);const x=[];for(let C=0;C<r.length;C++)x.push(r[C].sub(_));return x}let Rb,Fb;qt("CircleBucket",zg,{omit:["layers"]});var GI={get paint(){return Fb=Fb||new y({"circle-radius":new ln(le.paint_circle["circle-radius"]),"circle-color":new ln(le.paint_circle["circle-color"]),"circle-blur":new ln(le.paint_circle["circle-blur"]),"circle-opacity":new ln(le.paint_circle["circle-opacity"]),"circle-translate":new Kt(le.paint_circle["circle-translate"]),"circle-translate-anchor":new Kt(le.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Kt(le.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Kt(le.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ln(le.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ln(le.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ln(le.paint_circle["circle-stroke-opacity"])})},get layout(){return Rb=Rb||new y({"circle-sort-key":new ln(le.layout_circle["circle-sort-key"])})}},Ma=1e-6,gc=typeof Float32Array<"u"?Float32Array:Array;function Rg(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Ob(r,n,s){var d=n[0],g=n[1],_=n[2],x=n[3],C=n[4],T=n[5],D=n[6],O=n[7],N=n[8],H=n[9],X=n[10],ne=n[11],oe=n[12],ye=n[13],Ie=n[14],Ze=n[15],ze=s[0],He=s[1],ot=s[2],wt=s[3];return r[0]=ze*d+He*C+ot*N+wt*oe,r[1]=ze*g+He*T+ot*H+wt*ye,r[2]=ze*_+He*D+ot*X+wt*Ie,r[3]=ze*x+He*O+ot*ne+wt*Ze,r[4]=(ze=s[4])*d+(He=s[5])*C+(ot=s[6])*N+(wt=s[7])*oe,r[5]=ze*g+He*T+ot*H+wt*ye,r[6]=ze*_+He*D+ot*X+wt*Ie,r[7]=ze*x+He*O+ot*ne+wt*Ze,r[8]=(ze=s[8])*d+(He=s[9])*C+(ot=s[10])*N+(wt=s[11])*oe,r[9]=ze*g+He*T+ot*H+wt*ye,r[10]=ze*_+He*D+ot*X+wt*Ie,r[11]=ze*x+He*O+ot*ne+wt*Ze,r[12]=(ze=s[12])*d+(He=s[13])*C+(ot=s[14])*N+(wt=s[15])*oe,r[13]=ze*g+He*T+ot*H+wt*ye,r[14]=ze*_+He*D+ot*X+wt*Ie,r[15]=ze*x+He*O+ot*ne+wt*Ze,r}Math.hypot||(Math.hypot=function(){for(var r=0,n=arguments.length;n--;)r+=arguments[n]*arguments[n];return Math.sqrt(r)});var th,WI=Ob;function fm(r,n,s){var d=n[0],g=n[1],_=n[2],x=n[3];return r[0]=s[0]*d+s[4]*g+s[8]*_+s[12]*x,r[1]=s[1]*d+s[5]*g+s[9]*_+s[13]*x,r[2]=s[2]*d+s[6]*g+s[10]*_+s[14]*x,r[3]=s[3]*d+s[7]*g+s[11]*_+s[15]*x,r}th=new gc(4),gc!=Float32Array&&(th[0]=0,th[1]=0,th[2]=0,th[3]=0);class ZI extends u{constructor(n){super(n,GI)}createBucket(n){return new zg(n)}queryRadius(n){const s=n;return eh("circle-radius",this,s)+eh("circle-stroke-width",this,s)+dm(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,d,g,_,x,C,T){const D=hm(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,C),O=this.paint.get("circle-radius").evaluate(s,d)+this.paint.get("circle-stroke-width").evaluate(s,d),N=this.paint.get("circle-pitch-alignment")==="map",H=N?D:(function(ne,oe){return ne.map((ye=>$b(ye,oe)))})(D,T),X=N?O*C:O;for(const ne of g)for(const oe of ne){const ye=N?oe:$b(oe,T);let Ie=X;const Ze=fm([],[oe.x,oe.y,0,1],T);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ie*=Ze[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ie*=x.cameraToCenterDistance/Ze[3]),jI(H,ye,Ie))return!0}return!1}}function $b(r,n){const s=fm([],[r.x,r.y,0,1],n);return new k(s[0]/s[3],s[1]/s[3])}class Nb extends zg{}let jb;qt("HeatmapBucket",Nb,{omit:["layers"]});var KI={get paint(){return jb=jb||new y({"heatmap-radius":new ln(le.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ln(le.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Kt(le.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Yd(le.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Kt(le.paint_heatmap["heatmap-opacity"])})}};function Fg(r,{width:n,height:s},d,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==n*s*d)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${n*s*d}`)}else g=new Uint8Array(n*s*d);return r.width=n,r.height=s,r.data=g,r}function Ub(r,{width:n,height:s},d){if(n===r.width&&s===r.height)return;const g=Fg({},{width:n,height:s},d);Og(r,g,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,n),height:Math.min(r.height,s)},d),r.width=n,r.height=s,r.data=g.data}function Og(r,n,s,d,g,_){if(g.width===0||g.height===0)return n;if(g.width>r.width||g.height>r.height||s.x>r.width-g.width||s.y>r.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>n.width||g.height>n.height||d.x>n.width-g.width||d.y>n.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=r.data,C=n.data;if(x===C)throw new Error("srcData equals dstData, so image is already copied");for(let T=0;T<g.height;T++){const D=((s.y+T)*r.width+s.x)*_,O=((d.y+T)*n.width+d.x)*_;for(let N=0;N<g.width*_;N++)C[O+N]=x[D+N]}return n}class nh{constructor(n,s){Fg(this,n,1,s)}resize(n){Ub(this,n,1)}clone(){return new nh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,d,g,_){Og(n,s,d,g,_,1)}}class kr{constructor(n,s){Fg(this,n,4,s)}resize(n){Ub(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new kr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,d,g,_){Og(n,s,d,g,_,4)}}function Hb(r){const n={},s=r.resolution||256,d=r.clips?r.clips.length:1,g=r.image||new kr({width:s,height:d});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const _=(x,C,T)=>{n[r.evaluationKey]=T;const D=r.expression.evaluate(n);g.data[x+C+0]=Math.floor(255*D.r/D.a),g.data[x+C+1]=Math.floor(255*D.g/D.a),g.data[x+C+2]=Math.floor(255*D.b/D.a),g.data[x+C+3]=Math.floor(255*D.a)};if(r.clips)for(let x=0,C=0;x<d;++x,C+=4*s)for(let T=0,D=0;T<s;T++,D+=4){const O=T/(s-1),{start:N,end:H}=r.clips[x];_(C,D,N*(1-O)+H*O)}else for(let x=0,C=0;x<s;x++,C+=4)_(0,C,x/(s-1));return g}qt("AlphaImage",nh),qt("RGBAImage",kr);const $g="big-fb";class XI extends u{createBucket(n){return new Nb(n)}constructor(n){super(n,KI),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Hb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has($g)&&this.heatmapFbos.delete($g)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let qb;var YI={get paint(){return qb=qb||new y({"hillshade-illumination-direction":new Kt(le.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Kt(le.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Kt(le.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Kt(le.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Kt(le.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Kt(le.paint_hillshade["hillshade-accent-color"])})}};class JI extends u{constructor(n){super(n,YI)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const QI=P([{name:"a_pos",components:2,type:"Int16"}],4),{members:eP}=QI;function Gb(r,n,s=2){const d=n&&n.length,g=d?n[0]*s:r.length;let _=Wb(r,0,g,s,!0);const x=[];if(!_||_.next===_.prev)return x;let C,T,D;if(d&&(_=(function(O,N,H,X){const ne=[];for(let oe=0,ye=N.length;oe<ye;oe++){const Ie=Wb(O,N[oe]*X,oe<ye-1?N[oe+1]*X:O.length,X,!1);Ie===Ie.next&&(Ie.steiner=!0),ne.push(lP(Ie))}ne.sort(rP);for(let oe=0;oe<ne.length;oe++)H=sP(ne[oe],H);return H})(r,n,_,s)),r.length>80*s){C=1/0,T=1/0;let O=-1/0,N=-1/0;for(let H=s;H<g;H+=s){const X=r[H],ne=r[H+1];X<C&&(C=X),ne<T&&(T=ne),X>O&&(O=X),ne>N&&(N=ne)}D=Math.max(O-C,N-T),D=D!==0?32767/D:0}return ih(_,x,s,C,T,D,0),x}function Wb(r,n,s,d,g){let _;if(g===(function(x,C,T,D){let O=0;for(let N=C,H=T-D;N<T;N+=D)O+=(x[H]-x[N])*(x[N+1]+x[H+1]),H=N;return O})(r,n,s,d)>0)for(let x=n;x<s;x+=d)_=Xb(x/d|0,r[x],r[x+1],_);else for(let x=s-d;x>=n;x-=d)_=Xb(x/d|0,r[x],r[x+1],_);return _&&mm(_,_.next)&&(rh(_),_=_.next),_}function Zl(r,n){if(!r)return r;n||(n=r);let s,d=r;do if(s=!1,d.steiner||!mm(d,d.next)&&Di(d.prev,d,d.next)!==0)d=d.next;else{if(rh(d),d=n=d.prev,d===d.next)break;s=!0}while(s||d!==n);return n}function ih(r,n,s,d,g,_,x){if(!r)return;!x&&_&&(function(T,D,O,N){let H=T;do H.z===0&&(H.z=Ng(H.x,H.y,D,O,N)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==T);H.prevZ.nextZ=null,H.prevZ=null,(function(X){let ne,oe=1;do{let ye,Ie=X;X=null;let Ze=null;for(ne=0;Ie;){ne++;let ze=Ie,He=0;for(let wt=0;wt<oe&&(He++,ze=ze.nextZ,ze);wt++);let ot=oe;for(;He>0||ot>0&&ze;)He!==0&&(ot===0||!ze||Ie.z<=ze.z)?(ye=Ie,Ie=Ie.nextZ,He--):(ye=ze,ze=ze.nextZ,ot--),Ze?Ze.nextZ=ye:X=ye,ye.prevZ=Ze,Ze=ye;Ie=ze}Ze.nextZ=null,oe*=2}while(ne>1)})(H)})(r,d,g,_);let C=r;for(;r.prev!==r.next;){const T=r.prev,D=r.next;if(_?nP(r,d,g,_):tP(r))n.push(T.i,r.i,D.i),rh(r),r=D.next,C=D.next;else if((r=D)===C){x?x===1?ih(r=iP(Zl(r),n),n,s,d,g,_,2):x===2&&aP(r,n,s,d,g,_):ih(Zl(r),n,s,d,g,_,1);break}}}function tP(r){const n=r.prev,s=r,d=r.next;if(Di(n,s,d)>=0)return!1;const g=n.x,_=s.x,x=d.x,C=n.y,T=s.y,D=d.y,O=g<_?g<x?g:x:_<x?_:x,N=C<T?C<D?C:D:T<D?T:D,H=g>_?g>x?g:x:_>x?_:x,X=C>T?C>D?C:D:T>D?T:D;let ne=d.next;for(;ne!==n;){if(ne.x>=O&&ne.x<=H&&ne.y>=N&&ne.y<=X&&vc(g,C,_,T,x,D,ne.x,ne.y)&&Di(ne.prev,ne,ne.next)>=0)return!1;ne=ne.next}return!0}function nP(r,n,s,d){const g=r.prev,_=r,x=r.next;if(Di(g,_,x)>=0)return!1;const C=g.x,T=_.x,D=x.x,O=g.y,N=_.y,H=x.y,X=C<T?C<D?C:D:T<D?T:D,ne=O<N?O<H?O:H:N<H?N:H,oe=C>T?C>D?C:D:T>D?T:D,ye=O>N?O>H?O:H:N>H?N:H,Ie=Ng(X,ne,n,s,d),Ze=Ng(oe,ye,n,s,d);let ze=r.prevZ,He=r.nextZ;for(;ze&&ze.z>=Ie&&He&&He.z<=Ze;){if(ze.x>=X&&ze.x<=oe&&ze.y>=ne&&ze.y<=ye&&ze!==g&&ze!==x&&vc(C,O,T,N,D,H,ze.x,ze.y)&&Di(ze.prev,ze,ze.next)>=0||(ze=ze.prevZ,He.x>=X&&He.x<=oe&&He.y>=ne&&He.y<=ye&&He!==g&&He!==x&&vc(C,O,T,N,D,H,He.x,He.y)&&Di(He.prev,He,He.next)>=0))return!1;He=He.nextZ}for(;ze&&ze.z>=Ie;){if(ze.x>=X&&ze.x<=oe&&ze.y>=ne&&ze.y<=ye&&ze!==g&&ze!==x&&vc(C,O,T,N,D,H,ze.x,ze.y)&&Di(ze.prev,ze,ze.next)>=0)return!1;ze=ze.prevZ}for(;He&&He.z<=Ze;){if(He.x>=X&&He.x<=oe&&He.y>=ne&&He.y<=ye&&He!==g&&He!==x&&vc(C,O,T,N,D,H,He.x,He.y)&&Di(He.prev,He,He.next)>=0)return!1;He=He.nextZ}return!0}function iP(r,n){let s=r;do{const d=s.prev,g=s.next.next;!mm(d,g)&&Zb(d,s,s.next,g)&&ah(d,g)&&ah(g,d)&&(n.push(d.i,s.i,g.i),rh(s),rh(s.next),s=r=g),s=s.next}while(s!==r);return Zl(s)}function aP(r,n,s,d,g,_){let x=r;do{let C=x.next.next;for(;C!==x.prev;){if(x.i!==C.i&&uP(x,C)){let T=Kb(x,C);return x=Zl(x,x.next),T=Zl(T,T.next),ih(x,n,s,d,g,_,0),void ih(T,n,s,d,g,_,0)}C=C.next}x=x.next}while(x!==r)}function rP(r,n){return r.x-n.x}function sP(r,n){const s=(function(g,_){let x=_;const C=g.x,T=g.y;let D,O=-1/0;do{if(T<=x.y&&T>=x.next.y&&x.next.y!==x.y){const oe=x.x+(T-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(oe<=C&&oe>O&&(O=oe,D=x.x<x.next.x?x:x.next,oe===C))return D}x=x.next}while(x!==_);if(!D)return null;const N=D,H=D.x,X=D.y;let ne=1/0;x=D;do{if(C>=x.x&&x.x>=H&&C!==x.x&&vc(T<X?C:O,T,H,X,T<X?O:C,T,x.x,x.y)){const oe=Math.abs(T-x.y)/(C-x.x);ah(x,g)&&(oe<ne||oe===ne&&(x.x>D.x||x.x===D.x&&oP(D,x)))&&(D=x,ne=oe)}x=x.next}while(x!==N);return D})(r,n);if(!s)return n;const d=Kb(s,r);return Zl(d,d.next),Zl(s,s.next)}function oP(r,n){return Di(r.prev,r,n.prev)<0&&Di(n.next,r,r.next)<0}function Ng(r,n,s,d,g){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-s)*g|0)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-d)*g|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function lP(r){let n=r,s=r;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==r);return s}function vc(r,n,s,d,g,_,x,C){return(g-x)*(n-C)>=(r-x)*(_-C)&&(r-x)*(d-C)>=(s-x)*(n-C)&&(s-x)*(_-C)>=(g-x)*(d-C)}function uP(r,n){return r.next.i!==n.i&&r.prev.i!==n.i&&!(function(s,d){let g=s;do{if(g.i!==s.i&&g.next.i!==s.i&&g.i!==d.i&&g.next.i!==d.i&&Zb(g,g.next,s,d))return!0;g=g.next}while(g!==s);return!1})(r,n)&&(ah(r,n)&&ah(n,r)&&(function(s,d){let g=s,_=!1;const x=(s.x+d.x)/2,C=(s.y+d.y)/2;do g.y>C!=g.next.y>C&&g.next.y!==g.y&&x<(g.next.x-g.x)*(C-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==s);return _})(r,n)&&(Di(r.prev,r,n.prev)||Di(r,n.prev,n))||mm(r,n)&&Di(r.prev,r,r.next)>0&&Di(n.prev,n,n.next)>0)}function Di(r,n,s){return(n.y-r.y)*(s.x-n.x)-(n.x-r.x)*(s.y-n.y)}function mm(r,n){return r.x===n.x&&r.y===n.y}function Zb(r,n,s,d){const g=gm(Di(r,n,s)),_=gm(Di(r,n,d)),x=gm(Di(s,d,r)),C=gm(Di(s,d,n));return g!==_&&x!==C||!(g!==0||!pm(r,s,n))||!(_!==0||!pm(r,d,n))||!(x!==0||!pm(s,r,d))||!(C!==0||!pm(s,n,d))}function pm(r,n,s){return n.x<=Math.max(r.x,s.x)&&n.x>=Math.min(r.x,s.x)&&n.y<=Math.max(r.y,s.y)&&n.y>=Math.min(r.y,s.y)}function gm(r){return r>0?1:r<0?-1:0}function ah(r,n){return Di(r.prev,r,r.next)<0?Di(r,n,r.next)>=0&&Di(r,r.prev,n)>=0:Di(r,n,r.prev)<0||Di(r,r.next,n)<0}function Kb(r,n){const s=jg(r.i,r.x,r.y),d=jg(n.i,n.x,n.y),g=r.next,_=n.prev;return r.next=n,n.prev=r,s.next=g,g.prev=s,d.next=s,s.prev=d,_.next=d,d.prev=_,d}function Xb(r,n,s,d){const g=jg(r,n,s);return d?(g.next=d.next,g.prev=d,d.next.prev=g,d.next=g):(g.prev=g,g.next=g),g}function rh(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function jg(r,n,s){return{i:r,x:n,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Ug(r,n,s){const d=s.patternDependencies;let g=!1;for(const _ of n){const x=_.paint.get(`${r}-pattern`);x.isConstant()||(g=!0);const C=x.constantOr(null);C&&(g=!0,d[C.to]=!0,d[C.from]=!0)}return g}function Hg(r,n,s,d,g){const _=g.patternDependencies;for(const x of n){const C=x.paint.get(`${r}-pattern`).value;if(C.kind!=="constant"){let T=C.evaluate({zoom:d-1},s,{},g.availableImages),D=C.evaluate({zoom:d},s,{},g.availableImages),O=C.evaluate({zoom:d+1},s,{},g.availableImages);T=T&&T.name?T.name:T,D=D&&D.name?D.name:D,O=O&&O.name?O.name:O,_[T]=!0,_[D]=!0,_[O]=!0,s.patterns[x.id]={min:T,mid:D,max:O}}}return s}class qg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new jr,this.indexArray=new Sr,this.indexArray2=new ea,this.programConfigurations=new ql(n.layers,n.zoom),this.segments=new Mn,this.segments2=new Mn,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,d){this.hasPattern=Ug("fill",this.layers,s);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),x=[];for(const{feature:C,id:T,index:D,sourceLayerIndex:O}of n){const N=this.layers[0]._featureFilter.needGeometry,H=Wl(C,N);if(!this.layers[0]._featureFilter.filter(new si(this.zoom),H,d))continue;const X=_?g.evaluate(H,{},d,s.availableImages):void 0,ne={id:T,properties:C.properties,type:C.type,sourceLayerIndex:O,index:D,geometry:N?H.geometry:Gl(C),patterns:{},sortKey:X};x.push(ne)}_&&x.sort(((C,T)=>C.sortKey-T.sortKey));for(const C of x){const{geometry:T,index:D,sourceLayerIndex:O}=C;if(this.hasPattern){const N=Hg("fill",this.layers,C,this.zoom,s);this.patternFeatures.push(N)}else this.addFeature(C,T,D,d,{});s.featureIndex.insert(n[D].feature,T,D,O,this.index)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}addFeatures(n,s,d){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,eP),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,d,g,_){for(const x of Nu(s,500)){let C=0;for(const X of x)C+=X.length;const T=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),D=T.vertexLength,O=[],N=[];for(const X of x){if(X.length===0)continue;X!==x[0]&&N.push(O.length/2);const ne=this.segments2.prepareSegment(X.length,this.layoutVertexArray,this.indexArray2),oe=ne.vertexLength;this.layoutVertexArray.emplaceBack(X[0].x,X[0].y),this.indexArray2.emplaceBack(oe+X.length-1,oe),O.push(X[0].x),O.push(X[0].y);for(let ye=1;ye<X.length;ye++)this.layoutVertexArray.emplaceBack(X[ye].x,X[ye].y),this.indexArray2.emplaceBack(oe+ye-1,oe+ye),O.push(X[ye].x),O.push(X[ye].y);ne.vertexLength+=X.length,ne.primitiveLength+=X.length}const H=Gb(O,N);for(let X=0;X<H.length;X+=3)this.indexArray.emplaceBack(D+H[X],D+H[X+1],D+H[X+2]);T.vertexLength+=C,T.primitiveLength+=H.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,_,g)}}let Yb,Jb;qt("FillBucket",qg,{omit:["layers","patternFeatures"]});var cP={get paint(){return Jb=Jb||new y({"fill-antialias":new Kt(le.paint_fill["fill-antialias"]),"fill-opacity":new ln(le.paint_fill["fill-opacity"]),"fill-color":new ln(le.paint_fill["fill-color"]),"fill-outline-color":new ln(le.paint_fill["fill-outline-color"]),"fill-translate":new Kt(le.paint_fill["fill-translate"]),"fill-translate-anchor":new Kt(le.paint_fill["fill-translate-anchor"]),"fill-pattern":new oc(le.paint_fill["fill-pattern"])})},get layout(){return Yb=Yb||new y({"fill-sort-key":new ln(le.layout_fill["fill-sort-key"])})}};class dP extends u{constructor(n){super(n,cP)}recalculate(n,s){super.recalculate(n,s);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new qg(n)}queryRadius(){return dm(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,d,g,_,x,C){return zb(hm(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,C),g)}isTileClipped(){return!0}}const hP=P([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),fP=P([{name:"a_centroid",components:2,type:"Int16"}],4),{members:mP}=hP;var Xo={},pP=S,Qb=yc;function yc(r,n,s,d,g){this.properties={},this.extent=s,this.type=0,this._pbf=r,this._geometry=-1,this._keys=d,this._values=g,r.readFields(gP,this,n)}function gP(r,n,s){r==1?n.id=s.readVarint():r==2?(function(d,g){for(var _=d.readVarint()+d.pos;d.pos<_;){var x=g._keys[d.readVarint()],C=g._values[d.readVarint()];g.properties[x]=C}})(s,n):r==3?n.type=s.readVarint():r==4&&(n._geometry=s.pos)}function vP(r){for(var n,s,d=0,g=0,_=r.length,x=_-1;g<_;x=g++)d+=((s=r[x]).x-(n=r[g]).x)*(n.y+s.y);return d}yc.types=["Unknown","Point","LineString","Polygon"],yc.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var n,s=r.readVarint()+r.pos,d=1,g=0,_=0,x=0,C=[];r.pos<s;){if(g<=0){var T=r.readVarint();d=7&T,g=T>>3}if(g--,d===1||d===2)_+=r.readSVarint(),x+=r.readSVarint(),d===1&&(n&&C.push(n),n=[]),n.push(new pP(_,x));else{if(d!==7)throw new Error("unknown command "+d);n&&n.push(n[0].clone())}}return n&&C.push(n),C},yc.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var n=r.readVarint()+r.pos,s=1,d=0,g=0,_=0,x=1/0,C=-1/0,T=1/0,D=-1/0;r.pos<n;){if(d<=0){var O=r.readVarint();s=7&O,d=O>>3}if(d--,s===1||s===2)(g+=r.readSVarint())<x&&(x=g),g>C&&(C=g),(_+=r.readSVarint())<T&&(T=_),_>D&&(D=_);else if(s!==7)throw new Error("unknown command "+s)}return[x,T,C,D]},yc.prototype.toGeoJSON=function(r,n,s){var d,g,_=this.extent*Math.pow(2,s),x=this.extent*r,C=this.extent*n,T=this.loadGeometry(),D=yc.types[this.type];function O(X){for(var ne=0;ne<X.length;ne++){var oe=X[ne];X[ne]=[360*(oe.x+x)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(oe.y+C)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var N=[];for(d=0;d<T.length;d++)N[d]=T[d][0];O(T=N);break;case 2:for(d=0;d<T.length;d++)O(T[d]);break;case 3:for(T=(function(X){var ne=X.length;if(ne<=1)return[X];for(var oe,ye,Ie=[],Ze=0;Ze<ne;Ze++){var ze=vP(X[Ze]);ze!==0&&(ye===void 0&&(ye=ze<0),ye===ze<0?(oe&&Ie.push(oe),oe=[X[Ze]]):oe.push(X[Ze]))}return oe&&Ie.push(oe),Ie})(T),d=0;d<T.length;d++)for(g=0;g<T[d].length;g++)O(T[d][g])}T.length===1?T=T[0]:D="Multi"+D;var H={type:"Feature",geometry:{type:D,coordinates:T},properties:this.properties};return"id"in this&&(H.id=this.id),H};var yP=Qb,ex=tx;function tx(r,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(_P,this,n),this.length=this._features.length}function _P(r,n,s){r===15?n.version=s.readVarint():r===1?n.name=s.readString():r===5?n.extent=s.readVarint():r===2?n._features.push(s.pos):r===3?n._keys.push(s.readString()):r===4&&n._values.push((function(d){for(var g=null,_=d.readVarint()+d.pos;d.pos<_;){var x=d.readVarint()>>3;g=x===1?d.readString():x===2?d.readFloat():x===3?d.readDouble():x===4?d.readVarint64():x===5?d.readVarint():x===6?d.readSVarint():x===7?d.readBoolean():null}return g})(s))}tx.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var n=this._pbf.readVarint()+this._pbf.pos;return new yP(this._pbf,n,this.extent,this._keys,this._values)};var bP=ex;function xP(r,n,s){if(r===3){var d=new bP(s,s.readVarint()+s.pos);d.length&&(n[d.name]=d)}}Xo.VectorTile=function(r,n){this.layers=r.readFields(xP,{},n)},Xo.VectorTileFeature=Qb,Xo.VectorTileLayer=ex;const wP=Xo.VectorTileFeature.types,Gg=Math.pow(2,13);function sh(r,n,s,d,g,_,x,C){r.emplaceBack(n,s,2*Math.floor(d*Gg)+x,g*Gg*2,_*Gg*2,Math.round(C))}class Wg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ho,this.centroidVertexArray=new ua,this.indexArray=new Sr,this.programConfigurations=new ql(n.layers,n.zoom),this.segments=new Mn,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,d){this.features=[],this.hasPattern=Ug("fill-extrusion",this.layers,s);for(const{feature:g,id:_,index:x,sourceLayerIndex:C}of n){const T=this.layers[0]._featureFilter.needGeometry,D=Wl(g,T);if(!this.layers[0]._featureFilter.filter(new si(this.zoom),D,d))continue;const O={id:_,sourceLayerIndex:C,index:x,geometry:T?D.geometry:Gl(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Hg("fill-extrusion",this.layers,O,this.zoom,s)):this.addFeature(O,O.geometry,x,d,{}),s.featureIndex.insert(g,O.geometry,x,C,this.index,!0)}}addFeatures(n,s,d){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,s,d)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,mP),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,fP.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,d,g,_){for(const x of Nu(s,500)){const C={x:0,y:0,vertexCount:0};let T=0;for(const ne of x)T+=ne.length;let D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ne of x){if(ne.length===0||kP(ne))continue;let oe=0;for(let ye=0;ye<ne.length;ye++){const Ie=ne[ye];if(ye>=1){const Ze=ne[ye-1];if(!SP(Ie,Ze)){D.vertexLength+4>Mn.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ze=Ie.sub(Ze)._perp()._unit(),He=Ze.dist(Ie);oe+He>32768&&(oe=0),sh(this.layoutVertexArray,Ie.x,Ie.y,ze.x,ze.y,0,0,oe),sh(this.layoutVertexArray,Ie.x,Ie.y,ze.x,ze.y,0,1,oe),C.x+=2*Ie.x,C.y+=2*Ie.y,C.vertexCount+=2,oe+=He,sh(this.layoutVertexArray,Ze.x,Ze.y,ze.x,ze.y,0,0,oe),sh(this.layoutVertexArray,Ze.x,Ze.y,ze.x,ze.y,0,1,oe),C.x+=2*Ze.x,C.y+=2*Ze.y,C.vertexCount+=2;const ot=D.vertexLength;this.indexArray.emplaceBack(ot,ot+2,ot+1),this.indexArray.emplaceBack(ot+1,ot+2,ot+3),D.vertexLength+=4,D.primitiveLength+=2}}}}if(D.vertexLength+T>Mn.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray)),wP[n.type]!=="Polygon")continue;const O=[],N=[],H=D.vertexLength;for(const ne of x)if(ne.length!==0){ne!==x[0]&&N.push(O.length/2);for(let oe=0;oe<ne.length;oe++){const ye=ne[oe];sh(this.layoutVertexArray,ye.x,ye.y,0,0,1,1,0),C.x+=ye.x,C.y+=ye.y,C.vertexCount+=1,O.push(ye.x),O.push(ye.y)}}const X=Gb(O,N);for(let ne=0;ne<X.length;ne+=3)this.indexArray.emplaceBack(H+X[ne],H+X[ne+2],H+X[ne+1]);D.primitiveLength+=X.length/3,D.vertexLength+=T;for(let ne=0;ne<C.vertexCount;ne++){const oe=Math.floor(C.x/C.vertexCount),ye=Math.floor(C.y/C.vertexCount);this.centroidVertexArray.emplaceBack(oe,ye)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,_,g)}}function SP(r,n){return r.x===n.x&&(r.x<0||r.x>Bi)||r.y===n.y&&(r.y<0||r.y>Bi)}function kP(r){return r.every((n=>n.x<0))||r.every((n=>n.x>Bi))||r.every((n=>n.y<0))||r.every((n=>n.y>Bi))}let nx;qt("FillExtrusionBucket",Wg,{omit:["layers","features"]});var CP={get paint(){return nx=nx||new y({"fill-extrusion-opacity":new Kt(le["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ln(le["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Kt(le["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Kt(le["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new oc(le["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ln(le["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ln(le["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Kt(le["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class IP extends u{constructor(n){super(n,CP)}createBucket(n){return new Wg(n)}queryRadius(){return dm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,d,g,_,x,C,T){const D=hm(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,C),O=this.paint.get("fill-extrusion-height").evaluate(s,d),N=this.paint.get("fill-extrusion-base").evaluate(s,d),H=(function(ne,oe,ye,Ie){const Ze=[];for(const ze of ne){const He=[ze.x,ze.y,0,1];fm(He,He,oe),Ze.push(new k(He[0]/He[3],He[1]/He[3]))}return Ze})(D,T),X=(function(ne,oe,ye,Ie){const Ze=[],ze=[],He=Ie[8]*oe,ot=Ie[9]*oe,wt=Ie[10]*oe,Nt=Ie[11]*oe,on=Ie[8]*ye,Ot=Ie[9]*ye,Vt=Ie[10]*ye,Qt=Ie[11]*ye;for(const Wt of ne){const Ht=[],pt=[];for(const tn of Wt){const Yt=tn.x,dn=tn.y,Qn=Ie[0]*Yt+Ie[4]*dn+Ie[12],Yn=Ie[1]*Yt+Ie[5]*dn+Ie[13],Zi=Ie[2]*Yt+Ie[6]*dn+Ie[14],Ur=Ie[3]*Yt+Ie[7]*dn+Ie[15],ha=Zi+wt,Ki=Ur+Nt,Da=Qn+on,Va=Yn+Ot,za=Zi+Vt,Ti=Ur+Qt,Xi=new k((Qn+He)/Ki,(Yn+ot)/Ki);Xi.z=ha/Ki,Ht.push(Xi);const xa=new k(Da/Ti,Va/Ti);xa.z=za/Ti,pt.push(xa)}Ze.push(Ht),ze.push(pt)}return[Ze,ze]})(g,N,O,T);return(function(ne,oe,ye){let Ie=1/0;zb(ye,oe)&&(Ie=ix(ye,oe[0]));for(let Ze=0;Ze<oe.length;Ze++){const ze=oe[Ze],He=ne[Ze];for(let ot=0;ot<ze.length-1;ot++){const wt=ze[ot],Nt=[wt,ze[ot+1],He[ot+1],He[ot],wt];Vb(ye,Nt)&&(Ie=Math.min(Ie,ix(ye,Nt)))}}return Ie!==1/0&&Ie})(X[0],X[1],H)}}function oh(r,n){return r.x*n.x+r.y*n.y}function ix(r,n){if(r.length===1){let s=0;const d=n[s++];let g;for(;!g||d.equals(g);)if(g=n[s++],!g)return 1/0;for(;s<n.length;s++){const _=n[s],x=r[0],C=g.sub(d),T=_.sub(d),D=x.sub(d),O=oh(C,C),N=oh(C,T),H=oh(T,T),X=oh(D,C),ne=oh(D,T),oe=O*H-N*N,ye=(H*X-N*ne)/oe,Ie=(O*ne-N*X)/oe,Ze=d.z*(1-ye-Ie)+g.z*ye+_.z*Ie;if(isFinite(Ze))return Ze}return 1/0}{let s=1/0;for(const d of n)s=Math.min(s,d.z);return s}}const PP=P([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:TP}=PP,AP=P([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:EP}=AP,MP=Xo.VectorTileFeature.types,DP=Math.cos(Math.PI/180*37.5),ax=Math.pow(2,14)/.5;class Zg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((s=>{this.gradients[s.id]={}})),this.layoutVertexArray=new uc,this.layoutVertexArray2=new qo,this.indexArray=new Sr,this.programConfigurations=new ql(n.layers,n.zoom),this.segments=new Mn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,d){this.hasPattern=Ug("line",this.layers,s);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),x=[];for(const{feature:C,id:T,index:D,sourceLayerIndex:O}of n){const N=this.layers[0]._featureFilter.needGeometry,H=Wl(C,N);if(!this.layers[0]._featureFilter.filter(new si(this.zoom),H,d))continue;const X=_?g.evaluate(H,{},d):void 0,ne={id:T,properties:C.properties,type:C.type,sourceLayerIndex:O,index:D,geometry:N?H.geometry:Gl(C),patterns:{},sortKey:X};x.push(ne)}_&&x.sort(((C,T)=>C.sortKey-T.sortKey));for(const C of x){const{geometry:T,index:D,sourceLayerIndex:O}=C;if(this.hasPattern){const N=Hg("line",this.layers,C,this.zoom,s);this.patternFeatures.push(N)}else this.addFeature(C,T,D,d,{});s.featureIndex.insert(n[D].feature,T,D,O,this.index)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}addFeatures(n,s,d){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,EP)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,TP),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,d,g,_){const x=this.layers[0].layout,C=x.get("line-join").evaluate(n,{}),T=x.get("line-cap"),D=x.get("line-miter-limit"),O=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const N of s)this.addLine(N,n,C,T,D,O);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,_,g)}addLine(n,s,d,g,_,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ie=0;Ie<n.length-1;Ie++)this.totalDistance+=n[Ie].dist(n[Ie+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const C=MP[s.type]==="Polygon";let T=n.length;for(;T>=2&&n[T-1].equals(n[T-2]);)T--;let D=0;for(;D<T-1&&n[D].equals(n[D+1]);)D++;if(T<(C?3:2))return;d==="bevel"&&(_=1.05);const O=this.overscaling<=16?15*Bi/(512*this.overscaling):0,N=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let H,X,ne,oe,ye;this.e1=this.e2=-1,C&&(H=n[T-2],ye=n[D].sub(H)._unit()._perp());for(let Ie=D;Ie<T;Ie++){if(ne=Ie===T-1?C?n[D+1]:void 0:n[Ie+1],ne&&n[Ie].equals(ne))continue;ye&&(oe=ye),H&&(X=H),H=n[Ie],ye=ne?ne.sub(H)._unit()._perp():oe,oe=oe||ye;let Ze=oe.add(ye);Ze.x===0&&Ze.y===0||Ze._unit();const ze=oe.x*ye.x+oe.y*ye.y,He=Ze.x*ye.x+Ze.y*ye.y,ot=He!==0?1/He:1/0,wt=2*Math.sqrt(2-2*He),Nt=He<DP&&X&&ne,on=oe.x*ye.y-oe.y*ye.x>0;if(Nt&&Ie>D){const Qt=H.dist(X);if(Qt>2*O){const Wt=H.sub(H.sub(X)._mult(O/Qt)._round());this.updateDistance(X,Wt),this.addCurrentVertex(Wt,oe,0,0,N),X=Wt}}const Ot=X&&ne;let Vt=Ot?d:C?"butt":g;if(Ot&&Vt==="round"&&(ot<x?Vt="miter":ot<=2&&(Vt="fakeround")),Vt==="miter"&&ot>_&&(Vt="bevel"),Vt==="bevel"&&(ot>2&&(Vt="flipbevel"),ot<_&&(Vt="miter")),X&&this.updateDistance(X,H),Vt==="miter")Ze._mult(ot),this.addCurrentVertex(H,Ze,0,0,N);else if(Vt==="flipbevel"){if(ot>100)Ze=ye.mult(-1);else{const Qt=ot*oe.add(ye).mag()/oe.sub(ye).mag();Ze._perp()._mult(Qt*(on?-1:1))}this.addCurrentVertex(H,Ze,0,0,N),this.addCurrentVertex(H,Ze.mult(-1),0,0,N)}else if(Vt==="bevel"||Vt==="fakeround"){const Qt=-Math.sqrt(ot*ot-1),Wt=on?Qt:0,Ht=on?0:Qt;if(X&&this.addCurrentVertex(H,oe,Wt,Ht,N),Vt==="fakeround"){const pt=Math.round(180*wt/Math.PI/20);for(let tn=1;tn<pt;tn++){let Yt=tn/pt;if(Yt!==.5){const Qn=Yt-.5;Yt+=Yt*Qn*(Yt-1)*((1.0904+ze*(ze*(3.55645-1.43519*ze)-3.2452))*Qn*Qn+(.848013+ze*(.215638*ze-1.06021)))}const dn=ye.sub(oe)._mult(Yt)._add(oe)._unit()._mult(on?-1:1);this.addHalfVertex(H,dn.x,dn.y,!1,on,0,N)}}ne&&this.addCurrentVertex(H,ye,-Wt,-Ht,N)}else if(Vt==="butt")this.addCurrentVertex(H,Ze,0,0,N);else if(Vt==="square"){const Qt=X?1:-1;this.addCurrentVertex(H,Ze,Qt,Qt,N)}else Vt==="round"&&(X&&(this.addCurrentVertex(H,oe,0,0,N),this.addCurrentVertex(H,oe,1,1,N,!0)),ne&&(this.addCurrentVertex(H,ye,-1,-1,N,!0),this.addCurrentVertex(H,ye,0,0,N)));if(Nt&&Ie<T-1){const Qt=H.dist(ne);if(Qt>2*O){const Wt=H.add(ne.sub(H)._mult(O/Qt)._round());this.updateDistance(H,Wt),this.addCurrentVertex(Wt,ye,0,0,N),H=Wt}}}}addCurrentVertex(n,s,d,g,_,x=!1){const C=s.y*g-s.x,T=-s.y-s.x*g;this.addHalfVertex(n,s.x+s.y*d,s.y-s.x*d,x,!1,d,_),this.addHalfVertex(n,C,T,x,!0,-g,_),this.distance>ax/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,d,g,_,x))}addHalfVertex({x:n,y:s},d,g,_,x,C,T){const D=.5*(this.lineClips?this.scaledDistance*(ax-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(_?1:0),(s<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*g)+128,1+(C===0?0:C<0?-1:1)|(63&D)<<2,D>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const O=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,O),T.primitiveLength++),x?this.e2=O:this.e1=O}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let rx,sx;qt("LineBucket",Zg,{omit:["layers","patternFeatures"]});var ox={get paint(){return sx=sx||new y({"line-opacity":new ln(le.paint_line["line-opacity"]),"line-color":new ln(le.paint_line["line-color"]),"line-translate":new Kt(le.paint_line["line-translate"]),"line-translate-anchor":new Kt(le.paint_line["line-translate-anchor"]),"line-width":new ln(le.paint_line["line-width"]),"line-gap-width":new ln(le.paint_line["line-gap-width"]),"line-offset":new ln(le.paint_line["line-offset"]),"line-blur":new ln(le.paint_line["line-blur"]),"line-dasharray":new lc(le.paint_line["line-dasharray"]),"line-pattern":new oc(le.paint_line["line-pattern"]),"line-gradient":new Yd(le.paint_line["line-gradient"])})},get layout(){return rx=rx||new y({"line-cap":new Kt(le.layout_line["line-cap"]),"line-join":new ln(le.layout_line["line-join"]),"line-miter-limit":new Kt(le.layout_line["line-miter-limit"]),"line-round-limit":new Kt(le.layout_line["line-round-limit"]),"line-sort-key":new ln(le.layout_line["line-sort-key"])})}};class VP extends ln{possiblyEvaluate(n,s){return s=new si(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,d,g){return s=he({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,d,g)}}let vm;class zP extends u{constructor(n){super(n,ox),this.gradientVersion=0,vm||(vm=new VP(ox.paint.properties["line-width"].specification),vm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!(function(d){return d._styleExpression!==void 0})(s)&&s._styleExpression.expression instanceof Io,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=vm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Zg(n)}queryRadius(n){const s=n,d=lx(eh("line-width",this,s),eh("line-gap-width",this,s)),g=eh("line-offset",this,s);return d/2+Math.abs(g)+dm(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,d,g,_,x,C){const T=hm(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,C),D=C/2*lx(this.paint.get("line-width").evaluate(s,d),this.paint.get("line-gap-width").evaluate(s,d)),O=this.paint.get("line-offset").evaluate(s,d);return O&&(g=(function(N,H){const X=[];for(let ne=0;ne<N.length;ne++){const oe=N[ne],ye=[];for(let Ie=0;Ie<oe.length;Ie++){const Ze=oe[Ie-1],ze=oe[Ie],He=oe[Ie+1],ot=Ie===0?new k(0,0):ze.sub(Ze)._unit()._perp(),wt=Ie===oe.length-1?new k(0,0):He.sub(ze)._unit()._perp(),Nt=ot._add(wt)._unit(),on=Nt.x*wt.x+Nt.y*wt.y;on!==0&&Nt._mult(1/on),ye.push(Nt._mult(H)._add(ze))}X.push(ye)}return X})(g,O*C)),(function(N,H,X){for(let ne=0;ne<H.length;ne++){const oe=H[ne];if(N.length>=3){for(let ye=0;ye<oe.length;ye++)if(pc(N,oe[ye]))return!0}if(UI(N,oe,X))return!0}return!1})(T,g,D)}isTileClipped(){return!0}}function lx(r,n){return n>0?n+2*r:r}const LP=P([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),BP=P([{name:"a_projected_pos",components:3,type:"Float32"}],4);P([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const RP=P([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);P([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ux=P([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),FP=P([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function OP(r,n,s){return r.sections.forEach((d=>{d.text=(function(g,_,x){const C=_.layout.get("text-transform").evaluate(x,{});return C==="uppercase"?g=g.toLocaleUpperCase():C==="lowercase"&&(g=g.toLocaleLowerCase()),Ya.applyArabicShaping&&(g=Ya.applyArabicShaping(g)),g})(d.text,n,s)})),r}P([{name:"triangle",components:3,type:"Uint16"}]),P([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),P([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),P([{type:"Float32",name:"offsetX"}]),P([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),P([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const lh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var ji=24,cx=Xn,dx=function(r,n,s,d,g){var _,x,C=8*g-d-1,T=(1<<C)-1,D=T>>1,O=-7,N=g-1,H=-1,X=r[n+N];for(N+=H,_=X&(1<<-O)-1,X>>=-O,O+=C;O>0;_=256*_+r[n+N],N+=H,O-=8);for(x=_&(1<<-O)-1,_>>=-O,O+=d;O>0;x=256*x+r[n+N],N+=H,O-=8);if(_===0)_=1-D;else{if(_===T)return x?NaN:1/0*(X?-1:1);x+=Math.pow(2,d),_-=D}return(X?-1:1)*x*Math.pow(2,_-d)},hx=function(r,n,s,d,g,_){var x,C,T,D=8*_-g-1,O=(1<<D)-1,N=O>>1,H=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=0,ne=1,oe=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(C=isNaN(n)?1:0,x=O):(x=Math.floor(Math.log(n)/Math.LN2),n*(T=Math.pow(2,-x))<1&&(x--,T*=2),(n+=x+N>=1?H/T:H*Math.pow(2,1-N))*T>=2&&(x++,T/=2),x+N>=O?(C=0,x=O):x+N>=1?(C=(n*T-1)*Math.pow(2,g),x+=N):(C=n*Math.pow(2,N-1)*Math.pow(2,g),x=0));g>=8;r[s+X]=255&C,X+=ne,C/=256,g-=8);for(x=x<<g|C,D+=g;D>0;r[s+X]=255&x,X+=ne,x/=256,D-=8);r[s+X-ne]|=128*oe};function Xn(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Xn.Varint=0,Xn.Fixed64=1,Xn.Bytes=2,Xn.Fixed32=5;var Kg=4294967296,fx=1/Kg,mx=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function to(r){return r.type===Xn.Bytes?r.readVarint()+r.pos:r.pos+1}function _c(r,n,s){return s?4294967296*n+(r>>>0):4294967296*(n>>>0)+(r>>>0)}function px(r,n,s){var d=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(d);for(var g=s.pos-1;g>=r;g--)s.buf[g+d]=s.buf[g]}function $P(r,n){for(var s=0;s<r.length;s++)n.writeVarint(r[s])}function NP(r,n){for(var s=0;s<r.length;s++)n.writeSVarint(r[s])}function jP(r,n){for(var s=0;s<r.length;s++)n.writeFloat(r[s])}function UP(r,n){for(var s=0;s<r.length;s++)n.writeDouble(r[s])}function HP(r,n){for(var s=0;s<r.length;s++)n.writeBoolean(r[s])}function qP(r,n){for(var s=0;s<r.length;s++)n.writeFixed32(r[s])}function GP(r,n){for(var s=0;s<r.length;s++)n.writeSFixed32(r[s])}function WP(r,n){for(var s=0;s<r.length;s++)n.writeFixed64(r[s])}function ZP(r,n){for(var s=0;s<r.length;s++)n.writeSFixed64(r[s])}function ym(r,n){return(r[n]|r[n+1]<<8|r[n+2]<<16)+16777216*r[n+3]}function bc(r,n,s){r[s]=n,r[s+1]=n>>>8,r[s+2]=n>>>16,r[s+3]=n>>>24}function gx(r,n){return(r[n]|r[n+1]<<8|r[n+2]<<16)+(r[n+3]<<24)}Xn.prototype={destroy:function(){this.buf=null},readFields:function(r,n,s){for(s=s||this.length;this.pos<s;){var d=this.readVarint(),g=d>>3,_=this.pos;this.type=7&d,r(g,n,this),this.pos===_&&this.skip(d)}return n},readMessage:function(r,n){return this.readFields(r,n,this.readVarint()+this.pos)},readFixed32:function(){var r=ym(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=gx(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=ym(this.buf,this.pos)+ym(this.buf,this.pos+4)*Kg;return this.pos+=8,r},readSFixed64:function(){var r=ym(this.buf,this.pos)+gx(this.buf,this.pos+4)*Kg;return this.pos+=8,r},readFloat:function(){var r=dx(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=dx(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var n,s,d=this.buf;return n=127&(s=d[this.pos++]),s<128?n:(n|=(127&(s=d[this.pos++]))<<7,s<128?n:(n|=(127&(s=d[this.pos++]))<<14,s<128?n:(n|=(127&(s=d[this.pos++]))<<21,s<128?n:(function(g,_,x){var C,T,D=x.buf;if(C=(112&(T=D[x.pos++]))>>4,T<128||(C|=(127&(T=D[x.pos++]))<<3,T<128)||(C|=(127&(T=D[x.pos++]))<<10,T<128)||(C|=(127&(T=D[x.pos++]))<<17,T<128)||(C|=(127&(T=D[x.pos++]))<<24,T<128)||(C|=(1&(T=D[x.pos++]))<<31,T<128))return _c(g,C,_);throw new Error("Expected varint not more than 10 bytes")})(n|=(15&(s=d[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,n=this.pos;return this.pos=r,r-n>=12&&mx?(function(s,d,g){return mx.decode(s.subarray(d,g))})(this.buf,n,r):(function(s,d,g){for(var _="",x=d;x<g;){var C,T,D,O=s[x],N=null,H=O>239?4:O>223?3:O>191?2:1;if(x+H>g)break;H===1?O<128&&(N=O):H===2?(192&(C=s[x+1]))==128&&(N=(31&O)<<6|63&C)<=127&&(N=null):H===3?(T=s[x+2],(192&(C=s[x+1]))==128&&(192&T)==128&&((N=(15&O)<<12|(63&C)<<6|63&T)<=2047||N>=55296&&N<=57343)&&(N=null)):H===4&&(T=s[x+2],D=s[x+3],(192&(C=s[x+1]))==128&&(192&T)==128&&(192&D)==128&&((N=(15&O)<<18|(63&C)<<12|(63&T)<<6|63&D)<=65535||N>=1114112)&&(N=null)),N===null?(N=65533,H=1):N>65535&&(N-=65536,_+=String.fromCharCode(N>>>10&1023|55296),N=56320|1023&N),_+=String.fromCharCode(N),x+=H}return _})(this.buf,n,r)},readBytes:function(){var r=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,r);return this.pos=r,n},readPackedVarint:function(r,n){if(this.type!==Xn.Bytes)return r.push(this.readVarint(n));var s=to(this);for(r=r||[];this.pos<s;)r.push(this.readVarint(n));return r},readPackedSVarint:function(r){if(this.type!==Xn.Bytes)return r.push(this.readSVarint());var n=to(this);for(r=r||[];this.pos<n;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Xn.Bytes)return r.push(this.readBoolean());var n=to(this);for(r=r||[];this.pos<n;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Xn.Bytes)return r.push(this.readFloat());var n=to(this);for(r=r||[];this.pos<n;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Xn.Bytes)return r.push(this.readDouble());var n=to(this);for(r=r||[];this.pos<n;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Xn.Bytes)return r.push(this.readFixed32());var n=to(this);for(r=r||[];this.pos<n;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Xn.Bytes)return r.push(this.readSFixed32());var n=to(this);for(r=r||[];this.pos<n;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Xn.Bytes)return r.push(this.readFixed64());var n=to(this);for(r=r||[];this.pos<n;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Xn.Bytes)return r.push(this.readSFixed64());var n=to(this);for(r=r||[];this.pos<n;)r.push(this.readSFixed64());return r},skip:function(r){var n=7&r;if(n===Xn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Xn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Xn.Fixed32)this.pos+=4;else{if(n!==Xn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(r,n){this.writeVarint(r<<3|n)},realloc:function(r){for(var n=this.length||16;n<this.pos+r;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),bc(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),bc(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),bc(this.buf,-1&r,this.pos),bc(this.buf,Math.floor(r*fx),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),bc(this.buf,-1&r,this.pos),bc(this.buf,Math.floor(r*fx),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?(function(n,s){var d,g;if(n>=0?(d=n%4294967296|0,g=n/4294967296|0):(g=~(-n/4294967296),4294967295^(d=~(-n%4294967296))?d=d+1|0:(d=0,g=g+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),(function(_,x,C){C.buf[C.pos++]=127&_|128,_>>>=7,C.buf[C.pos++]=127&_|128,_>>>=7,C.buf[C.pos++]=127&_|128,_>>>=7,C.buf[C.pos++]=127&_|128,C.buf[C.pos]=127&(_>>>=7)})(d,0,s),(function(_,x){var C=(7&_)<<4;x.buf[x.pos++]|=C|((_>>>=3)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_)))))})(g,s)})(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var n=this.pos;this.pos=(function(d,g,_){for(var x,C,T=0;T<g.length;T++){if((x=g.charCodeAt(T))>55295&&x<57344){if(!C){x>56319||T+1===g.length?(d[_++]=239,d[_++]=191,d[_++]=189):C=x;continue}if(x<56320){d[_++]=239,d[_++]=191,d[_++]=189,C=x;continue}x=C-55296<<10|x-56320|65536,C=null}else C&&(d[_++]=239,d[_++]=191,d[_++]=189,C=null);x<128?d[_++]=x:(x<2048?d[_++]=x>>6|192:(x<65536?d[_++]=x>>12|224:(d[_++]=x>>18|240,d[_++]=x>>12&63|128),d[_++]=x>>6&63|128),d[_++]=63&x|128)}return _})(this.buf,r,this.pos);var s=this.pos-n;s>=128&&px(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(r){this.realloc(4),hx(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),hx(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var n=r.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=r[s]},writeRawMessage:function(r,n){this.pos++;var s=this.pos;r(n,this);var d=this.pos-s;d>=128&&px(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d},writeMessage:function(r,n,s){this.writeTag(r,Xn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(r,n){n.length&&this.writeMessage(r,$P,n)},writePackedSVarint:function(r,n){n.length&&this.writeMessage(r,NP,n)},writePackedBoolean:function(r,n){n.length&&this.writeMessage(r,HP,n)},writePackedFloat:function(r,n){n.length&&this.writeMessage(r,jP,n)},writePackedDouble:function(r,n){n.length&&this.writeMessage(r,UP,n)},writePackedFixed32:function(r,n){n.length&&this.writeMessage(r,qP,n)},writePackedSFixed32:function(r,n){n.length&&this.writeMessage(r,GP,n)},writePackedFixed64:function(r,n){n.length&&this.writeMessage(r,WP,n)},writePackedSFixed64:function(r,n){n.length&&this.writeMessage(r,ZP,n)},writeBytesField:function(r,n){this.writeTag(r,Xn.Bytes),this.writeBytes(n)},writeFixed32Field:function(r,n){this.writeTag(r,Xn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(r,n){this.writeTag(r,Xn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(r,n){this.writeTag(r,Xn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(r,n){this.writeTag(r,Xn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(r,n){this.writeTag(r,Xn.Varint),this.writeVarint(n)},writeSVarintField:function(r,n){this.writeTag(r,Xn.Varint),this.writeSVarint(n)},writeStringField:function(r,n){this.writeTag(r,Xn.Bytes),this.writeString(n)},writeFloatField:function(r,n){this.writeTag(r,Xn.Fixed32),this.writeFloat(n)},writeDoubleField:function(r,n){this.writeTag(r,Xn.Fixed64),this.writeDouble(n)},writeBooleanField:function(r,n){this.writeVarintField(r,!!n)}};var Xg=b(cx);const Yg=3;function KP(r,n,s){r===1&&s.readMessage(XP,n)}function XP(r,n,s){if(r===3){const{id:d,bitmap:g,width:_,height:x,left:C,top:T,advance:D}=s.readMessage(YP,{});n.push({id:d,bitmap:new nh({width:_+2*Yg,height:x+2*Yg},g),metrics:{width:_,height:x,left:C,top:T,advance:D}})}}function YP(r,n,s){r===1?n.id=s.readVarint():r===2?n.bitmap=s.readBytes():r===3?n.width=s.readVarint():r===4?n.height=s.readVarint():r===5?n.left=s.readSVarint():r===6?n.top=s.readSVarint():r===7&&(n.advance=s.readVarint())}const vx=Yg;function yx(r){let n=0,s=0;for(const x of r)n+=x.w*x.h,s=Math.max(s,x.w);r.sort(((x,C)=>C.h-x.h));const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let g=0,_=0;for(const x of r)for(let C=d.length-1;C>=0;C--){const T=d[C];if(!(x.w>T.w||x.h>T.h)){if(x.x=T.x,x.y=T.y,_=Math.max(_,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===T.w&&x.h===T.h){const D=d.pop();C<d.length&&(d[C]=D)}else x.h===T.h?(T.x+=x.w,T.w-=x.w):x.w===T.w?(T.y+=x.h,T.h-=x.h):(d.push({x:T.x+x.w,y:T.y,w:T.w-x.w,h:x.h}),T.y+=x.h,T.h-=x.h);break}}return{w:g,h:_,fill:n/(g*_)||0}}const Qa=1;class Jg{constructor(n,{pixelRatio:s,version:d,stretchX:g,stretchY:_,content:x,textFitWidth:C,textFitHeight:T}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=g,this.stretchY=_,this.content=x,this.version=d,this.textFitWidth=C,this.textFitHeight=T}get tl(){return[this.paddedRect.x+Qa,this.paddedRect.y+Qa]}get br(){return[this.paddedRect.x+this.paddedRect.w-Qa,this.paddedRect.y+this.paddedRect.h-Qa]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Qa)/this.pixelRatio,(this.paddedRect.h-2*Qa)/this.pixelRatio]}}class _x{constructor(n,s){const d={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(n,d,_),this.addImages(s,g,_);const{w:x,h:C}=yx(_),T=new kr({width:x||1,height:C||1});for(const D in n){const O=n[D],N=d[D].paddedRect;kr.copy(O.data,T,{x:0,y:0},{x:N.x+Qa,y:N.y+Qa},O.data)}for(const D in s){const O=s[D],N=g[D].paddedRect,H=N.x+Qa,X=N.y+Qa,ne=O.data.width,oe=O.data.height;kr.copy(O.data,T,{x:0,y:0},{x:H,y:X},O.data),kr.copy(O.data,T,{x:0,y:oe-1},{x:H,y:X-1},{width:ne,height:1}),kr.copy(O.data,T,{x:0,y:0},{x:H,y:X+oe},{width:ne,height:1}),kr.copy(O.data,T,{x:ne-1,y:0},{x:H-1,y:X},{width:1,height:oe}),kr.copy(O.data,T,{x:0,y:0},{x:H+ne,y:X},{width:1,height:oe})}this.image=T,this.iconPositions=d,this.patternPositions=g}addImages(n,s,d){for(const g in n){const _=n[g],x={x:0,y:0,w:_.data.width+2*Qa,h:_.data.height+2*Qa};d.push(x),s[g]=new Jg(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in n.updatedImages)this.patchUpdatedImage(this.iconPositions[d],n.getImage(d),s),this.patchUpdatedImage(this.patternPositions[d],n.getImage(d),s)}patchUpdatedImage(n,s,d){if(!n||!s||n.version===s.version)return;n.version=s.version;const[g,_]=n.tl;d.update(s.data,void 0,{x:g,y:_})}}var Yo;qt("ImagePosition",Jg),qt("ImageAtlas",_x),h.ah=void 0,(Yo=h.ah||(h.ah={}))[Yo.none=0]="none",Yo[Yo.horizontal=1]="horizontal",Yo[Yo.vertical=2]="vertical",Yo[Yo.horizontalOnly=3]="horizontalOnly";const uh=-17;class ch{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const d=new ch;return d.scale=n||1,d.fontStack=s,d}static forImage(n){const s=new ch;return s.imageName=n,s}}class xc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const d=new xc;for(let g=0;g<n.sections.length;g++){const _=n.sections[g];_.image?d.addImageSection(_):d.addTextSection(_,s)}return d}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=(function(n){let s="";for(let d=0;d<n.length;d++){const g=n.charCodeAt(d+1)||null,_=n.charCodeAt(d-1)||null;s+=g&&am(g)&&!lh[n[d+1]]||_&&am(_)&&!lh[n[d-1]]||!lh[n[d]]?n[d]:lh[n[d]]}return s})(this.text)}trim(){let n=0;for(let d=0;d<this.text.length&&bm[this.text.charCodeAt(d)];d++)n++;let s=this.text.length;for(let d=this.text.length-1;d>=0&&d>=n&&bm[this.text.charCodeAt(d)];d--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const d=new xc;return d.text=this.text.substring(n,s),d.sectionIndex=this.sectionIndex.slice(n,s),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((n,s)=>Math.max(n,this.sections[s].scale)),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(ch.forText(n.scale,n.fontStack||s));const d=this.sections.length-1;for(let g=0;g<n.text.length;++g)this.sectionIndex.push(d)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void pe("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(ch.forImage(s)),this.sectionIndex.push(this.sections.length-1)):pe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function _m(r,n,s,d,g,_,x,C,T,D,O,N,H,X,ne){const oe=xc.fromFeature(r,g);let ye;N===h.ah.vertical&&oe.verticalizePunctuation();const{processBidirectionalText:Ie,processStyledBidirectionalText:Ze}=Ya;if(Ie&&oe.sections.length===1){ye=[];const ot=Ie(oe.toString(),Qg(oe,D,_,n,d,X));for(const wt of ot){const Nt=new xc;Nt.text=wt,Nt.sections=oe.sections;for(let on=0;on<wt.length;on++)Nt.sectionIndex.push(0);ye.push(Nt)}}else if(Ze){ye=[];const ot=Ze(oe.text,oe.sectionIndex,Qg(oe,D,_,n,d,X));for(const wt of ot){const Nt=new xc;Nt.text=wt[0],Nt.sectionIndex=wt[1],Nt.sections=oe.sections,ye.push(Nt)}}else ye=(function(ot,wt){const Nt=[],on=ot.text;let Ot=0;for(const Vt of wt)Nt.push(ot.substring(Ot,Vt)),Ot=Vt;return Ot<on.length&&Nt.push(ot.substring(Ot,on.length)),Nt})(oe,Qg(oe,D,_,n,d,X));const ze=[],He={positionedLines:ze,text:oe.toString(),top:O[1],bottom:O[1],left:O[0],right:O[0],writingMode:N,iconsInText:!1,verticalizable:!1};return(function(ot,wt,Nt,on,Ot,Vt,Qt,Wt,Ht,pt,tn,Yt){let dn=0,Qn=uh,Yn=0,Zi=0;const Ur=Wt==="right"?1:Wt==="left"?0:.5;let ha=0;for(const Ti of Ot){Ti.trim();const Xi=Ti.getMaxScale(),xa=(Xi-1)*ji,fa={positionedGlyphs:[],lineOffset:0};ot.positionedLines[ha]=fa;const La=fa.positionedGlyphs;let ma=0;if(!Ti.length()){Qn+=Vt,++ha;continue}for(let er=0;er<Ti.length();er++){const Bn=Ti.getSection(er),ai=Ti.getSectionIndex(er),ci=Ti.getCharCode(er);let mr=0,bi=null,Cc=null,ws=null,Ss=ji;const Hr=!(Ht===h.ah.horizontal||!tn&&!Kd(ci)||tn&&(bm[ci]||(Ki=ci,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Ki)))));if(Bn.imageName){const Pr=on[Bn.imageName];if(!Pr)continue;ws=Bn.imageName,ot.iconsInText=ot.iconsInText||!0,Cc=Pr.paddedRect;const ta=Pr.displaySize;Bn.scale=Bn.scale*ji/Yt,bi={width:ta[0],height:ta[1],left:Qa,top:-vx,advance:Hr?ta[1]:ta[0]},mr=xa+(ji-ta[1]*Bn.scale),Ss=bi.advance;const no=Hr?ta[0]*Bn.scale-ji*Xi:ta[1]*Bn.scale-ji*Xi;no>0&&no>ma&&(ma=no)}else{const Pr=Nt[Bn.fontStack],ta=Pr&&Pr[ci];if(ta&&ta.rect)Cc=ta.rect,bi=ta.metrics;else{const no=wt[Bn.fontStack],gh=no&&no[ci];if(!gh)continue;bi=gh.metrics}mr=(Xi-Bn.scale)*ji}Hr?(ot.verticalizable=!0,La.push({glyph:ci,imageName:ws,x:dn,y:Qn+mr,vertical:Hr,scale:Bn.scale,fontStack:Bn.fontStack,sectionIndex:ai,metrics:bi,rect:Cc}),dn+=Ss*Bn.scale+pt):(La.push({glyph:ci,imageName:ws,x:dn,y:Qn+mr,vertical:Hr,scale:Bn.scale,fontStack:Bn.fontStack,sectionIndex:ai,metrics:bi,rect:Cc}),dn+=bi.advance*Bn.scale+pt)}La.length!==0&&(Yn=Math.max(dn-pt,Yn),tT(La,0,La.length-1,Ur,ma)),dn=0;const Ir=Vt*Xi+ma;fa.lineOffset=Math.max(ma,xa),Qn+=Ir,Zi=Math.max(Ir,Zi),++ha}var Ki;const Da=Qn-uh,{horizontalAlign:Va,verticalAlign:za}=ev(Qt);(function(Ti,Xi,xa,fa,La,ma,Ir,er,Bn){const ai=(Xi-xa)*La;let ci=0;ci=ma!==Ir?-er*fa-uh:(-fa*Bn+.5)*Ir;for(const mr of Ti)for(const bi of mr.positionedGlyphs)bi.x+=ai,bi.y+=ci})(ot.positionedLines,Ur,Va,za,Yn,Zi,Vt,Da,Ot.length),ot.top+=-za*Da,ot.bottom=ot.top+Da,ot.left+=-Va*Yn,ot.right=ot.left+Yn})(He,n,s,d,ye,x,C,T,N,D,H,ne),!(function(ot){for(const wt of ot)if(wt.positionedGlyphs.length!==0)return!1;return!0})(ze)&&He}const bm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},JP={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},QP={40:!0};function bx(r,n,s,d,g,_){if(n.imageName){const x=d[n.imageName];return x?x.displaySize[0]*n.scale*ji/_+g:0}{const x=s[n.fontStack],C=x&&x[r];return C?C.metrics.advance*n.scale+g:0}}function xx(r,n,s,d){const g=Math.pow(r-n,2);return d?r<n?g/2:2*g:g+Math.abs(s)*s}function eT(r,n,s){let d=0;return r===10&&(d-=1e4),s&&(d+=150),r!==40&&r!==65288||(d+=50),n!==41&&n!==65289||(d+=50),d}function wx(r,n,s,d,g,_){let x=null,C=xx(n,s,g,_);for(const T of d){const D=xx(n-T.x,s,g,_)+T.badness;D<=C&&(x=T,C=D)}return{index:r,x:n,priorBreak:x,badness:C}}function Sx(r){return r?Sx(r.priorBreak).concat(r.index):[]}function Qg(r,n,s,d,g,_){if(!r)return[];const x=[],C=(function(N,H,X,ne,oe,ye){let Ie=0;for(let Ze=0;Ze<N.length();Ze++){const ze=N.getSection(Ze);Ie+=bx(N.getCharCode(Ze),ze,ne,oe,H,ye)}return Ie/Math.max(1,Math.ceil(Ie/X))})(r,n,s,d,g,_),T=r.text.indexOf("​")>=0;let D=0;for(let N=0;N<r.length();N++){const H=r.getSection(N),X=r.getCharCode(N);if(bm[X]||(D+=bx(X,H,d,g,n,_)),N<r.length()-1){const ne=!((O=X)<11904)&&(!!En["CJK Compatibility Forms"](O)||!!En["CJK Compatibility"](O)||!!En["CJK Strokes"](O)||!!En["CJK Symbols and Punctuation"](O)||!!En["Enclosed CJK Letters and Months"](O)||!!En["Halfwidth and Fullwidth Forms"](O)||!!En["Ideographic Description Characters"](O)||!!En["Vertical Forms"](O)||im.test(String.fromCodePoint(O)));(JP[X]||ne||H.imageName||N!==r.length()-2&&QP[r.getCharCode(N+1)])&&x.push(wx(N+1,D,C,x,eT(X,r.getCharCode(N+1),ne&&T),!1))}}var O;return Sx(wx(r.length(),D,C,x,0,!0))}function ev(r){let n=.5,s=.5;switch(r){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function tT(r,n,s,d,g){if(!d&&!g)return;const _=r[s],x=(r[s].x+_.metrics.advance*_.scale)*d;for(let C=n;C<=s;C++)r[C].x-=x,r[C].y+=g}function nT(r,n,s){const{horizontalAlign:d,verticalAlign:g}=ev(s),_=n[0]-r.displaySize[0]*d,x=n[1]-r.displaySize[1]*g;return{image:r,top:x,bottom:x+r.displaySize[1],left:_,right:_+r.displaySize[0]}}function kx(r){var n,s;let d=r.left,g=r.top,_=r.right-d,x=r.bottom-g;const C=(n=r.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",T=(s=r.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",D=(r.image.content[2]-r.image.content[0])/(r.image.content[3]-r.image.content[1]);if(T==="proportional"){if(C==="stretchOnly"&&_/x<D||C==="proportional"){const O=Math.ceil(x*D);d*=O/_,_=O}}else if(C==="proportional"&&T==="stretchOnly"&&D!==0&&_/x>D){const O=Math.ceil(_/D);g*=O/x,x=O}return{x1:d,y1:g,x2:d+_,y2:g+x}}function Cx(r,n,s,d,g,_){const x=r.image;let C;if(x.content){const ye=x.content,Ie=x.pixelRatio||1;C=[ye[0]/Ie,ye[1]/Ie,x.displaySize[0]-ye[2]/Ie,x.displaySize[1]-ye[3]/Ie]}const T=n.left*_,D=n.right*_;let O,N,H,X;s==="width"||s==="both"?(X=g[0]+T-d[3],N=g[0]+D+d[1]):(X=g[0]+(T+D-x.displaySize[0])/2,N=X+x.displaySize[0]);const ne=n.top*_,oe=n.bottom*_;return s==="height"||s==="both"?(O=g[1]+ne-d[0],H=g[1]+oe+d[2]):(O=g[1]+(ne+oe-x.displaySize[1])/2,H=O+x.displaySize[1]),{image:x,top:O,right:N,bottom:H,left:X,collisionPadding:C}}const dh=255,xs=128,Jo=dh*xs;function Ix(r,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new si(r+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:g}=s;let _=0;for(;_<d.length&&d[_]<=r;)_++;_=Math.max(0,_-1);let x=_;for(;x<d.length&&d[x]<r+1;)x++;x=Math.min(d.length-1,x);const C=d[_],T=d[x];return s.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:T,interpolationType:g}:{kind:"camera",minZoom:C,maxZoom:T,minSize:s.evaluate(new si(C)),maxSize:s.evaluate(new si(T)),interpolationType:g}}}function tv(r,n,s){let d="never";const g=r.get(n);return g?d=g:r.get(s)&&(d="always"),d}const iT=Xo.VectorTileFeature.types,aT=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function xm(r,n,s,d,g,_,x,C,T,D,O,N,H){const X=C?Math.min(Jo,Math.round(C[0])):0,ne=C?Math.min(Jo,Math.round(C[1])):0;r.emplaceBack(n,s,Math.round(32*d),Math.round(32*g),_,x,(X<<1)+(T?1:0),ne,16*D,16*O,256*N,256*H)}function nv(r,n,s){r.emplaceBack(n.x,n.y,s),r.emplaceBack(n.x,n.y,s),r.emplaceBack(n.x,n.y,s),r.emplaceBack(n.x,n.y,s)}function rT(r){for(const n of r.sections)if(Eg(n.text))return!0;return!1}class iv{constructor(n){this.layoutVertexArray=new cc,this.indexArray=new Sr,this.programConfigurations=n,this.segments=new Mn,this.dynamicLayoutVertexArray=new Jd,this.opacityVertexArray=new hr,this.hasVisibleVertices=!1,this.placedSymbolArray=new oi}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,d,g){this.isEmpty()||(d&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,LP.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,BP.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,aT,!0),this.opacityVertexBuffer.itemSize=1),(d||g)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}qt("SymbolBuffers",iv);class av{constructor(n,s,d){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new d,this.segments=new Mn,this.collisionVertexArray=new _s}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,RP.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}qt("CollisionBuffers",av);class wc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((x=>x.id)),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Rg([]),this.placementViewportMatrix=Rg([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ix(this.zoom,s["text-size"]),this.iconSizeData=Ix(this.zoom,s["icon-size"]);const d=this.layers[0].layout,g=d.get("symbol-sort-key"),_=d.get("symbol-z-order");this.canOverlap=tv(d,"text-overlap","text-allow-overlap")!=="never"||tv(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map((x=>h.ah[x]))),this.stateDependentLayerIds=this.layers.filter((x=>x.isStateDependent())).map((x=>x.id)),this.sourceID=n.sourceID}createArrays(){this.text=new iv(new ql(this.layers,this.zoom,(n=>/^text/.test(n)))),this.icon=new iv(new ql(this.layers,this.zoom,(n=>/^icon/.test(n)))),this.glyphOffsetArray=new li,this.lineVertexArray=new la,this.symbolInstances=new An,this.textAnchorOffsets=new ui}calculateGlyphDependencies(n,s,d,g,_){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(d||g)&&_){const C=lh[n.charAt(x)];C&&(s[C.charCodeAt(0)]=!0)}}populate(n,s,d){const g=this.layers[0],_=g.layout,x=_.get("text-font"),C=_.get("text-field"),T=_.get("icon-image"),D=(C.value.kind!=="constant"||C.value.value instanceof Wa&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),O=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,N=_.get("symbol-sort-key");if(this.features=[],!D&&!O)return;const H=s.iconDependencies,X=s.glyphDependencies,ne=s.availableImages,oe=new si(this.zoom);for(const{feature:ye,id:Ie,index:Ze,sourceLayerIndex:ze}of n){const He=g._featureFilter.needGeometry,ot=Wl(ye,He);if(!g._featureFilter.filter(oe,ot,d))continue;let wt,Nt;if(He||(ot.geometry=Gl(ye)),D){const Ot=g.getValueAndResolveTokens("text-field",ot,d,ne),Vt=Wa.factory(Ot),Qt=this.hasRTLText=this.hasRTLText||rT(Vt);(!Qt||Ya.getRTLTextPluginStatus()==="unavailable"||Qt&&Ya.isParsed())&&(wt=OP(Vt,g,ot))}if(O){const Ot=g.getValueAndResolveTokens("icon-image",ot,d,ne);Nt=Ot instanceof Ka?Ot:Ka.fromString(Ot)}if(!wt&&!Nt)continue;const on=this.sortFeaturesByKey?N.evaluate(ot,{},d):void 0;if(this.features.push({id:Ie,text:wt,icon:Nt,index:Ze,sourceLayerIndex:ze,geometry:ot.geometry,properties:ye.properties,type:iT[ye.type],sortKey:on}),Nt&&(H[Nt.name]=!0),wt){const Ot=x.evaluate(ot,{},d).join(","),Vt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.ah.vertical)>=0;for(const Qt of wt.sections)if(Qt.image)H[Qt.image.name]=!0;else{const Wt=Wd(wt.toString()),Ht=Qt.fontStack||Ot,pt=X[Ht]=X[Ht]||{};this.calculateGlyphDependencies(Qt.text,pt,Vt,this.allowVerticalPlacement,Wt)}}}_.get("symbol-placement")==="line"&&(this.features=(function(ye){const Ie={},Ze={},ze=[];let He=0;function ot(Ot){ze.push(ye[Ot]),He++}function wt(Ot,Vt,Qt){const Wt=Ze[Ot];return delete Ze[Ot],Ze[Vt]=Wt,ze[Wt].geometry[0].pop(),ze[Wt].geometry[0]=ze[Wt].geometry[0].concat(Qt[0]),Wt}function Nt(Ot,Vt,Qt){const Wt=Ie[Vt];return delete Ie[Vt],Ie[Ot]=Wt,ze[Wt].geometry[0].shift(),ze[Wt].geometry[0]=Qt[0].concat(ze[Wt].geometry[0]),Wt}function on(Ot,Vt,Qt){const Wt=Qt?Vt[0][Vt[0].length-1]:Vt[0][0];return`${Ot}:${Wt.x}:${Wt.y}`}for(let Ot=0;Ot<ye.length;Ot++){const Vt=ye[Ot],Qt=Vt.geometry,Wt=Vt.text?Vt.text.toString():null;if(!Wt){ot(Ot);continue}const Ht=on(Wt,Qt),pt=on(Wt,Qt,!0);if(Ht in Ze&&pt in Ie&&Ze[Ht]!==Ie[pt]){const tn=Nt(Ht,pt,Qt),Yt=wt(Ht,pt,ze[tn].geometry);delete Ie[Ht],delete Ze[pt],Ze[on(Wt,ze[Yt].geometry,!0)]=Yt,ze[tn].geometry=null}else Ht in Ze?wt(Ht,pt,Qt):pt in Ie?Nt(Ht,pt,Qt):(ot(Ot),Ie[Ht]=He-1,Ze[pt]=He-1)}return ze.filter((Ot=>Ot.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ye,Ie)=>ye.sortKey-Ie.sortKey))}update(n,s,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,d),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const d=this.lineVertexArray.length;if(n.segment!==void 0){let g=n.dist(s[n.segment+1]),_=n.dist(s[n.segment]);const x={};for(let C=n.segment+1;C<s.length;C++)x[C]={x:s[C].x,y:s[C].y,tileUnitDistanceFromAnchor:g},C<s.length-1&&(g+=s[C+1].dist(s[C]));for(let C=n.segment||0;C>=0;C--)x[C]={x:s[C].x,y:s[C].y,tileUnitDistanceFromAnchor:_},C>0&&(_+=s[C-1].dist(s[C]));for(let C=0;C<s.length;C++){const T=x[C];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(n,s,d,g,_,x,C,T,D,O,N,H){const X=n.indexArray,ne=n.layoutVertexArray,oe=n.segments.prepareSegment(4*s.length,ne,X,this.canOverlap?x.sortKey:void 0),ye=this.glyphOffsetArray.length,Ie=oe.vertexLength,Ze=this.allowVerticalPlacement&&C===h.ah.vertical?Math.PI/2:0,ze=x.text&&x.text.sections;for(let He=0;He<s.length;He++){const{tl:ot,tr:wt,bl:Nt,br:on,tex:Ot,pixelOffsetTL:Vt,pixelOffsetBR:Qt,minFontScaleX:Wt,minFontScaleY:Ht,glyphOffset:pt,isSDF:tn,sectionIndex:Yt}=s[He],dn=oe.vertexLength,Qn=pt[1];xm(ne,T.x,T.y,ot.x,Qn+ot.y,Ot.x,Ot.y,d,tn,Vt.x,Vt.y,Wt,Ht),xm(ne,T.x,T.y,wt.x,Qn+wt.y,Ot.x+Ot.w,Ot.y,d,tn,Qt.x,Vt.y,Wt,Ht),xm(ne,T.x,T.y,Nt.x,Qn+Nt.y,Ot.x,Ot.y+Ot.h,d,tn,Vt.x,Qt.y,Wt,Ht),xm(ne,T.x,T.y,on.x,Qn+on.y,Ot.x+Ot.w,Ot.y+Ot.h,d,tn,Qt.x,Qt.y,Wt,Ht),nv(n.dynamicLayoutVertexArray,T,Ze),X.emplaceBack(dn,dn+1,dn+2),X.emplaceBack(dn+1,dn+2,dn+3),oe.vertexLength+=4,oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(pt[0]),He!==s.length-1&&Yt===s[He+1].sectionIndex||n.programConfigurations.populatePaintArrays(ne.length,x,x.index,{},H,ze&&ze[Yt])}n.placedSymbolArray.emplaceBack(T.x,T.y,ye,this.glyphOffsetArray.length-ye,Ie,D,O,T.segment,d?d[0]:0,d?d[1]:0,g[0],g[1],C,0,!1,0,N)}_addCollisionDebugVertex(n,s,d,g,_,x){return s.emplaceBack(0,0),n.emplaceBack(d.x,d.y,g,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,d,g,_,x,C){const T=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),D=T.vertexLength,O=_.layoutVertexArray,N=_.collisionVertexArray,H=C.anchorX,X=C.anchorY;this._addCollisionDebugVertex(O,N,x,H,X,new k(n,s)),this._addCollisionDebugVertex(O,N,x,H,X,new k(d,s)),this._addCollisionDebugVertex(O,N,x,H,X,new k(d,g)),this._addCollisionDebugVertex(O,N,x,H,X,new k(n,g)),T.vertexLength+=4;const ne=_.indexArray;ne.emplaceBack(D,D+1),ne.emplaceBack(D+1,D+2),ne.emplaceBack(D+2,D+3),ne.emplaceBack(D+3,D),T.primitiveLength+=4}addDebugCollisionBoxes(n,s,d,g){for(let _=n;_<s;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new av(fr,ux.members,ea),this.iconCollisionBox=new av(fr,ux.members,ea);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,d,g,_,x,C,T,D){const O={};for(let N=s;N<d;N++){const H=n.get(N);O.textBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},O.textFeatureIndex=H.featureIndex;break}for(let N=g;N<_;N++){const H=n.get(N);O.verticalTextBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},O.verticalTextFeatureIndex=H.featureIndex;break}for(let N=x;N<C;N++){const H=n.get(N);O.iconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},O.iconFeatureIndex=H.featureIndex;break}for(let N=T;N<D;N++){const H=n.get(N);O.verticalIconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},O.verticalIconFeatureIndex=H.featureIndex;break}return O}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const d=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const d=n.placedSymbolArray.get(s),g=d.vertexStartIndex+4*d.numGlyphs;for(let _=d.vertexStartIndex;_<g;_+=4)n.indexArray.emplaceBack(_,_+1,_+2),n.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),d=Math.cos(n),g=[],_=[],x=[];for(let C=0;C<this.symbolInstances.length;++C){x.push(C);const T=this.symbolInstances.get(C);g.push(0|Math.round(s*T.anchorX+d*T.anchorY)),_.push(T.featureIndex)}return x.sort(((C,T)=>g[C]-g[T]||_[T]-_[C])),x}addToSortKeyRanges(n,s){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===s?d.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const d=this.symbolInstances.get(s);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach(((g,_,x)=>{g>=0&&x.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)})),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Px,Tx;qt("SymbolBucket",wc,{omit:["layers","collisionBoxArray","features","compareText"]}),wc.MAX_GLYPHS=65535,wc.addDynamicAttributes=nv;var rv={get paint(){return Tx=Tx||new y({"icon-opacity":new ln(le.paint_symbol["icon-opacity"]),"icon-color":new ln(le.paint_symbol["icon-color"]),"icon-halo-color":new ln(le.paint_symbol["icon-halo-color"]),"icon-halo-width":new ln(le.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ln(le.paint_symbol["icon-halo-blur"]),"icon-translate":new Kt(le.paint_symbol["icon-translate"]),"icon-translate-anchor":new Kt(le.paint_symbol["icon-translate-anchor"]),"text-opacity":new ln(le.paint_symbol["text-opacity"]),"text-color":new ln(le.paint_symbol["text-color"],{runtimeType:di,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new ln(le.paint_symbol["text-halo-color"]),"text-halo-width":new ln(le.paint_symbol["text-halo-width"]),"text-halo-blur":new ln(le.paint_symbol["text-halo-blur"]),"text-translate":new Kt(le.paint_symbol["text-translate"]),"text-translate-anchor":new Kt(le.paint_symbol["text-translate-anchor"])})},get layout(){return Px=Px||new y({"symbol-placement":new Kt(le.layout_symbol["symbol-placement"]),"symbol-spacing":new Kt(le.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Kt(le.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ln(le.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Kt(le.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Kt(le.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Kt(le.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Kt(le.layout_symbol["icon-ignore-placement"]),"icon-optional":new Kt(le.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Kt(le.layout_symbol["icon-rotation-alignment"]),"icon-size":new ln(le.layout_symbol["icon-size"]),"icon-text-fit":new Kt(le.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Kt(le.layout_symbol["icon-text-fit-padding"]),"icon-image":new ln(le.layout_symbol["icon-image"]),"icon-rotate":new ln(le.layout_symbol["icon-rotate"]),"icon-padding":new ln(le.layout_symbol["icon-padding"]),"icon-keep-upright":new Kt(le.layout_symbol["icon-keep-upright"]),"icon-offset":new ln(le.layout_symbol["icon-offset"]),"icon-anchor":new ln(le.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Kt(le.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Kt(le.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Kt(le.layout_symbol["text-rotation-alignment"]),"text-field":new ln(le.layout_symbol["text-field"]),"text-font":new ln(le.layout_symbol["text-font"]),"text-size":new ln(le.layout_symbol["text-size"]),"text-max-width":new ln(le.layout_symbol["text-max-width"]),"text-line-height":new Kt(le.layout_symbol["text-line-height"]),"text-letter-spacing":new ln(le.layout_symbol["text-letter-spacing"]),"text-justify":new ln(le.layout_symbol["text-justify"]),"text-radial-offset":new ln(le.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Kt(le.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ln(le.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ln(le.layout_symbol["text-anchor"]),"text-max-angle":new Kt(le.layout_symbol["text-max-angle"]),"text-writing-mode":new Kt(le.layout_symbol["text-writing-mode"]),"text-rotate":new ln(le.layout_symbol["text-rotate"]),"text-padding":new Kt(le.layout_symbol["text-padding"]),"text-keep-upright":new Kt(le.layout_symbol["text-keep-upright"]),"text-transform":new ln(le.layout_symbol["text-transform"]),"text-offset":new ln(le.layout_symbol["text-offset"]),"text-allow-overlap":new Kt(le.layout_symbol["text-allow-overlap"]),"text-overlap":new Kt(le.layout_symbol["text-overlap"]),"text-ignore-placement":new Kt(le.layout_symbol["text-ignore-placement"]),"text-optional":new Kt(le.layout_symbol["text-optional"])})}};class Ax{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Ni,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}qt("FormatSectionOverride",Ax,{omit:["defaultValue"]});class wm extends u{constructor(n){super(n,rv)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const g=[];for(const _ of d)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,d,g){const _=this.layout.get(n).evaluate(s,{},d,g),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Ku(x.value)||!_?_:(function(C,T){return T.replace(/{([^{}]+)}/g,((D,O)=>C&&O in C?String(C[O]):""))})(s.properties,_)}createBucket(n){return new wc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of rv.paint.overridableProperties){if(!wm.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),d=new Ax(s),g=new Zu(d,s.property.specification);let _=null;_=s.value.kind==="constant"||s.value.kind==="source"?new Lo("source",g):new Bo("composite",g,s.value.zoomStops),this.paint._values[n]=new Nr(s.property,_,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,d){return!(!this.layout||s.isDataDriven()||d.isDataDriven())&&wm.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const d=n.get("text-field"),g=rv.paint.properties[s];let _=!1;const x=C=>{for(const T of C)if(g.overrides&&g.overrides.hasOverride(T))return void(_=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Wa)x(d.value.value.sections);else if(d.value.kind==="source"){const C=D=>{_||(D instanceof vr&&Li(D.value)===es?x(D.value.sections):D instanceof Ou?x(D.sections):D.eachChild(C))},T=d.value;T._styleExpression&&C(T._styleExpression.expression)}return _}}let Ex;var sT={get paint(){return Ex=Ex||new y({"background-color":new Kt(le.paint_background["background-color"]),"background-pattern":new lc(le.paint_background["background-pattern"]),"background-opacity":new Kt(le.paint_background["background-opacity"])})}};class oT extends u{constructor(n){super(n,sT)}}let Mx;var lT={get paint(){return Mx=Mx||new y({"raster-opacity":new Kt(le.paint_raster["raster-opacity"]),"raster-hue-rotate":new Kt(le.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Kt(le.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Kt(le.paint_raster["raster-brightness-max"]),"raster-saturation":new Kt(le.paint_raster["raster-saturation"]),"raster-contrast":new Kt(le.paint_raster["raster-contrast"]),"raster-resampling":new Kt(le.paint_raster["raster-resampling"]),"raster-fade-duration":new Kt(le.paint_raster["raster-fade-duration"])})}};class uT extends u{constructor(n){super(n,lT)}}class cT extends u{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class dT{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const sv=63710088e-1;class Qo{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Qo(ae(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,d=this.lat*s,g=n.lat*s,_=Math.sin(d)*Math.sin(g)+Math.cos(d)*Math.cos(g)*Math.cos((n.lng-this.lng)*s);return sv*Math.acos(Math.min(_,1))}static convert(n){if(n instanceof Qo)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Qo(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Qo(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Dx=2*Math.PI*sv;function Vx(r){return Dx*Math.cos(r*Math.PI/180)}function zx(r){return(180+r)/360}function Lx(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Bx(r,n){return r/Vx(n)}function ov(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}class hh{constructor(n,s,d=0){this.x=+n,this.y=+s,this.z=+d}static fromLngLat(n,s=0){const d=Qo.convert(n);return new hh(zx(d.lng),Lx(d.lat),Bx(s,d.lat))}toLngLat(){return new Qo(360*this.x-180,ov(this.y))}toAltitude(){return this.z*Vx(ov(this.y))}meterInMercatorCoordinateUnits(){return 1/Dx*(n=ov(this.y),1/Math.cos(n*Math.PI/180));var n}}function Rx(r,n,s){var d=2*Math.PI*6378137/256/Math.pow(2,s);return[r*d-2*Math.PI*6378137/2,n*d-2*Math.PI*6378137/2]}class lv{constructor(n,s,d){if(!(function(g,_,x){return!(g<0||g>25||x<0||x>=Math.pow(2,g)||_<0||_>=Math.pow(2,g))})(n,s,d))throw new Error(`x=${s}, y=${d}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=d,this.key=fh(0,n,n,s,d)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,d){const g=(x=this.y,C=this.z,T=Rx(256*(_=this.x),256*(x=Math.pow(2,C)-x-1),C),D=Rx(256*(_+1),256*(x+1),C),T[0]+","+T[1]+","+D[0]+","+D[1]);var _,x,C,T,D;const O=(function(N,H,X){let ne,oe="";for(let ye=N;ye>0;ye--)ne=1<<ye-1,oe+=(H&ne?1:0)+(X&ne?2:0);return oe})(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,O).replace(/{bbox-epsg-3857}/g,g)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new k((n.x*s-this.x)*Bi,(n.y*s-this.y)*Bi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Fx{constructor(n,s){this.wrap=n,this.canonical=s,this.key=fh(n,s.z,s.z,s.x,s.y)}}class Cr{constructor(n,s,d,g,_){if(n<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${d}`);this.overscaledZ=n,this.wrap=s,this.canonical=new lv(d,+g,+_),this.key=fh(s,n,d,g,_)}clone(){return new Cr(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new Cr(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Cr(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-n;return n>this.canonical.z?fh(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):fh(this.wrap*+s,n,n,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Cr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,d=2*this.canonical.x,g=2*this.canonical.y;return[new Cr(s,this.wrap,s,d,g),new Cr(s,this.wrap,s,d+1,g),new Cr(s,this.wrap,s,d,g+1),new Cr(s,this.wrap,s,d+1,g+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Cr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Cr(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Fx(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new hh(n.x-this.wrap,n.y))}}function fh(r,n,s,d,g){(r*=2)<0&&(r=-1*r-1);const _=1<<s;return(_*_*r+_*g+d).toString(36)+s.toString(36)+n.toString(36)}qt("CanonicalTileID",lv),qt("OverscaledTileID",Cr,{omit:["posMatrix"]});class Ox{constructor(n,s,d,g=1,_=1,x=1,C=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void pe(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const T=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=_,this.blueFactor=x,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let D=0;D<T;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(T,D)]=this.data[this._idx(T-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,T)]=this.data[this._idx(D,T-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(T,-1)]=this.data[this._idx(T-1,0)],this.data[this._idx(-1,T)]=this.data[this._idx(0,T-1)],this.data[this._idx(T,T)]=this.data[this._idx(T-1,T-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<T;D++)for(let O=0;O<T;O++){const N=this.get(D,O);N>this.max&&(this.max=N),N<this.min&&(this.min=N)}}get(n,s){const d=new Uint8Array(this.data.buffer),g=4*this._idx(n,s);return this.unpack(d[g],d[g+1],d[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,d){return n*this.redFactor+s*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new kr({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,d){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let g=s*this.dim,_=s*this.dim+this.dim,x=d*this.dim,C=d*this.dim+this.dim;switch(s){case-1:g=_-1;break;case 1:_=g+1}switch(d){case-1:x=C-1;break;case 1:C=x+1}const T=-s*this.dim,D=-d*this.dim;for(let O=x;O<C;O++)for(let N=g;N<_;N++)this.data[this._idx(N,O)]=n.data[this._idx(N+T,O+D)]}}qt("DEMData",Ox);class $x{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const d=n[s];this._stringToNumber[d]=s,this._numberToString[s]=d}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Nx{constructor(n,s,d,g,_){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=d,n._y=g,this.properties=n.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class jx{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Oo(Bi,16,0),this.grid3D=new Oo(Bi,16,0),this.featureIndexArray=new _a,this.promoteId=s}insert(n,s,d,g,_,x){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,g,_);const T=x?this.grid3D:this.grid;for(let D=0;D<s.length;D++){const O=s[D],N=[1/0,1/0,-1/0,-1/0];for(let H=0;H<O.length;H++){const X=O[H];N[0]=Math.min(N[0],X.x),N[1]=Math.min(N[1],X.y),N[2]=Math.max(N[2],X.x),N[3]=Math.max(N[3],X.y)}N[0]<Bi&&N[1]<Bi&&N[2]>=0&&N[3]>=0&&T.insert(C,N[0],N[1],N[2],N[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Xo.VectorTile(new Xg(this.rawTileData)).layers,this.sourceLayerCoder=new $x(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,d,g){this.loadVTLayers();const _=n.params||{},x=Bi/n.tileSize/n.scale,C=Dd(_.filter),T=n.queryGeometry,D=n.queryPadding*x,O=Hx(T),N=this.grid.query(O.minX-D,O.minY-D,O.maxX+D,O.maxY+D),H=Hx(n.cameraQueryGeometry),X=this.grid3D.query(H.minX-D,H.minY-D,H.maxX+D,H.maxY+D,((ye,Ie,Ze,ze)=>(function(He,ot,wt,Nt,on){for(const Vt of He)if(ot<=Vt.x&&wt<=Vt.y&&Nt>=Vt.x&&on>=Vt.y)return!0;const Ot=[new k(ot,wt),new k(ot,on),new k(Nt,on),new k(Nt,wt)];if(He.length>2){for(const Vt of Ot)if(pc(He,Vt))return!0}for(let Vt=0;Vt<He.length-1;Vt++)if(qI(He[Vt],He[Vt+1],Ot))return!0;return!1})(n.cameraQueryGeometry,ye-D,Ie-D,Ze+D,ze+D)));for(const ye of X)N.push(ye);N.sort(hT);const ne={};let oe;for(let ye=0;ye<N.length;ye++){const Ie=N[ye];if(Ie===oe)continue;oe=Ie;const Ze=this.featureIndexArray.get(Ie);let ze=null;this.loadMatchingFeature(ne,Ze.bucketIndex,Ze.sourceLayerIndex,Ze.featureIndex,C,_.layers,_.availableImages,s,d,g,((He,ot,wt)=>(ze||(ze=Gl(He)),ot.queryIntersectsFeature(T,He,wt,ze,this.z,n.transform,x,n.pixelPosMatrix))))}return ne}loadMatchingFeature(n,s,d,g,_,x,C,T,D,O,N){const H=this.bucketLayerIDs[s];if(x&&!(function(ye,Ie){for(let Ze=0;Ze<ye.length;Ze++)if(Ie.indexOf(ye[Ze])>=0)return!0;return!1})(x,H))return;const X=this.sourceLayerCoder.decode(d),ne=this.vtLayers[X].feature(g);if(_.needGeometry){const ye=Wl(ne,!0);if(!_.filter(new si(this.tileID.overscaledZ),ye,this.tileID.canonical))return}else if(!_.filter(new si(this.tileID.overscaledZ),ne))return;const oe=this.getId(ne,X);for(let ye=0;ye<H.length;ye++){const Ie=H[ye];if(x&&x.indexOf(Ie)<0)continue;const Ze=T[Ie];if(!Ze)continue;let ze={};oe&&O&&(ze=O.getState(Ze.sourceLayer||"_geojsonTileLayer",oe));const He=he({},D[Ie]);He.paint=Ux(He.paint,Ze.paint,ne,ze,C),He.layout=Ux(He.layout,Ze.layout,ne,ze,C);const ot=!N||N(ne,Ze,ze);if(!ot)continue;const wt=new Nx(ne,this.z,this.x,this.y,oe);wt.layer=He;let Nt=n[Ie];Nt===void 0&&(Nt=n[Ie]=[]),Nt.push({featureIndex:g,feature:wt,intersectionZ:ot})}}lookupSymbolFeatures(n,s,d,g,_,x,C,T){const D={};this.loadVTLayers();const O=Dd(_);for(const N of n)this.loadMatchingFeature(D,d,g,N,O,x,C,T,s);return D}hasLayer(n){for(const s of this.bucketLayerIDs)for(const d of s)if(n===d)return!0;return!1}getId(n,s){let d=n.id;return this.promoteId&&(d=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof d=="boolean"&&(d=Number(d))),d}}function Ux(r,n,s,d,g){return re(r,((_,x)=>{const C=n instanceof jl?n.get(x):null;return C&&C.evaluate?C.evaluate(s,d,g):C}))}function Hx(r){let n=1/0,s=1/0,d=-1/0,g=-1/0;for(const _ of r)n=Math.min(n,_.x),s=Math.min(s,_.y),d=Math.max(d,_.x),g=Math.max(g,_.y);return{minX:n,minY:s,maxX:d,maxY:g}}function hT(r,n){return n-r}function qx(r,n,s,d,g){const _=[];for(let x=0;x<r.length;x++){const C=r[x];let T;for(let D=0;D<C.length-1;D++){let O=C[D],N=C[D+1];O.x<n&&N.x<n||(O.x<n?O=new k(n,O.y+(n-O.x)/(N.x-O.x)*(N.y-O.y))._round():N.x<n&&(N=new k(n,O.y+(n-O.x)/(N.x-O.x)*(N.y-O.y))._round()),O.y<s&&N.y<s||(O.y<s?O=new k(O.x+(s-O.y)/(N.y-O.y)*(N.x-O.x),s)._round():N.y<s&&(N=new k(O.x+(s-O.y)/(N.y-O.y)*(N.x-O.x),s)._round()),O.x>=d&&N.x>=d||(O.x>=d?O=new k(d,O.y+(d-O.x)/(N.x-O.x)*(N.y-O.y))._round():N.x>=d&&(N=new k(d,O.y+(d-O.x)/(N.x-O.x)*(N.y-O.y))._round()),O.y>=g&&N.y>=g||(O.y>=g?O=new k(O.x+(g-O.y)/(N.y-O.y)*(N.x-O.x),g)._round():N.y>=g&&(N=new k(O.x+(g-O.y)/(N.y-O.y)*(N.x-O.x),g)._round()),T&&O.equals(T[T.length-1])||(T=[O],_.push(T)),T.push(N)))))}}return _}qt("FeatureIndex",jx,{omit:["rawTileData","sourceLayerCoder"]});class el extends k{constructor(n,s,d,g){super(n,s),this.angle=d,g!==void 0&&(this.segment=g)}clone(){return new el(this.x,this.y,this.angle,this.segment)}}function Gx(r,n,s,d,g){if(n.segment===void 0||s===0)return!0;let _=n,x=n.segment+1,C=0;for(;C>-s/2;){if(x--,x<0)return!1;C-=r[x].dist(_),_=r[x]}C+=r[x].dist(r[x+1]),x++;const T=[];let D=0;for(;C<s/2;){const O=r[x],N=r[x+1];if(!N)return!1;let H=r[x-1].angleTo(O)-O.angleTo(N);for(H=Math.abs((H+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:C,angleDelta:H}),D+=H;C-T[0].distance>d;)D-=T.shift().angleDelta;if(D>g)return!1;x++,C+=O.dist(N)}return!0}function Wx(r){let n=0;for(let s=0;s<r.length-1;s++)n+=r[s].dist(r[s+1]);return n}function Zx(r,n,s){return r?.6*n*s:0}function Kx(r,n){return Math.max(r?r.right-r.left:0,n?n.right-n.left:0)}function fT(r,n,s,d,g,_){const x=Zx(s,g,_),C=Kx(s,d)*_;let T=0;const D=Wx(r)/2;for(let O=0;O<r.length-1;O++){const N=r[O],H=r[O+1],X=N.dist(H);if(T+X>D){const ne=(D-T)/X,oe=Ta.number(N.x,H.x,ne),ye=Ta.number(N.y,H.y,ne),Ie=new el(oe,ye,H.angleTo(N),O);return Ie._round(),!x||Gx(r,Ie,C,x,n)?Ie:void 0}T+=X}}function mT(r,n,s,d,g,_,x,C,T){const D=Zx(d,_,x),O=Kx(d,g),N=O*x,H=r[0].x===0||r[0].x===T||r[0].y===0||r[0].y===T;return n-N<n/4&&(n=N+n/4),Xx(r,H?n/2*C%n:(O/2+2*_)*x*C%n,n,D,s,N,H,!1,T)}function Xx(r,n,s,d,g,_,x,C,T){const D=_/2,O=Wx(r);let N=0,H=n-s,X=[];for(let ne=0;ne<r.length-1;ne++){const oe=r[ne],ye=r[ne+1],Ie=oe.dist(ye),Ze=ye.angleTo(oe);for(;H+s<N+Ie;){H+=s;const ze=(H-N)/Ie,He=Ta.number(oe.x,ye.x,ze),ot=Ta.number(oe.y,ye.y,ze);if(He>=0&&He<T&&ot>=0&&ot<T&&H-D>=0&&H+D<=O){const wt=new el(He,ot,Ze,ne);wt._round(),d&&!Gx(r,wt,_,d,g)||X.push(wt)}}N+=Ie}return C||X.length||x||(X=Xx(r,N/2,s,d,g,_,x,!0,T)),X}qt("Anchor",el);const Sc=Qa;function Yx(r,n,s,d){const g=[],_=r.image,x=_.pixelRatio,C=_.paddedRect.w-2*Sc,T=_.paddedRect.h-2*Sc;let D={x1:r.left,y1:r.top,x2:r.right,y2:r.bottom};const O=_.stretchX||[[0,C]],N=_.stretchY||[[0,T]],H=(pt,tn)=>pt+tn[1]-tn[0],X=O.reduce(H,0),ne=N.reduce(H,0),oe=C-X,ye=T-ne;let Ie=0,Ze=X,ze=0,He=ne,ot=0,wt=oe,Nt=0,on=ye;if(_.content&&d){const pt=_.content,tn=pt[2]-pt[0],Yt=pt[3]-pt[1];(_.textFitWidth||_.textFitHeight)&&(D=kx(r)),Ie=Sm(O,0,pt[0]),ze=Sm(N,0,pt[1]),Ze=Sm(O,pt[0],pt[2]),He=Sm(N,pt[1],pt[3]),ot=pt[0]-Ie,Nt=pt[1]-ze,wt=tn-Ze,on=Yt-He}const Ot=D.x1,Vt=D.y1,Qt=D.x2-Ot,Wt=D.y2-Vt,Ht=(pt,tn,Yt,dn)=>{const Qn=km(pt.stretch-Ie,Ze,Qt,Ot),Yn=Cm(pt.fixed-ot,wt,pt.stretch,X),Zi=km(tn.stretch-ze,He,Wt,Vt),Ur=Cm(tn.fixed-Nt,on,tn.stretch,ne),ha=km(Yt.stretch-Ie,Ze,Qt,Ot),Ki=Cm(Yt.fixed-ot,wt,Yt.stretch,X),Da=km(dn.stretch-ze,He,Wt,Vt),Va=Cm(dn.fixed-Nt,on,dn.stretch,ne),za=new k(Qn,Zi),Ti=new k(ha,Zi),Xi=new k(ha,Da),xa=new k(Qn,Da),fa=new k(Yn/x,Ur/x),La=new k(Ki/x,Va/x),ma=n*Math.PI/180;if(ma){const Bn=Math.sin(ma),ai=Math.cos(ma),ci=[ai,-Bn,Bn,ai];za._matMult(ci),Ti._matMult(ci),xa._matMult(ci),Xi._matMult(ci)}const Ir=pt.stretch+pt.fixed,er=tn.stretch+tn.fixed;return{tl:za,tr:Ti,bl:xa,br:Xi,tex:{x:_.paddedRect.x+Sc+Ir,y:_.paddedRect.y+Sc+er,w:Yt.stretch+Yt.fixed-Ir,h:dn.stretch+dn.fixed-er},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:fa,pixelOffsetBR:La,minFontScaleX:wt/x/Qt,minFontScaleY:on/x/Wt,isSDF:s}};if(d&&(_.stretchX||_.stretchY)){const pt=Jx(O,oe,X),tn=Jx(N,ye,ne);for(let Yt=0;Yt<pt.length-1;Yt++){const dn=pt[Yt],Qn=pt[Yt+1];for(let Yn=0;Yn<tn.length-1;Yn++)g.push(Ht(dn,tn[Yn],Qn,tn[Yn+1]))}}else g.push(Ht({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:T+1}));return g}function Sm(r,n,s){let d=0;for(const g of r)d+=Math.max(n,Math.min(s,g[1]))-Math.max(n,Math.min(s,g[0]));return d}function Jx(r,n,s){const d=[{fixed:-Sc,stretch:0}];for(const[g,_]of r){const x=d[d.length-1];d.push({fixed:g-x.stretch,stretch:x.stretch}),d.push({fixed:g-x.stretch,stretch:x.stretch+(_-g)})}return d.push({fixed:n+Sc,stretch:s}),d}function km(r,n,s,d){return r/n*s+d}function Cm(r,n,s,d){return r-n*s/d}class Im{constructor(n,s,d,g,_,x,C,T,D,O){var N;if(this.boxStartIndex=n.length,D){let H=x.top,X=x.bottom;const ne=x.collisionPadding;ne&&(H-=ne[1],X+=ne[3]);let oe=X-H;oe>0&&(oe=Math.max(10,oe),this.circleDiameter=oe)}else{const H=!((N=x.image)===null||N===void 0)&&N.content&&(x.image.textFitWidth||x.image.textFitHeight)?kx(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};H.y1=H.y1*C-T[0],H.y2=H.y2*C+T[2],H.x1=H.x1*C-T[3],H.x2=H.x2*C+T[1];const X=x.collisionPadding;if(X&&(H.x1-=X[0]*C,H.y1-=X[1]*C,H.x2+=X[2]*C,H.y2+=X[3]*C),O){const ne=new k(H.x1,H.y1),oe=new k(H.x2,H.y1),ye=new k(H.x1,H.y2),Ie=new k(H.x2,H.y2),Ze=O*Math.PI/180;ne._rotate(Ze),oe._rotate(Ze),ye._rotate(Ze),Ie._rotate(Ze),H.x1=Math.min(ne.x,oe.x,ye.x,Ie.x),H.x2=Math.max(ne.x,oe.x,ye.x,Ie.x),H.y1=Math.min(ne.y,oe.y,ye.y,Ie.y),H.y2=Math.max(ne.y,oe.y,ye.y,Ie.y)}n.emplaceBack(s.x,s.y,H.x1,H.y1,H.x2,H.y2,d,g,_)}this.boxEndIndex=n.length}}class pT{constructor(n=[],s=((d,g)=>d<g?-1:d>g?1:0)){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:d}=this,g=s[n];for(;n>0;){const _=n-1>>1,x=s[_];if(d(g,x)>=0)break;s[n]=x,n=_}s[n]=g}_down(n){const{data:s,compare:d}=this,g=this.length>>1,_=s[n];for(;n<g;){let x=1+(n<<1);const C=x+1;if(C<this.length&&d(s[C],s[x])<0&&(x=C),d(s[x],_)>=0)break;s[n]=s[x],n=x}s[n]=_}}function gT(r,n=1,s=!1){let d=1/0,g=1/0,_=-1/0,x=-1/0;const C=r[0];for(let X=0;X<C.length;X++){const ne=C[X];(!X||ne.x<d)&&(d=ne.x),(!X||ne.y<g)&&(g=ne.y),(!X||ne.x>_)&&(_=ne.x),(!X||ne.y>x)&&(x=ne.y)}const T=Math.min(_-d,x-g);let D=T/2;const O=new pT([],vT);if(T===0)return new k(d,g);for(let X=d;X<_;X+=T)for(let ne=g;ne<x;ne+=T)O.push(new kc(X+D,ne+D,D,r));let N=(function(X){let ne=0,oe=0,ye=0;const Ie=X[0];for(let Ze=0,ze=Ie.length,He=ze-1;Ze<ze;He=Ze++){const ot=Ie[Ze],wt=Ie[He],Nt=ot.x*wt.y-wt.x*ot.y;oe+=(ot.x+wt.x)*Nt,ye+=(ot.y+wt.y)*Nt,ne+=3*Nt}return new kc(oe/ne,ye/ne,0,X)})(r),H=O.length;for(;O.length;){const X=O.pop();(X.d>N.d||!N.d)&&(N=X,s&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,H)),X.max-N.d<=n||(D=X.h/2,O.push(new kc(X.p.x-D,X.p.y-D,D,r)),O.push(new kc(X.p.x+D,X.p.y-D,D,r)),O.push(new kc(X.p.x-D,X.p.y+D,D,r)),O.push(new kc(X.p.x+D,X.p.y+D,D,r)),H+=4)}return s&&(console.log(`num probes: ${H}`),console.log(`best distance: ${N.d}`)),N.p}function vT(r,n){return n.max-r.max}function kc(r,n,s,d){this.p=new k(r,n),this.h=s,this.d=(function(g,_){let x=!1,C=1/0;for(let T=0;T<_.length;T++){const D=_[T];for(let O=0,N=D.length,H=N-1;O<N;H=O++){const X=D[O],ne=D[H];X.y>g.y!=ne.y>g.y&&g.x<(ne.x-X.x)*(g.y-X.y)/(ne.y-X.y)+X.x&&(x=!x),C=Math.min(C,Lb(g,X,ne))}}return(x?1:-1)*Math.sqrt(C)})(this.p,d),this.max=this.d+this.h*Math.SQRT2}var da;h.aq=void 0,(da=h.aq||(h.aq={}))[da.center=1]="center",da[da.left=2]="left",da[da.right=3]="right",da[da.top=4]="top",da[da.bottom=5]="bottom",da[da["top-left"]=6]="top-left",da[da["top-right"]=7]="top-right",da[da["bottom-left"]=8]="bottom-left",da[da["bottom-right"]=9]="bottom-right";const tl=7,uv=Number.POSITIVE_INFINITY;function Qx(r,n){return n[1]!==uv?(function(s,d,g){let _=0,x=0;switch(d=Math.abs(d),g=Math.abs(g),s){case"top-right":case"top-left":case"top":x=g-tl;break;case"bottom-right":case"bottom-left":case"bottom":x=-g+tl}switch(s){case"top-right":case"bottom-right":case"right":_=-d;break;case"top-left":case"bottom-left":case"left":_=d}return[_,x]})(r,n[0],n[1]):(function(s,d){let g=0,_=0;d<0&&(d=0);const x=d/Math.SQRT2;switch(s){case"top-right":case"top-left":_=x-tl;break;case"bottom-right":case"bottom-left":_=-x+tl;break;case"bottom":_=-d+tl;break;case"top":_=d-tl}switch(s){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=d;break;case"right":g=-d}return[g,_]})(r,n[0])}function e0(r,n,s){var d;const g=r.layout,_=(d=g.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(n,{},s);if(_){const C=_.values,T=[];for(let D=0;D<C.length;D+=2){const O=T[D]=C[D],N=C[D+1].map((H=>H*ji));O.startsWith("top")?N[1]-=tl:O.startsWith("bottom")&&(N[1]+=tl),T[D+1]=N}return new or(T)}const x=g.get("text-variable-anchor");if(x){let C;C=r._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(n,{},s)*ji,uv]:g.get("text-offset").evaluate(n,{},s).map((D=>D*ji));const T=[];for(const D of x)T.push(D,Qx(D,C));return new or(T)}return null}function cv(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function yT(r,n,s,d,g,_,x,C,T,D,O){let N=_.textMaxSize.evaluate(n,{});N===void 0&&(N=x);const H=r.layers[0].layout,X=H.get("icon-offset").evaluate(n,{},O),ne=n0(s.horizontal),oe=x/24,ye=r.tilePixelRatio*oe,Ie=r.tilePixelRatio*N/24,Ze=r.tilePixelRatio*C,ze=r.tilePixelRatio*H.get("symbol-spacing"),He=H.get("text-padding")*r.tilePixelRatio,ot=(function(pt,tn,Yt,dn=1){const Qn=pt.get("icon-padding").evaluate(tn,{},Yt),Yn=Qn&&Qn.values;return[Yn[0]*dn,Yn[1]*dn,Yn[2]*dn,Yn[3]*dn]})(H,n,O,r.tilePixelRatio),wt=H.get("text-max-angle")/180*Math.PI,Nt=H.get("text-rotation-alignment")!=="viewport"&&H.get("symbol-placement")!=="point",on=H.get("icon-rotation-alignment")==="map"&&H.get("symbol-placement")!=="point",Ot=H.get("symbol-placement"),Vt=ze/2,Qt=H.get("icon-text-fit");let Wt;d&&Qt!=="none"&&(r.allowVerticalPlacement&&s.vertical&&(Wt=Cx(d,s.vertical,Qt,H.get("icon-text-fit-padding"),X,oe)),ne&&(d=Cx(d,ne,Qt,H.get("icon-text-fit-padding"),X,oe)));const Ht=(pt,tn)=>{tn.x<0||tn.x>=Bi||tn.y<0||tn.y>=Bi||(function(Yt,dn,Qn,Yn,Zi,Ur,ha,Ki,Da,Va,za,Ti,Xi,xa,fa,La,ma,Ir,er,Bn,ai,ci,mr,bi,Cc){const ws=Yt.addToLineVertexArray(dn,Qn);let Ss,Hr,Pr,ta,no=0,gh=0,s0=0,o0=0,yv=-1,_v=-1;const io={};let l0=dc("");if(Yt.allowVerticalPlacement&&Yn.vertical){const wa=Ki.layout.get("text-rotate").evaluate(ai,{},bi)+90;Pr=new Im(Da,dn,Va,za,Ti,Yn.vertical,Xi,xa,fa,wa),ha&&(ta=new Im(Da,dn,Va,za,Ti,ha,ma,Ir,fa,wa))}if(Zi){const wa=Ki.layout.get("icon-rotate").evaluate(ai,{}),Tr=Ki.layout.get("icon-text-fit")!=="none",Kl=Yx(Zi,wa,mr,Tr),rs=ha?Yx(ha,wa,mr,Tr):void 0;Hr=new Im(Da,dn,Va,za,Ti,Zi,ma,Ir,!1,wa),no=4*Kl.length;const Xl=Yt.iconSizeData;let ks=null;Xl.kind==="source"?(ks=[xs*Ki.layout.get("icon-size").evaluate(ai,{})],ks[0]>Jo&&pe(`${Yt.layerIds[0]}: Value for "icon-size" is >= ${dh}. Reduce your "icon-size".`)):Xl.kind==="composite"&&(ks=[xs*ci.compositeIconSizes[0].evaluate(ai,{},bi),xs*ci.compositeIconSizes[1].evaluate(ai,{},bi)],(ks[0]>Jo||ks[1]>Jo)&&pe(`${Yt.layerIds[0]}: Value for "icon-size" is >= ${dh}. Reduce your "icon-size".`)),Yt.addSymbols(Yt.icon,Kl,ks,Bn,er,ai,h.ah.none,dn,ws.lineStartIndex,ws.lineLength,-1,bi),yv=Yt.icon.placedSymbolArray.length-1,rs&&(gh=4*rs.length,Yt.addSymbols(Yt.icon,rs,ks,Bn,er,ai,h.ah.vertical,dn,ws.lineStartIndex,ws.lineLength,-1,bi),_v=Yt.icon.placedSymbolArray.length-1)}const u0=Object.keys(Yn.horizontal);for(const wa of u0){const Tr=Yn.horizontal[wa];if(!Ss){l0=dc(Tr.text);const rs=Ki.layout.get("text-rotate").evaluate(ai,{},bi);Ss=new Im(Da,dn,Va,za,Ti,Tr,Xi,xa,fa,rs)}const Kl=Tr.positionedLines.length===1;if(s0+=t0(Yt,dn,Tr,Ur,Ki,fa,ai,La,ws,Yn.vertical?h.ah.horizontal:h.ah.horizontalOnly,Kl?u0:[wa],io,yv,ci,bi),Kl)break}Yn.vertical&&(o0+=t0(Yt,dn,Yn.vertical,Ur,Ki,fa,ai,La,ws,h.ah.vertical,["vertical"],io,_v,ci,bi));const xT=Ss?Ss.boxStartIndex:Yt.collisionBoxArray.length,wT=Ss?Ss.boxEndIndex:Yt.collisionBoxArray.length,ST=Pr?Pr.boxStartIndex:Yt.collisionBoxArray.length,kT=Pr?Pr.boxEndIndex:Yt.collisionBoxArray.length,CT=Hr?Hr.boxStartIndex:Yt.collisionBoxArray.length,IT=Hr?Hr.boxEndIndex:Yt.collisionBoxArray.length,PT=ta?ta.boxStartIndex:Yt.collisionBoxArray.length,TT=ta?ta.boxEndIndex:Yt.collisionBoxArray.length;let as=-1;const Tm=(wa,Tr)=>wa&&wa.circleDiameter?Math.max(wa.circleDiameter,Tr):Tr;as=Tm(Ss,as),as=Tm(Pr,as),as=Tm(Hr,as),as=Tm(ta,as);const c0=as>-1?1:0;c0&&(as*=Cc/ji),Yt.glyphOffsetArray.length>=wc.MAX_GLYPHS&&pe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ai.sortKey!==void 0&&Yt.addToSortKeyRanges(Yt.symbolInstances.length,ai.sortKey);const AT=e0(Ki,ai,bi),[ET,MT]=(function(wa,Tr){const Kl=wa.length,rs=Tr==null?void 0:Tr.values;if((rs==null?void 0:rs.length)>0)for(let Xl=0;Xl<rs.length;Xl+=2){const ks=rs[Xl+1];wa.emplaceBack(h.aq[rs[Xl]],ks[0],ks[1])}return[Kl,wa.length]})(Yt.textAnchorOffsets,AT);Yt.symbolInstances.emplaceBack(dn.x,dn.y,io.right>=0?io.right:-1,io.center>=0?io.center:-1,io.left>=0?io.left:-1,io.vertical||-1,yv,_v,l0,xT,wT,ST,kT,CT,IT,PT,TT,Va,s0,o0,no,gh,c0,0,Xi,as,ET,MT)})(r,tn,pt,s,d,g,Wt,r.layers[0],r.collisionBoxArray,n.index,n.sourceLayerIndex,r.index,ye,[He,He,He,He],Nt,T,Ze,ot,on,X,n,_,D,O,x)};if(Ot==="line")for(const pt of qx(n.geometry,0,0,Bi,Bi)){const tn=mT(pt,ze,wt,s.vertical||ne,d,24,Ie,r.overscaling,Bi);for(const Yt of tn)ne&&_T(r,ne.text,Vt,Yt)||Ht(pt,Yt)}else if(Ot==="line-center"){for(const pt of n.geometry)if(pt.length>1){const tn=fT(pt,wt,s.vertical||ne,d,24,Ie);tn&&Ht(pt,tn)}}else if(n.type==="Polygon")for(const pt of Nu(n.geometry,0)){const tn=gT(pt,16);Ht(pt[0],new el(tn.x,tn.y,0))}else if(n.type==="LineString")for(const pt of n.geometry)Ht(pt,new el(pt[0].x,pt[0].y,0));else if(n.type==="Point")for(const pt of n.geometry)for(const tn of pt)Ht([tn],new el(tn.x,tn.y,0))}function t0(r,n,s,d,g,_,x,C,T,D,O,N,H,X,ne){const oe=(function(Ze,ze,He,ot,wt,Nt,on,Ot){const Vt=ot.layout.get("text-rotate").evaluate(Nt,{})*Math.PI/180,Qt=[];for(const Wt of ze.positionedLines)for(const Ht of Wt.positionedGlyphs){if(!Ht.rect)continue;const pt=Ht.rect||{};let tn=vx+1,Yt=!0,dn=1,Qn=0;const Yn=(wt||Ot)&&Ht.vertical,Zi=Ht.metrics.advance*Ht.scale/2;if(Ot&&ze.verticalizable&&(Qn=Wt.lineOffset/2-(Ht.imageName?-(ji-Ht.metrics.width*Ht.scale)/2:(Ht.scale-1)*ji)),Ht.imageName){const Bn=on[Ht.imageName];Yt=Bn.sdf,dn=Bn.pixelRatio,tn=Qa/dn}const Ur=wt?[Ht.x+Zi,Ht.y]:[0,0];let ha=wt?[0,0]:[Ht.x+Zi+He[0],Ht.y+He[1]-Qn],Ki=[0,0];Yn&&(Ki=ha,ha=[0,0]);const Da=Ht.metrics.isDoubleResolution?2:1,Va=(Ht.metrics.left-tn)*Ht.scale-Zi+ha[0],za=(-Ht.metrics.top-tn)*Ht.scale+ha[1],Ti=Va+pt.w/Da*Ht.scale/dn,Xi=za+pt.h/Da*Ht.scale/dn,xa=new k(Va,za),fa=new k(Ti,za),La=new k(Va,Xi),ma=new k(Ti,Xi);if(Yn){const Bn=new k(-Zi,Zi-uh),ai=-Math.PI/2,ci=ji/2-Zi,mr=new k(5-uh-ci,-(Ht.imageName?ci:0)),bi=new k(...Ki);xa._rotateAround(ai,Bn)._add(mr)._add(bi),fa._rotateAround(ai,Bn)._add(mr)._add(bi),La._rotateAround(ai,Bn)._add(mr)._add(bi),ma._rotateAround(ai,Bn)._add(mr)._add(bi)}if(Vt){const Bn=Math.sin(Vt),ai=Math.cos(Vt),ci=[ai,-Bn,Bn,ai];xa._matMult(ci),fa._matMult(ci),La._matMult(ci),ma._matMult(ci)}const Ir=new k(0,0),er=new k(0,0);Qt.push({tl:xa,tr:fa,bl:La,br:ma,tex:pt,writingMode:ze.writingMode,glyphOffset:Ur,sectionIndex:Ht.sectionIndex,isSDF:Yt,pixelOffsetTL:Ir,pixelOffsetBR:er,minFontScaleX:0,minFontScaleY:0})}return Qt})(0,s,C,g,_,x,d,r.allowVerticalPlacement),ye=r.textSizeData;let Ie=null;ye.kind==="source"?(Ie=[xs*g.layout.get("text-size").evaluate(x,{})],Ie[0]>Jo&&pe(`${r.layerIds[0]}: Value for "text-size" is >= ${dh}. Reduce your "text-size".`)):ye.kind==="composite"&&(Ie=[xs*X.compositeTextSizes[0].evaluate(x,{},ne),xs*X.compositeTextSizes[1].evaluate(x,{},ne)],(Ie[0]>Jo||Ie[1]>Jo)&&pe(`${r.layerIds[0]}: Value for "text-size" is >= ${dh}. Reduce your "text-size".`)),r.addSymbols(r.text,oe,Ie,C,_,x,D,n,T.lineStartIndex,T.lineLength,H,ne);for(const Ze of O)N[Ze]=r.text.placedSymbolArray.length-1;return 4*oe.length}function n0(r){for(const n in r)return r[n];return null}function _T(r,n,s,d){const g=r.compareText;if(n in g){const _=g[n];for(let x=_.length-1;x>=0;x--)if(d.dist(_[x])<s)return!0}else g[n]=[];return g[n].push(d),!1}const i0=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class dv{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,d]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=d>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=i0[15&d];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[C]=new Uint32Array(n,4,1);return new dv(C,x,_,n)}constructor(n,s=64,d=Float64Array,g){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=d,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const _=i0.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,C=n*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-C%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${d}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+C+T,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+C+T),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+C+T,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=n,this.coords[this._pos++]=s,d}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return hv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,d,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:C}=this,T=[0,_.length-1,0],D=[];for(;T.length;){const O=T.pop()||0,N=T.pop()||0,H=T.pop()||0;if(N-H<=C){for(let ye=H;ye<=N;ye++){const Ie=x[2*ye],Ze=x[2*ye+1];Ie>=n&&Ie<=d&&Ze>=s&&Ze<=g&&D.push(_[ye])}continue}const X=H+N>>1,ne=x[2*X],oe=x[2*X+1];ne>=n&&ne<=d&&oe>=s&&oe<=g&&D.push(_[X]),(O===0?n<=ne:s<=oe)&&(T.push(H),T.push(X-1),T.push(1-O)),(O===0?d>=ne:g>=oe)&&(T.push(X+1),T.push(N),T.push(1-O))}return D}within(n,s,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:x}=this,C=[0,g.length-1,0],T=[],D=d*d;for(;C.length;){const O=C.pop()||0,N=C.pop()||0,H=C.pop()||0;if(N-H<=x){for(let ye=H;ye<=N;ye++)r0(_[2*ye],_[2*ye+1],n,s)<=D&&T.push(g[ye]);continue}const X=H+N>>1,ne=_[2*X],oe=_[2*X+1];r0(ne,oe,n,s)<=D&&T.push(g[X]),(O===0?n-d<=ne:s-d<=oe)&&(C.push(H),C.push(X-1),C.push(1-O)),(O===0?n+d>=ne:s+d>=oe)&&(C.push(X+1),C.push(N),C.push(1-O))}return T}}function hv(r,n,s,d,g,_){if(g-d<=s)return;const x=d+g>>1;a0(r,n,x,d,g,_),hv(r,n,s,d,x-1,1-_),hv(r,n,s,x+1,g,1-_)}function a0(r,n,s,d,g,_){for(;g>d;){if(g-d>600){const D=g-d+1,O=s-d+1,N=Math.log(D),H=.5*Math.exp(2*N/3),X=.5*Math.sqrt(N*H*(D-H)/D)*(O-D/2<0?-1:1);a0(r,n,s,Math.max(d,Math.floor(s-O*H/D+X)),Math.min(g,Math.floor(s+(D-O)*H/D+X)),_)}const x=n[2*s+_];let C=d,T=g;for(mh(r,n,d,s),n[2*g+_]>x&&mh(r,n,d,g);C<T;){for(mh(r,n,C,T),C++,T--;n[2*C+_]<x;)C++;for(;n[2*T+_]>x;)T--}n[2*d+_]===x?mh(r,n,d,T):(T++,mh(r,n,T,g)),T<=s&&(d=T+1),s<=T&&(g=T-1)}}function mh(r,n,s,d){fv(r,s,d),fv(n,2*s,2*d),fv(n,2*s+1,2*d+1)}function fv(r,n,s){const d=r[n];r[n]=r[s],r[s]=d}function r0(r,n,s,d){const g=r-s,_=n-d;return g*g+_*_}var mv;h.bg=void 0,(mv=h.bg||(h.bg={})).create="create",mv.load="load",mv.fullLoad="fullLoad";let Pm=null,ph=[];const pv=1e3/60,gv="loadTime",vv="fullLoadTime",bT={mark(r){performance.mark(r)},frame(r){const n=r;Pm!=null&&ph.push(n-Pm),Pm=n},clearMetrics(){Pm=null,ph=[],performance.clearMeasures(gv),performance.clearMeasures(vv);for(const r in h.bg)performance.clearMarks(h.bg[r])},getPerformanceMetrics(){performance.measure(gv,h.bg.create,h.bg.load),performance.measure(vv,h.bg.create,h.bg.fullLoad);const r=performance.getEntriesByName(gv)[0].duration,n=performance.getEntriesByName(vv)[0].duration,s=ph.length,d=1/(ph.reduce(((_,x)=>_+x),0)/s/1e3),g=ph.filter((_=>_>pv)).reduce(((_,x)=>_+(x-pv)/pv),0);return{loadTime:r,fullLoadTime:n,fps:d,percentDroppedFrames:g/(s+g)*100,totalFrames:s}}};h.$=class extends j{},h.A=gc,h.B=Cg,h.C=function(r){if(Xe==null){const n=r.navigator?r.navigator.userAgent:null;Xe=!!r.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Xe},h.D=Kt,h.E=xe,h.F=class{constructor(r,n){this.target=r,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new dT((()=>this.process())),this.subscription=(function(s,d,g,_){return s.addEventListener(d,g,!1),{unsubscribe:()=>{s.removeEventListener(d,g,!1)}}})(this.target,"message",(s=>this.receive(s))),this.globalScope=$e(self)?r:window}registerMessageHandler(r,n){this.messageHandlers[r]=n}sendAsync(r,n){return new Promise(((s,d)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[g]={resolve:s,reject:d},n&&n.signal.addEventListener("abort",(()=>{delete this.resolveRejects[g];const C={id:g,type:"<cancel>",origin:location.origin,targetMapId:r.targetMapId,sourceMapId:this.mapId};this.target.postMessage(C)}),{once:!0});const _=[],x=Object.assign(Object.assign({},r),{id:g,sourceMapId:this.mapId,origin:location.origin,data:$o(r.data,_)});this.target.postMessage(x,{transfer:_})}))}receive(r){const n=r.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const d=this.abortControllers[s];return delete this.abortControllers[s],void(d&&d.abort())}if($e(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const r=this.taskQueue.shift(),n=this.tasks[r];delete this.tasks[r],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(r,n)}processTask(r,n){return l(this,void 0,void 0,(function*(){if(n.type==="<response>"){const g=this.resolveRejects[r];return delete this.resolveRejects[r],g?void(n.error?g.reject(No(n.error)):g.resolve(No(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(r,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=No(n.data),d=new AbortController;this.abortControllers[r]=d;try{const g=yield this.messageHandlers[n.type](n.sourceMapId,s,d);this.completeTask(r,null,g)}catch(g){this.completeTask(r,g)}}))}completeTask(r,n,s){const d=[];delete this.abortControllers[r];const g={id:r,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?$o(n):null,data:$o(s,d)};this.target.postMessage(g,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},h.G=kt,h.H=function(){var r=new gc(16);return gc!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},h.I=Jg,h.J=function(r,n,s){var d,g,_,x,C,T,D,O,N,H,X,ne,oe=s[0],ye=s[1],Ie=s[2];return n===r?(r[12]=n[0]*oe+n[4]*ye+n[8]*Ie+n[12],r[13]=n[1]*oe+n[5]*ye+n[9]*Ie+n[13],r[14]=n[2]*oe+n[6]*ye+n[10]*Ie+n[14],r[15]=n[3]*oe+n[7]*ye+n[11]*Ie+n[15]):(g=n[1],_=n[2],x=n[3],C=n[4],T=n[5],D=n[6],O=n[7],N=n[8],H=n[9],X=n[10],ne=n[11],r[0]=d=n[0],r[1]=g,r[2]=_,r[3]=x,r[4]=C,r[5]=T,r[6]=D,r[7]=O,r[8]=N,r[9]=H,r[10]=X,r[11]=ne,r[12]=d*oe+C*ye+N*Ie+n[12],r[13]=g*oe+T*ye+H*Ie+n[13],r[14]=_*oe+D*ye+X*Ie+n[14],r[15]=x*oe+O*ye+ne*Ie+n[15]),r},h.K=function(r,n,s){var d=s[0],g=s[1],_=s[2];return r[0]=n[0]*d,r[1]=n[1]*d,r[2]=n[2]*d,r[3]=n[3]*d,r[4]=n[4]*g,r[5]=n[5]*g,r[6]=n[6]*g,r[7]=n[7]*g,r[8]=n[8]*_,r[9]=n[9]*_,r[10]=n[10]*_,r[11]=n[11]*_,r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r},h.L=Ob,h.M=function(r,n){const s={};for(let d=0;d<n.length;d++){const g=n[d];g in r&&(s[g]=r[g])}return s},h.N=Qo,h.O=zx,h.P=k,h.Q=Lx,h.R=kr,h.S=Cr,h.T=sc,h.U=B,h.V=R,h.W=Te,h.X=Bi,h.Y=P,h.Z=hh,h._=l,h.a=lt,h.a$=function(r,n){var s=r[0],d=r[1],g=r[2],_=r[3],x=r[4],C=r[5],T=r[6],D=r[7],O=r[8],N=r[9],H=r[10],X=r[11],ne=r[12],oe=r[13],ye=r[14],Ie=r[15],Ze=n[0],ze=n[1],He=n[2],ot=n[3],wt=n[4],Nt=n[5],on=n[6],Ot=n[7],Vt=n[8],Qt=n[9],Wt=n[10],Ht=n[11],pt=n[12],tn=n[13],Yt=n[14],dn=n[15];return Math.abs(s-Ze)<=Ma*Math.max(1,Math.abs(s),Math.abs(Ze))&&Math.abs(d-ze)<=Ma*Math.max(1,Math.abs(d),Math.abs(ze))&&Math.abs(g-He)<=Ma*Math.max(1,Math.abs(g),Math.abs(He))&&Math.abs(_-ot)<=Ma*Math.max(1,Math.abs(_),Math.abs(ot))&&Math.abs(x-wt)<=Ma*Math.max(1,Math.abs(x),Math.abs(wt))&&Math.abs(C-Nt)<=Ma*Math.max(1,Math.abs(C),Math.abs(Nt))&&Math.abs(T-on)<=Ma*Math.max(1,Math.abs(T),Math.abs(on))&&Math.abs(D-Ot)<=Ma*Math.max(1,Math.abs(D),Math.abs(Ot))&&Math.abs(O-Vt)<=Ma*Math.max(1,Math.abs(O),Math.abs(Vt))&&Math.abs(N-Qt)<=Ma*Math.max(1,Math.abs(N),Math.abs(Qt))&&Math.abs(H-Wt)<=Ma*Math.max(1,Math.abs(H),Math.abs(Wt))&&Math.abs(X-Ht)<=Ma*Math.max(1,Math.abs(X),Math.abs(Ht))&&Math.abs(ne-pt)<=Ma*Math.max(1,Math.abs(ne),Math.abs(pt))&&Math.abs(oe-tn)<=Ma*Math.max(1,Math.abs(oe),Math.abs(tn))&&Math.abs(ye-Yt)<=Ma*Math.max(1,Math.abs(ye),Math.abs(Yt))&&Math.abs(Ie-dn)<=Ma*Math.max(1,Math.abs(Ie),Math.abs(dn))},h.a0=Mn,h.a1=lv,h.a2=mt,h.a3=r=>{const n=window.document.createElement("video");return n.muted=!0,new Promise((s=>{n.onloadstart=()=>{s(n)};for(const d of r){const g=window.document.createElement("source");ft(d)||(n.crossOrigin="Anonymous"),g.src=d,n.appendChild(g)}}))},h.a4=function(){return te++},h.a5=$t,h.a6=wc,h.a7=Dd,h.a8=Wl,h.a9=Nx,h.aA=function(r){if(r.type==="custom")return new cT(r);switch(r.type){case"background":return new oT(r);case"circle":return new ZI(r);case"fill":return new dP(r);case"fill-extrusion":return new IP(r);case"heatmap":return new XI(r);case"hillshade":return new JI(r);case"line":return new zP(r);case"raster":return new uT(r);case"symbol":return new wm(r)}},h.aB=ue,h.aC=function(r,n){if(!r)return[{command:"setStyle",args:[n]}];let s=[];try{if(!et(r.version,n.version))return[{command:"setStyle",args:[n]}];et(r.center,n.center)||s.push({command:"setCenter",args:[n.center]}),et(r.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),et(r.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),et(r.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),et(r.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),et(r.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),et(r.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),et(r.light,n.light)||s.push({command:"setLight",args:[n.light]}),et(r.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),et(r.sky,n.sky)||s.push({command:"setSky",args:[n.sky]}),et(r.projection,n.projection)||s.push({command:"setProjection",args:[n.projection]});const d={},g=[];(function(x,C,T,D){let O;for(O in C=C||{},x=x||{})Object.prototype.hasOwnProperty.call(x,O)&&(Object.prototype.hasOwnProperty.call(C,O)||yt(O,T,D));for(O in C)Object.prototype.hasOwnProperty.call(C,O)&&(Object.prototype.hasOwnProperty.call(x,O)?et(x[O],C[O])||(x[O].type==="geojson"&&C[O].type==="geojson"&&Ut(x,C,O)?tt(T,{command:"setGeoJSONSourceData",args:[O,C[O].data]}):It(O,C,T,D)):dt(O,C,T))})(r.sources,n.sources,g,d);const _=[];r.layers&&r.layers.forEach((x=>{"source"in x&&d[x.source]?s.push({command:"removeLayer",args:[x.id]}):_.push(x)})),s=s.concat(g),(function(x,C,T){C=C||[];const D=(x=x||[]).map(bn),O=C.map(bn),N=x.reduce(Pn,{}),H=C.reduce(Pn,{}),X=D.slice(),ne=Object.create(null);let oe,ye,Ie,Ze,ze;for(let He=0,ot=0;He<D.length;He++)oe=D[He],Object.prototype.hasOwnProperty.call(H,oe)?ot++:(tt(T,{command:"removeLayer",args:[oe]}),X.splice(X.indexOf(oe,ot),1));for(let He=0,ot=0;He<O.length;He++)oe=O[O.length-1-He],X[X.length-1-He]!==oe&&(Object.prototype.hasOwnProperty.call(N,oe)?(tt(T,{command:"removeLayer",args:[oe]}),X.splice(X.lastIndexOf(oe,X.length-ot),1)):ot++,Ze=X[X.length-He],tt(T,{command:"addLayer",args:[H[oe],Ze]}),X.splice(X.length-He,0,oe),ne[oe]=!0);for(let He=0;He<O.length;He++)if(oe=O[He],ye=N[oe],Ie=H[oe],!ne[oe]&&!et(ye,Ie))if(et(ye.source,Ie.source)&&et(ye["source-layer"],Ie["source-layer"])&&et(ye.type,Ie.type)){for(ze in nn(ye.layout,Ie.layout,T,oe,null,"setLayoutProperty"),nn(ye.paint,Ie.paint,T,oe,null,"setPaintProperty"),et(ye.filter,Ie.filter)||tt(T,{command:"setFilter",args:[oe,Ie.filter]}),et(ye.minzoom,Ie.minzoom)&&et(ye.maxzoom,Ie.maxzoom)||tt(T,{command:"setLayerZoomRange",args:[oe,Ie.minzoom,Ie.maxzoom]}),ye)Object.prototype.hasOwnProperty.call(ye,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?nn(ye[ze],Ie[ze],T,oe,ze.slice(6),"setPaintProperty"):et(ye[ze],Ie[ze])||tt(T,{command:"setLayerProperty",args:[oe,ze,Ie[ze]]}));for(ze in Ie)Object.prototype.hasOwnProperty.call(Ie,ze)&&!Object.prototype.hasOwnProperty.call(ye,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?nn(ye[ze],Ie[ze],T,oe,ze.slice(6),"setPaintProperty"):et(ye[ze],Ie[ze])||tt(T,{command:"setLayerProperty",args:[oe,ze,Ie[ze]]}))}else tt(T,{command:"removeLayer",args:[oe]}),Ze=X[X.lastIndexOf(oe)+1],tt(T,{command:"addLayer",args:[Ie,Ze]})})(_,n.layers,s)}catch(d){console.warn("Unable to compute style diff:",d),s=[{command:"setStyle",args:[n]}]}return s},h.aD=function(r){const n=[],s=r.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),r.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},h.aE=function r(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let d=0;d<n.length;d++)if(!r(n[d],s[d]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const d in n)if(!r(n[d],s[d]))return!1;return!0}return n===s},h.aF=re,h.aG=ie,h.aH=class extends Hl{constructor(r,n){super(r,n),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},h.aI=um,h.aJ=class extends Hl{constructor(r,n){super(r,n),this.current=$I}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let n=1;n<16;n++)if(r[n]!==this.current[n]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},h.aK=Tb,h.aL=Ab,h.aM=Gn,h.aN=class extends Hl{constructor(r,n){super(r,n),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},h.aO=class extends Hl{constructor(r,n){super(r,n),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},h.aP=function(r,n,s,d,g,_,x){var C=1/(n-s),T=1/(d-g),D=1/(_-x);return r[0]=-2*C,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*T,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*D,r[11]=0,r[12]=(n+s)*C,r[13]=(g+d)*T,r[14]=(x+_)*D,r[15]=1,r},h.aQ=WI,h.aR=class extends Oe{},h.aS=FP,h.aT=class extends Je{},h.aU=$g,h.aV=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},h.aW=Hb,h.aX=ua,h.aY=Sr,h.aZ=class extends Xt{},h.a_=function(r,n){return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]&&r[3]===n[3]&&r[4]===n[4]&&r[5]===n[5]&&r[6]===n[6]&&r[7]===n[7]&&r[8]===n[8]&&r[9]===n[9]&&r[10]===n[10]&&r[11]===n[11]&&r[12]===n[12]&&r[13]===n[13]&&r[14]===n[14]&&r[15]===n[15]},h.aa=function(r){const n={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((s,d,g,_)=>{const x=g||_;return n[d]=!x||x.toLowerCase(),""})),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},h.ab=function(r,n){const s=[];for(const d in r)d in n||s.push(d);return s},h.ac=J,h.ad=function(r,n,s){var d=Math.sin(s),g=Math.cos(s),_=n[0],x=n[1],C=n[2],T=n[3],D=n[4],O=n[5],N=n[6],H=n[7];return n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=_*g+D*d,r[1]=x*g+O*d,r[2]=C*g+N*d,r[3]=T*g+H*d,r[4]=D*g-_*d,r[5]=O*g-x*d,r[6]=N*g-C*d,r[7]=H*g-T*d,r},h.ae=function(r){var n=new gc(16);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n},h.af=fm,h.ag=function(r,n){let s=0,d=0;if(r.kind==="constant")d=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:x}=r,C=g?J(Aa.interpolationFactor(g,n,_,x),0,1):0;r.kind==="camera"?d=Ta.number(r.minSize,r.maxSize,C):s=C}return{uSizeT:s,uSize:d}},h.ai=function(r,{uSize:n,uSizeT:s},{lowerSize:d,upperSize:g}){return r.kind==="source"?d/xs:r.kind==="composite"?Ta.number(d/xs,g/xs,s):n},h.aj=nv,h.ak=function(r,n,s,d){const g=n.y-r.y,_=n.x-r.x,x=d.y-s.y,C=d.x-s.x,T=x*_-C*g;if(T===0)return null;const D=(C*(r.y-s.y)-x*(r.x-s.x))/T;return new k(r.x+D*_,r.y+D*g)},h.al=qx,h.am=Vb,h.an=Rg,h.ao=function(r){let n=1/0,s=1/0,d=-1/0,g=-1/0;for(const _ of r)n=Math.min(n,_.x),s=Math.min(s,_.y),d=Math.max(d,_.x),g=Math.max(g,_.y);return[n,s,d,g]},h.ap=ji,h.ar=tv,h.as=function(r,n){var s=n[0],d=n[1],g=n[2],_=n[3],x=n[4],C=n[5],T=n[6],D=n[7],O=n[8],N=n[9],H=n[10],X=n[11],ne=n[12],oe=n[13],ye=n[14],Ie=n[15],Ze=s*C-d*x,ze=s*T-g*x,He=s*D-_*x,ot=d*T-g*C,wt=d*D-_*C,Nt=g*D-_*T,on=O*oe-N*ne,Ot=O*ye-H*ne,Vt=O*Ie-X*ne,Qt=N*ye-H*oe,Wt=N*Ie-X*oe,Ht=H*Ie-X*ye,pt=Ze*Ht-ze*Wt+He*Qt+ot*Vt-wt*Ot+Nt*on;return pt?(r[0]=(C*Ht-T*Wt+D*Qt)*(pt=1/pt),r[1]=(g*Wt-d*Ht-_*Qt)*pt,r[2]=(oe*Nt-ye*wt+Ie*ot)*pt,r[3]=(H*wt-N*Nt-X*ot)*pt,r[4]=(T*Vt-x*Ht-D*Ot)*pt,r[5]=(s*Ht-g*Vt+_*Ot)*pt,r[6]=(ye*He-ne*Nt-Ie*ze)*pt,r[7]=(O*Nt-H*He+X*ze)*pt,r[8]=(x*Wt-C*Vt+D*on)*pt,r[9]=(d*Vt-s*Wt-_*on)*pt,r[10]=(ne*wt-oe*He+Ie*Ze)*pt,r[11]=(N*He-O*wt-X*Ze)*pt,r[12]=(C*Ot-x*Qt-T*on)*pt,r[13]=(s*Qt-d*Ot+g*on)*pt,r[14]=(oe*ze-ne*ot-ye*Ze)*pt,r[15]=(O*ot-N*ze+H*Ze)*pt,r):null},h.at=cv,h.au=ev,h.av=dv,h.aw=function(){const r={},n=le.$version;for(const s in le.$root){const d=le.$root[s];if(d.required){let g=null;g=s==="version"?n:d.type==="array"?[]:{},g!=null&&(r[s]=g)}}return r},h.ax=Gd,h.ay=je,h.az=function(r){r=r.slice();const n=Object.create(null);for(let s=0;s<r.length;s++)n[r[s].id]=r[s];for(let s=0;s<r.length;s++)"ref"in r[s]&&(r[s]=ht(r[s],n[r[s].ref]));return r},h.b=Ye,h.b0=function(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r},h.b1=function(r,n,s){return r[0]=n[0]*s[0],r[1]=n[1]*s[1],r[2]=n[2]*s[2],r[3]=n[3]*s[3],r},h.b2=function(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]+r[3]*n[3]},h.b3=ae,h.b4=Fx,h.b5=Bx,h.b6=function(r,n,s,d,g){var _,x=1/Math.tan(n/2);return r[0]=x/s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,g!=null&&g!==1/0?(r[10]=(g+d)*(_=1/(d-g)),r[14]=2*g*d*_):(r[10]=-1,r[14]=-2*d),r},h.b7=function(r,n,s){var d=Math.sin(s),g=Math.cos(s),_=n[4],x=n[5],C=n[6],T=n[7],D=n[8],O=n[9],N=n[10],H=n[11];return n!==r&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[4]=_*g+D*d,r[5]=x*g+O*d,r[6]=C*g+N*d,r[7]=T*g+H*d,r[8]=D*g-_*d,r[9]=O*g-x*d,r[10]=N*g-C*d,r[11]=H*g-T*d,r},h.b8=Z,h.b9=Y,h.bA=cx,h.bB=function(r){return r.message===Fe},h.bC=zo,h.bD=Ya,h.ba=function(r){return r*Math.PI/180},h.bb=function(r,n){const{x:s,y:d}=hh.fromLngLat(n);return!(r<0||r>25||d<0||d>=1||s<0||s>=1)},h.bc=function(r,n){return r[0]=n[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=n[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},h.bd=class extends ${},h.be=sv,h.bf=bT,h.bh=ge,h.bi=function(r,n){lt.REGISTERED_PROTOCOLS[r]=n},h.bj=function(r){delete lt.REGISTERED_PROTOCOLS[r]},h.bk=function(r,n){const s={};for(let g=0;g<r.length;g++){const _=n&&n[r[g].id]||Yf(r[g]);n&&(n[r[g].id]=_);let x=s[_];x||(x=s[_]=[]),x.push(r[g])}const d=[];for(const g in s)d.push(s[g]);return d},h.bl=qt,h.bm=$x,h.bn=jx,h.bo=_x,h.bp=function(r){r.bucket.createArrays(),r.bucket.tilePixelRatio=Bi/(512*r.bucket.overscaling),r.bucket.compareText={},r.bucket.iconsNeedLinear=!1;const n=r.bucket.layers[0],s=n.layout,d=n._unevaluatedLayout._values,g={layoutIconSize:d["icon-size"].possiblyEvaluate(new si(r.bucket.zoom+1),r.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new si(r.bucket.zoom+1),r.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new si(18))};if(r.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:O}=r.bucket.textSizeData;g.compositeTextSizes=[d["text-size"].possiblyEvaluate(new si(D),r.canonical),d["text-size"].possiblyEvaluate(new si(O),r.canonical)]}if(r.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:O}=r.bucket.iconSizeData;g.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new si(D),r.canonical),d["icon-size"].possiblyEvaluate(new si(O),r.canonical)]}const _=s.get("text-line-height")*ji,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",C=s.get("text-keep-upright"),T=s.get("text-size");for(const D of r.bucket.features){const O=s.get("text-font").evaluate(D,{},r.canonical).join(","),N=T.evaluate(D,{},r.canonical),H=g.layoutTextSize.evaluate(D,{},r.canonical),X=g.layoutIconSize.evaluate(D,{},r.canonical),ne={horizontal:{},vertical:void 0},oe=D.text;let ye,Ie=[0,0];if(oe){const He=oe.toString(),ot=s.get("text-letter-spacing").evaluate(D,{},r.canonical)*ji,wt=Ig(He)?ot:0,Nt=s.get("text-anchor").evaluate(D,{},r.canonical),on=e0(n,D,r.canonical);if(!on){const Wt=s.get("text-radial-offset").evaluate(D,{},r.canonical);Ie=Wt?Qx(Nt,[Wt*ji,uv]):s.get("text-offset").evaluate(D,{},r.canonical).map((Ht=>Ht*ji))}let Ot=x?"center":s.get("text-justify").evaluate(D,{},r.canonical);const Vt=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(D,{},r.canonical)*ji:1/0,Qt=()=>{r.bucket.allowVerticalPlacement&&Wd(He)&&(ne.vertical=_m(oe,r.glyphMap,r.glyphPositions,r.imagePositions,O,Vt,_,Nt,"left",wt,Ie,h.ah.vertical,!0,H,N))};if(!x&&on){const Wt=new Set;if(Ot==="auto")for(let pt=0;pt<on.values.length;pt+=2)Wt.add(cv(on.values[pt]));else Wt.add(Ot);let Ht=!1;for(const pt of Wt)if(!ne.horizontal[pt])if(Ht)ne.horizontal[pt]=ne.horizontal[0];else{const tn=_m(oe,r.glyphMap,r.glyphPositions,r.imagePositions,O,Vt,_,"center",pt,wt,Ie,h.ah.horizontal,!1,H,N);tn&&(ne.horizontal[pt]=tn,Ht=tn.positionedLines.length===1)}Qt()}else{Ot==="auto"&&(Ot=cv(Nt));const Wt=_m(oe,r.glyphMap,r.glyphPositions,r.imagePositions,O,Vt,_,Nt,Ot,wt,Ie,h.ah.horizontal,!1,H,N);Wt&&(ne.horizontal[Ot]=Wt),Qt(),Wd(He)&&x&&C&&(ne.vertical=_m(oe,r.glyphMap,r.glyphPositions,r.imagePositions,O,Vt,_,Nt,Ot,wt,Ie,h.ah.vertical,!1,H,N))}}let Ze=!1;if(D.icon&&D.icon.name){const He=r.imageMap[D.icon.name];He&&(ye=nT(r.imagePositions[D.icon.name],s.get("icon-offset").evaluate(D,{},r.canonical),s.get("icon-anchor").evaluate(D,{},r.canonical)),Ze=!!He.sdf,r.bucket.sdfIcons===void 0?r.bucket.sdfIcons=Ze:r.bucket.sdfIcons!==Ze&&pe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(He.pixelRatio!==r.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(r.bucket.iconsNeedLinear=!0))}const ze=n0(ne.horizontal)||ne.vertical;r.bucket.iconsInText=!!ze&&ze.iconsInText,(ze||ye)&&yT(r.bucket,D,ne,ye,r.imageMap,g,H,X,Ie,Ze,r.canonical)}r.showCollisionBoxes&&r.bucket.generateCollisionDebugBuffers()},h.bq=Zg,h.br=qg,h.bs=Wg,h.bt=Xo,h.bu=Xg,h.bv=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return r.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},h.bw=function(r,n,s,d,g){return l(this,void 0,void 0,(function*(){if(R())try{return yield Te(r,n,s,d,g)}catch{}return(function(_,x,C,T,D){const O=_.width,N=_.height;Me&&Ve||(Me=new OffscreenCanvas(O,N),Ve=Me.getContext("2d",{willReadFrequently:!0})),Me.width=O,Me.height=N,Ve.drawImage(_,0,0,O,N);const H=Ve.getImageData(x,C,T,D);return Ve.clearRect(0,0,O,N),H.data})(r,n,s,d,g)}))},h.bx=Ox,h.by=b,h.bz=S,h.c=Be,h.d=r=>l(void 0,void 0,void 0,(function*(){if(r.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(r)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),h.e=he,h.f=r=>new Promise(((n,s)=>{const d=new Image;d.onload=()=>{n(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame((()=>{d.src=qe}))},d.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(r)],{type:"image/png"});d.src=r.byteLength?URL.createObjectURL(g):qe})),h.g=vt,h.h=(r,n)=>rt(he(r,{type:"json"}),n),h.i=$e,h.j=Se,h.k=se,h.l=(r,n)=>rt(he(r,{type:"arrayBuffer"}),n),h.m=rt,h.n=function(r){return new Xg(r).readFields(KP,[])},h.o=nh,h.p=yx,h.q=y,h.r=kg,h.s=ft,h.t=Hd,h.u=Js,h.v=le,h.w=pe,h.x=function([r,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:r*Math.cos(n)*Math.sin(s),y:r*Math.sin(n)*Math.sin(s),z:r*Math.cos(s)}},h.y=Ta,h.z=si})),c("worker",["./shared"],(function(h){class l{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,G){for(const _e of W){this._layerConfigs[_e.id]=_e;const Le=this._layers[_e.id]=h.aA(_e);Le._featureFilter=h.a7(Le.filter),this.keyCache[_e.id]&&delete this.keyCache[_e.id]}for(const _e of G)delete this.keyCache[_e],delete this._layerConfigs[_e],delete this._layers[_e];this.familiesBySource={};const ce=h.bk(Object.values(this._layerConfigs),this.keyCache);for(const _e of ce){const Le=_e.map((at=>this._layers[at.id])),Ne=Le[0];if(Ne.visibility==="none")continue;const We=Ne.source||"";let Ee=this.familiesBySource[We];Ee||(Ee=this.familiesBySource[We]={});const ut=Ne.sourceLayer||"_geojsonTileLayer";let _t=Ee[ut];_t||(_t=Ee[ut]=[]),_t.push(Le)}}}class b{constructor(W){const G={},ce=[];for(const We in W){const Ee=W[We],ut=G[We]={};for(const _t in Ee){const at=Ee[+_t];if(!at||at.bitmap.width===0||at.bitmap.height===0)continue;const At={x:0,y:0,w:at.bitmap.width+2,h:at.bitmap.height+2};ce.push(At),ut[_t]={rect:At,metrics:at.metrics}}}const{w:_e,h:Le}=h.p(ce),Ne=new h.o({width:_e||1,height:Le||1});for(const We in W){const Ee=W[We];for(const ut in Ee){const _t=Ee[+ut];if(!_t||_t.bitmap.width===0||_t.bitmap.height===0)continue;const at=G[We][ut].rect;h.o.copy(_t.bitmap,Ne,{x:0,y:0},{x:at.x+1,y:at.y+1},_t.bitmap)}}this.image=Ne,this.positions=G}}h.bl("GlyphAtlas",b);class S{constructor(W){this.tileID=new h.S(W.tileID.overscaledZ,W.tileID.wrap,W.tileID.canonical.z,W.tileID.canonical.x,W.tileID.canonical.y),this.uid=W.uid,this.zoom=W.zoom,this.pixelRatio=W.pixelRatio,this.tileSize=W.tileSize,this.source=W.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=W.showCollisionBoxes,this.collectResourceTiming=!!W.collectResourceTiming,this.returnDependencies=!!W.returnDependencies,this.promoteId=W.promoteId,this.inFlightDependencies=[]}parse(W,G,ce,_e){return h._(this,void 0,void 0,(function*(){this.status="parsing",this.data=W,this.collisionBoxArray=new h.a5;const Le=new h.bm(Object.keys(W.layers).sort()),Ne=new h.bn(this.tileID,this.promoteId);Ne.bucketLayerIDs=[];const We={},Ee={featureIndex:Ne,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ce},ut=G.familiesBySource[this.source];for(const Cn in ut){const qn=W.layers[Cn];if(!qn)continue;qn.version===1&&h.w(`Vector tile source "${this.source}" layer "${Cn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const hi=Le.encode(Cn),Wi=[];for(let Qi=0;Qi<qn.length;Qi++){const ya=qn.feature(Qi),So=Ne.getId(ya,Cn);Wi.push({feature:ya,id:So,index:Qi,sourceLayerIndex:hi})}for(const Qi of ut[Cn]){const ya=Qi[0];ya.source!==this.source&&h.w(`layer.source = ${ya.source} does not equal this.source = ${this.source}`),ya.minzoom&&this.zoom<Math.floor(ya.minzoom)||ya.maxzoom&&this.zoom>=ya.maxzoom||ya.visibility!=="none"&&(w(Qi,this.zoom,ce),(We[ya.id]=ya.createBucket({index:Ne.bucketLayerIDs.length,layers:Qi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:hi,sourceID:this.source})).populate(Wi,Ee,this.tileID.canonical),Ne.bucketLayerIDs.push(Qi.map((So=>So.id))))}}const _t=h.aF(Ee.glyphDependencies,(Cn=>Object.keys(Cn).map(Number)));this.inFlightDependencies.forEach((Cn=>Cn==null?void 0:Cn.abort())),this.inFlightDependencies=[];let at=Promise.resolve({});if(Object.keys(_t).length){const Cn=new AbortController;this.inFlightDependencies.push(Cn),at=_e.sendAsync({type:"GG",data:{stacks:_t,source:this.source,tileID:this.tileID,type:"glyphs"}},Cn)}const At=Object.keys(Ee.iconDependencies);let an=Promise.resolve({});if(At.length){const Cn=new AbortController;this.inFlightDependencies.push(Cn),an=_e.sendAsync({type:"GI",data:{icons:At,source:this.source,tileID:this.tileID,type:"icons"}},Cn)}const sn=Object.keys(Ee.patternDependencies);let Vn=Promise.resolve({});if(sn.length){const Cn=new AbortController;this.inFlightDependencies.push(Cn),Vn=_e.sendAsync({type:"GI",data:{icons:sn,source:this.source,tileID:this.tileID,type:"patterns"}},Cn)}const[yn,zn,Tn]=yield Promise.all([at,an,Vn]),zi=new b(yn),_i=new h.bo(zn,Tn);for(const Cn in We){const qn=We[Cn];qn instanceof h.a6?(w(qn.layers,this.zoom,ce),h.bp({bucket:qn,glyphMap:yn,glyphPositions:zi.positions,imageMap:zn,imagePositions:_i.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):qn.hasPattern&&(qn instanceof h.bq||qn instanceof h.br||qn instanceof h.bs)&&(w(qn.layers,this.zoom,ce),qn.addFeatures(Ee,this.tileID.canonical,_i.patternPositions))}return this.status="done",{buckets:Object.values(We).filter((Cn=>!Cn.isEmpty())),featureIndex:Ne,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:zi.image,imageAtlas:_i,glyphMap:this.returnDependencies?yn:null,iconMap:this.returnDependencies?zn:null,glyphPositions:this.returnDependencies?zi.positions:null}}))}}function w(ke,W,G){const ce=new h.z(W);for(const _e of ke)_e.recalculate(ce,G)}class k{constructor(W,G,ce){this.actor=W,this.layerIndex=G,this.availableImages=ce,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(W,G){return h._(this,void 0,void 0,(function*(){const ce=yield h.l(W.request,G);try{return{vectorTile:new h.bt.VectorTile(new h.bu(ce.data)),rawData:ce.data,cacheControl:ce.cacheControl,expires:ce.expires}}catch(_e){const Le=new Uint8Array(ce.data);let Ne=`Unable to parse the tile at ${W.request.url}, `;throw Ne+=Le[0]===31&&Le[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${_e.message}`,new Error(Ne)}}))}loadTile(W){return h._(this,void 0,void 0,(function*(){const G=W.uid,ce=!!(W&&W.request&&W.request.collectResourceTiming)&&new h.bv(W.request),_e=new S(W);this.loading[G]=_e;const Le=new AbortController;_e.abort=Le;try{const Ne=yield this.loadVectorTile(W,Le);if(delete this.loading[G],!Ne)return null;const We=Ne.rawData,Ee={};Ne.expires&&(Ee.expires=Ne.expires),Ne.cacheControl&&(Ee.cacheControl=Ne.cacheControl);const ut={};if(ce){const at=ce.finish();at&&(ut.resourceTiming=JSON.parse(JSON.stringify(at)))}_e.vectorTile=Ne.vectorTile;const _t=_e.parse(Ne.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[G]=_e,this.fetching[G]={rawTileData:We,cacheControl:Ee,resourceTiming:ut};try{const at=yield _t;return h.e({rawTileData:We.slice(0)},at,Ee,ut)}finally{delete this.fetching[G]}}catch(Ne){throw delete this.loading[G],_e.status="done",this.loaded[G]=_e,Ne}}))}reloadTile(W){return h._(this,void 0,void 0,(function*(){const G=W.uid;if(!this.loaded||!this.loaded[G])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ce=this.loaded[G];if(ce.showCollisionBoxes=W.showCollisionBoxes,ce.status==="parsing"){const _e=yield ce.parse(ce.vectorTile,this.layerIndex,this.availableImages,this.actor);let Le;if(this.fetching[G]){const{rawTileData:Ne,cacheControl:We,resourceTiming:Ee}=this.fetching[G];delete this.fetching[G],Le=h.e({rawTileData:Ne.slice(0)},_e,We,Ee)}else Le=_e;return Le}if(ce.status==="done"&&ce.vectorTile)return ce.parse(ce.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(W){return h._(this,void 0,void 0,(function*(){const G=this.loading,ce=W.uid;G&&G[ce]&&G[ce].abort&&(G[ce].abort.abort(),delete G[ce])}))}removeTile(W){return h._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[W.uid]&&delete this.loaded[W.uid]}))}}class I{constructor(){this.loaded={}}loadTile(W){return h._(this,void 0,void 0,(function*(){const{uid:G,encoding:ce,rawImageData:_e,redFactor:Le,greenFactor:Ne,blueFactor:We,baseShift:Ee}=W,ut=_e.width+2,_t=_e.height+2,at=h.b(_e)?new h.R({width:ut,height:_t},yield h.bw(_e,-1,-1,ut,_t)):_e,At=new h.bx(G,at,ce,Le,Ne,We,Ee);return this.loaded=this.loaded||{},this.loaded[G]=At,At}))}removeTile(W){const G=this.loaded,ce=W.uid;G&&G[ce]&&delete G[ce]}}function E(ke,W){if(ke.length!==0){L(ke[0],W);for(var G=1;G<ke.length;G++)L(ke[G],!W)}}function L(ke,W){for(var G=0,ce=0,_e=0,Le=ke.length,Ne=Le-1;_e<Le;Ne=_e++){var We=(ke[_e][0]-ke[Ne][0])*(ke[Ne][1]+ke[_e][1]),Ee=G+We;ce+=Math.abs(G)>=Math.abs(We)?G-Ee+We:We-Ee+G,G=Ee}G+ce>=0!=!!W&&ke.reverse()}var F=h.by((function ke(W,G){var ce,_e=W&&W.type;if(_e==="FeatureCollection")for(ce=0;ce<W.features.length;ce++)ke(W.features[ce],G);else if(_e==="GeometryCollection")for(ce=0;ce<W.geometries.length;ce++)ke(W.geometries[ce],G);else if(_e==="Feature")ke(W.geometry,G);else if(_e==="Polygon")E(W.coordinates,G);else if(_e==="MultiPolygon")for(ce=0;ce<W.coordinates.length;ce++)E(W.coordinates[ce],G);return W}));const z=h.bt.VectorTileFeature.prototype.toGeoJSON;var B={exports:{}},R=h.bz,Z=h.bt.VectorTileFeature,Y=J;function J(ke,W){this.options=W||{},this.features=ke,this.length=ke.length}function ae(ke,W){this.id=typeof ke.id=="number"?ke.id:void 0,this.type=ke.type,this.rawGeometry=ke.type===1?[ke.geometry]:ke.geometry,this.properties=ke.tags,this.extent=W||4096}J.prototype.feature=function(ke){return new ae(this.features[ke],this.options.extent)},ae.prototype.loadGeometry=function(){var ke=this.rawGeometry;this.geometry=[];for(var W=0;W<ke.length;W++){for(var G=ke[W],ce=[],_e=0;_e<G.length;_e++)ce.push(new R(G[_e][0],G[_e][1]));this.geometry.push(ce)}return this.geometry},ae.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ke=this.geometry,W=1/0,G=-1/0,ce=1/0,_e=-1/0,Le=0;Le<ke.length;Le++)for(var Ne=ke[Le],We=0;We<Ne.length;We++){var Ee=Ne[We];W=Math.min(W,Ee.x),G=Math.max(G,Ee.x),ce=Math.min(ce,Ee.y),_e=Math.max(_e,Ee.y)}return[W,ce,G,_e]},ae.prototype.toGeoJSON=Z.prototype.toGeoJSON;var he=h.bA,te=Y;function re(ke){var W=new he;return(function(G,ce){for(var _e in G.layers)ce.writeMessage(3,ie,G.layers[_e])})(ke,W),W.finish()}function ie(ke,W){var G;W.writeVarintField(15,ke.version||1),W.writeStringField(1,ke.name||""),W.writeVarintField(5,ke.extent||4096);var ce={keys:[],values:[],keycache:{},valuecache:{}};for(G=0;G<ke.length;G++)ce.feature=ke.feature(G),W.writeMessage(2,ue,ce);var _e=ce.keys;for(G=0;G<_e.length;G++)W.writeStringField(3,_e[G]);var Le=ce.values;for(G=0;G<Le.length;G++)W.writeMessage(4,Xe,Le[G])}function ue(ke,W){var G=ke.feature;G.id!==void 0&&W.writeVarintField(1,G.id),W.writeMessage(2,Q,ke),W.writeVarintField(3,G.type),W.writeMessage(4,$e,G)}function Q(ke,W){var G=ke.feature,ce=ke.keys,_e=ke.values,Le=ke.keycache,Ne=ke.valuecache;for(var We in G.properties){var Ee=G.properties[We],ut=Le[We];if(Ee!==null){ut===void 0&&(ce.push(We),Le[We]=ut=ce.length-1),W.writeVarint(ut);var _t=typeof Ee;_t!=="string"&&_t!=="boolean"&&_t!=="number"&&(Ee=JSON.stringify(Ee));var at=_t+":"+Ee,At=Ne[at];At===void 0&&(_e.push(Ee),Ne[at]=At=_e.length-1),W.writeVarint(At)}}}function pe(ke,W){return(W<<3)+(7&ke)}function Ce(ke){return ke<<1^ke>>31}function $e(ke,W){for(var G=ke.loadGeometry(),ce=ke.type,_e=0,Le=0,Ne=G.length,We=0;We<Ne;We++){var Ee=G[We],ut=1;ce===1&&(ut=Ee.length),W.writeVarint(pe(1,ut));for(var _t=ce===3?Ee.length-1:Ee.length,at=0;at<_t;at++){at===1&&ce!==1&&W.writeVarint(pe(2,_t-1));var At=Ee[at].x-_e,an=Ee[at].y-Le;W.writeVarint(Ce(At)),W.writeVarint(Ce(an)),_e+=At,Le+=an}ce===3&&W.writeVarint(pe(7,1))}}function Xe(ke,W){var G=typeof ke;G==="string"?W.writeStringField(1,ke):G==="boolean"?W.writeBooleanField(7,ke):G==="number"&&(ke%1!=0?W.writeDoubleField(3,ke):ke<0?W.writeSVarintField(6,ke):W.writeVarintField(5,ke))}B.exports=re,B.exports.fromVectorTileJs=re,B.exports.fromGeojsonVt=function(ke,W){W=W||{};var G={};for(var ce in ke)G[ce]=new te(ke[ce].features,W),G[ce].name=ce,G[ce].version=W.version,G[ce].extent=W.extent;return re({layers:G})},B.exports.GeoJSONWrapper=te;var Ye=h.by(B.exports);const qe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},Te=Math.fround||(Me=new Float32Array(1),ke=>(Me[0]=+ke,Me[0]));var Me;const Ve=3,Fe=5,Be=6;class lt{constructor(W){this.options=Object.assign(Object.create(qe),W),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(W){const{log:G,minZoom:ce,maxZoom:_e}=this.options;G&&console.time("total time");const Le=`prepare ${W.length} points`;G&&console.time(Le),this.points=W;const Ne=[];for(let Ee=0;Ee<W.length;Ee++){const ut=W[Ee];if(!ut.geometry)continue;const[_t,at]=ut.geometry.coordinates,At=Te(ge(_t)),an=Te(je(at));Ne.push(At,an,1/0,Ee,-1,1),this.options.reduce&&Ne.push(0)}let We=this.trees[_e+1]=this._createTree(Ne);G&&console.timeEnd(Le);for(let Ee=_e;Ee>=ce;Ee--){const ut=+Date.now();We=this.trees[Ee]=this._createTree(this._cluster(We,Ee)),G&&console.log("z%d: %d clusters in %dms",Ee,We.numItems,+Date.now()-ut)}return G&&console.timeEnd("total time"),this}getClusters(W,G){let ce=((W[0]+180)%360+360)%360-180;const _e=Math.max(-90,Math.min(90,W[1]));let Le=W[2]===180?180:((W[2]+180)%360+360)%360-180;const Ne=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)ce=-180,Le=180;else if(ce>Le){const at=this.getClusters([ce,_e,180,Ne],G),At=this.getClusters([-180,_e,Le,Ne],G);return at.concat(At)}const We=this.trees[this._limitZoom(G)],Ee=We.range(ge(ce),je(Ne),ge(Le),je(_e)),ut=We.data,_t=[];for(const at of Ee){const At=this.stride*at;_t.push(ut[At+Fe]>1?vt(ut,At,this.clusterProps):this.points[ut[At+Ve]])}return _t}getChildren(W){const G=this._getOriginId(W),ce=this._getOriginZoom(W),_e="No cluster with the specified id.",Le=this.trees[ce];if(!Le)throw new Error(_e);const Ne=Le.data;if(G*this.stride>=Ne.length)throw new Error(_e);const We=this.options.radius/(this.options.extent*Math.pow(2,ce-1)),Ee=Le.within(Ne[G*this.stride],Ne[G*this.stride+1],We),ut=[];for(const _t of Ee){const at=_t*this.stride;Ne[at+4]===W&&ut.push(Ne[at+Fe]>1?vt(Ne,at,this.clusterProps):this.points[Ne[at+Ve]])}if(ut.length===0)throw new Error(_e);return ut}getLeaves(W,G,ce){const _e=[];return this._appendLeaves(_e,W,G=G||10,ce=ce||0,0),_e}getTile(W,G,ce){const _e=this.trees[this._limitZoom(W)],Le=Math.pow(2,W),{extent:Ne,radius:We}=this.options,Ee=We/Ne,ut=(ce-Ee)/Le,_t=(ce+1+Ee)/Le,at={features:[]};return this._addTileFeatures(_e.range((G-Ee)/Le,ut,(G+1+Ee)/Le,_t),_e.data,G,ce,Le,at),G===0&&this._addTileFeatures(_e.range(1-Ee/Le,ut,1,_t),_e.data,Le,ce,Le,at),G===Le-1&&this._addTileFeatures(_e.range(0,ut,Ee/Le,_t),_e.data,-1,ce,Le,at),at.features.length?at:null}getClusterExpansionZoom(W){let G=this._getOriginZoom(W)-1;for(;G<=this.options.maxZoom;){const ce=this.getChildren(W);if(G++,ce.length!==1)break;W=ce[0].properties.cluster_id}return G}_appendLeaves(W,G,ce,_e,Le){const Ne=this.getChildren(G);for(const We of Ne){const Ee=We.properties;if(Ee&&Ee.cluster?Le+Ee.point_count<=_e?Le+=Ee.point_count:Le=this._appendLeaves(W,Ee.cluster_id,ce,_e,Le):Le<_e?Le++:W.push(We),W.length===ce)break}return Le}_createTree(W){const G=new h.av(W.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ce=0;ce<W.length;ce+=this.stride)G.add(W[ce],W[ce+1]);return G.finish(),G.data=W,G}_addTileFeatures(W,G,ce,_e,Le,Ne){for(const We of W){const Ee=We*this.stride,ut=G[Ee+Fe]>1;let _t,at,At;if(ut)_t=kt(G,Ee,this.clusterProps),at=G[Ee],At=G[Ee+1];else{const Vn=this.points[G[Ee+Ve]];_t=Vn.properties;const[yn,zn]=Vn.geometry.coordinates;at=ge(yn),At=je(zn)}const an={type:1,geometry:[[Math.round(this.options.extent*(at*Le-ce)),Math.round(this.options.extent*(At*Le-_e))]],tags:_t};let sn;sn=ut||this.options.generateId?G[Ee+Ve]:this.points[G[Ee+Ve]].id,sn!==void 0&&(an.id=sn),Ne.features.push(an)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(Math.floor(+W),this.options.maxZoom+1))}_cluster(W,G){const{radius:ce,extent:_e,reduce:Le,minPoints:Ne}=this.options,We=ce/(_e*Math.pow(2,G)),Ee=W.data,ut=[],_t=this.stride;for(let at=0;at<Ee.length;at+=_t){if(Ee[at+2]<=G)continue;Ee[at+2]=G;const At=Ee[at],an=Ee[at+1],sn=W.within(Ee[at],Ee[at+1],We),Vn=Ee[at+Fe];let yn=Vn;for(const zn of sn){const Tn=zn*_t;Ee[Tn+2]>G&&(yn+=Ee[Tn+Fe])}if(yn>Vn&&yn>=Ne){let zn,Tn=At*Vn,zi=an*Vn,_i=-1;const Cn=((at/_t|0)<<5)+(G+1)+this.points.length;for(const qn of sn){const hi=qn*_t;if(Ee[hi+2]<=G)continue;Ee[hi+2]=G;const Wi=Ee[hi+Fe];Tn+=Ee[hi]*Wi,zi+=Ee[hi+1]*Wi,Ee[hi+4]=Cn,Le&&(zn||(zn=this._map(Ee,at,!0),_i=this.clusterProps.length,this.clusterProps.push(zn)),Le(zn,this._map(Ee,hi)))}Ee[at+4]=Cn,ut.push(Tn/yn,zi/yn,1/0,Cn,-1,yn),Le&&ut.push(_i)}else{for(let zn=0;zn<_t;zn++)ut.push(Ee[at+zn]);if(yn>1)for(const zn of sn){const Tn=zn*_t;if(!(Ee[Tn+2]<=G)){Ee[Tn+2]=G;for(let zi=0;zi<_t;zi++)ut.push(Ee[Tn+zi])}}}}return ut}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,G,ce){if(W[G+Fe]>1){const Ne=this.clusterProps[W[G+Be]];return ce?Object.assign({},Ne):Ne}const _e=this.points[W[G+Ve]].properties,Le=this.options.map(_e);return ce&&Le===_e?Object.assign({},Le):Le}}function vt(ke,W,G){return{type:"Feature",id:ke[W+Ve],properties:kt(ke,W,G),geometry:{type:"Point",coordinates:[(ce=ke[W],360*(ce-.5)),rt(ke[W+1])]}};var ce}function kt(ke,W,G){const ce=ke[W+Fe],_e=ce>=1e4?`${Math.round(ce/1e3)}k`:ce>=1e3?Math.round(ce/100)/10+"k":ce,Le=ke[W+Be],Ne=Le===-1?{}:Object.assign({},G[Le]);return Object.assign(Ne,{cluster:!0,cluster_id:ke[W+Ve],point_count:ce,point_count_abbreviated:_e})}function ge(ke){return ke/360+.5}function je(ke){const W=Math.sin(ke*Math.PI/180),G=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return G<0?0:G>1?1:G}function rt(ke){const W=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function ft(ke,W,G,ce){let _e=ce;const Le=W+(G-W>>1);let Ne,We=G-W;const Ee=ke[W],ut=ke[W+1],_t=ke[G],at=ke[G+1];for(let At=W+3;At<G;At+=3){const an=Rt(ke[At],ke[At+1],Ee,ut,_t,at);if(an>_e)Ne=At,_e=an;else if(an===_e){const sn=Math.abs(At-Le);sn<We&&(Ne=At,We=sn)}}_e>ce&&(Ne-W>3&&ft(ke,W,Ne,ce),ke[Ne+2]=_e,G-Ne>3&&ft(ke,Ne,G,ce))}function Rt(ke,W,G,ce,_e,Le){let Ne=_e-G,We=Le-ce;if(Ne!==0||We!==0){const Ee=((ke-G)*Ne+(W-ce)*We)/(Ne*Ne+We*We);Ee>1?(G=_e,ce=Le):Ee>0&&(G+=Ne*Ee,ce+=We*Ee)}return Ne=ke-G,We=W-ce,Ne*Ne+We*We}function fe(ke,W,G,ce){const _e={id:ke??null,type:W,geometry:G,tags:ce,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(W==="Point"||W==="MultiPoint"||W==="LineString")se(_e,G);else if(W==="Polygon")se(_e,G[0]);else if(W==="MultiLineString")for(const Le of G)se(_e,Le);else if(W==="MultiPolygon")for(const Le of G)se(_e,Le[0]);return _e}function se(ke,W){for(let G=0;G<W.length;G+=3)ke.minX=Math.min(ke.minX,W[G]),ke.minY=Math.min(ke.minY,W[G+1]),ke.maxX=Math.max(ke.maxX,W[G]),ke.maxY=Math.max(ke.maxY,W[G+1])}function Se(ke,W,G,ce){if(!W.geometry)return;const _e=W.geometry.coordinates;if(_e&&_e.length===0)return;const Le=W.geometry.type,Ne=Math.pow(G.tolerance/((1<<G.maxZoom)*G.extent),2);let We=[],Ee=W.id;if(G.promoteId?Ee=W.properties[G.promoteId]:G.generateId&&(Ee=ce||0),Le==="Point")xe(_e,We);else if(Le==="MultiPoint")for(const ut of _e)xe(ut,We);else if(Le==="LineString")le(_e,We,Ne,!1);else if(Le==="MultiLineString"){if(G.lineMetrics){for(const ut of _e)We=[],le(ut,We,Ne,!1),ke.push(fe(Ee,"LineString",We,W.properties));return}Ke(_e,We,Ne,!1)}else if(Le==="Polygon")Ke(_e,We,Ne,!0);else{if(Le!=="MultiPolygon"){if(Le==="GeometryCollection"){for(const ut of W.geometry.geometries)Se(ke,{id:Ee,geometry:ut,properties:W.properties},G,ce);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const ut of _e){const _t=[];Ke(ut,_t,Ne,!0),We.push(_t)}}ke.push(fe(Ee,Le,We,W.properties))}function xe(ke,W){W.push(ht(ke[0]),et(ke[1]),0)}function le(ke,W,G,ce){let _e,Le,Ne=0;for(let Ee=0;Ee<ke.length;Ee++){const ut=ht(ke[Ee][0]),_t=et(ke[Ee][1]);W.push(ut,_t,0),Ee>0&&(Ne+=ce?(_e*_t-ut*Le)/2:Math.sqrt(Math.pow(ut-_e,2)+Math.pow(_t-Le,2))),_e=ut,Le=_t}const We=W.length-3;W[2]=1,ft(W,0,We,G),W[We+2]=1,W.size=Math.abs(Ne),W.start=0,W.end=W.size}function Ke(ke,W,G,ce){for(let _e=0;_e<ke.length;_e++){const Le=[];le(ke[_e],Le,G,ce),W.push(Le)}}function ht(ke){return ke/360+.5}function et(ke){const W=Math.sin(ke*Math.PI/180),G=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return G<0?0:G>1?1:G}function tt(ke,W,G,ce,_e,Le,Ne,We){if(ce/=W,Le>=(G/=W)&&Ne<ce)return ke;if(Ne<G||Le>=ce)return null;const Ee=[];for(const ut of ke){const _t=ut.geometry;let at=ut.type;const At=_e===0?ut.minX:ut.minY,an=_e===0?ut.maxX:ut.maxY;if(At>=G&&an<ce){Ee.push(ut);continue}if(an<G||At>=ce)continue;let sn=[];if(at==="Point"||at==="MultiPoint")dt(_t,sn,G,ce,_e);else if(at==="LineString")yt(_t,sn,G,ce,_e,!1,We.lineMetrics);else if(at==="MultiLineString")Ut(_t,sn,G,ce,_e,!1);else if(at==="Polygon")Ut(_t,sn,G,ce,_e,!0);else if(at==="MultiPolygon")for(const Vn of _t){const yn=[];Ut(Vn,yn,G,ce,_e,!0),yn.length&&sn.push(yn)}if(sn.length){if(We.lineMetrics&&at==="LineString"){for(const Vn of sn)Ee.push(fe(ut.id,at,Vn,ut.tags));continue}at!=="LineString"&&at!=="MultiLineString"||(sn.length===1?(at="LineString",sn=sn[0]):at="MultiLineString"),at!=="Point"&&at!=="MultiPoint"||(at=sn.length===3?"Point":"MultiPoint"),Ee.push(fe(ut.id,at,sn,ut.tags))}}return Ee.length?Ee:null}function dt(ke,W,G,ce,_e){for(let Le=0;Le<ke.length;Le+=3){const Ne=ke[Le+_e];Ne>=G&&Ne<=ce&&nn(W,ke[Le],ke[Le+1],ke[Le+2])}}function yt(ke,W,G,ce,_e,Le,Ne){let We=It(ke);const Ee=_e===0?bn:Pn;let ut,_t,at=ke.start;for(let yn=0;yn<ke.length-3;yn+=3){const zn=ke[yn],Tn=ke[yn+1],zi=ke[yn+2],_i=ke[yn+3],Cn=ke[yn+4],qn=_e===0?zn:Tn,hi=_e===0?_i:Cn;let Wi=!1;Ne&&(ut=Math.sqrt(Math.pow(zn-_i,2)+Math.pow(Tn-Cn,2))),qn<G?hi>G&&(_t=Ee(We,zn,Tn,_i,Cn,G),Ne&&(We.start=at+ut*_t)):qn>ce?hi<ce&&(_t=Ee(We,zn,Tn,_i,Cn,ce),Ne&&(We.start=at+ut*_t)):nn(We,zn,Tn,zi),hi<G&&qn>=G&&(_t=Ee(We,zn,Tn,_i,Cn,G),Wi=!0),hi>ce&&qn<=ce&&(_t=Ee(We,zn,Tn,_i,Cn,ce),Wi=!0),!Le&&Wi&&(Ne&&(We.end=at+ut*_t),W.push(We),We=It(ke)),Ne&&(at+=ut)}let At=ke.length-3;const an=ke[At],sn=ke[At+1],Vn=_e===0?an:sn;Vn>=G&&Vn<=ce&&nn(We,an,sn,ke[At+2]),At=We.length-3,Le&&At>=3&&(We[At]!==We[0]||We[At+1]!==We[1])&&nn(We,We[0],We[1],We[2]),We.length&&W.push(We)}function It(ke){const W=[];return W.size=ke.size,W.start=ke.start,W.end=ke.end,W}function Ut(ke,W,G,ce,_e,Le){for(const Ne of ke)yt(Ne,W,G,ce,_e,Le,!1)}function nn(ke,W,G,ce){ke.push(W,G,ce)}function bn(ke,W,G,ce,_e,Le){const Ne=(Le-W)/(ce-W);return nn(ke,Le,G+(_e-G)*Ne,1),Ne}function Pn(ke,W,G,ce,_e,Le){const Ne=(Le-G)/(_e-G);return nn(ke,W+(ce-W)*Ne,Le,1),Ne}function mt(ke,W){const G=[];for(let ce=0;ce<ke.length;ce++){const _e=ke[ce],Le=_e.type;let Ne;if(Le==="Point"||Le==="MultiPoint"||Le==="LineString")Ne=Hn(_e.geometry,W);else if(Le==="MultiLineString"||Le==="Polygon"){Ne=[];for(const We of _e.geometry)Ne.push(Hn(We,W))}else if(Le==="MultiPolygon"){Ne=[];for(const We of _e.geometry){const Ee=[];for(const ut of We)Ee.push(Hn(ut,W));Ne.push(Ee)}}G.push(fe(_e.id,Le,Ne,_e.tags))}return G}function Hn(ke,W){const G=[];G.size=ke.size,ke.start!==void 0&&(G.start=ke.start,G.end=ke.end);for(let ce=0;ce<ke.length;ce+=3)G.push(ke[ce]+W,ke[ce+1],ke[ce+2]);return G}function Fn(ke,W){if(ke.transformed)return ke;const G=1<<ke.z,ce=ke.x,_e=ke.y;for(const Le of ke.features){const Ne=Le.geometry,We=Le.type;if(Le.geometry=[],We===1)for(let Ee=0;Ee<Ne.length;Ee+=2)Le.geometry.push(Ei(Ne[Ee],Ne[Ee+1],W,G,ce,_e));else for(let Ee=0;Ee<Ne.length;Ee++){const ut=[];for(let _t=0;_t<Ne[Ee].length;_t+=2)ut.push(Ei(Ne[Ee][_t],Ne[Ee][_t+1],W,G,ce,_e));Le.geometry.push(ut)}}return ke.transformed=!0,ke}function Ei(ke,W,G,ce,_e,Le){return[Math.round(G*(ke*ce-_e)),Math.round(G*(W*ce-Le))]}function Ni(ke,W,G,ce,_e){const Le=W===_e.maxZoom?0:_e.tolerance/((1<<W)*_e.extent),Ne={features:[],numPoints:0,numSimplified:0,numFeatures:ke.length,source:null,x:G,y:ce,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const We of ke)Pt(Ne,We,Le,_e);return Ne}function Pt(ke,W,G,ce){const _e=W.geometry,Le=W.type,Ne=[];if(ke.minX=Math.min(ke.minX,W.minX),ke.minY=Math.min(ke.minY,W.minY),ke.maxX=Math.max(ke.maxX,W.maxX),ke.maxY=Math.max(ke.maxY,W.maxY),Le==="Point"||Le==="MultiPoint")for(let We=0;We<_e.length;We+=3)Ne.push(_e[We],_e[We+1]),ke.numPoints++,ke.numSimplified++;else if(Le==="LineString")xn(Ne,_e,ke,G,!1,!1);else if(Le==="MultiLineString"||Le==="Polygon")for(let We=0;We<_e.length;We++)xn(Ne,_e[We],ke,G,Le==="Polygon",We===0);else if(Le==="MultiPolygon")for(let We=0;We<_e.length;We++){const Ee=_e[We];for(let ut=0;ut<Ee.length;ut++)xn(Ne,Ee[ut],ke,G,!0,ut===0)}if(Ne.length){let We=W.tags||null;if(Le==="LineString"&&ce.lineMetrics){We={};for(const ut in W.tags)We[ut]=W.tags[ut];We.mapbox_clip_start=_e.start/_e.size,We.mapbox_clip_end=_e.end/_e.size}const Ee={geometry:Ne,type:Le==="Polygon"||Le==="MultiPolygon"?3:Le==="LineString"||Le==="MultiLineString"?2:1,tags:We};W.id!==null&&(Ee.id=W.id),ke.features.push(Ee)}}function xn(ke,W,G,ce,_e,Le){const Ne=ce*ce;if(ce>0&&W.size<(_e?Ne:ce))return void(G.numPoints+=W.length/3);const We=[];for(let Ee=0;Ee<W.length;Ee+=3)(ce===0||W[Ee+2]>Ne)&&(G.numSimplified++,We.push(W[Ee],W[Ee+1])),G.numPoints++;_e&&(function(Ee,ut){let _t=0;for(let at=0,At=Ee.length,an=At-2;at<At;an=at,at+=2)_t+=(Ee[at]-Ee[an])*(Ee[at+1]+Ee[an+1]);if(_t>0===ut)for(let at=0,At=Ee.length;at<At/2;at+=2){const an=Ee[at],sn=Ee[at+1];Ee[at]=Ee[At-2-at],Ee[at+1]=Ee[At-1-at],Ee[At-2-at]=an,Ee[At-1-at]=sn}})(We,Le),ke.push(We)}const Jt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class di{constructor(W,G){const ce=(G=this.options=(function(Le,Ne){for(const We in Ne)Le[We]=Ne[We];return Le})(Object.create(Jt),G)).debug;if(ce&&console.time("preprocess data"),G.maxZoom<0||G.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(G.promoteId&&G.generateId)throw new Error("promoteId and generateId cannot be used together.");let _e=(function(Le,Ne){const We=[];if(Le.type==="FeatureCollection")for(let Ee=0;Ee<Le.features.length;Ee++)Se(We,Le.features[Ee],Ne,Ee);else Se(We,Le.type==="Feature"?Le:{geometry:Le},Ne);return We})(W,G);this.tiles={},this.tileCoords=[],ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",G.indexMaxZoom,G.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),_e=(function(Le,Ne){const We=Ne.buffer/Ne.extent;let Ee=Le;const ut=tt(Le,1,-1-We,We,0,-1,2,Ne),_t=tt(Le,1,1-We,2+We,0,-1,2,Ne);return(ut||_t)&&(Ee=tt(Le,1,-We,1+We,0,-1,2,Ne)||[],ut&&(Ee=mt(ut,1).concat(Ee)),_t&&(Ee=Ee.concat(mt(_t,-1)))),Ee})(_e,G),_e.length&&this.splitTile(_e,0,0,0),ce&&(_e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(W,G,ce,_e,Le,Ne,We){const Ee=[W,G,ce,_e],ut=this.options,_t=ut.debug;for(;Ee.length;){_e=Ee.pop(),ce=Ee.pop(),G=Ee.pop(),W=Ee.pop();const at=1<<G,At=Pa(G,ce,_e);let an=this.tiles[At];if(!an&&(_t>1&&console.time("creation"),an=this.tiles[At]=Ni(W,G,ce,_e,ut),this.tileCoords.push({z:G,x:ce,y:_e}),_t)){_t>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",G,ce,_e,an.numFeatures,an.numPoints,an.numSimplified),console.timeEnd("creation"));const Wi=`z${G}`;this.stats[Wi]=(this.stats[Wi]||0)+1,this.total++}if(an.source=W,Le==null){if(G===ut.indexMaxZoom||an.numPoints<=ut.indexMaxPoints)continue}else{if(G===ut.maxZoom||G===Le)continue;if(Le!=null){const Wi=Le-G;if(ce!==Ne>>Wi||_e!==We>>Wi)continue}}if(an.source=null,W.length===0)continue;_t>1&&console.time("clipping");const sn=.5*ut.buffer/ut.extent,Vn=.5-sn,yn=.5+sn,zn=1+sn;let Tn=null,zi=null,_i=null,Cn=null,qn=tt(W,at,ce-sn,ce+yn,0,an.minX,an.maxX,ut),hi=tt(W,at,ce+Vn,ce+zn,0,an.minX,an.maxX,ut);W=null,qn&&(Tn=tt(qn,at,_e-sn,_e+yn,1,an.minY,an.maxY,ut),zi=tt(qn,at,_e+Vn,_e+zn,1,an.minY,an.maxY,ut),qn=null),hi&&(_i=tt(hi,at,_e-sn,_e+yn,1,an.minY,an.maxY,ut),Cn=tt(hi,at,_e+Vn,_e+zn,1,an.minY,an.maxY,ut),hi=null),_t>1&&console.timeEnd("clipping"),Ee.push(Tn||[],G+1,2*ce,2*_e),Ee.push(zi||[],G+1,2*ce,2*_e+1),Ee.push(_i||[],G+1,2*ce+1,2*_e),Ee.push(Cn||[],G+1,2*ce+1,2*_e+1)}}getTile(W,G,ce){W=+W,G=+G,ce=+ce;const _e=this.options,{extent:Le,debug:Ne}=_e;if(W<0||W>24)return null;const We=1<<W,Ee=Pa(W,G=G+We&We-1,ce);if(this.tiles[Ee])return Fn(this.tiles[Ee],Le);Ne>1&&console.log("drilling down to z%d-%d-%d",W,G,ce);let ut,_t=W,at=G,At=ce;for(;!ut&&_t>0;)_t--,at>>=1,At>>=1,ut=this.tiles[Pa(_t,at,At)];return ut&&ut.source?(Ne>1&&(console.log("found parent tile z%d-%d-%d",_t,at,At),console.time("drilling down")),this.splitTile(ut.source,_t,at,At,W,G,ce),Ne>1&&console.timeEnd("drilling down"),this.tiles[Ee]?Fn(this.tiles[Ee],Le):null):null}}function Pa(ke,W,G){return 32*((1<<ke)*G+W)+ke}function hn(ke,W){return W?ke.properties[W]:ke.id}function Rr(ke,W){if(ke==null)return!0;if(ke.type==="Feature")return hn(ke,W)!=null;if(ke.type==="FeatureCollection"){const G=new Set;for(const ce of ke.features){const _e=hn(ce,W);if(_e==null||G.has(_e))return!1;G.add(_e)}return!0}return!1}function es(ke,W){const G=new Map;if(ke!=null)if(ke.type==="Feature")G.set(hn(ke,W),ke);else for(const ce of ke.features)G.set(hn(ce,W),ce);return G}class gs extends k{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(W,G){return h._(this,void 0,void 0,(function*(){const ce=W.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const _e=this._geoJSONIndex.getTile(ce.z,ce.x,ce.y);if(!_e)return null;const Le=new class{constructor(We){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.X,this.length=We.length,this._features=We}feature(We){return new class{constructor(Ee){this._feature=Ee,this.extent=h.X,this.type=Ee.type,this.properties=Ee.tags,"id"in Ee&&!isNaN(Ee.id)&&(this.id=parseInt(Ee.id,10))}loadGeometry(){if(this._feature.type===1){const Ee=[];for(const ut of this._feature.geometry)Ee.push([new h.P(ut[0],ut[1])]);return Ee}{const Ee=[];for(const ut of this._feature.geometry){const _t=[];for(const at of ut)_t.push(new h.P(at[0],at[1]));Ee.push(_t)}return Ee}}toGeoJSON(Ee,ut,_t){return z.call(this,Ee,ut,_t)}}(this._features[We])}}(_e.features);let Ne=Ye(Le);return Ne.byteOffset===0&&Ne.byteLength===Ne.buffer.byteLength||(Ne=new Uint8Array(Ne)),{vectorTile:Le,rawData:Ne.buffer}}))}loadData(W){return h._(this,void 0,void 0,(function*(){var G;(G=this._pendingRequest)===null||G===void 0||G.abort();const ce=!!(W&&W.request&&W.request.collectResourceTiming)&&new h.bv(W.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(W,this._pendingRequest),this._geoJSONIndex=W.cluster?new lt((function({superclusterOptions:Ne,clusterProperties:We}){if(!We||!Ne)return Ne;const Ee={},ut={},_t={accumulated:null,zoom:0},at={properties:null},At=Object.keys(We);for(const an of At){const[sn,Vn]=We[an],yn=h.bC(Vn),zn=h.bC(typeof sn=="string"?[sn,["accumulated"],["get",an]]:sn);Ee[an]=yn.value,ut[an]=zn.value}return Ne.map=an=>{at.properties=an;const sn={};for(const Vn of At)sn[Vn]=Ee[Vn].evaluate(_t,at);return sn},Ne.reduce=(an,sn)=>{at.properties=sn;for(const Vn of At)_t.accumulated=an[Vn],an[Vn]=ut[Vn].evaluate(_t,at)},Ne})(W)).load((yield this._pendingData).features):(_e=yield this._pendingData,new di(_e,W.geojsonVtOptions)),this.loaded={};const Le={};if(ce){const Ne=ce.finish();Ne&&(Le.resourceTiming={},Le.resourceTiming[W.source]=JSON.parse(JSON.stringify(Ne)))}return Le}catch(Le){if(delete this._pendingRequest,h.bB(Le))return{abandoned:!0};throw Le}var _e}))}getData(){return h._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(W){const G=this.loaded;return G&&G[W.uid]?super.reloadTile(W):this.loadTile(W)}loadAndProcessGeoJSON(W,G){return h._(this,void 0,void 0,(function*(){let ce=yield this.loadGeoJSON(W,G);if(delete this._pendingRequest,typeof ce!="object")throw new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`);if(F(ce,!0),W.filter){const _e=h.bC(W.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(_e.result==="error")throw new Error(_e.value.map((Ne=>`${Ne.key}: ${Ne.message}`)).join(", "));ce={type:"FeatureCollection",features:ce.features.filter((Ne=>_e.value.evaluate({zoom:0},Ne)))}}return ce}))}loadGeoJSON(W,G){return h._(this,void 0,void 0,(function*(){const{promoteId:ce}=W;if(W.request){const _e=yield h.h(W.request,G);return this._dataUpdateable=Rr(_e.data,ce)?es(_e.data,ce):void 0,_e.data}if(typeof W.data=="string")try{const _e=JSON.parse(W.data);return this._dataUpdateable=Rr(_e,ce)?es(_e,ce):void 0,_e}catch{throw new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`)}if(!W.dataDiff)throw new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${W.source}`);return(function(_e,Le,Ne){var We,Ee,ut,_t;if(Le.removeAll&&_e.clear(),Le.remove)for(const at of Le.remove)_e.delete(at);if(Le.add)for(const at of Le.add){const At=hn(at,Ne);At!=null&&_e.set(At,at)}if(Le.update)for(const at of Le.update){let At=_e.get(at.id);if(At==null)continue;const an=!at.removeAllProperties&&(((We=at.removeProperties)===null||We===void 0?void 0:We.length)>0||((Ee=at.addOrUpdateProperties)===null||Ee===void 0?void 0:Ee.length)>0);if((at.newGeometry||at.removeAllProperties||an)&&(At=Object.assign({},At),_e.set(at.id,At),an&&(At.properties=Object.assign({},At.properties))),at.newGeometry&&(At.geometry=at.newGeometry),at.removeAllProperties)At.properties={};else if(((ut=at.removeProperties)===null||ut===void 0?void 0:ut.length)>0)for(const sn of at.removeProperties)Object.prototype.hasOwnProperty.call(At.properties,sn)&&delete At.properties[sn];if(((_t=at.addOrUpdateProperties)===null||_t===void 0?void 0:_t.length)>0)for(const{key:sn,value:Vn}of at.addOrUpdateProperties)At.properties[sn]=Vn}})(this._dataUpdateable,W.dataDiff,ce),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(W){return h._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(W){return this._geoJSONIndex.getClusterExpansionZoom(W.clusterId)}getClusterChildren(W){return this._geoJSONIndex.getChildren(W.clusterId)}getClusterLeaves(W){return this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset)}}class Fr{constructor(W){this.self=W,this.actor=new h.F(W),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(G,ce)=>{if(this.externalWorkerSourceTypes[G])throw new Error(`Worker source with name "${G}" already registered.`);this.externalWorkerSourceTypes[G]=ce},this.self.addProtocol=h.bi,this.self.removeProtocol=h.bj,this.self.registerRTLTextPlugin=G=>{if(h.bD.isParsed())throw new Error("RTL text plugin already registered.");h.bD.setMethods(G)},this.actor.registerMessageHandler("LDT",((G,ce)=>this._getDEMWorkerSource(G,ce.source).loadTile(ce))),this.actor.registerMessageHandler("RDT",((G,ce)=>h._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(G,ce.source).removeTile(ce)})))),this.actor.registerMessageHandler("GCEZ",((G,ce)=>h._(this,void 0,void 0,(function*(){return this._getWorkerSource(G,ce.type,ce.source).getClusterExpansionZoom(ce)})))),this.actor.registerMessageHandler("GCC",((G,ce)=>h._(this,void 0,void 0,(function*(){return this._getWorkerSource(G,ce.type,ce.source).getClusterChildren(ce)})))),this.actor.registerMessageHandler("GCL",((G,ce)=>h._(this,void 0,void 0,(function*(){return this._getWorkerSource(G,ce.type,ce.source).getClusterLeaves(ce)})))),this.actor.registerMessageHandler("LD",((G,ce)=>this._getWorkerSource(G,ce.type,ce.source).loadData(ce))),this.actor.registerMessageHandler("GD",((G,ce)=>this._getWorkerSource(G,ce.type,ce.source).getData())),this.actor.registerMessageHandler("LT",((G,ce)=>this._getWorkerSource(G,ce.type,ce.source).loadTile(ce))),this.actor.registerMessageHandler("RT",((G,ce)=>this._getWorkerSource(G,ce.type,ce.source).reloadTile(ce))),this.actor.registerMessageHandler("AT",((G,ce)=>this._getWorkerSource(G,ce.type,ce.source).abortTile(ce))),this.actor.registerMessageHandler("RMT",((G,ce)=>this._getWorkerSource(G,ce.type,ce.source).removeTile(ce))),this.actor.registerMessageHandler("RS",((G,ce)=>h._(this,void 0,void 0,(function*(){if(!this.workerSources[G]||!this.workerSources[G][ce.type]||!this.workerSources[G][ce.type][ce.source])return;const _e=this.workerSources[G][ce.type][ce.source];delete this.workerSources[G][ce.type][ce.source],_e.removeSource!==void 0&&_e.removeSource(ce)})))),this.actor.registerMessageHandler("RM",(G=>h._(this,void 0,void 0,(function*(){delete this.layerIndexes[G],delete this.availableImages[G],delete this.workerSources[G],delete this.demWorkerSources[G]})))),this.actor.registerMessageHandler("SR",((G,ce)=>h._(this,void 0,void 0,(function*(){this.referrer=ce})))),this.actor.registerMessageHandler("SRPS",((G,ce)=>this._syncRTLPluginState(G,ce))),this.actor.registerMessageHandler("IS",((G,ce)=>h._(this,void 0,void 0,(function*(){this.self.importScripts(ce)})))),this.actor.registerMessageHandler("SI",((G,ce)=>this._setImages(G,ce))),this.actor.registerMessageHandler("UL",((G,ce)=>h._(this,void 0,void 0,(function*(){this._getLayerIndex(G).update(ce.layers,ce.removedIds)})))),this.actor.registerMessageHandler("SL",((G,ce)=>h._(this,void 0,void 0,(function*(){this._getLayerIndex(G).replace(ce)}))))}_setImages(W,G){return h._(this,void 0,void 0,(function*(){this.availableImages[W]=G;for(const ce in this.workerSources[W]){const _e=this.workerSources[W][ce];for(const Le in _e)_e[Le].availableImages=G}}))}_syncRTLPluginState(W,G){return h._(this,void 0,void 0,(function*(){if(h.bD.isParsed())return h.bD.getState();if(G.pluginStatus!=="loading")return h.bD.setState(G),G;const ce=G.pluginURL;if(this.self.importScripts(ce),h.bD.isParsed()){const _e={pluginStatus:"loaded",pluginURL:ce};return h.bD.setState(_e),_e}throw h.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ce}`)}))}_getAvailableImages(W){let G=this.availableImages[W];return G||(G=[]),G}_getLayerIndex(W){let G=this.layerIndexes[W];return G||(G=this.layerIndexes[W]=new l),G}_getWorkerSource(W,G,ce){if(this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][G]||(this.workerSources[W][G]={}),!this.workerSources[W][G][ce]){const _e={sendAsync:(Le,Ne)=>(Le.targetMapId=W,this.actor.sendAsync(Le,Ne))};switch(G){case"vector":this.workerSources[W][G][ce]=new k(_e,this._getLayerIndex(W),this._getAvailableImages(W));break;case"geojson":this.workerSources[W][G][ce]=new gs(_e,this._getLayerIndex(W),this._getAvailableImages(W));break;default:this.workerSources[W][G][ce]=new this.externalWorkerSourceTypes[G](_e,this._getLayerIndex(W),this._getAvailableImages(W))}}return this.workerSources[W][G][ce]}_getDEMWorkerSource(W,G){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][G]||(this.demWorkerSources[W][G]=new I),this.demWorkerSources[W][G]}}return h.i(self)&&(self.worker=new Fr(self)),Fr})),c("index",["exports","./shared"],(function(h,l){var b="4.7.1";let S,w;const k={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise(((t,u)=>{const m=requestAnimationFrame(t);y.signal.addEventListener("abort",(()=>{cancelAnimationFrame(m),u(l.c())}))})),getImageData(y,t=0){return this.getImageCanvasContext(y).getImageData(-t,-t,y.width+2*t,y.height+2*t)},getImageCanvasContext(y){const t=window.document.createElement("canvas"),u=t.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return t.width=y.width,t.height=y.height,u.drawImage(y,0,0,y.width,y.height),u},resolveURL:y=>(S||(S=document.createElement("a")),S.href=y,S.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(w==null&&(w=matchMedia("(prefers-reduced-motion: reduce)")),w.matches)}};class I{static testProp(t){if(!I.docStyle)return t[0];for(let u=0;u<t.length;u++)if(t[u]in I.docStyle)return t[u];return t[0]}static create(t,u,m){const p=window.document.createElement(t);return u!==void 0&&(p.className=u),m&&m.appendChild(p),p}static createNS(t,u){return window.document.createElementNS(t,u)}static disableDrag(){I.docStyle&&I.selectProp&&(I.userSelect=I.docStyle[I.selectProp],I.docStyle[I.selectProp]="none")}static enableDrag(){I.docStyle&&I.selectProp&&(I.docStyle[I.selectProp]=I.userSelect)}static setTransform(t,u){t.style[I.transformProp]=u}static addEventListener(t,u,m,p={}){t.addEventListener(u,m,"passive"in p?p:p.capture)}static removeEventListener(t,u,m,p={}){t.removeEventListener(u,m,"passive"in p?p:p.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",I.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",I.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",I.suppressClickInternal,!0)}),0)}static getScale(t){const u=t.getBoundingClientRect();return{x:u.width/t.offsetWidth||1,y:u.height/t.offsetHeight||1,boundingClientRect:u}}static getPoint(t,u,m){const p=u.boundingClientRect;return new l.P((m.clientX-p.left)/u.x-t.clientLeft,(m.clientY-p.top)/u.y-t.clientTop)}static mousePos(t,u){const m=I.getScale(t);return I.getPoint(t,m,u)}static touchPos(t,u){const m=[],p=I.getScale(t);for(let v=0;v<u.length;v++)m.push(I.getPoint(t,p,u[v]));return m}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}I.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,I.selectProp=I.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),I.transformProp=I.testProp(["transform","WebkitTransform"]);const E={supported:!1,testSupport:function(y){!z&&F&&(B?R(y):L=y)}};let L,F,z=!1,B=!1;function R(y){const t=y.createTexture();y.bindTexture(y.TEXTURE_2D,t);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,F),y.isContextLost())return;E.supported=!0}catch{}y.deleteTexture(t),z=!0}var Z;typeof document<"u"&&(F=document.createElement("img"),F.onload=()=>{L&&R(L),L=null,B=!0},F.onerror=()=>{z=!0,L=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(y){let t,u,m,p;y.resetRequestQueue=()=>{t=[],u=0,m=0,p={}},y.addThrottleControl=M=>{const $=m++;return p[$]=M,$},y.removeThrottleControl=M=>{delete p[M],P()},y.getImage=(M,$,j=!0)=>new Promise(((U,ee)=>{E.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),l.e(M,{type:"image"}),t.push({abortController:$,requestParameters:M,supportImageRefresh:j,state:"queued",onError:de=>{ee(de)},onSuccess:de=>{U(de)}}),P()}));const v=M=>l._(this,void 0,void 0,(function*(){M.state="running";const{requestParameters:$,supportImageRefresh:j,onError:U,onSuccess:ee,abortController:de}=M,me=j===!1&&!l.i(self)&&!l.g($.url)&&(!$.headers||Object.keys($.headers).reduce(((Ae,De)=>Ae&&De==="accept"),!0));u++;const be=me?A($,de):l.m($,de);try{const Ae=yield be;delete M.abortController,M.state="completed",Ae.data instanceof HTMLImageElement||l.b(Ae.data)?ee(Ae):Ae.data&&ee({data:yield(Pe=Ae.data,typeof createImageBitmap=="function"?l.d(Pe):l.f(Pe)),cacheControl:Ae.cacheControl,expires:Ae.expires})}catch(Ae){delete M.abortController,U(Ae)}finally{u--,P()}var Pe})),P=()=>{const M=(()=>{for(const $ of Object.keys(p))if(p[$]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let $=u;$<M&&t.length>0;$++){const j=t.shift();j.abortController.signal.aborted?$--:v(j)}},A=(M,$)=>new Promise(((j,U)=>{const ee=new Image,de=M.url,me=M.credentials;me&&me==="include"?ee.crossOrigin="use-credentials":(me&&me==="same-origin"||!l.s(de))&&(ee.crossOrigin="anonymous"),$.signal.addEventListener("abort",(()=>{ee.src="",U(l.c())})),ee.fetchPriority="high",ee.onload=()=>{ee.onerror=ee.onload=null,j({data:ee})},ee.onerror=()=>{ee.onerror=ee.onload=null,$.signal.aborted||U(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ee.src=de}))})(Z||(Z={})),Z.resetRequestQueue();class Y{constructor(t){this._transformRequestFn=t}transformRequest(t,u){return this._transformRequestFn&&this._transformRequestFn(t,u)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function J(y){var t=new l.A(3);return t[0]=y[0],t[1]=y[1],t[2]=y[2],t}var ae,he=function(y,t,u){return y[0]=t[0]-u[0],y[1]=t[1]-u[1],y[2]=t[2]-u[2],y};ae=new l.A(3),l.A!=Float32Array&&(ae[0]=0,ae[1]=0,ae[2]=0);var te=function(y){var t=y[0],u=y[1];return t*t+u*u};function re(y){const t=[];if(typeof y=="string")t.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:m,url:p}of y){const v=`${m}${p}`;u.indexOf(v)===-1&&(u.push(v),t.push({id:m,url:p}))}}return t}function ie(y,t,u){const m=y.split("?");return m[0]+=`${t}${u}`,m.join("?")}(function(){var y=new l.A(2);l.A!=Float32Array&&(y[0]=0,y[1]=0)})();class ue{constructor(t,u,m,p){this.context=t,this.format=m,this.texture=t.gl.createTexture(),this.update(u,p)}update(t,u,m){const{width:p,height:v}=t,P=!(this.size&&this.size[0]===p&&this.size[1]===v||m),{context:A}=this,{gl:M}=A;if(this.useMipmap=!!(u&&u.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!u||u.premultiply!==!1)),P)this.size=[p,v],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||l.b(t)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,t):M.texImage2D(M.TEXTURE_2D,0,this.format,p,v,0,this.format,M.UNSIGNED_BYTE,t.data);else{const{x:$,y:j}=m||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||l.b(t)?M.texSubImage2D(M.TEXTURE_2D,0,$,j,M.RGBA,M.UNSIGNED_BYTE,t):M.texSubImage2D(M.TEXTURE_2D,0,$,j,p,v,M.RGBA,M.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(t,u,m){const{context:p}=this,{gl:v}=p;v.bindTexture(v.TEXTURE_2D,this.texture),m!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=v.LINEAR),t!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,t),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,m||t),this.filter=t),u!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,u),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function Q(y){const{userImage:t}=y;return!!(t&&t.render&&t.render())&&(y.data.replace(new Uint8Array(t.data.buffer)),!0)}class pe extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:u,promiseResolve:m}of this.requestors)m(this._getImagesForIds(u));this.requestors=[]}}getImage(t){const u=this.images[t];if(u&&!u.data&&u.spriteData){const m=u.spriteData;u.data=new l.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),u.spriteData=null}return u}addImage(t,u){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,u)&&(this.images[t]=u)}_validate(t,u){let m=!0;const p=u.data||u.spriteData;return this._validateStretch(u.stretchX,p&&p.width)||(this.fire(new l.j(new Error(`Image "${t}" has invalid "stretchX" value`))),m=!1),this._validateStretch(u.stretchY,p&&p.height)||(this.fire(new l.j(new Error(`Image "${t}" has invalid "stretchY" value`))),m=!1),this._validateContent(u.content,u)||(this.fire(new l.j(new Error(`Image "${t}" has invalid "content" value`))),m=!1),m}_validateStretch(t,u){if(!t)return!0;let m=0;for(const p of t){if(p[0]<m||p[1]<p[0]||u<p[1])return!1;m=p[1]}return!0}_validateContent(t,u){if(!t)return!0;if(t.length!==4)return!1;const m=u.spriteData,p=m&&m.width||u.data.width,v=m&&m.height||u.data.height;return!(t[0]<0||p<t[0]||t[1]<0||v<t[1]||t[2]<0||p<t[2]||t[3]<0||v<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,u,m=!0){const p=this.getImage(t);if(m&&(p.data.width!==u.data.width||p.data.height!==u.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=p.version+1,this.images[t]=u,this.updatedImages[t]=!0}removeImage(t){const u=this.images[t];delete this.images[t],delete this.patterns[t],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise(((u,m)=>{let p=!0;if(!this.isLoaded())for(const v of t)this.images[v]||(p=!1);this.isLoaded()||p?u(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:u})}))}_getImagesForIds(t){const u={};for(const m of t){let p=this.getImage(m);p||(this.fire(new l.k("styleimagemissing",{id:m})),p=this.getImage(m)),p?u[m]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:l.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:t,height:u}=this.atlasImage;return{width:t,height:u}}getPattern(t){const u=this.patterns[t],m=this.getImage(t);if(!m)return null;if(u&&u.position.version===m.version)return u.position;if(u)u.position.version=m.version;else{const p={w:m.data.width+2,h:m.data.height+2,x:0,y:0},v=new l.I(p,m);this.patterns[t]={bin:p,position:v}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const u=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ue(t,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const v in this.patterns)t.push(this.patterns[v].bin);const{w:u,h:m}=l.p(t),p=this.atlasImage;p.resize({width:u||1,height:m||1});for(const v in this.patterns){const{bin:P}=this.patterns[v],A=P.x+1,M=P.y+1,$=this.getImage(v).data,j=$.width,U=$.height;l.R.copy($,p,{x:0,y:0},{x:A,y:M},{width:j,height:U}),l.R.copy($,p,{x:0,y:U-1},{x:A,y:M-1},{width:j,height:1}),l.R.copy($,p,{x:0,y:0},{x:A,y:M+U},{width:j,height:1}),l.R.copy($,p,{x:j-1,y:0},{x:A-1,y:M},{width:1,height:U}),l.R.copy($,p,{x:0,y:0},{x:A+j,y:M},{width:1,height:U})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const u of t){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const m=this.getImage(u);m||l.w(`Image with ID: "${u}" was not found`),Q(m)&&this.updateImage(u,m)}}}const Ce=1e20;function $e(y,t,u,m,p,v,P,A,M){for(let $=t;$<t+m;$++)Xe(y,u*v+$,v,p,P,A,M);for(let $=u;$<u+p;$++)Xe(y,$*v+t,1,m,P,A,M)}function Xe(y,t,u,m,p,v,P){v[0]=0,P[0]=-Ce,P[1]=Ce,p[0]=y[t];for(let A=1,M=0,$=0;A<m;A++){p[A]=y[t+A*u];const j=A*A;do{const U=v[M];$=(p[A]-p[U]+j-U*U)/(A-U)/2}while($<=P[M]&&--M>-1);M++,v[M]=A,P[M]=$,P[M+1]=Ce}for(let A=0,M=0;A<m;A++){for(;P[M+1]<A;)M++;const $=v[M],j=A-$;y[t+A*u]=p[$]+j*j}}class Ye{constructor(t,u){this.requestManager=t,this.localIdeographFontFamily=u,this.entries={}}setURL(t){this.url=t}getGlyphs(t){return l._(this,void 0,void 0,(function*(){const u=[];for(const v in t)for(const P of t[v])u.push(this._getAndCacheGlyphsPromise(v,P));const m=yield Promise.all(u),p={};for(const{stack:v,id:P,glyph:A}of m)p[v]||(p[v]={}),p[v][P]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};return p}))}_getAndCacheGlyphsPromise(t,u){return l._(this,void 0,void 0,(function*(){let m=this.entries[t];m||(m=this.entries[t]={glyphs:{},requests:{},ranges:{}});let p=m.glyphs[u];if(p!==void 0)return{stack:t,id:u,glyph:p};if(p=this._tinySDF(m,t,u),p)return m.glyphs[u]=p,{stack:t,id:u,glyph:p};const v=Math.floor(u/256);if(256*v>65535)throw new Error("glyphs > 65535 not supported");if(m.ranges[v])return{stack:t,id:u,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!m.requests[v]){const A=Ye.loadGlyphRange(t,v,this.url,this.requestManager);m.requests[v]=A}const P=yield m.requests[v];for(const A in P)this._doesCharSupportLocalGlyph(+A)||(m.glyphs[+A]=P[+A]);return m.ranges[v]=!0,{stack:t,id:u,glyph:P[u]||null}}))}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(t))}_tinySDF(t,u,m){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(m))return;let v=t.tinySDF;if(!v){let A="400";/bold/i.test(u)?A="900":/medium/i.test(u)?A="500":/light/i.test(u)&&(A="200"),v=t.tinySDF=new Ye.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:A})}const P=v.draw(String.fromCharCode(m));return{id:m,bitmap:new l.o({width:P.width||60,height:P.height||60},P.data),metrics:{width:P.glyphWidth/2||24,height:P.glyphHeight/2||24,left:P.glyphLeft/2+.5||0,top:P.glyphTop/2-27.5||-8,advance:P.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ye.loadGlyphRange=function(y,t,u,m){return l._(this,void 0,void 0,(function*(){const p=256*t,v=p+255,P=m.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${p}-${v}`),"Glyphs"),A=yield l.l(P,new AbortController);if(!A||!A.data)throw new Error(`Could not load glyph range. range: ${t}, ${p}-${v}`);const M={};for(const $ of l.n(A.data))M[$.id]=$;return M}))},Ye.TinySDF=class{constructor({fontSize:y=24,buffer:t=3,radius:u=8,cutoff:m=.25,fontFamily:p="sans-serif",fontWeight:v="normal",fontStyle:P="normal"}={}){this.buffer=t,this.cutoff=m,this.radius=u;const A=this.size=y+4*t,M=this._createCanvas(A),$=this.ctx=M.getContext("2d",{willReadFrequently:!0});$.font=`${P} ${v} ${y}px ${p}`,$.textBaseline="alphabetic",$.textAlign="left",$.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(y){const t=document.createElement("canvas");return t.width=t.height=y,t}draw(y){const{width:t,actualBoundingBoxAscent:u,actualBoundingBoxDescent:m,actualBoundingBoxLeft:p,actualBoundingBoxRight:v}=this.ctx.measureText(y),P=Math.ceil(u),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-p))),M=Math.min(this.size-this.buffer,P+Math.ceil(m)),$=A+2*this.buffer,j=M+2*this.buffer,U=Math.max($*j,0),ee=new Uint8ClampedArray(U),de={data:ee,width:$,height:j,glyphWidth:A,glyphHeight:M,glyphTop:P,glyphLeft:0,glyphAdvance:t};if(A===0||M===0)return de;const{ctx:me,buffer:be,gridInner:Pe,gridOuter:Ae}=this;me.clearRect(be,be,A,M),me.fillText(y,be,be+P);const De=me.getImageData(be,be,A,M);Ae.fill(Ce,0,U),Pe.fill(0,0,U);for(let ve=0;ve<M;ve++)for(let Oe=0;Oe<A;Oe++){const Ue=De.data[4*(ve*A+Oe)+3]/255;if(Ue===0)continue;const Je=(ve+be)*$+Oe+be;if(Ue===1)Ae[Je]=0,Pe[Je]=Ce;else{const gt=.5-Ue;Ae[Je]=gt>0?gt*gt:0,Pe[Je]=gt<0?gt*gt:0}}$e(Ae,0,0,$,j,$,this.f,this.v,this.z),$e(Pe,be,be,A,M,$,this.f,this.v,this.z);for(let ve=0;ve<U;ve++){const Oe=Math.sqrt(Ae[ve])-Math.sqrt(Pe[ve]);ee[ve]=Math.round(255-255*(Oe/this.radius+this.cutoff))}return de}};class qe{constructor(){this.specification=l.v.light.position}possiblyEvaluate(t,u){return l.x(t.expression.evaluate(u))}interpolate(t,u,m){return{x:l.y.number(t.x,u.x,m),y:l.y.number(t.y,u.y,m),z:l.y.number(t.z,u.z,m)}}}let Te;class Me extends l.E{constructor(t){super(),Te=Te||new l.q({anchor:new l.D(l.v.light.anchor),position:new qe,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(Te),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,u={}){if(!this._validate(l.r,t,u))for(const m in t){const p=t[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),p):this._transitionable.setValue(m,p)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,u,m){return(!m||m.validate!==!1)&&l.t(this,t.call(l.u,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}const Ve=new l.q({"sky-color":new l.D(l.v.sky["sky-color"]),"horizon-color":new l.D(l.v.sky["horizon-color"]),"fog-color":new l.D(l.v.sky["fog-color"]),"fog-ground-blend":new l.D(l.v.sky["fog-ground-blend"]),"horizon-fog-blend":new l.D(l.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new l.D(l.v.sky["sky-horizon-blend"]),"atmosphere-blend":new l.D(l.v.sky["atmosphere-blend"])});class Fe extends l.E{constructor(t){super(),this._transitionable=new l.T(Ve),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.z(0))}setSky(t,u={}){if(!this._validate(l.B,t,u)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const m in t){const p=t[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),p):this._transitionable.setValue(m,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,u,m={}){return(m==null?void 0:m.validate)!==!1&&l.t(this,t.call(l.u,l.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class Be{constructor(t,u){this.width=t,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,u){const m=t.join(",")+String(u);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(t,u)),this.dashEntry[m]}getDashRanges(t,u,m){const p=[];let v=t.length%2==1?-t[t.length-1]*m:0,P=t[0]*m,A=!0;p.push({left:v,right:P,isDash:A,zeroLength:t[0]===0});let M=t[0];for(let $=1;$<t.length;$++){A=!A;const j=t[$];v=M*m,M+=j,P=M*m,p.push({left:v,right:P,isDash:A,zeroLength:j===0})}return p}addRoundDash(t,u,m){const p=u/2;for(let v=-m;v<=m;v++){const P=this.width*(this.nextRow+m+v);let A=0,M=t[A];for(let $=0;$<this.width;$++){$/M.right>1&&(M=t[++A]);const j=Math.abs($-M.left),U=Math.abs($-M.right),ee=Math.min(j,U);let de;const me=v/m*(p+1);if(M.isDash){const be=p-Math.abs(me);de=Math.sqrt(ee*ee+be*be)}else de=p-Math.sqrt(ee*ee+me*me);this.data[P+$]=Math.max(0,Math.min(255,de+128))}}}addRegularDash(t){for(let A=t.length-1;A>=0;--A){const M=t[A],$=t[A+1];M.zeroLength?t.splice(A,1):$&&$.isDash===M.isDash&&($.left=M.left,t.splice(A,1))}const u=t[0],m=t[t.length-1];u.isDash===m.isDash&&(u.left=m.left-this.width,m.right=u.right+this.width);const p=this.width*this.nextRow;let v=0,P=t[v];for(let A=0;A<this.width;A++){A/P.right>1&&(P=t[++v]);const M=Math.abs(A-P.left),$=Math.abs(A-P.right),j=Math.min(M,$);this.data[p+A]=Math.max(0,Math.min(255,(P.isDash?j:-j)+128))}}addDash(t,u){const m=u?7:0,p=2*m+1;if(this.nextRow+p>this.height)return l.w("LineAtlas out of space"),null;let v=0;for(let A=0;A<t.length;A++)v+=t[A];if(v!==0){const A=this.width/v,M=this.getDashRanges(t,this.width,A);u?this.addRoundDash(M,A,m):this.addRegularDash(M)}const P={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:v};return this.nextRow+=p,this.dirty=!0,P}bind(t){const u=t.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const lt="maplibre_preloaded_worker_pool";class vt{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<vt.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach((u=>{u.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[lt]}numActive(){return Object.keys(this.active).length}}const kt=Math.floor(k.hardwareConcurrency/2);let ge,je;function rt(){return ge||(ge=new vt),ge}vt.workerCount=l.C(globalThis)?Math.max(Math.min(kt,3),1):1;class ft{constructor(t,u){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=u;const m=this.workerPool.acquire(u);for(let p=0;p<m.length;p++){const v=new l.F(m[p],u);v.name=`Worker ${p}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,u){const m=[];for(const p of this.actors)m.push(p.sendAsync({type:t,data:u}));return Promise.all(m)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach((u=>{u.remove()})),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,u){for(const m of this.actors)m.registerMessageHandler(t,u)}}function Rt(){return je||(je=new ft(rt(),l.G),je.registerMessageHandler("GR",((y,t,u)=>l.m(t,u)))),je}function fe(y,t){const u=l.H();return l.J(u,u,[1,1,0]),l.K(u,u,[.5*y.width,.5*y.height,1]),l.L(u,u,y.calculatePosMatrix(t.toUnwrapped()))}function se(y,t,u,m,p,v){const P=(function(U,ee,de){if(U)for(const me of U){const be=ee[me];if(be&&be.source===de&&be.type==="fill-extrusion")return!0}else for(const me in ee){const be=ee[me];if(be.source===de&&be.type==="fill-extrusion")return!0}return!1})(p&&p.layers,t,y.id),A=v.maxPitchScaleFactor(),M=y.tilesIn(m,A,P);M.sort(Se);const $=[];for(const U of M)$.push({wrappedTileID:U.tileID.wrapped().key,queryResults:U.tile.queryRenderedFeatures(t,u,y._state,U.queryGeometry,U.cameraQueryGeometry,U.scale,p,v,A,fe(y.transform,U.tileID))});const j=(function(U){const ee={},de={};for(const me of U){const be=me.queryResults,Pe=me.wrappedTileID,Ae=de[Pe]=de[Pe]||{};for(const De in be){const ve=be[De],Oe=Ae[De]=Ae[De]||{},Ue=ee[De]=ee[De]||[];for(const Je of ve)Oe[Je.featureIndex]||(Oe[Je.featureIndex]=!0,Ue.push(Je))}}return ee})($);for(const U in j)j[U].forEach((ee=>{const de=ee.feature,me=y.getFeatureState(de.layer["source-layer"],de.id);de.source=de.layer.source,de.layer["source-layer"]&&(de.sourceLayer=de.layer["source-layer"]),de.state=me}));return j}function Se(y,t){const u=y.tileID,m=t.tileID;return u.overscaledZ-m.overscaledZ||u.canonical.y-m.canonical.y||u.wrap-m.wrap||u.canonical.x-m.canonical.x}function xe(y,t,u){return l._(this,void 0,void 0,(function*(){let m=y;if(y.url?m=(yield l.h(t.transformRequest(y.url,"Source"),u)).data:yield k.frameAsync(u),!m)return null;const p=l.M(l.e(m,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in m&&m.vector_layers&&(p.vectorLayerIds=m.vector_layers.map((v=>v.id))),p}))}class le{constructor(t,u){t&&(u?this.setSouthWest(t).setNorthEast(u):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof l.N?new l.N(t.lng,t.lat):l.N.convert(t),this}setSouthWest(t){return this._sw=t instanceof l.N?new l.N(t.lng,t.lat):l.N.convert(t),this}extend(t){const u=this._sw,m=this._ne;let p,v;if(t instanceof l.N)p=t,v=t;else{if(!(t instanceof le))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(le.convert(t)):this.extend(l.N.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(l.N.convert(t)):this;if(p=t._sw,v=t._ne,!p||!v)return this}return u||m?(u.lng=Math.min(p.lng,u.lng),u.lat=Math.min(p.lat,u.lat),m.lng=Math.max(v.lng,m.lng),m.lat=Math.max(v.lat,m.lat)):(this._sw=new l.N(p.lng,p.lat),this._ne=new l.N(v.lng,v.lat)),this}getCenter(){return new l.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.N(this.getWest(),this.getNorth())}getSouthEast(){return new l.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:u,lat:m}=l.N.convert(t);let p=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&p}static convert(t){return t instanceof le?t:t&&new le(t)}static fromLngLat(t,u=0){const m=360*u/40075017,p=m/Math.cos(Math.PI/180*t.lat);return new le(new l.N(t.lng-p,t.lat-m),new l.N(t.lng+p,t.lat+m))}adjustAntiMeridian(){const t=new l.N(this._sw.lng,this._sw.lat),u=new l.N(this._ne.lng,this._ne.lat);return new le(t,t.lng>u.lng?new l.N(u.lng+360,u.lat):u)}}class Ke{constructor(t,u,m){this.bounds=le.convert(this.validateBounds(t)),this.minzoom=u||0,this.maxzoom=m||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const u=Math.pow(2,t.z),m=Math.floor(l.O(this.bounds.getWest())*u),p=Math.floor(l.Q(this.bounds.getNorth())*u),v=Math.ceil(l.O(this.bounds.getEast())*u),P=Math.ceil(l.Q(this.bounds.getSouth())*u);return t.x>=m&&t.x<v&&t.y>=p&&t.y<P}}class ht extends l.E{constructor(t,u,m,p){if(super(),this.id=t,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.M(u,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return l._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield xe(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t&&(l.e(this,t),t.bounds&&(this.tileBounds=new Ke(t.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new l.j(t))}}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(t){return l._(this,void 0,void 0,(function*(){const u=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(u,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};m.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise(((v,P)=>{t.reloadPromise={resolve:v,reject:P}}))}else t.actor=this.dispatcher.getActor(),p="LT";t.abortController=new AbortController;try{const v=yield t.actor.sendAsync({type:p,data:m},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,v)}catch(v){if(delete t.abortController,t.aborted)return;if(v&&v.status!==404)throw v;this._afterTileLoadWorkerResponse(t,null)}}))}_afterTileLoadWorkerResponse(t,u){if(u&&u.resourceTiming&&(t.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&t.setExpiryData(u),t.loadVectorData(u,this.map.painter),t.reloadPromise){const m=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(m.resolve).catch(m.reject)}}abortTile(t){return l._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}unloadTile(t){return l._(this,void 0,void 0,(function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class et extends l.E{constructor(t,u,m,p){super(),this.id=t,this.dispatcher=m,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},u),l.e(this,l.M(u,["url","scheme","tileSize"]))}load(){return l._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield xe(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,t&&(l.e(this,t),t.bounds&&(this.tileBounds=new Ke(t.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new l.j(t))}}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}serialize(){return l.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return l._(this,void 0,void 0,(function*(){const u=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const m=yield Z.getImage(this.map._requestManager.transformRequest(u,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(m&&m.data){this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&t.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const p=this.map.painter.context,v=p.gl,P=m.data;t.texture=this.map.painter.getTileTexture(P.width),t.texture?t.texture.update(P,{useMipmap:!0}):(t.texture=new ue(p,P,v.RGBA,{useMipmap:!0}),t.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(m){if(delete t.abortController,t.aborted)t.state="unloaded";else if(m)throw t.state="errored",m}}))}abortTile(t){return l._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)}))}unloadTile(t){return l._(this,void 0,void 0,(function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)}))}hasTransition(){return!1}}class tt extends et{constructor(t,u,m,p){super(t,u,m,p),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(t){return l._(this,void 0,void 0,(function*(){const u=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(u,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const p=yield Z.getImage(m,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(p&&p.data){const v=p.data;this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&t.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const P=l.b(v)&&l.U()?v:yield this.readImageNow(v),A={type:this.type,uid:t.uid,source:this.id,rawImageData:P,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();const M=yield t.actor.sendAsync({type:"LDT",data:A});t.dem=M,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(p){if(delete t.abortController,t.aborted)t.state="unloaded";else if(p)throw t.state="errored",p}}))}readImageNow(t){return l._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&l.V()){const u=t.width+2,m=t.height+2;try{return new l.R({width:u,height:m},yield l.W(t,-1,-1,u,m))}catch{}}return k.getImageData(t,1)}))}_getNeighboringTiles(t){const u=t.canonical,m=Math.pow(2,u.z),p=(u.x-1+m)%m,v=u.x===0?t.wrap-1:t.wrap,P=(u.x+1+m)%m,A=u.x+1===m?t.wrap+1:t.wrap,M={};return M[new l.S(t.overscaledZ,v,u.z,p,u.y).key]={backfilled:!1},M[new l.S(t.overscaledZ,A,u.z,P,u.y).key]={backfilled:!1},u.y>0&&(M[new l.S(t.overscaledZ,v,u.z,p,u.y-1).key]={backfilled:!1},M[new l.S(t.overscaledZ,t.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},M[new l.S(t.overscaledZ,A,u.z,P,u.y-1).key]={backfilled:!1}),u.y+1<m&&(M[new l.S(t.overscaledZ,v,u.z,p,u.y+1).key]={backfilled:!1},M[new l.S(t.overscaledZ,t.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},M[new l.S(t.overscaledZ,A,u.z,P,u.y+1).key]={backfilled:!1}),M}unloadTile(t){return l._(this,void 0,void 0,(function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))}))}}class dt extends l.E{constructor(t,u,m,p){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(p),this._data=u.data,this._options=l.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const v=l.X/this.tileSize;u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&l.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=l.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*v,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*v,extent:l.X,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.X,radius:(u.clusterRadius||50)*v,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return l._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData(),this}updateData(t){return this._updateWorkerData(t),this}getData(){return l._(this,void 0,void 0,(function*(){const t=l.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})}))}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=t.clusterRadius),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=t.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,u,m){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:u,offset:m}})}_updateWorkerData(t){return l._(this,void 0,void 0,(function*(){const u=l.e({type:this.type},this.workerOptions);t?u.dataDiff=t:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(k.resolveURL(this._data),"Source"),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"}));try{const m=yield this.actor.sendAsync({type:"LD",data:u});if(this._pendingLoads--,this._removed||m.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let p=null;m.resourceTiming&&m.resourceTiming[this.id]&&(p=m.resourceTiming[this.id].slice(0));const v={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&l.e(v,{resourceTiming:p}),this.fire(new l.k("data",Object.assign(Object.assign({},v),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},v),{sourceDataType:"content"})))}catch(m){if(this._pendingLoads--,this._removed)return void this.fire(new l.k("dataabort",{dataType:"source"}));this.fire(new l.j(m))}}))}loaded(){return this._pendingLoads===0}loadTile(t){return l._(this,void 0,void 0,(function*(){const u=t.actor?"RT":"LT";t.actor=this.actor;const m={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.abortController=new AbortController;const p=yield this.actor.sendAsync({type:u,data:m},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(p,this.map.painter,u==="RT")}))}abortTile(t){return l._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0}))}unloadTile(t){return l._(this,void 0,void 0,(function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var yt=l.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class It extends l.E{constructor(t,u,m,p){super(),this.id=t,this.dispatcher=m,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=u}load(t){return l._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield Z.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,t&&(this.coordinates=t),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new l.j(u))}}))}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const u=t.map(l.Z.fromLngLat);this.tileID=(function(p){let v=1/0,P=1/0,A=-1/0,M=-1/0;for(const ee of p)v=Math.min(v,ee.x),P=Math.min(P,ee.y),A=Math.max(A,ee.x),M=Math.max(M,ee.y);const $=Math.max(A-v,M-P),j=Math.max(0,Math.floor(-Math.log($)/Math.LN2)),U=Math.pow(2,j);return new l.a1(j,Math.floor((v+A)/2*U),Math.floor((P+M)/2*U))})(u),this.minzoom=this.maxzoom=this.tileID.z;const m=u.map((p=>this.tileID.getTilePoint(p)._round()));return this._boundsArray=new l.$,this._boundsArray.emplaceBack(m[0].x,m[0].y,0,0),this._boundsArray.emplaceBack(m[1].x,m[1].y,l.X,0),this._boundsArray.emplaceBack(m[3].x,m[3].y,0,l.X),this._boundsArray.emplaceBack(m[2].x,m[2].y,l.X,l.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,u=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,yt.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ue(t,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let m=!1;for(const p in this.tiles){const v=this.tiles[p];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,m=!0)}m&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return l._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Ut extends It{constructor(t,u,m,p){super(t,u,m,p),this.roundZoom=!0,this.type="video",this.options=u}load(){return l._(this,void 0,void 0,(function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const u of t.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield l.a3(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new l.j(u))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const u=this.video.seekable;t<u.start(0)||t>u.end(0)?this.fire(new l.j(new l.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,u=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,yt.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new ue(t,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let m=!1;for(const p in this.tiles){const v=this.tiles[p];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,m=!0)}m&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class nn extends It{constructor(t,u,m,p){super(t,u,m,p),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some((v=>!Array.isArray(v)||v.length!==2||v.some((P=>typeof P!="number"))))||this.fire(new l.j(new l.a2(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.a2(`sources.${t}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.j(new l.a2(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.a2(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.a2(`sources.${t}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return l._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,m=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,yt.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ue(u,this.canvas,m.RGBA,{premultiply:!0});let p=!1;for(const v in this.tiles){const P=this.tiles[v];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,p=!0)}p&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const bn={},Pn=y=>{switch(y){case"geojson":return dt;case"image":return It;case"raster":return et;case"raster-dem":return tt;case"vector":return ht;case"video":return Ut;case"canvas":return nn}return bn[y]},mt="RTLPluginLoaded";class Hn extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Rt()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch((u=>{throw this.status="error",u}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return l._(this,arguments,void 0,(function*(u,m=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=k.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!m)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return l._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.k(mt))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Fn=null;function Ei(){return Fn||(Fn=new Hn),Fn}class Ni{constructor(t,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=t,this.uid=l.a4(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const u=t+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,u,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=(function(p,v){const P={};if(!v)return P;for(const A of p){const M=A.layerIds.map(($=>v.getLayer($))).filter(Boolean);if(M.length!==0){A.layers=M,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(($=>M.filter((j=>j.id===$))[0])));for(const $ of M)P[$.id]=A}}return P})(t.buckets,u.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const v=this.buckets[p];if(v instanceof l.a6){if(this.hasSymbolBuckets=!0,!m)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const v=this.buckets[p];if(v instanceof l.a6&&v.hasRTLText){this.hasRTLText=!0,Ei().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const v=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(p).queryRadius(v))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new l.a5}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const m in this.buckets){const p=this.buckets[m];p.uploadPending()&&p.upload(t)}const u=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ue(t,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ue(t,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,u,m,p,v,P,A,M,$,j){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:v,scale:P,tileSize:this.tileSize,pixelPosMatrix:j,transform:M,params:A,queryPadding:this.queryPadding*$},t,u,m):{}}querySourceFeatures(t,u){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const p=m.loadVTLayers(),v=u&&u.sourceLayer?u.sourceLayer:"",P=p._geojsonTileLayer||p[v];if(!P)return;const A=l.a7(u&&u.filter),{z:M,x:$,y:j}=this.tileID.canonical,U={z:M,x:$,y:j};for(let ee=0;ee<P.length;ee++){const de=P.feature(ee);if(A.needGeometry){const Pe=l.a8(de,!0);if(!A.filter(new l.z(this.tileID.overscaledZ),Pe,this.tileID.canonical))continue}else if(!A.filter(new l.z(this.tileID.overscaledZ),de))continue;const me=m.getId(de,v),be=new l.a9(de,M,$,j,me);be.tile=U,t.push(be)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const u=this.expirationTime;if(t.cacheControl){const m=l.aa(t.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const m=Date.now();let p=!1;if(this.expirationTime>m)p=!1;else if(u)if(this.expirationTime<u)p=!0;else{const v=this.expirationTime-u;v?this.expirationTime=m+Math.max(v,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!u.style.hasLayer(p))continue;const v=this.buckets[p],P=v.layers[0].sourceLayer||"_geojsonTileLayer",A=m[P],M=t[P];if(!A||!M||Object.keys(M).length===0)continue;v.update(M,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const $=u&&u.style&&u.style.getLayer(p);$&&(this.queryPadding=Math.max(this.queryPadding,$.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<k.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=k.now()+t}setDependencies(t,u){const m={};for(const p of u)m[p]=!0;this.dependencies[t]=m}hasDependency(t,u){for(const m of t){const p=this.dependencies[m];if(p){for(const v of u)if(p[v])return!0}}return!1}}class Pt{constructor(t,u){this.max=t,this.onRemove=u,this.reset()}reset(){for(const t in this.data)for(const u of this.data[t])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(t,u,m){const p=t.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const v={value:u,timeout:void 0};if(m!==void 0&&(v.timeout=setTimeout((()=>{this.remove(t,v)}),m)),this.data[p].push(v),this.order.push(p),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const u=this.data[t].shift();return u.timeout&&clearTimeout(u.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),u.value}getByKey(t){const u=this.data[t];return u?u[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,u){if(!this.has(t))return this;const m=t.wrapped().key,p=u===void 0?0:this.data[m].indexOf(u),v=this.data[m][p];return this.data[m].splice(p,1),v.timeout&&clearTimeout(v.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(v.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(t){const u=[];for(const m in this.data)for(const p of this.data[m])t(p.value)||u.push(p);for(const m of u)this.remove(m.value.tileID,m)}}class xn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,u,m){const p=String(u);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][p]=this.stateChanges[t][p]||{},l.e(this.stateChanges[t][p],m),this.deletedStates[t]===null){this.deletedStates[t]={};for(const v in this.state[t])v!==p&&(this.deletedStates[t][v]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][p]===null){this.deletedStates[t][p]={};for(const v in this.state[t][p])m[v]||(this.deletedStates[t][p][v]=null)}else for(const v in m)this.deletedStates[t]&&this.deletedStates[t][p]&&this.deletedStates[t][p][v]===null&&delete this.deletedStates[t][p][v]}removeFeatureState(t,u,m){if(this.deletedStates[t]===null)return;const p=String(u);if(this.deletedStates[t]=this.deletedStates[t]||{},m&&u!==void 0)this.deletedStates[t][p]!==null&&(this.deletedStates[t][p]=this.deletedStates[t][p]||{},this.deletedStates[t][p][m]=null);else if(u!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][p])for(m in this.deletedStates[t][p]={},this.stateChanges[t][p])this.deletedStates[t][p][m]=null;else this.deletedStates[t][p]=null;else this.deletedStates[t]=null}getState(t,u){const m=String(u),p=l.e({},(this.state[t]||{})[m],(this.stateChanges[t]||{})[m]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const v=this.deletedStates[t][u];if(v===null)return{};for(const P in v)delete p[P]}return p}initializeTileState(t,u){t.setFeatureState(this.state,u)}coalesceChanges(t,u){const m={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const v={};for(const P in this.stateChanges[p])this.state[p][P]||(this.state[p][P]={}),l.e(this.state[p][P],this.stateChanges[p][P]),v[P]=this.state[p][P];m[p]=v}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const v={};if(this.deletedStates[p]===null)for(const P in this.state[p])v[P]={},this.state[p][P]={};else for(const P in this.deletedStates[p]){if(this.deletedStates[p][P]===null)this.state[p][P]={};else for(const A of Object.keys(this.deletedStates[p][P]))delete this.state[p][P][A];v[P]=this.state[p][P]}m[p]=m[p]||{},l.e(m[p],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const p in t)t[p].setFeatureState(m,u)}}class Jt extends l.E{constructor(t,u,m){super(),this.id=t,this.dispatcher=m,this.on("data",(p=>this._dataHandler(p))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((p,v,P,A)=>{const M=new(Pn(v.type))(p,v,P,A);if(M.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${M.id}`);return M})(t,u,m,this),this._tiles={},this._cache=new Pt(0,(p=>this._unloadTile(p))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new xn,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t in this._tiles){const u=this._tiles[t];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,u,m){return l._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,u,m)}catch(p){t.state="errored",p.status!==404?this._source.fire(new l.j(p,{tile:t})):this.update(this.transform,this.terrain)}}))}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new l.k("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const m=this._tiles[u];m.upload(t),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((t=>t.tileID)).sort(di).map((t=>t.key))}getRenderableIds(t){const u=[];for(const m in this._tiles)this._isIdRenderable(m,t)&&u.push(this._tiles[m]);return t?u.sort(((m,p)=>{const v=m.tileID,P=p.tileID,A=new l.P(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),M=new l.P(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-P.overscaledZ||M.y-A.y||M.x-A.x})).map((m=>m.tileID.key)):u.map((m=>m.tileID)).sort(di).map((m=>m.key))}hasRenderableParent(t){const u=this.findLoadedParent(t,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(t,u){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(u||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)this._tiles[t].state!=="errored"&&this._reloadTile(t,"reloading")}}_reloadTile(t,u){return l._(this,void 0,void 0,(function*(){const m=this._tiles[t];m&&(m.state!=="loading"&&(m.state=u),yield this._loadTile(m,t,u))}))}_tileLoaded(t,u,m){t.timeAdded=k.now(),m==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(u,t),this.getSource().type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const u=this.getRenderableIds();for(let p=0;p<u.length;p++){const v=u[p];if(t.neighboringTiles&&t.neighboringTiles[v]){const P=this.getTileByID(v);m(t,P),m(P,t)}}function m(p,v){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let P=v.tileID.canonical.x-p.tileID.canonical.x;const A=v.tileID.canonical.y-p.tileID.canonical.y,M=Math.pow(2,p.tileID.canonical.z),$=v.tileID.key;P===0&&A===0||Math.abs(A)>1||(Math.abs(P)>1&&(Math.abs(P+M)===1?P+=M:Math.abs(P-M)===1&&(P-=M)),v.dem&&p.dem&&(p.dem.backfillBorder(v.dem,P,A),p.neighboringTiles&&p.neighboringTiles[$]&&(p.neighboringTiles[$].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,u,m,p){for(const v in this._tiles){let P=this._tiles[v];if(p[v]||!P.hasData()||P.tileID.overscaledZ<=u||P.tileID.overscaledZ>m)continue;let A=P.tileID;for(;P&&P.tileID.overscaledZ>u+1;){const $=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[$.key],P&&P.hasData()&&(A=$)}let M=A;for(;M.overscaledZ>u;)if(M=M.scaledTo(M.overscaledZ-1),t[M.key]){p[A.key]=A;break}}}findLoadedParent(t,u){if(t.key in this._loadedParentTiles){const m=this._loadedParentTiles[t.key];return m&&m.tileID.overscaledZ>=u?m:null}for(let m=t.overscaledZ-1;m>=u;m--){const p=t.scaledTo(m),v=this._getLoadedTile(p);if(v)return v}}findLoadedSibling(t){return this._getLoadedTile(t)}_getLoadedTile(t){const u=this._tiles[t.key];return u&&u.hasData()?u:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const u=Math.ceil(t.width/this._source.tileSize)+1,m=Math.ceil(t.height/this._source.tileSize)+1,p=Math.floor(u*m*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(v)}handleWrapJump(t){const u=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,u){const m={};for(const p in this._tiles){const v=this._tiles[p];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+u),m[v.tileID.key]=v}this._tiles=m;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(t,u,m,p,v,P){const A={},M={},$=Object.keys(t),j=k.now();for(const U of $){const ee=t[U],de=this._tiles[U];if(!de||de.fadeEndTime!==0&&de.fadeEndTime<=j)continue;const me=this.findLoadedParent(ee,u),be=this.findLoadedSibling(ee),Pe=me||be||null;Pe&&(this._addTile(Pe.tileID),A[Pe.tileID.key]=Pe.tileID),M[U]=ee}this._retainLoadedChildren(M,p,m,t);for(const U in A)t[U]||(this._coveredTiles[U]=!0,t[U]=A[U]);if(P){const U={},ee={};for(const de of v)this._tiles[de.key].hasData()?U[de.key]=de:ee[de.key]=de;for(const de in ee){const me=ee[de].children(this._source.maxzoom);this._tiles[me[0].key]&&this._tiles[me[1].key]&&this._tiles[me[2].key]&&this._tiles[me[3].key]&&(U[me[0].key]=t[me[0].key]=me[0],U[me[1].key]=t[me[1].key]=me[1],U[me[2].key]=t[me[2].key]=me[2],U[me[3].key]=t[me[3].key]=me[3],delete ee[de])}for(const de in ee){const me=ee[de],be=this.findLoadedParent(me,this._source.minzoom),Pe=this.findLoadedSibling(me),Ae=be||Pe||null;if(Ae){U[Ae.tileID.key]=t[Ae.tileID.key]=Ae.tileID;for(const De in U)U[De].isChildOf(Ae.tileID)&&delete U[De]}}for(const de in this._tiles)U[de]||(this._coveredTiles[de]=!0)}}update(t,u){if(!this._sourceLoaded||this._paused)return;let m;this.transform=t,this.terrain=u,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((j=>new l.S(j.canonical.z,j.wrap,j.canonical.z,j.canonical.x,j.canonical.y))):(m=t.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(m=m.filter((j=>this._source.hasTile(j))))):m=[];const p=t.coveringZoomLevel(this._source),v=Math.max(p-Jt.maxOverzooming,this._source.minzoom),P=Math.max(p+Jt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const j={};for(const U of m)if(U.canonical.z>this._source.minzoom){const ee=U.scaledTo(U.canonical.z-1);j[ee.key]=ee;const de=U.scaledTo(Math.max(this._source.minzoom,Math.min(U.canonical.z,5)));j[de.key]=de}m=m.concat(Object.values(j))}const A=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(m,p);Pa(this._source.type)&&this._updateCoveredAndRetainedTiles(M,v,P,p,m,u);for(const j in M)this._tiles[j].clearFadeHold();const $=l.ab(this._tiles,M);for(const j of $){const U=this._tiles[j];U.hasSymbolBuckets&&!U.holdingForFade()?U.setHoldDuration(this.map._fadeDuration):U.hasSymbolBuckets&&!U.symbolFadeFinished()||this._removeTile(j)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,u){var m;const p={},v={},P=Math.max(u-Jt.maxOverzooming,this._source.minzoom),A=Math.max(u+Jt.maxUnderzooming,this._source.minzoom),M={};for(const $ of t){const j=this._addTile($);p[$.key]=$,j.hasData()||u<this._source.maxzoom&&(M[$.key]=$)}this._retainLoadedChildren(M,u,A,p);for(const $ of t){let j=this._tiles[$.key];if(j.hasData())continue;if(u+1>this._source.maxzoom){const ee=$.children(this._source.maxzoom)[0],de=this.getTile(ee);if(de&&de.hasData()){p[ee.key]=ee;continue}}else{const ee=$.children(this._source.maxzoom);if(p[ee[0].key]&&p[ee[1].key]&&p[ee[2].key]&&p[ee[3].key])continue}let U=j.wasRequested();for(let ee=$.overscaledZ-1;ee>=P;--ee){const de=$.scaledTo(ee);if(v[de.key])break;if(v[de.key]=!0,j=this.getTile(de),!j&&U&&(j=this._addTile(de)),j){const me=j.hasData();if((me||!(!((m=this.map)===null||m===void 0)&&m.cancelPendingTileRequestsWhileZooming)||U)&&(p[de.key]=de),U=j.wasRequested(),me)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const u=[];let m,p=this._tiles[t].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){m=this._loadedParentTiles[p.key];break}u.push(p.key);const v=p.scaledTo(p.overscaledZ-1);if(m=this._getLoadedTile(v),m)break;p=v}for(const v of u)this._loadedParentTiles[v]=m}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const t in this._tiles){const u=this._tiles[t].tileID,m=this._getLoadedTile(u);this._loadedSiblingTiles[u.key]=m}}_addTile(t){let u=this._tiles[t.key];if(u)return u;u=this._cache.getAndRemove(t),u&&(this._setTileReloadTimer(t.key,u),u.tileID=t,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,u)));const m=u;return u||(u=new Ni(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(u,t.key,u.state)),u.uses++,this._tiles[t.key]=u,m||this._source.fire(new l.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(t,u){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const m=u.getExpiryTimeout();m&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),m))}_removeTile(t){const u=this._tiles[t];u&&(u.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(t){const u=t.sourceDataType;t.dataType==="source"&&u==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&t.dataType==="source"&&u==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,u,m){const p=[],v=this.transform;if(!v)return p;const P=m?v.getCameraQueryGeometry(t):t,A=t.map((me=>v.pointCoordinate(me,this.terrain))),M=P.map((me=>v.pointCoordinate(me,this.terrain))),$=this.getIds();let j=1/0,U=1/0,ee=-1/0,de=-1/0;for(const me of M)j=Math.min(j,me.x),U=Math.min(U,me.y),ee=Math.max(ee,me.x),de=Math.max(de,me.y);for(let me=0;me<$.length;me++){const be=this._tiles[$[me]];if(be.holdingForFade())continue;const Pe=be.tileID,Ae=Math.pow(2,v.zoom-be.tileID.overscaledZ),De=u*be.queryPadding*l.X/be.tileSize/Ae,ve=[Pe.getTilePoint(new l.Z(j,U)),Pe.getTilePoint(new l.Z(ee,de))];if(ve[0].x-De<l.X&&ve[0].y-De<l.X&&ve[1].x+De>=0&&ve[1].y+De>=0){const Oe=A.map((Je=>Pe.getTilePoint(Je))),Ue=M.map((Je=>Pe.getTilePoint(Je)));p.push({tile:be,tileID:Pe,queryGeometry:Oe,cameraQueryGeometry:Ue,scale:Ae})}}return p}getVisibleCoordinates(t){const u=this.getRenderableIds(t).map((m=>this._tiles[m].tileID));for(const m of u)m.posMatrix=this.transform.calculatePosMatrix(m.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Pa(this._source.type)){const t=k.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=t)return!0}return!1}setFeatureState(t,u,m){this._state.updateState(t=t||"_geojsonTileLayer",u,m)}removeFeatureState(t,u,m){this._state.removeFeatureState(t=t||"_geojsonTileLayer",u,m)}getFeatureState(t,u){return this._state.getState(t=t||"_geojsonTileLayer",u)}setDependencies(t,u,m){const p=this._tiles[t];p&&p.setDependencies(u,m)}reloadTilesForDependencies(t,u){for(const m in this._tiles)this._tiles[m].hasDependency(t,u)&&this._reloadTile(m,"reloading");this._cache.filter((m=>!m.hasDependency(t,u)))}}function di(y,t){const u=Math.abs(2*y.wrap)-+(y.wrap<0),m=Math.abs(2*t.wrap)-+(t.wrap<0);return y.overscaledZ-t.overscaledZ||m-u||t.canonical.y-y.canonical.y||t.canonical.x-y.canonical.x}function Pa(y){return y==="raster"||y==="image"||y==="video"}Jt.maxOverzooming=10,Jt.maxUnderzooming=3;class hn{constructor(t,u){this.reset(t,u)}reset(t,u){this.points=t||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=l.ac(t,0,1);let u=1,m=this._distances[u];const p=t*this.paddedLength+this.padding;for(;m<p&&u<this._distances.length;)m=this._distances[++u];const v=u-1,P=this._distances[v],A=m-P,M=A>0?(p-P)/A:0;return this.points[v].mult(1-M).add(this.points[u].mult(M))}}function Rr(y,t){let u=!0;return y==="always"||y!=="never"&&t!=="never"||(u=!1),u}class es{constructor(t,u,m){const p=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(t/m),this.yCellCount=Math.ceil(u/m);for(let P=0;P<this.xCellCount*this.yCellCount;P++)p.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=u,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,u,m,p,v){this._forEachCell(u,m,p,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(p),this.bboxes.push(v)}insertCircle(t,u,m,p){this._forEachCell(u-p,m-p,u+p,m+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(u),this.circles.push(m),this.circles.push(p)}_insertBoxCell(t,u,m,p,v,P){this.boxCells[v].push(P)}_insertCircleCell(t,u,m,p,v,P){this.circleCells[v].push(P)}_query(t,u,m,p,v,P,A){if(m<0||t>this.width||p<0||u>this.height)return[];const M=[];if(t<=0&&u<=0&&this.width<=m&&this.height<=p){if(v)return[{key:null,x1:t,y1:u,x2:m,y2:p}];for(let $=0;$<this.boxKeys.length;$++)M.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const j=this.circles[3*$],U=this.circles[3*$+1],ee=this.circles[3*$+2];M.push({key:this.circleKeys[$],x1:j-ee,y1:U-ee,x2:j+ee,y2:U+ee})}}else this._forEachCell(t,u,m,p,this._queryCell,M,{hitTest:v,overlapMode:P,seenUids:{box:{},circle:{}}},A);return M}query(t,u,m,p){return this._query(t,u,m,p,!1,null)}hitTest(t,u,m,p,v,P){return this._query(t,u,m,p,!0,v,P).length>0}hitTestCircle(t,u,m,p,v){const P=t-m,A=t+m,M=u-m,$=u+m;if(A<0||P>this.width||$<0||M>this.height)return!1;const j=[];return this._forEachCell(P,M,A,$,this._queryCellCircle,j,{hitTest:!0,overlapMode:p,circle:{x:t,y:u,radius:m},seenUids:{box:{},circle:{}}},v),j.length>0}_queryCell(t,u,m,p,v,P,A,M){const{seenUids:$,hitTest:j,overlapMode:U}=A,ee=this.boxCells[v];if(ee!==null){const me=this.bboxes;for(const be of ee)if(!$.box[be]){$.box[be]=!0;const Pe=4*be,Ae=this.boxKeys[be];if(t<=me[Pe+2]&&u<=me[Pe+3]&&m>=me[Pe+0]&&p>=me[Pe+1]&&(!M||M(Ae))&&(!j||!Rr(U,Ae.overlapMode))&&(P.push({key:Ae,x1:me[Pe],y1:me[Pe+1],x2:me[Pe+2],y2:me[Pe+3]}),j))return!0}}const de=this.circleCells[v];if(de!==null){const me=this.circles;for(const be of de)if(!$.circle[be]){$.circle[be]=!0;const Pe=3*be,Ae=this.circleKeys[be];if(this._circleAndRectCollide(me[Pe],me[Pe+1],me[Pe+2],t,u,m,p)&&(!M||M(Ae))&&(!j||!Rr(U,Ae.overlapMode))){const De=me[Pe],ve=me[Pe+1],Oe=me[Pe+2];if(P.push({key:Ae,x1:De-Oe,y1:ve-Oe,x2:De+Oe,y2:ve+Oe}),j)return!0}}}return!1}_queryCellCircle(t,u,m,p,v,P,A,M){const{circle:$,seenUids:j,overlapMode:U}=A,ee=this.boxCells[v];if(ee!==null){const me=this.bboxes;for(const be of ee)if(!j.box[be]){j.box[be]=!0;const Pe=4*be,Ae=this.boxKeys[be];if(this._circleAndRectCollide($.x,$.y,$.radius,me[Pe+0],me[Pe+1],me[Pe+2],me[Pe+3])&&(!M||M(Ae))&&!Rr(U,Ae.overlapMode))return P.push(!0),!0}}const de=this.circleCells[v];if(de!==null){const me=this.circles;for(const be of de)if(!j.circle[be]){j.circle[be]=!0;const Pe=3*be,Ae=this.circleKeys[be];if(this._circlesCollide(me[Pe],me[Pe+1],me[Pe+2],$.x,$.y,$.radius)&&(!M||M(Ae))&&!Rr(U,Ae.overlapMode))return P.push(!0),!0}}}_forEachCell(t,u,m,p,v,P,A,M){const $=this._convertToXCellCoord(t),j=this._convertToYCellCoord(u),U=this._convertToXCellCoord(m),ee=this._convertToYCellCoord(p);for(let de=$;de<=U;de++)for(let me=j;me<=ee;me++)if(v.call(this,t,u,m,p,this.xCellCount*me+de,P,A,M))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,u,m,p,v,P){const A=p-t,M=v-u,$=m+P;return $*$>A*A+M*M}_circleAndRectCollide(t,u,m,p,v,P,A){const M=(P-p)/2,$=Math.abs(t-(p+M));if($>M+m)return!1;const j=(A-v)/2,U=Math.abs(u-(v+j));if(U>j+m)return!1;if($<=M||U<=j)return!0;const ee=$-M,de=U-j;return ee*ee+de*de<=m*m}}function gs(y,t,u,m,p){const v=l.H();return t?(l.K(v,v,[1/p,1/p,1]),u||l.ad(v,v,m.angle)):l.L(v,m.labelPlaneMatrix,y),v}function Fr(y,t,u,m,p){if(t){const v=l.ae(y);return l.K(v,v,[p,p,1]),u||l.ad(v,v,-m.angle),v}return m.glCoordMatrix}function ke(y,t,u,m){let p;m?(p=[y,t,m(y,t),1],l.af(p,p,u)):(p=[y,t,0,1],Vn(p,p,u));const v=p[3];return{point:new l.P(p[0]/v,p[1]/v),signedDistanceFromCamera:v,isOccluded:!1}}function W(y,t){return .5+y/t*.5}function G(y,t){return y.x>=-t[0]&&y.x<=t[0]&&y.y>=-t[1]&&y.y<=t[1]}function ce(y,t,u,m,p,v,P,A,M,$,j,U,ee,de,me){const be=m?y.textSizeData:y.iconSizeData,Pe=l.ag(be,u.transform.zoom),Ae=[256/u.width*2+1,256/u.height*2+1],De=m?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;De.clear();const ve=y.lineVertexArray,Oe=m?y.text.placedSymbolArray:y.icon.placedSymbolArray,Ue=u.transform.width/u.transform.height;let Je=!1;for(let gt=0;gt<Oe.length;gt++){const Ct=Oe.get(gt);if(Ct.hidden||Ct.writingMode===l.ah.vertical&&!Je){sn(Ct.numGlyphs,De);continue}Je=!1;const zt=ke(Ct.anchorX,Ct.anchorY,t,me);if(!G(zt.point,Ae)){sn(Ct.numGlyphs,De);continue}const jt=W(u.transform.cameraToCenterDistance,zt.signedDistanceFromCamera),Mt=l.ai(be,Pe,Ct),Et=P?Mt/jt:Mt*jt,Xt={getElevation:me,labelPlaneMatrix:p,lineVertexArray:ve,pitchWithMap:P,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:$,tileAnchorPoint:new l.P(Ct.anchorX,Ct.anchorY),unwrappedTileID:j,width:U,height:ee,translation:de},fn=Ne(Xt,Ct,Et,!1,A,t,v,y.glyphOffsetArray,De,Ue,M);Je=fn.useVertical,(fn.notEnoughRoom||Je||fn.needsFlipping&&Ne(Xt,Ct,Et,!0,A,t,v,y.glyphOffsetArray,De,Ue,M).notEnoughRoom)&&sn(Ct.numGlyphs,De)}m?y.text.dynamicLayoutVertexBuffer.updateData(De):y.icon.dynamicLayoutVertexBuffer.updateData(De)}function _e(y,t,u,m,p,v,P,A){const M=v.glyphStartIndex+v.numGlyphs,$=v.lineStartIndex,j=v.lineStartIndex+v.lineLength,U=t.getoffsetX(v.glyphStartIndex),ee=t.getoffsetX(M-1),de=At(y*U,u,m,p,v.segment,$,j,A,P);if(!de)return null;const me=At(y*ee,u,m,p,v.segment,$,j,A,P);return me?A.projectionCache.anyProjectionOccluded?null:{first:de,last:me}:null}function Le(y,t,u,m){return y===l.ah.horizontal&&Math.abs(u.y-t.y)>Math.abs(u.x-t.x)*m?{useVertical:!0}:(y===l.ah.vertical?t.y<u.y:t.x>u.x)?{needsFlipping:!0}:null}function Ne(y,t,u,m,p,v,P,A,M,$,j){const U=u/24,ee=t.lineOffsetX*U,de=t.lineOffsetY*U;let me;if(t.numGlyphs>1){const be=t.glyphStartIndex+t.numGlyphs,Pe=t.lineStartIndex,Ae=t.lineStartIndex+t.lineLength,De=_e(U,A,ee,de,m,t,j,y);if(!De)return{notEnoughRoom:!0};const ve=ke(De.first.point.x,De.first.point.y,P,y.getElevation).point,Oe=ke(De.last.point.x,De.last.point.y,P,y.getElevation).point;if(p&&!m){const Ue=Le(t.writingMode,ve,Oe,$);if(Ue)return Ue}me=[De.first];for(let Ue=t.glyphStartIndex+1;Ue<be-1;Ue++)me.push(At(U*A.getoffsetX(Ue),ee,de,m,t.segment,Pe,Ae,y,j));me.push(De.last)}else{if(p&&!m){const Pe=ke(y.tileAnchorPoint.x,y.tileAnchorPoint.y,v,y.getElevation).point,Ae=t.lineStartIndex+t.segment+1,De=new l.P(y.lineVertexArray.getx(Ae),y.lineVertexArray.gety(Ae)),ve=ke(De.x,De.y,v,y.getElevation),Oe=ve.signedDistanceFromCamera>0?ve.point:(function(Je,gt,Ct,zt,jt,Mt){return We(Je,gt,Ct,1,jt,Mt)})(y.tileAnchorPoint,De,Pe,0,v,y),Ue=Le(t.writingMode,Pe,Oe,$);if(Ue)return Ue}const be=At(U*A.getoffsetX(t.glyphStartIndex),ee,de,m,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,y,j);if(!be||y.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};me=[be]}for(const be of me)l.aj(M,be.point,be.angle);return{}}function We(y,t,u,m,p,v){const P=y.add(y.sub(t)._unit()),A=p!==void 0?ke(P.x,P.y,p,v.getElevation).point:ut(P.x,P.y,v).point,M=u.sub(A);return u.add(M._mult(m/M.mag()))}function Ee(y,t,u){const m=t.projectionCache;if(m.projections[y])return m.projections[y];const p=new l.P(t.lineVertexArray.getx(y),t.lineVertexArray.gety(y)),v=ut(p.x,p.y,t);if(v.signedDistanceFromCamera>0)return m.projections[y]=v.point,m.anyProjectionOccluded=m.anyProjectionOccluded||v.isOccluded,v.point;const P=y-u.direction;return(function(A,M,$,j,U){return We(A,M,$,j,void 0,U)})(u.distanceFromAnchor===0?t.tileAnchorPoint:new l.P(t.lineVertexArray.getx(P),t.lineVertexArray.gety(P)),p,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,t)}function ut(y,t,u){const m=y+u.translation[0],p=t+u.translation[1];let v;return!u.pitchWithMap&&u.projection.useSpecialProjectionForSymbols?(v=u.projection.projectTileCoordinates(m,p,u.unwrappedTileID,u.getElevation),v.point.x=(.5*v.point.x+.5)*u.width,v.point.y=(.5*-v.point.y+.5)*u.height):(v=ke(m,p,u.labelPlaneMatrix,u.getElevation),v.isOccluded=!1),v}function _t(y,t,u){return y._unit()._perp()._mult(t*u)}function at(y,t,u,m,p,v,P,A,M){if(A.projectionCache.offsets[y])return A.projectionCache.offsets[y];const $=u.add(t);if(y+M.direction<m||y+M.direction>=p)return A.projectionCache.offsets[y]=$,$;const j=Ee(y+M.direction,A,M),U=_t(j.sub(u),P,M.direction),ee=u.add(U),de=j.add(U);return A.projectionCache.offsets[y]=l.ak(v,$,ee,de)||$,A.projectionCache.offsets[y]}function At(y,t,u,m,p,v,P,A,M){const $=m?y-t:y+t;let j=$>0?1:-1,U=0;m&&(j*=-1,U=Math.PI),j<0&&(U+=Math.PI);let ee,de=j>0?v+p:v+p+1;A.projectionCache.cachedAnchorPoint?ee=A.projectionCache.cachedAnchorPoint:(ee=ut(A.tileAnchorPoint.x,A.tileAnchorPoint.y,A).point,A.projectionCache.cachedAnchorPoint=ee);let me,be,Pe=ee,Ae=ee,De=0,ve=0;const Oe=Math.abs($),Ue=[];let Je;for(;De+ve<=Oe;){if(de+=j,de<v||de>=P)return null;De+=ve,Ae=Pe,be=me;const zt={absOffsetX:Oe,direction:j,distanceFromAnchor:De,previousVertex:Ae};if(Pe=Ee(de,A,zt),u===0)Ue.push(Ae),Je=Pe.sub(Ae);else{let jt;const Mt=Pe.sub(Ae);jt=Mt.mag()===0?_t(Ee(de+j,A,zt).sub(Pe),u,j):_t(Mt,u,j),be||(be=Ae.add(jt)),me=at(de,jt,Pe,v,P,be,u,A,zt),Ue.push(be),Je=me.sub(be)}ve=Je.mag()}const gt=Je._mult((Oe-De)/ve)._add(be||Ae),Ct=U+Math.atan2(Pe.y-Ae.y,Pe.x-Ae.x);return Ue.push(gt),{point:gt,angle:M?Ct:0,path:Ue}}const an=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function sn(y,t){for(let u=0;u<y;u++){const m=t.length;t.resize(m+4),t.float32.set(an,3*m)}}function Vn(y,t,u){const m=t[0],p=t[1];return y[0]=u[0]*m+u[4]*p+u[12],y[1]=u[1]*m+u[5]*p+u[13],y[3]=u[3]*m+u[7]*p+u[15],y}const yn=100;class zn{constructor(t,u,m=new es(t.width+200,t.height+200,25),p=new es(t.width+200,t.height+200,25)){this.transform=t,this.mapProjection=u,this.grid=m,this.ignoredGrid=p,this.pitchFactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+yn,this.screenBottomBoundary=t.height+yn,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,u,m,p,v,P,A,M,$,j,U){const ee=t.anchorPointX+M[0],de=t.anchorPointY+M[1],me=this.projectAndGetPerspectiveRatio(p,ee,de,v,j),be=m*me.perspectiveRatio;let Pe;if(P||A)Pe=this._projectCollisionBox(t,be,p,v,P,A,M,me,j,U);else{const Ue=me.point.x+(U?U.x*be:0),Je=me.point.y+(U?U.y*be:0);Pe={allPointsOccluded:!1,box:[Ue+t.x1*be,Je+t.y1*be,Ue+t.x2*be,Je+t.y2*be]}}const[Ae,De,ve,Oe]=Pe.box;return this.mapProjection.useSpecialProjectionForSymbols&&(P?Pe.allPointsOccluded:this.mapProjection.isOccluded(ee,de,v))||me.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(Ae,De,ve,Oe)||u!=="always"&&this.grid.hitTest(Ae,De,ve,Oe,u,$)?{box:[Ae,De,ve,Oe],placeable:!1,offscreen:!1}:{box:[Ae,De,ve,Oe],placeable:!0,offscreen:this.isOffscreen(Ae,De,ve,Oe)}}placeCollisionCircles(t,u,m,p,v,P,A,M,$,j,U,ee,de,me,be,Pe){const Ae=[],De=new l.P(u.anchorX,u.anchorY),ve=this.getPerspectiveRatio(P,De.x,De.y,A,Pe),Oe=(U?v/ve:v*ve)/l.ap,Ue={getElevation:Pe,labelPlaneMatrix:M,lineVertexArray:m,pitchWithMap:U,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:De,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:be},Je=_e(Oe,p,u.lineOffsetX*Oe,u.lineOffsetY*Oe,!1,u,!1,Ue);let gt=!1,Ct=!1,zt=!0;if(Je){const jt=.5*de*ve+me,Mt=new l.P(-100,-100),Et=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Xt=new hn,fn=Je.first,Dt=Je.last;let $t=[];for(let wn=fn.path.length-1;wn>=1;wn--)$t.push(fn.path[wn]);for(let wn=1;wn<Dt.path.length;wn++)$t.push(Dt.path[wn]);const cn=2.5*jt;if($){const wn=this.projectPathToScreenSpace($t,Ue,$);$t=wn.some((An=>An.signedDistanceFromCamera<=0))?[]:wn.map((An=>An.point))}let oi=[];if($t.length>0){const wn=$t[0].clone(),An=$t[0].clone();for(let li=1;li<$t.length;li++)wn.x=Math.min(wn.x,$t[li].x),wn.y=Math.min(wn.y,$t[li].y),An.x=Math.max(An.x,$t[li].x),An.y=Math.max(An.y,$t[li].y);oi=wn.x>=Mt.x&&An.x<=Et.x&&wn.y>=Mt.y&&An.y<=Et.y?[$t]:An.x<Mt.x||wn.x>Et.x||An.y<Mt.y||wn.y>Et.y?[]:l.al([$t],Mt.x,Mt.y,Et.x,Et.y)}for(const wn of oi){Xt.reset(wn,.25*jt);let An=0;An=Xt.length<=.5*jt?1:Math.ceil(Xt.paddedLength/cn)+1;for(let li=0;li<An;li++){const la=li/Math.max(An-1,1),wr=Xt.lerp(la),ui=wr.x+yn,Ea=wr.y+yn;Ae.push(ui,Ea,jt,0);const _a=ui-jt,ua=Ea-jt,ba=ui+jt,jr=Ea+jt;if(zt=zt&&this.isOffscreen(_a,ua,ba,jr),Ct=Ct||this.isInsideGrid(_a,ua,ba,jr),t!=="always"&&this.grid.hitTestCircle(ui,Ea,jt,t,ee)&&(gt=!0,!j))return{circles:[],offscreen:!1,collisionDetected:gt}}}}return{circles:!j&&gt||!Ct||ve<this.perspectiveRatioCutoff?[]:Ae,offscreen:zt,collisionDetected:gt}}projectPathToScreenSpace(t,u,m){return t.map((p=>ke(p.x,p.y,m,u.getElevation)))}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let m=1/0,p=1/0,v=-1/0,P=-1/0;for(const j of t){const U=new l.P(j.x+yn,j.y+yn);m=Math.min(m,U.x),p=Math.min(p,U.y),v=Math.max(v,U.x),P=Math.max(P,U.y),u.push(U)}const A=this.grid.query(m,p,v,P).concat(this.ignoredGrid.query(m,p,v,P)),M={},$={};for(const j of A){const U=j.key;if(M[U.bucketInstanceId]===void 0&&(M[U.bucketInstanceId]={}),M[U.bucketInstanceId][U.featureIndex])continue;const ee=[new l.P(j.x1,j.y1),new l.P(j.x2,j.y1),new l.P(j.x2,j.y2),new l.P(j.x1,j.y2)];l.am(u,ee)&&(M[U.bucketInstanceId][U.featureIndex]=!0,$[U.bucketInstanceId]===void 0&&($[U.bucketInstanceId]=[]),$[U.bucketInstanceId].push(U.featureIndex))}return $}insertCollisionBox(t,u,m,p,v,P){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:v,collisionGroupID:P,overlapMode:u},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,u,m,p,v,P){const A=m?this.ignoredGrid:this.grid,M={bucketInstanceId:p,featureIndex:v,collisionGroupID:P,overlapMode:u};for(let $=0;$<t.length;$+=4)A.insertCircle(M,t[$],t[$+1],t[$+2])}projectAndGetPerspectiveRatio(t,u,m,p,v){let P;v?(P=[u,m,v(u,m),1],l.af(P,P,t)):(P=[u,m,0,1],Vn(P,P,t));const A=P[3];return{point:new l.P((P[0]/A+1)/2*this.transform.width+yn,(-P[1]/A+1)/2*this.transform.height+yn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/A*.5,isOccluded:!1,signedDistanceFromCamera:A}}getPerspectiveRatio(t,u,m,p,v){const P=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(u,m,p,v):ke(u,m,t,v);return .5+this.transform.cameraToCenterDistance/P.signedDistanceFromCamera*.5}isOffscreen(t,u,m,p){return m<yn||t>=this.screenRightBoundary||p<yn||u>this.screenBottomBoundary}isInsideGrid(t,u,m,p){return m>=0&&t<this.gridRightBoundary&&p>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const t=l.an([]);return l.J(t,t,[-100,-100,0]),t}_projectCollisionBox(t,u,m,p,v,P,A,M,$,j){let U=new l.P(1,0),ee=new l.P(0,1);const de=new l.P(t.anchorPointX+A[0],t.anchorPointY+A[1]);if(P&&!v){const zt=this.projectAndGetPerspectiveRatio(m,de.x+1,de.y,p,$).point.sub(M.point).unit(),jt=Math.atan(zt.y/zt.x)+(zt.x<0?Math.PI:0),Mt=Math.sin(jt),Et=Math.cos(jt);U=new l.P(Et,Mt),ee=new l.P(-Mt,Et)}else if(!P&&v){const zt=-this.transform.angle,jt=Math.sin(zt),Mt=Math.cos(zt);U=new l.P(Mt,jt),ee=new l.P(-jt,Mt)}let me=M.point,be=u;if(v){me=de;const zt=this.transform.zoom-Math.floor(this.transform.zoom);be=Math.pow(2,-zt),be*=this.mapProjection.getPitchedTextCorrection(this.transform,de,p),j||(be*=l.ac(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}j&&(me=me.add(U.mult(j.x*be)).add(ee.mult(j.y*be)));const Pe=t.x1*be,Ae=t.x2*be,De=(Pe+Ae)/2,ve=t.y1*be,Oe=t.y2*be,Ue=(ve+Oe)/2,Je=[{offsetX:Pe,offsetY:ve},{offsetX:De,offsetY:ve},{offsetX:Ae,offsetY:ve},{offsetX:Ae,offsetY:Ue},{offsetX:Ae,offsetY:Oe},{offsetX:De,offsetY:Oe},{offsetX:Pe,offsetY:Oe},{offsetX:Pe,offsetY:Ue}];let gt=[];for(const{offsetX:zt,offsetY:jt}of Je)gt.push(new l.P(me.x+U.x*zt+ee.x*jt,me.y+U.y*zt+ee.y*jt));let Ct=!1;if(v){const zt=gt.map((jt=>this.projectAndGetPerspectiveRatio(m,jt.x,jt.y,p,$)));Ct=zt.some((jt=>!jt.isOccluded)),gt=zt.map((jt=>jt.point))}else Ct=!0;return{box:l.ao(gt),allPointsOccluded:!Ct}}}function Tn(y,t,u){return t*(l.X/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class zi{constructor(t,u,m,p){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?u:-u))):p&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class _i{constructor(t,u,m,p,v){this.text=new zi(t?t.text:null,u,m,v),this.icon=new zi(t?t.icon:null,u,p,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Cn{constructor(t,u,m){this.text=t,this.icon=u,this.skipFade=m}}class qn{constructor(){this.invProjMatrix=l.H(),this.viewportMatrix=l.H(),this.circles=[]}}class hi{constructor(t,u,m,p,v){this.bucketInstanceId=t,this.featureIndex=u,this.sourceLayerIndex=m,this.bucketIndex=p,this.tileID=v}}class Wi{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const u=++this.maxGroupID;this.collisionGroups[t]={ID:u,predicate:m=>m.collisionGroupID===u}}return this.collisionGroups[t]}}function Qi(y,t,u,m,p){const{horizontalAlign:v,verticalAlign:P}=l.au(y);return new l.P(-(v-.5)*t+m[0]*p,-(P-.5)*u+m[1]*p)}class ya{constructor(t,u,m,p,v,P){this.transform=t.clone(),this.terrain=m,this.collisionIndex=new zn(this.transform,u),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Wi(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=P,P&&(P.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const u=this.terrain;return u?(m,p)=>u.getElevation(t,m,p):null}getBucketParts(t,u,m,p){const v=m.getBucket(u),P=m.latestFeatureIndex;if(!v||!P||u.id!==v.layerIds[0])return;const A=m.collisionBoxArray,M=v.layers[0].layout,$=v.layers[0].paint,j=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),U=m.tileSize/l.X,ee=m.tileID.toUnwrapped(),de=this.transform.calculatePosMatrix(ee),me=M.get("text-pitch-alignment")==="map",be=M.get("text-rotation-alignment")==="map",Pe=Tn(m,1,this.transform.zoom),Ae=this.collisionIndex.mapProjection.translatePosition(this.transform,m,$.get("text-translate"),$.get("text-translate-anchor")),De=this.collisionIndex.mapProjection.translatePosition(this.transform,m,$.get("icon-translate"),$.get("icon-translate-anchor")),ve=gs(de,me,be,this.transform,Pe);let Oe=null;if(me){const Je=Fr(de,me,be,this.transform,Pe);Oe=l.L([],this.transform.labelPlaneMatrix,Je)}this.retainedQueryData[v.bucketInstanceId]=new hi(v.bucketInstanceId,P,v.sourceLayerIndex,v.index,m.tileID);const Ue={bucket:v,layout:M,translationText:Ae,translationIcon:De,posMatrix:de,unwrappedTileID:ee,textLabelPlaneMatrix:ve,labelToScreenMatrix:Oe,scale:j,textPixelRatio:U,holdingForFade:m.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:l.ag(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(p)for(const Je of v.sortKeyRanges){const{sortKey:gt,symbolInstanceStart:Ct,symbolInstanceEnd:zt}=Je;t.push({sortKey:gt,symbolInstanceStart:Ct,symbolInstanceEnd:zt,parameters:Ue})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:Ue})}attemptAnchorPlacement(t,u,m,p,v,P,A,M,$,j,U,ee,de,me,be,Pe,Ae,De,ve){const Oe=l.aq[t.textAnchor],Ue=[t.textOffset0,t.textOffset1],Je=Qi(Oe,m,p,Ue,v),gt=this.collisionIndex.placeCollisionBox(u,ee,M,$,j,A,P,Pe,U.predicate,ve,Je);if((!De||this.collisionIndex.placeCollisionBox(De,ee,M,$,j,A,P,Ae,U.predicate,ve,Je).placeable)&&gt.placeable){let Ct;if(this.prevPlacement&&this.prevPlacement.variableOffsets[de.crossTileID]&&this.prevPlacement.placements[de.crossTileID]&&this.prevPlacement.placements[de.crossTileID].text&&(Ct=this.prevPlacement.variableOffsets[de.crossTileID].anchor),de.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[de.crossTileID]={textOffset:Ue,width:m,height:p,anchor:Oe,textBoxScale:v,prevAnchor:Ct},this.markUsedJustification(me,Oe,de,be),me.allowVerticalPlacement&&(this.markUsedOrientation(me,be,de),this.placedOrientations[de.crossTileID]=be),{shift:Je,placedGlyphBoxes:gt}}}placeLayerBucketPart(t,u,m){const{bucket:p,layout:v,translationText:P,translationIcon:A,posMatrix:M,unwrappedTileID:$,textLabelPlaneMatrix:j,labelToScreenMatrix:U,textPixelRatio:ee,holdingForFade:de,collisionBoxArray:me,partiallyEvaluatedTextSize:be,collisionGroup:Pe}=t.parameters,Ae=v.get("text-optional"),De=v.get("icon-optional"),ve=l.ar(v,"text-overlap","text-allow-overlap"),Oe=ve==="always",Ue=l.ar(v,"icon-overlap","icon-allow-overlap"),Je=Ue==="always",gt=v.get("text-rotation-alignment")==="map",Ct=v.get("text-pitch-alignment")==="map",zt=v.get("icon-text-fit")!=="none",jt=v.get("symbol-z-order")==="viewport-y",Mt=Oe&&(Je||!p.hasIconData()||De),Et=Je&&(Oe||!p.hasTextData()||Ae);!p.collisionArrays&&me&&p.deserializeCollisionBoxes(me);const Xt=this._getTerrainElevationFunc(this.retainedQueryData[p.bucketInstanceId].tileID),fn=(Dt,$t,cn)=>{var oi,wn;if(u[Dt.crossTileID])return;if(de)return void(this.placements[Dt.crossTileID]=new Cn(!1,!1,!1));let An=!1,li=!1,la=!0,wr=null,ui={box:null,placeable:!1,offscreen:null},Ea={placeable:!1},_a=null,ua=null,ba=null,jr=0,Ho=0,uc=0;$t.textFeatureIndex?jr=$t.textFeatureIndex:Dt.useRuntimeCollisionCircles&&(jr=Dt.featureIndex),$t.verticalTextFeatureIndex&&(Ho=$t.verticalTextFeatureIndex);const qo=$t.textBox;if(qo){const hr=ea=>{let ca=l.ah.horizontal;if(p.allowVerticalPlacement&&!ea&&this.prevPlacement){const Ja=this.prevPlacement.placedOrientations[Dt.crossTileID];Ja&&(this.placedOrientations[Dt.crossTileID]=Ja,ca=Ja,this.markUsedOrientation(p,ca,Dt))}return ca},fr=(ea,ca)=>{if(p.allowVerticalPlacement&&Dt.numVerticalGlyphVertices>0&&$t.verticalTextBox){for(const Ja of p.writingModes)if(Ja===l.ah.vertical?(ui=ca(),Ea=ui):ui=ea(),ui&&ui.placeable)break}else ui=ea()},_s=Dt.textAnchorOffsetStartIndex,Sr=Dt.textAnchorOffsetEndIndex;if(Sr===_s){const ea=(ca,Ja)=>{const Mn=this.collisionIndex.placeCollisionBox(ca,ve,ee,M,$,Ct,gt,P,Pe.predicate,Xt);return Mn&&Mn.placeable&&(this.markUsedOrientation(p,Ja,Dt),this.placedOrientations[Dt.crossTileID]=Ja),Mn};fr((()=>ea(qo,l.ah.horizontal)),(()=>{const ca=$t.verticalTextBox;return p.allowVerticalPlacement&&Dt.numVerticalGlyphVertices>0&&ca?ea(ca,l.ah.vertical):{box:null,offscreen:null}})),hr(ui&&ui.placeable)}else{let ea=l.aq[(wn=(oi=this.prevPlacement)===null||oi===void 0?void 0:oi.variableOffsets[Dt.crossTileID])===null||wn===void 0?void 0:wn.anchor];const ca=(Mn,Qs,Go)=>{const Wo=Mn.x2-Mn.x1,sm=Mn.y2-Mn.y1,Mg=Dt.textBoxScale,om=zt&&Ue==="never"?Qs:null;let bs=null,lm=ve==="never"?1:2,dc="never";ea&&lm++;for(let Ul=0;Ul<lm;Ul++){for(let hc=_s;hc<Sr;hc++){const fc=p.textAnchorOffsets.get(hc);if(ea&&fc.textAnchor!==ea)continue;const Zo=this.attemptAnchorPlacement(fc,Mn,Wo,sm,Mg,gt,Ct,ee,M,$,Pe,dc,Dt,p,Go,P,A,om,Xt);if(Zo&&(bs=Zo.placedGlyphBoxes,bs&&bs.placeable))return An=!0,wr=Zo.shift,bs}ea?ea=null:dc=ve}return m&&!bs&&(bs={box:this.collisionIndex.placeCollisionBox(qo,"always",ee,M,$,Ct,gt,P,Pe.predicate,Xt,new l.P(0,0)).box,offscreen:!1,placeable:!1}),bs};fr((()=>ca(qo,$t.iconBox,l.ah.horizontal)),(()=>{const Mn=$t.verticalTextBox;return p.allowVerticalPlacement&&(!ui||!ui.placeable)&&Dt.numVerticalGlyphVertices>0&&Mn?ca(Mn,$t.verticalIconBox,l.ah.vertical):{box:null,occluded:!0,offscreen:null}})),ui&&(An=ui.placeable,la=ui.offscreen);const Ja=hr(ui&&ui.placeable);if(!An&&this.prevPlacement){const Mn=this.prevPlacement.variableOffsets[Dt.crossTileID];Mn&&(this.variableOffsets[Dt.crossTileID]=Mn,this.markUsedJustification(p,Mn.anchor,Dt,Ja))}}}if(_a=ui,An=_a&&_a.placeable,la=_a&&_a.offscreen,Dt.useRuntimeCollisionCircles){const hr=p.text.placedSymbolArray.get(Dt.centerJustifiedTextSymbolIndex),fr=l.ai(p.textSizeData,be,hr),_s=v.get("text-padding");ua=this.collisionIndex.placeCollisionCircles(ve,hr,p.lineVertexArray,p.glyphOffsetArray,fr,M,$,j,U,m,Ct,Pe.predicate,Dt.collisionCircleDiameter,_s,P,Xt),ua.circles.length&&ua.collisionDetected&&!m&&l.w("Collisions detected, but collision boxes are not shown"),An=Oe||ua.circles.length>0&&!ua.collisionDetected,la=la&&ua.offscreen}if($t.iconFeatureIndex&&(uc=$t.iconFeatureIndex),$t.iconBox){const hr=fr=>this.collisionIndex.placeCollisionBox(fr,Ue,ee,M,$,Ct,gt,A,Pe.predicate,Xt,zt&&wr?wr:void 0);Ea&&Ea.placeable&&$t.verticalIconBox?(ba=hr($t.verticalIconBox),li=ba.placeable):(ba=hr($t.iconBox),li=ba.placeable),la=la&&ba.offscreen}const dr=Ae||Dt.numHorizontalGlyphVertices===0&&Dt.numVerticalGlyphVertices===0,cc=De||Dt.numIconVertices===0;dr||cc?cc?dr||(li=li&&An):An=li&&An:li=An=li&&An;const Jd=li&&ba.placeable;if(An&&_a.placeable&&this.collisionIndex.insertCollisionBox(_a.box,ve,v.get("text-ignore-placement"),p.bucketInstanceId,Ea&&Ea.placeable&&Ho?Ho:jr,Pe.ID),Jd&&this.collisionIndex.insertCollisionBox(ba.box,Ue,v.get("icon-ignore-placement"),p.bucketInstanceId,uc,Pe.ID),ua&&An&&this.collisionIndex.insertCollisionCircles(ua.circles,ve,v.get("text-ignore-placement"),p.bucketInstanceId,jr,Pe.ID),m&&this.storeCollisionData(p.bucketInstanceId,cn,$t,_a,ba,ua),Dt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Dt.crossTileID]=new Cn(An||Mt,li||Et,la||p.justReloaded),u[Dt.crossTileID]=!0};if(jt){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Dt=p.getSortedSymbolIndexes(this.transform.angle);for(let $t=Dt.length-1;$t>=0;--$t){const cn=Dt[$t];fn(p.symbolInstances.get(cn),p.collisionArrays[cn],cn)}}else for(let Dt=t.symbolInstanceStart;Dt<t.symbolInstanceEnd;Dt++)fn(p.symbolInstances.get(Dt),p.collisionArrays[Dt],Dt);if(m&&p.bucketInstanceId in this.collisionCircleArrays){const Dt=this.collisionCircleArrays[p.bucketInstanceId];l.as(Dt.invProjMatrix,M),Dt.viewportMatrix=this.collisionIndex.getViewportMatrix()}p.justReloaded=!1}storeCollisionData(t,u,m,p,v,P){if(m.textBox||m.iconBox){let A,M;this.collisionBoxArrays.has(t)?A=this.collisionBoxArrays.get(t):(A=new Map,this.collisionBoxArrays.set(t,A)),A.has(u)?M=A.get(u):(M={text:null,icon:null},A.set(u,M)),m.textBox&&(M.text=p.box),m.iconBox&&(M.icon=v.box)}if(P){let A=this.collisionCircleArrays[t];A===void 0&&(A=this.collisionCircleArrays[t]=new qn);for(let M=0;M<P.circles.length;M+=4)A.circles.push(P.circles[M+0]),A.circles.push(P.circles[M+1]),A.circles.push(P.circles[M+2]),A.circles.push(P.collisionDetected?1:0)}}markUsedJustification(t,u,m,p){let v;v=p===l.ah.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[l.at(u)];const P=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const A of P)A>=0&&(t.text.placedSymbolArray.get(A).crossTileID=v>=0&&A!==v?0:m.crossTileID)}markUsedOrientation(t,u,m){const p=u===l.ah.horizontal||u===l.ah.horizontalOnly?u:0,v=u===l.ah.vertical?u:0,P=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const A of P)t.text.placedSymbolArray.get(A).placedOrientation=p;m.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let m=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const p=u?u.symbolFadeChange(t):1,v=u?u.opacities:{},P=u?u.variableOffsets:{},A=u?u.placedOrientations:{};for(const M in this.placements){const $=this.placements[M],j=v[M];j?(this.opacities[M]=new _i(j,p,$.text,$.icon),m=m||$.text!==j.text.placed||$.icon!==j.icon.placed):(this.opacities[M]=new _i(null,p,$.text,$.icon,$.skipFade),m=m||$.text||$.icon)}for(const M in v){const $=v[M];if(!this.opacities[M]){const j=new _i($,p,!1,!1);j.isHidden()||(this.opacities[M]=j,m=m||$.text.placed||$.icon.placed)}}for(const M in P)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=P[M]);for(const M in A)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=A[M]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:t)}updateLayerOpacities(t,u){const m={};for(const p of u){const v=p.getBucket(t);v&&p.latestFeatureIndex&&t.id===v.layerIds[0]&&this.updateBucketOpacities(v,p.tileID,m,p.collisionBoxArray)}}updateBucketOpacities(t,u,m,p){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const v=t.layers[0],P=v.layout,A=new _i(null,0,!1,!1,!0),M=P.get("text-allow-overlap"),$=P.get("icon-allow-overlap"),j=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),U=P.get("text-rotation-alignment")==="map",ee=P.get("text-pitch-alignment")==="map",de=P.get("icon-text-fit")!=="none",me=new _i(null,0,M&&($||!t.hasIconData()||P.get("icon-optional")),$&&(M||!t.hasTextData()||P.get("text-optional")),!0);!t.collisionArrays&&p&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(p);const be=(Ae,De,ve)=>{for(let Oe=0;Oe<De/4;Oe++)Ae.opacityVertexArray.emplaceBack(ve);Ae.hasVisibleVertices=Ae.hasVisibleVertices||ve!==ko},Pe=this.collisionBoxArrays.get(t.bucketInstanceId);for(let Ae=0;Ae<t.symbolInstances.length;Ae++){const De=t.symbolInstances.get(Ae),{numHorizontalGlyphVertices:ve,numVerticalGlyphVertices:Oe,crossTileID:Ue}=De;let Je=this.opacities[Ue];m[Ue]?Je=A:Je||(Je=me,this.opacities[Ue]=Je),m[Ue]=!0;const gt=De.numIconVertices>0,Ct=this.placedOrientations[De.crossTileID],zt=Ct===l.ah.vertical,jt=Ct===l.ah.horizontal||Ct===l.ah.horizontalOnly;if(ve>0||Oe>0){const Et=Ka(Je.text);be(t.text,ve,zt?ko:Et),be(t.text,Oe,jt?ko:Et);const Xt=Je.text.isHidden();[De.rightJustifiedTextSymbolIndex,De.centerJustifiedTextSymbolIndex,De.leftJustifiedTextSymbolIndex].forEach(($t=>{$t>=0&&(t.text.placedSymbolArray.get($t).hidden=Xt||zt?1:0)})),De.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(De.verticalPlacedTextSymbolIndex).hidden=Xt||jt?1:0);const fn=this.variableOffsets[De.crossTileID];fn&&this.markUsedJustification(t,fn.anchor,De,Ct);const Dt=this.placedOrientations[De.crossTileID];Dt&&(this.markUsedJustification(t,"left",De,Dt),this.markUsedOrientation(t,Dt,De))}if(gt){const Et=Ka(Je.icon),Xt=!(de&&De.verticalPlacedIconSymbolIndex&&zt);De.placedIconSymbolIndex>=0&&(be(t.icon,De.numIconVertices,Xt?Et:ko),t.icon.placedSymbolArray.get(De.placedIconSymbolIndex).hidden=Je.icon.isHidden()),De.verticalPlacedIconSymbolIndex>=0&&(be(t.icon,De.numVerticalIconVertices,Xt?ko:Et),t.icon.placedSymbolArray.get(De.verticalPlacedIconSymbolIndex).hidden=Je.icon.isHidden())}const Mt=Pe&&Pe.has(Ae)?Pe.get(Ae):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const Et=t.collisionArrays[Ae];if(Et){let Xt=new l.P(0,0);if(Et.textBox||Et.verticalTextBox){let fn=!0;if(j){const Dt=this.variableOffsets[Ue];Dt?(Xt=Qi(Dt.anchor,Dt.width,Dt.height,Dt.textOffset,Dt.textBoxScale),U&&Xt._rotate(ee?this.transform.angle:-this.transform.angle)):fn=!1}if(Et.textBox||Et.verticalTextBox){let Dt;Et.textBox&&(Dt=zt),Et.verticalTextBox&&(Dt=jt),So(t.textCollisionBox.collisionVertexArray,Je.text.placed,!fn||Dt,Mt.text,Xt.x,Xt.y)}}if(Et.iconBox||Et.verticalIconBox){const fn=!!(!jt&&Et.verticalIconBox);let Dt;Et.iconBox&&(Dt=fn),Et.verticalIconBox&&(Dt=!fn),So(t.iconCollisionBox.collisionVertexArray,Je.icon.placed,Dt,Mt.icon,de?Xt.x:0,de?Xt.y:0)}}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);if(t.bucketInstanceId in this.collisionCircleArrays){const Ae=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=Ae.invProjMatrix,t.placementViewportMatrix=Ae.viewportMatrix,t.collisionCircleArray=Ae.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,u){const m=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*m>t}setStale(){this.stale=!0}}function So(y,t,u,m,p,v){m&&m.length!==0||(m=[0,0,0,0]);const P=m[0]-yn,A=m[1]-yn,M=m[2]-yn,$=m[3]-yn;y.emplaceBack(t?1:0,u?1:0,p||0,v||0,P,A),y.emplaceBack(t?1:0,u?1:0,p||0,v||0,M,A),y.emplaceBack(t?1:0,u?1:0,p||0,v||0,M,$),y.emplaceBack(t?1:0,u?1:0,p||0,v||0,P,$)}const Gn=Math.pow(2,25),ud=Math.pow(2,24),cd=Math.pow(2,17),Wa=Math.pow(2,16),Za=Math.pow(2,9),rg=Math.pow(2,8),or=Math.pow(2,1);function Ka(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const t=y.placed?1:0,u=Math.floor(127*y.opacity);return u*Gn+t*ud+u*cd+t*Wa+u*Za+t*rg+u*or+t}const ko=0;function Ns(){return{isOccluded:(y,t,u)=>!1,getPitchedTextCorrection:(y,t,u)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(y,t,u,m){throw new Error("Not implemented.")},translatePosition:(y,t,u,m)=>(function(p,v,P,A,M=!1){if(!P[0]&&!P[1])return[0,0];const $=M?A==="map"?p.angle:0:A==="viewport"?-p.angle:0;if($){const j=Math.sin($),U=Math.cos($);P=[P[0]*U-P[1]*j,P[0]*j+P[1]*U]}return[M?P[0]:Tn(v,P[0],p.zoom),M?P[1]:Tn(v,P[1],p.zoom)]})(y,t,u,m),getCircleRadiusCorrection:y=>1}}class Li{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,u,m,p,v){const P=this._bucketParts;for(;this._currentTileIndex<t.length;)if(u.getBucketParts(P,p,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort(((A,M)=>A.sortKey-M.sortKey)));this._currentPartIndex<P.length;)if(u.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,v())return!0;return!1}}class kl{constructor(t,u,m,p,v,P,A,M){this.placement=new ya(t,Ns(),u,P,A,M),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(t,u,m){const p=k.now(),v=()=>!this._forceFullPlacement&&k.now()-p>2;for(;this._currentPlacementIndex>=0;){const P=u[t[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=A)&&(!P.maxzoom||P.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new Li(P)),this._inProgressLayer.continuePlacement(m[P.source],this.placement,this._showCollisionBoxes,P,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const vr=512/l.X/2;class Mi{constructor(t,u,m){this.tileID=t,this.bucketInstanceId=m,this._symbolsByKey={};const p=new Map;for(let v=0;v<u.length;v++){const P=u.get(v),A=P.key,M=p.get(A);M?M.push(P):p.set(A,[P])}for(const[v,P]of p){const A={positions:P.map((M=>({x:Math.floor(M.anchorX*vr),y:Math.floor(M.anchorY*vr)}))),crossTileIDs:P.map((M=>M.crossTileID))};if(A.positions.length>128){const M=new l.av(A.positions.length,16,Uint16Array);for(const{x:$,y:j}of A.positions)M.add($,j);M.finish(),delete A.positions,A.index=M}this._symbolsByKey[v]=A}}getScaledCoordinates(t,u){const{x:m,y:p,z:v}=this.tileID.canonical,{x:P,y:A,z:M}=u.canonical,$=vr/Math.pow(2,M-v),j=(A*l.X+t.anchorY)*$,U=p*l.X*vr;return{x:Math.floor((P*l.X+t.anchorX)*$-m*l.X*vr),y:Math.floor(j-U)}}findMatches(t,u,m){const p=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let v=0;v<t.length;v++){const P=t.get(v);if(P.crossTileID)continue;const A=this._symbolsByKey[P.key];if(!A)continue;const M=this.getScaledCoordinates(P,u);if(A.index){const $=A.index.range(M.x-p,M.y-p,M.x+p,M.y+p).sort();for(const j of $){const U=A.crossTileIDs[j];if(!m[U]){m[U]=!0,P.crossTileID=U;break}}}else if(A.positions)for(let $=0;$<A.positions.length;$++){const j=A.positions[$],U=A.crossTileIDs[$];if(Math.abs(j.x-M.x)<=p&&Math.abs(j.y-M.y)<=p&&!m[U]){m[U]=!0,P.crossTileID=U;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:t})=>t))}}class Du{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class yr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const u=Math.round((t-this.lng)/360);if(u!==0)for(const m in this.indexes){const p=this.indexes[m],v={};for(const P in p){const A=p[P];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+u),v[A.tileID.key]=A}this.indexes[m]=v}this.lng=t}addBucket(t,u,m){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let v=0;v<u.symbolInstances.length;v++)u.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const p=this.usedCrossTileIDs[t.overscaledZ];for(const v in this.indexes){const P=this.indexes[v];if(Number(v)>t.overscaledZ)for(const A in P){const M=P[A];M.tileID.isChildOf(t)&&M.findMatches(u.symbolInstances,t,p)}else{const A=P[t.scaledTo(Number(v)).key];A&&A.findMatches(u.symbolInstances,t,p)}}for(let v=0;v<u.symbolInstances.length;v++){const P=u.symbolInstances.get(v);P.crossTileID||(P.crossTileID=m.generate(),p[P.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Mi(t,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(t,u){for(const m of u.getCrossTileIDsLists())for(const p of m)delete this.usedCrossTileIDs[t][p]}removeStaleBuckets(t){let u=!1;for(const m in this.indexes){const p=this.indexes[m];for(const v in p)t[p[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,p[v]),delete p[v],u=!0)}return u}}class dd{constructor(){this.layerIndexes={},this.crossTileIDs=new Du,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,u,m){let p=this.layerIndexes[t.id];p===void 0&&(p=this.layerIndexes[t.id]=new yr);let v=!1;const P={};p.handleWrapJump(m);for(const A of u){const M=A.getBucket(t);M&&t.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(A.tileID,M,this.crossTileIDs)&&(v=!0),P[M.bucketInstanceId]=!0)}return p.removeStaleBuckets(P)&&(v=!0),v}pruneUnusedLayers(t){const u={};t.forEach((m=>{u[m]=!0}));for(const m in this.layerIndexes)u[m]||delete this.layerIndexes[m]}}const _r=(y,t)=>l.t(y,t&&t.filter((u=>u.identifier!=="source.canvas"))),sg=l.aw();class Vu extends l.E{constructor(t,u={}){super(),this._rtlPluginLoaded=()=>{for(const m in this.sourceCaches){const p=this.sourceCaches[m].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[m].reload()}},this.map=t,this.dispatcher=new ft(rt(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",((m,p)=>this.getGlyphs(m,p))),this.dispatcher.registerMessageHandler("GI",((m,p)=>this.getImages(m,p))),this.imageManager=new pe,this.imageManager.setEventedParent(this),this.glyphManager=new Ye(t._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Be(256,512),this.crossTileSymbolIndex=new dd,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",l.ay()),Ei().on(mt,this._rtlPluginLoaded),this.on("data",(m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const p=this.sourceCaches[m.sourceId];if(!p)return;const v=p.getSource();if(v&&v.vectorLayerIds)for(const P in this._layers){const A=this._layers[P];A.source===v.id&&this._validateLayer(A)}}))}loadURL(t,u={},m){this.fire(new l.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const p=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;const v=this._loadStyleRequest;l.h(p,this._loadStyleRequest).then((P=>{this._loadStyleRequest=null,this._load(P.data,u,m)})).catch((P=>{this._loadStyleRequest=null,P&&!v.signal.aborted&&this.fire(new l.j(P))}))}loadJSON(t,u={},m){this.fire(new l.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,k.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(t,u,m)})).catch((()=>{}))}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(sg,{validate:!1})}_load(t,u,m){var p;const v=u.transformStyle?u.transformStyle(m,t):t;if(!u.validate||!_r(this,l.u(v))){this._loaded=!0,this.stylesheet=v;for(const P in v.sources)this.addSource(P,v.sources[P],{validate:!1});v.sprite?this._loadSprite(v.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(v.glyphs),this._createLayers(),this.light=new Me(this.stylesheet.light),this.sky=new Fe(this.stylesheet.sky),this.map.setTerrain((p=this.stylesheet.terrain)!==null&&p!==void 0?p:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const t=l.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",t),this._order=t.map((u=>u.id)),this._layers={},this._serializedLayers=null;for(const u of t){const m=l.aA(u);m.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=m}}_loadSprite(t,u=!1,m=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(v,P,A,M){return l._(this,void 0,void 0,(function*(){const $=re(v),j=A>1?"@2x":"",U={},ee={};for(const{id:de,url:me}of $){const be=P.transformRequest(ie(me,j,".json"),"SpriteJSON");U[de]=l.h(be,M);const Pe=P.transformRequest(ie(me,j,".png"),"SpriteImage");ee[de]=Z.getImage(Pe,M)}return yield Promise.all([...Object.values(U),...Object.values(ee)]),(function(de,me){return l._(this,void 0,void 0,(function*(){const be={};for(const Pe in de){be[Pe]={};const Ae=k.getImageCanvasContext((yield me[Pe]).data),De=(yield de[Pe]).data;for(const ve in De){const{width:Oe,height:Ue,x:Je,y:gt,sdf:Ct,pixelRatio:zt,stretchX:jt,stretchY:Mt,content:Et,textFitWidth:Xt,textFitHeight:fn}=De[ve];be[Pe][ve]={data:null,pixelRatio:zt,sdf:Ct,stretchX:jt,stretchY:Mt,content:Et,textFitWidth:Xt,textFitHeight:fn,spriteData:{width:Oe,height:Ue,x:Je,y:gt,context:Ae}}}}return be}))})(U,ee)}))})(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((v=>{if(this._spriteRequest=null,v)for(const P in v){this._spritesImagesIds[P]=[];const A=this._spritesImagesIds[P]?this._spritesImagesIds[P].filter((M=>!(M in v))):[];for(const M of A)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in v[P]){const $=P==="default"?M:`${P}:${M}`;this._spritesImagesIds[P].push($),$ in this.imageManager.images?this.imageManager.updateImage($,v[P][M],!1):this.imageManager.addImage($,v[P][M]),u&&(this._changedImages[$]=!0)}}})).catch((v=>{this._spriteRequest=null,p=v,this.fire(new l.j(p))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),m&&m(p)}))}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(t){const u=this.sourceCaches[t.source];if(!u)return;const m=t.sourceLayer;if(!m)return;const p=u.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(m)===-1)&&this.fire(new l.j(new Error(`Source layer "${m}" does not exist on source "${p.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,u=!1){const m=this._serializedAllLayers();if(!t||t.length===0)return Object.values(u?l.aB(m):m);const p=[];for(const v of t)if(m[v]){const P=u?l.aB(m[v]):m[v];p.push(P)}return p}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const u=Object.keys(this._layers);for(const m of u){const p=this._layers[m];p.type!=="custom"&&(t[m]=p.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const u=this._changed;if(u){const p=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(p.length||v.length)&&this._updateWorkerLayers(p,v);for(const P in this._updatedSources){const A=this._updatedSources[P];if(A==="reload")this._reloadSource(P);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(P)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}const m={};for(const p in this.sourceCaches){const v=this.sourceCaches[p];m[p]=v.used,v.used=!1}for(const p of this._order){const v=this._layers[p];v.recalculate(t,this._availableImages),!v.isHidden(t.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const p in m){const v=this.sourceCaches[p];!!m[p]!=!!v.used&&v.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(t),this.sky.recalculate(t),this.z=t.zoom,u&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,u={}){var m;this._checkLoaded();const p=this.serialize();if(t=u.transformStyle?u.transformStyle(p,t):t,((m=u.validate)===null||m===void 0||m)&&_r(this,l.u(t)))return!1;(t=l.aB(t)).layers=l.az(t.layers);const v=l.aC(p,t),P=this._getOperationsToPerform(v);if(P.unimplemented.length>0)throw new Error(`Unimplemented: ${P.unimplemented.join(", ")}.`);if(P.operations.length===0)return!1;for(const A of P.operations)A();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){const u=[],m=[];for(const p of t)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":u.push((()=>this.addLayer.apply(this,p.args)));break;case"removeLayer":u.push((()=>this.removeLayer.apply(this,p.args)));break;case"setPaintProperty":u.push((()=>this.setPaintProperty.apply(this,p.args)));break;case"setLayoutProperty":u.push((()=>this.setLayoutProperty.apply(this,p.args)));break;case"setFilter":u.push((()=>this.setFilter.apply(this,p.args)));break;case"addSource":u.push((()=>this.addSource.apply(this,p.args)));break;case"removeSource":u.push((()=>this.removeSource.apply(this,p.args)));break;case"setLayerZoomRange":u.push((()=>this.setLayerZoomRange.apply(this,p.args)));break;case"setLight":u.push((()=>this.setLight.apply(this,p.args)));break;case"setGeoJSONSourceData":u.push((()=>this.setGeoJSONSourceData.apply(this,p.args)));break;case"setGlyphs":u.push((()=>this.setGlyphs.apply(this,p.args)));break;case"setSprite":u.push((()=>this.setSprite.apply(this,p.args)));break;case"setSky":u.push((()=>this.setSky.apply(this,p.args)));break;case"setTerrain":u.push((()=>this.map.setTerrain.apply(this,p.args)));break;case"setTransition":u.push((()=>{}));break;default:m.push(p.command)}return{operations:u,unimplemented:m}}addImage(t,u){if(this.getImage(t))return this.fire(new l.j(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,u),this._afterImageUpdated(t)}updateImage(t,u){this.imageManager.updateImage(t,u)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new l.j(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,u,m={}){if(this._checkLoaded(),this.sourceCaches[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.u.source,`sources.${t}`,u,null,m))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const p=this.sourceCaches[t]=new Jt(t,u,this.dispatcher);p.style=this,p.setEventedParent(this,(()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:t}))),p.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===t)return this.fire(new l.j(new Error(`Source "${t}" cannot be removed while layer "${m}" is using it.`)));const u=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],u.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,u){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const m=this.sourceCaches[t].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(u),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,u,m={}){this._checkLoaded();const p=t.id;if(this.getLayer(p))return void this.fire(new l.j(new Error(`Layer "${p}" already exists on this map.`)));let v;if(t.type==="custom"){if(_r(this,l.aD(t)))return;v=l.aA(t)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(p,t.source),t=l.aB(t),t=l.e(t,{source:p})),this._validate(l.u.layer,`layers.${p}`,t,{arrayIndex:-1},m))return;v=l.aA(t),this._validateLayer(v),v.setEventedParent(this,{layer:{id:p}})}const P=u?this._order.indexOf(u):this._order.length;if(u&&P===-1)this.fire(new l.j(new Error(`Cannot add layer "${p}" before non-existing layer "${u}".`)));else{if(this._order.splice(P,0,p),this._layerOrderChanged=!0,this._layers[p]=v,this._removedLayers[p]&&v.source&&v.type!=="custom"){const A=this._removedLayers[p];delete this._removedLayers[p],A.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(t,u){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new l.j(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===u)return;const m=this._order.indexOf(t);this._order.splice(m,1);const p=u?this._order.indexOf(u):this._order.length;u&&p===-1?this.fire(new l.j(new Error(`Cannot move layer "${t}" before non-existing layer "${u}".`))):(this._order.splice(p,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const u=this._layers[t];if(!u)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${t}".`)));u.setEventedParent(null);const m=this._order.indexOf(t);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=u,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],u.onRemove&&u.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,u,m){this._checkLoaded();const p=this.getLayer(t);p?p.minzoom===u&&p.maxzoom===m||(u!=null&&(p.minzoom=u),m!=null&&(p.maxzoom=m),this._updateLayer(p)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,u,m={}){this._checkLoaded();const p=this.getLayer(t);if(p){if(!l.aE(p.filter,u))return u==null?(p.filter=void 0,void this._updateLayer(p)):void(this._validate(l.u.filter,`layers.${p.id}.filter`,u,null,m)||(p.filter=l.aB(u),this._updateLayer(p)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return l.aB(this.getLayer(t).filter)}setLayoutProperty(t,u,m,p={}){this._checkLoaded();const v=this.getLayer(t);v?l.aE(v.getLayoutProperty(u),m)||(v.setLayoutProperty(u,m,p),this._updateLayer(v)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,u){const m=this.getLayer(t);if(m)return m.getLayoutProperty(u);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,u,m,p={}){this._checkLoaded();const v=this.getLayer(t);v?l.aE(v.getPaintProperty(u),m)||(v.setPaintProperty(u,m,p)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[t]=!0,this._serializedLayers=null):this.fire(new l.j(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,u){return this.getLayer(t).getPaintProperty(u)}setFeatureState(t,u){this._checkLoaded();const m=t.source,p=t.sourceLayer,v=this.sourceCaches[m];if(v===void 0)return void this.fire(new l.j(new Error(`The source '${m}' does not exist in the map's style.`)));const P=v.getSource().type;P==="geojson"&&p?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||p?(t.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),v.setFeatureState(p,t.id,u)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,u){this._checkLoaded();const m=t.source,p=this.sourceCaches[m];if(p===void 0)return void this.fire(new l.j(new Error(`The source '${m}' does not exist in the map's style.`)));const v=p.getSource().type,P=v==="vector"?t.sourceLayer:void 0;v!=="vector"||P?u&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(P,t.id,u):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const u=t.source,m=t.sourceLayer,p=this.sourceCaches[u];if(p!==void 0)return p.getSource().type!=="vector"||m?(t.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),p.getFeatureState(m,t.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=l.aF(this.sourceCaches,(v=>v.serialize())),u=this._serializeByIds(this._order,!0),m=this.map.getTerrain()||void 0,p=this.stylesheet;return l.aG({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,sources:t,layers:u,terrain:m},(v=>v!==void 0))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.sourceCaches[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const u=P=>this._layers[P].type==="fill-extrusion",m={},p=[];for(let P=this._order.length-1;P>=0;P--){const A=this._order[P];if(u(A)){m[A]=P;for(const M of t){const $=M[A];if($)for(const j of $)p.push(j)}}}p.sort(((P,A)=>A.intersectionZ-P.intersectionZ));const v=[];for(let P=this._order.length-1;P>=0;P--){const A=this._order[P];if(u(A))for(let M=p.length-1;M>=0;M--){const $=p[M].feature;if(m[$.layer.id]<P)break;v.push($),p.pop()}else for(const M of t){const $=M[A];if($)for(const j of $)v.push(j.feature)}}return v}queryRenderedFeatures(t,u,m){u&&u.filter&&this._validate(l.u.filter,"queryRenderedFeatures.filter",u.filter,null,u);const p={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const A of u.layers){const M=this._layers[A];if(!M)return this.fire(new l.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];p[M.source]=!0}}const v=[];u.availableImages=this._availableImages;const P=this._serializedAllLayers();for(const A in this.sourceCaches)u.layers&&!p[A]||v.push(se(this.sourceCaches[A],this._layers,P,t,u,m));return this.placement&&v.push((function(A,M,$,j,U,ee,de){const me={},be=ee.queryRenderedSymbols(j),Pe=[];for(const Ae of Object.keys(be).map(Number))Pe.push(de[Ae]);Pe.sort(Se);for(const Ae of Pe){const De=Ae.featureIndex.lookupSymbolFeatures(be[Ae.bucketInstanceId],M,Ae.bucketIndex,Ae.sourceLayerIndex,U.filter,U.layers,U.availableImages,A);for(const ve in De){const Oe=me[ve]=me[ve]||[],Ue=De[ve];Ue.sort(((Je,gt)=>{const Ct=Ae.featureSortOrder;if(Ct){const zt=Ct.indexOf(Je.featureIndex);return Ct.indexOf(gt.featureIndex)-zt}return gt.featureIndex-Je.featureIndex}));for(const Je of Ue)Oe.push(Je)}}for(const Ae in me)me[Ae].forEach((De=>{const ve=De.feature,Oe=$[A[Ae].source].getFeatureState(ve.layer["source-layer"],ve.id);ve.source=ve.layer.source,ve.layer["source-layer"]&&(ve.sourceLayer=ve.layer["source-layer"]),ve.state=Oe}));return me})(this._layers,P,this.sourceCaches,t,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(t,u){u&&u.filter&&this._validate(l.u.filter,"querySourceFeatures.filter",u.filter,null,u);const m=this.sourceCaches[t];return m?(function(p,v){const P=p.getRenderableIds().map(($=>p.getTileByID($))),A=[],M={};for(let $=0;$<P.length;$++){const j=P[$],U=j.tileID.canonical.key;M[U]||(M[U]=!0,j.querySourceFeatures(A,v))}return A})(m,u):[]}getLight(){return this.light.getLight()}setLight(t,u={}){this._checkLoaded();const m=this.light.getLight();let p=!1;for(const P in t)if(!l.aE(t[P],m[P])){p=!0;break}if(!p)return;const v={now:k.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,u),this.light.updateTransitions(v)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,u={}){const m=this.getSky();let p=!1;if(!t&&!m)return;if(t&&!m)p=!0;else if(!t&&m)p=!0;else for(const P in t)if(!l.aE(t[P],m[P])){p=!0;break}if(!p)return;const v={now:k.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,u),this.sky.updateTransitions(v)}_validate(t,u,m,p,v={}){return(!v||v.validate!==!1)&&_r(this,t.call(l.u,l.e({key:u,style:this.serialize(),value:m,styleSpec:l.v},p)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ei().off(mt,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const m=this.sourceCaches[u];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const u in this.sourceCaches)this.sourceCaches[u].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,u,m,p,v=!1){let P=!1,A=!1;const M={};for(const $ of this._order){const j=this._layers[$];if(j.type!=="symbol")continue;if(!M[j.source]){const ee=this.sourceCaches[j.source];M[j.source]=ee.getRenderableIds(!0).map((de=>ee.getTileByID(de))).sort(((de,me)=>me.tileID.overscaledZ-de.tileID.overscaledZ||(de.tileID.isLessThan(me.tileID)?-1:1)))}const U=this.crossTileSymbolIndex.addLayer(j,M[j.source],t.center.lng);P=P||U}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(k.now(),t.zoom))&&(this.pauseablePlacement=new kl(t,this.map.terrain,this._order,v,u,m,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(k.now()),A=!0),P&&this.pauseablePlacement.placement.setStale()),A||P)for(const $ of this._order){const j=this._layers[$];j.type==="symbol"&&this.placement.updateLayerOpacities(j,M[j.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(k.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,u){return l._(this,void 0,void 0,(function*(){const m=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[u.source];return p&&p.setDependencies(u.tileID.key,u.type,u.icons),m}))}getGlyphs(t,u){return l._(this,void 0,void 0,(function*(){const m=yield this.glyphManager.getGlyphs(u.stacks),p=this.sourceCaches[u.source];return p&&p.setDependencies(u.tileID.key,u.type,[""]),m}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,u={}){this._checkLoaded(),t&&this._validate(l.u.glyphs,"glyphs",t,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,u,m={},p){this._checkLoaded();const v=[{id:t,url:u}],P=[...re(this.stylesheet.sprite),...v];this._validate(l.u.sprite,"sprite",P,null,m)||(this.stylesheet.sprite=P,this._loadSprite(v,!0,p))}removeSprite(t){this._checkLoaded();const u=re(this.stylesheet.sprite);if(u.find((m=>m.id===t))){if(this._spritesImagesIds[t])for(const m of this._spritesImagesIds[t])this.imageManager.removeImage(m),this._changedImages[m]=!0;u.splice(u.findIndex((m=>m.id===t)),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return re(this.stylesheet.sprite)}setSprite(t,u={},m){this._checkLoaded(),t&&this._validate(l.u.sprite,"sprite",t,null,u)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,m):(this._unloadSprite(),m&&m(null)))}}var js=l.Y([{name:"a_pos",type:"Int16",components:2}]);const vs={prelude:Rn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Rn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Rn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Rn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Rn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Rn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Rn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Rn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Rn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Rn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Rn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Rn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Rn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Rn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Rn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Rn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Rn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Rn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Rn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Rn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Rn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Rn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Rn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Rn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Rn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Rn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Rn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Rn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Rn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Rn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Rn(y,t){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=t.match(/attribute ([\w]+) ([\w]+)/g),p=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=v?v.concat(p):p,A={};return{fragmentSource:y=y.replace(u,((M,$,j,U,ee)=>(A[ee]=!0,$==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
varying ${j} ${U} ${ee};
#else
uniform ${j} ${U} u_${ee};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ee}
    ${j} ${U} ${ee} = u_${ee};
#endif
`))),vertexSource:t=t.replace(u,((M,$,j,U,ee)=>{const de=U==="float"?"vec2":"vec4",me=ee.match(/color/)?"color":de;return A[ee]?$==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
attribute ${j} ${de} a_${ee};
varying ${j} ${U} ${ee};
#else
uniform ${j} ${U} u_${ee};
#endif
`:me==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = a_${ee};
#else
    ${j} ${U} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = unpack_mix_${me}(a_${ee}, u_${ee}_t);
#else
    ${j} ${U} ${ee} = u_${ee};
#endif
`:$==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
attribute ${j} ${de} a_${ee};
#else
uniform ${j} ${U} u_${ee};
#endif
`:me==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${j} ${U} ${ee} = a_${ee};
#else
    ${j} ${U} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${j} ${U} ${ee} = unpack_mix_${me}(a_${ee}, u_${ee}_t);
#else
    ${j} ${U} ${ee} = u_${ee};
#endif
`})),staticAttributes:m,staticUniforms:P}}class hd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,u,m,p,v,P,A,M,$){this.context=t;let j=this.boundPaintVertexBuffers.length!==p.length;for(let U=0;!j&&U<p.length;U++)this.boundPaintVertexBuffers[U]!==p[U]&&(j=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==m||j||this.boundIndexBuffer!==v||this.boundVertexOffset!==P||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==$?this.freshBind(u,m,p,v,P,A,M,$):(t.bindVertexArray.set(this.vao),A&&A.bind(),v&&v.dynamicDraw&&v.bind(),M&&M.bind(),$&&$.bind())}freshBind(t,u,m,p,v,P,A,M){const $=t.numAttributes,j=this.context,U=j.gl;this.vao&&this.destroy(),this.vao=j.createVertexArray(),j.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=p,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=M,u.enableAttributes(U,t);for(const ee of m)ee.enableAttributes(U,t);P&&P.enableAttributes(U,t),A&&A.enableAttributes(U,t),M&&M.enableAttributes(U,t),u.bind(),u.setVertexAttribPointers(U,t,v);for(const ee of m)ee.bind(),ee.setVertexAttribPointers(U,t,v);P&&(P.bind(),P.setVertexAttribPointers(U,t,v)),p&&p.bind(),A&&(A.bind(),A.setVertexAttribPointers(U,t,v)),M&&(M.bind(),M.setVertexAttribPointers(U,t,v)),j.currentNumAttributes=$}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const fd=(y,t,u,m,p)=>({u_matrix:y,u_texture:0,u_ele_delta:t,u_fog_matrix:u,u_fog_color:m?m.properties.get("fog-color"):l.aM.white,u_fog_ground_blend:m?m.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:m?m.calculateFogBlendOpacity(p):0,u_horizon_color:m?m.properties.get("horizon-color"):l.aM.white,u_horizon_fog_blend:m?m.properties.get("horizon-fog-blend"):1});function Co(y){const t=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;const m=y[u].split(" ");t.push(m.pop())}return t}class md{constructor(t,u,m,p,v,P){const A=t.gl;this.program=A.createProgram();const M=Co(u.staticAttributes),$=m?m.getBinderAttributes():[],j=M.concat($),U=vs.prelude.staticUniforms?Co(vs.prelude.staticUniforms):[],ee=u.staticUniforms?Co(u.staticUniforms):[],de=m?m.getBinderUniforms():[],me=U.concat(ee).concat(de),be=[];for(const Je of me)be.indexOf(Je)<0&&be.push(Je);const Pe=m?m.defines():[];v&&Pe.push("#define OVERDRAW_INSPECTOR;"),P&&Pe.push("#define TERRAIN3D;");const Ae=Pe.concat(vs.prelude.fragmentSource,u.fragmentSource).join(`
`),De=Pe.concat(vs.prelude.vertexSource,u.vertexSource).join(`
`),ve=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(ve,Ae),A.compileShader(ve),!A.getShaderParameter(ve,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(ve)}`);A.attachShader(this.program,ve);const Oe=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Oe,De),A.compileShader(Oe),!A.getShaderParameter(Oe,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(Oe)}`);A.attachShader(this.program,Oe),this.attributes={};const Ue={};this.numAttributes=j.length;for(let Je=0;Je<this.numAttributes;Je++)j[Je]&&(A.bindAttribLocation(this.program,Je,j[Je]),this.attributes[j[Je]]=Je);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(Oe),A.deleteShader(ve);for(let Je=0;Je<be.length;Je++){const gt=be[Je];if(gt&&!Ue[gt]){const Ct=A.getUniformLocation(this.program,gt);Ct&&(Ue[gt]=Ct)}}this.fixedUniforms=p(t,Ue),this.terrainUniforms=((Je,gt)=>({u_depth:new l.aH(Je,gt.u_depth),u_terrain:new l.aH(Je,gt.u_terrain),u_terrain_dim:new l.aI(Je,gt.u_terrain_dim),u_terrain_matrix:new l.aJ(Je,gt.u_terrain_matrix),u_terrain_unpack:new l.aK(Je,gt.u_terrain_unpack),u_terrain_exaggeration:new l.aI(Je,gt.u_terrain_exaggeration)}))(t,Ue),this.binderUniforms=m?m.getUniforms(t,Ue):[]}draw(t,u,m,p,v,P,A,M,$,j,U,ee,de,me,be,Pe,Ae,De){const ve=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(m),t.setStencilMode(p),t.setColorMode(v),t.setCullFace(P),M){t.activeTexture.set(ve.TEXTURE2),ve.bindTexture(ve.TEXTURE_2D,M.depthTexture),t.activeTexture.set(ve.TEXTURE3),ve.bindTexture(ve.TEXTURE_2D,M.texture);for(const Ue in this.terrainUniforms)this.terrainUniforms[Ue].set(M[Ue])}for(const Ue in this.fixedUniforms)this.fixedUniforms[Ue].set(A[Ue]);be&&be.setUniforms(t,this.binderUniforms,de,{zoom:me});let Oe=0;switch(u){case ve.LINES:Oe=2;break;case ve.TRIANGLES:Oe=3;break;case ve.LINE_STRIP:Oe=1}for(const Ue of ee.get()){const Je=Ue.vaos||(Ue.vaos={});(Je[$]||(Je[$]=new hd)).bind(t,this,j,be?be.getPaintVertexBuffers():[],U,Ue.vertexOffset,Pe,Ae,De),ve.drawElements(u,Ue.primitiveLength*Oe,ve.UNSIGNED_SHORT,Ue.primitiveOffset*Oe*2)}}}function zu(y,t,u){const m=1/Tn(u,1,t.transform.tileZoom),p=Math.pow(2,u.tileID.overscaledZ),v=u.tileSize*Math.pow(2,t.transform.tileZoom)/p,P=v*(u.tileID.canonical.x+u.tileID.wrap*p),A=v*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[m,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[P>>16,A>>16],u_pixel_coord_lower:[65535&P,65535&A]}}const Cl=(y,t,u,m)=>{const p=t.style.light,v=p.properties.get("position"),P=[v.x,v.y,v.z],A=(function(){var $=new l.A(9);return l.A!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[5]=0,$[6]=0,$[7]=0),$[0]=1,$[4]=1,$[8]=1,$})();p.properties.get("anchor")==="viewport"&&(function($,j){var U=Math.sin(j),ee=Math.cos(j);$[0]=ee,$[1]=U,$[2]=0,$[3]=-U,$[4]=ee,$[5]=0,$[6]=0,$[7]=0,$[8]=1})(A,-t.transform.angle),(function($,j,U){var ee=j[0],de=j[1],me=j[2];$[0]=ee*U[0]+de*U[3]+me*U[6],$[1]=ee*U[1]+de*U[4]+me*U[7],$[2]=ee*U[2]+de*U[5]+me*U[8]})(P,P,A);const M=p.properties.get("color");return{u_matrix:y,u_lightpos:P,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+u,u_opacity:m}},Lu=(y,t,u,m,p,v,P)=>l.e(Cl(y,t,u,m),zu(v,t,P),{u_height_factor:-Math.pow(2,p.overscaledZ)/P.tileSize/8}),Io=y=>({u_matrix:y}),Pf=(y,t,u,m)=>l.e(Io(y),zu(u,t,m)),og=(y,t)=>({u_matrix:y,u_world:t}),Tf=(y,t,u,m,p)=>l.e(Pf(y,t,u,m),{u_world:p}),lg=(y,t,u,m)=>{const p=y.transform;let v,P;if(m.paint.get("circle-pitch-alignment")==="map"){const A=Tn(u,1,p.zoom);v=!0,P=[A,A]}else v=!1,P=p.pixelsToGLUnits;return{u_camera_to_center_distance:p.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(t.posMatrix,u,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+v,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:P}},Us=(y,t,u)=>({u_matrix:y,u_inv_matrix:t,u_camera_to_center_distance:u.cameraToCenterDistance,u_viewport_size:[u.width,u.height]}),Il=(y,t,u=1)=>({u_matrix:y,u_color:t,u_overlay:0,u_overlay_scale:u}),Ta=y=>({u_matrix:y}),Aa=(y,t,u,m)=>({u_matrix:y,u_extrude_scale:Tn(t,1,u),u_intensity:m}),Bu=(y,t,u,m)=>{const p=l.H();l.aP(p,0,y.width,y.height,0,0,1);const v=y.context.gl;return{u_matrix:p,u_world:[v.drawingBufferWidth,v.drawingBufferHeight],u_image:u,u_color_ramp:m,u_opacity:t.paint.get("heatmap-opacity")}};function Ru(y,t){const u=Math.pow(2,t.canonical.z),m=t.canonical.y;return[new l.Z(0,m/u).toLngLat().lat,new l.Z(0,(m+1)/u).toLngLat().lat]}const Fu=(y,t,u,m)=>{const p=y.transform;return{u_matrix:Mf(y,t,u,m),u_ratio:1/Tn(t,1,p.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},Af=(y,t,u,m,p)=>l.e(Fu(y,t,u,p),{u_image:0,u_image_height:m}),Po=(y,t,u,m,p)=>{const v=y.transform,P=Ef(t,v);return{u_matrix:Mf(y,t,u,p),u_texsize:t.imageAtlasTexture.size,u_ratio:1/Tn(t,1,v.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[P,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},ug=(y,t,u,m,p,v)=>{const P=y.lineAtlas,A=Ef(t,y.transform),M=u.layout.get("line-cap")==="round",$=P.getDash(m.from,M),j=P.getDash(m.to,M),U=$.width*p.fromScale,ee=j.width*p.toScale;return l.e(Fu(y,t,u,v),{u_patternscale_a:[A/U,-$.height/2],u_patternscale_b:[A/ee,-j.height/2],u_sdfgamma:P.width/(256*Math.min(U,ee)*y.pixelRatio)/2,u_image:0,u_tex_y_a:$.y,u_tex_y_b:j.y,u_mix:p.t})};function Ef(y,t){return 1/Tn(y,1,t.tileZoom)}function Mf(y,t,u,m){return y.translatePosMatrix(m?m.posMatrix:t.tileID.posMatrix,t,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const cg=(y,t,u,m,p)=>{return{u_matrix:y,u_tl_parent:t,u_scale_parent:u,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(P=p.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(v=p.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:dg(p.paint.get("raster-hue-rotate"))};var v,P};function dg(y){y*=Math.PI/180;const t=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*t-u+1)/3,(Math.sqrt(3)*t-u+1)/3]}const Df=(y,t,u,m,p,v,P,A,M,$,j,U,ee,de)=>{const me=P.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:me.cameraToCenterDistance,u_pitch:me.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:me.width/me.height,u_fade_change:P.options.fadeDuration?P.symbolFadeChange:1,u_matrix:A,u_label_plane_matrix:M,u_coord_matrix:$,u_is_text:+U,u_pitch_with_map:+m,u_is_along_line:p,u_is_variable_anchor:v,u_texsize:ee,u_texture:0,u_translation:j,u_pitched_scale:de}},Pl=(y,t,u,m,p,v,P,A,M,$,j,U,ee,de,me)=>{const be=P.transform;return l.e(Df(y,t,u,m,p,v,P,A,M,$,j,U,ee,me),{u_gamma_scale:m?Math.cos(be._pitch)*be.cameraToCenterDistance:1,u_device_pixel_ratio:P.pixelRatio,u_is_halo:1})},pd=(y,t,u,m,p,v,P,A,M,$,j,U,ee,de)=>l.e(Pl(y,t,u,m,p,v,P,A,M,$,j,!0,U,!0,de),{u_texsize_icon:ee,u_texture_icon:1}),Ou=(y,t,u)=>({u_matrix:y,u_opacity:t,u_color:u}),gd=(y,t,u,m,p,v)=>l.e((function(P,A,M,$){const j=M.imageManager.getPattern(P.from.toString()),U=M.imageManager.getPattern(P.to.toString()),{width:ee,height:de}=M.imageManager.getPixelSize(),me=Math.pow(2,$.tileID.overscaledZ),be=$.tileSize*Math.pow(2,M.transform.tileZoom)/me,Pe=be*($.tileID.canonical.x+$.tileID.wrap*me),Ae=be*$.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:j.tl,u_pattern_br_a:j.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[ee,de],u_mix:A.t,u_pattern_size_a:j.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/Tn($,1,M.transform.tileZoom),u_pixel_coord_upper:[Pe>>16,Ae>>16],u_pixel_coord_lower:[65535&Pe,65535&Ae]}})(m,v,u,p),{u_matrix:y,u_opacity:t}),vd={fillExtrusion:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_lightpos:new l.aN(y,t.u_lightpos),u_lightintensity:new l.aI(y,t.u_lightintensity),u_lightcolor:new l.aN(y,t.u_lightcolor),u_vertical_gradient:new l.aI(y,t.u_vertical_gradient),u_opacity:new l.aI(y,t.u_opacity)}),fillExtrusionPattern:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_lightpos:new l.aN(y,t.u_lightpos),u_lightintensity:new l.aI(y,t.u_lightintensity),u_lightcolor:new l.aN(y,t.u_lightcolor),u_vertical_gradient:new l.aI(y,t.u_vertical_gradient),u_height_factor:new l.aI(y,t.u_height_factor),u_image:new l.aH(y,t.u_image),u_texsize:new l.aO(y,t.u_texsize),u_pixel_coord_upper:new l.aO(y,t.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(y,t.u_pixel_coord_lower),u_scale:new l.aN(y,t.u_scale),u_fade:new l.aI(y,t.u_fade),u_opacity:new l.aI(y,t.u_opacity)}),fill:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix)}),fillPattern:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_image:new l.aH(y,t.u_image),u_texsize:new l.aO(y,t.u_texsize),u_pixel_coord_upper:new l.aO(y,t.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(y,t.u_pixel_coord_lower),u_scale:new l.aN(y,t.u_scale),u_fade:new l.aI(y,t.u_fade)}),fillOutline:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_world:new l.aO(y,t.u_world)}),fillOutlinePattern:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_world:new l.aO(y,t.u_world),u_image:new l.aH(y,t.u_image),u_texsize:new l.aO(y,t.u_texsize),u_pixel_coord_upper:new l.aO(y,t.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(y,t.u_pixel_coord_lower),u_scale:new l.aN(y,t.u_scale),u_fade:new l.aI(y,t.u_fade)}),circle:(y,t)=>({u_camera_to_center_distance:new l.aI(y,t.u_camera_to_center_distance),u_scale_with_map:new l.aH(y,t.u_scale_with_map),u_pitch_with_map:new l.aH(y,t.u_pitch_with_map),u_extrude_scale:new l.aO(y,t.u_extrude_scale),u_device_pixel_ratio:new l.aI(y,t.u_device_pixel_ratio),u_matrix:new l.aJ(y,t.u_matrix)}),collisionBox:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_pixel_extrude_scale:new l.aO(y,t.u_pixel_extrude_scale)}),collisionCircle:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_inv_matrix:new l.aJ(y,t.u_inv_matrix),u_camera_to_center_distance:new l.aI(y,t.u_camera_to_center_distance),u_viewport_size:new l.aO(y,t.u_viewport_size)}),debug:(y,t)=>({u_color:new l.aL(y,t.u_color),u_matrix:new l.aJ(y,t.u_matrix),u_overlay:new l.aH(y,t.u_overlay),u_overlay_scale:new l.aI(y,t.u_overlay_scale)}),clippingMask:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix)}),heatmap:(y,t)=>({u_extrude_scale:new l.aI(y,t.u_extrude_scale),u_intensity:new l.aI(y,t.u_intensity),u_matrix:new l.aJ(y,t.u_matrix)}),heatmapTexture:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_world:new l.aO(y,t.u_world),u_image:new l.aH(y,t.u_image),u_color_ramp:new l.aH(y,t.u_color_ramp),u_opacity:new l.aI(y,t.u_opacity)}),hillshade:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_image:new l.aH(y,t.u_image),u_latrange:new l.aO(y,t.u_latrange),u_light:new l.aO(y,t.u_light),u_shadow:new l.aL(y,t.u_shadow),u_highlight:new l.aL(y,t.u_highlight),u_accent:new l.aL(y,t.u_accent)}),hillshadePrepare:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_image:new l.aH(y,t.u_image),u_dimension:new l.aO(y,t.u_dimension),u_zoom:new l.aI(y,t.u_zoom),u_unpack:new l.aK(y,t.u_unpack)}),line:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_ratio:new l.aI(y,t.u_ratio),u_device_pixel_ratio:new l.aI(y,t.u_device_pixel_ratio),u_units_to_pixels:new l.aO(y,t.u_units_to_pixels)}),lineGradient:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_ratio:new l.aI(y,t.u_ratio),u_device_pixel_ratio:new l.aI(y,t.u_device_pixel_ratio),u_units_to_pixels:new l.aO(y,t.u_units_to_pixels),u_image:new l.aH(y,t.u_image),u_image_height:new l.aI(y,t.u_image_height)}),linePattern:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_texsize:new l.aO(y,t.u_texsize),u_ratio:new l.aI(y,t.u_ratio),u_device_pixel_ratio:new l.aI(y,t.u_device_pixel_ratio),u_image:new l.aH(y,t.u_image),u_units_to_pixels:new l.aO(y,t.u_units_to_pixels),u_scale:new l.aN(y,t.u_scale),u_fade:new l.aI(y,t.u_fade)}),lineSDF:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_ratio:new l.aI(y,t.u_ratio),u_device_pixel_ratio:new l.aI(y,t.u_device_pixel_ratio),u_units_to_pixels:new l.aO(y,t.u_units_to_pixels),u_patternscale_a:new l.aO(y,t.u_patternscale_a),u_patternscale_b:new l.aO(y,t.u_patternscale_b),u_sdfgamma:new l.aI(y,t.u_sdfgamma),u_image:new l.aH(y,t.u_image),u_tex_y_a:new l.aI(y,t.u_tex_y_a),u_tex_y_b:new l.aI(y,t.u_tex_y_b),u_mix:new l.aI(y,t.u_mix)}),raster:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_tl_parent:new l.aO(y,t.u_tl_parent),u_scale_parent:new l.aI(y,t.u_scale_parent),u_buffer_scale:new l.aI(y,t.u_buffer_scale),u_fade_t:new l.aI(y,t.u_fade_t),u_opacity:new l.aI(y,t.u_opacity),u_image0:new l.aH(y,t.u_image0),u_image1:new l.aH(y,t.u_image1),u_brightness_low:new l.aI(y,t.u_brightness_low),u_brightness_high:new l.aI(y,t.u_brightness_high),u_saturation_factor:new l.aI(y,t.u_saturation_factor),u_contrast_factor:new l.aI(y,t.u_contrast_factor),u_spin_weights:new l.aN(y,t.u_spin_weights)}),symbolIcon:(y,t)=>({u_is_size_zoom_constant:new l.aH(y,t.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(y,t.u_is_size_feature_constant),u_size_t:new l.aI(y,t.u_size_t),u_size:new l.aI(y,t.u_size),u_camera_to_center_distance:new l.aI(y,t.u_camera_to_center_distance),u_pitch:new l.aI(y,t.u_pitch),u_rotate_symbol:new l.aH(y,t.u_rotate_symbol),u_aspect_ratio:new l.aI(y,t.u_aspect_ratio),u_fade_change:new l.aI(y,t.u_fade_change),u_matrix:new l.aJ(y,t.u_matrix),u_label_plane_matrix:new l.aJ(y,t.u_label_plane_matrix),u_coord_matrix:new l.aJ(y,t.u_coord_matrix),u_is_text:new l.aH(y,t.u_is_text),u_pitch_with_map:new l.aH(y,t.u_pitch_with_map),u_is_along_line:new l.aH(y,t.u_is_along_line),u_is_variable_anchor:new l.aH(y,t.u_is_variable_anchor),u_texsize:new l.aO(y,t.u_texsize),u_texture:new l.aH(y,t.u_texture),u_translation:new l.aO(y,t.u_translation),u_pitched_scale:new l.aI(y,t.u_pitched_scale)}),symbolSDF:(y,t)=>({u_is_size_zoom_constant:new l.aH(y,t.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(y,t.u_is_size_feature_constant),u_size_t:new l.aI(y,t.u_size_t),u_size:new l.aI(y,t.u_size),u_camera_to_center_distance:new l.aI(y,t.u_camera_to_center_distance),u_pitch:new l.aI(y,t.u_pitch),u_rotate_symbol:new l.aH(y,t.u_rotate_symbol),u_aspect_ratio:new l.aI(y,t.u_aspect_ratio),u_fade_change:new l.aI(y,t.u_fade_change),u_matrix:new l.aJ(y,t.u_matrix),u_label_plane_matrix:new l.aJ(y,t.u_label_plane_matrix),u_coord_matrix:new l.aJ(y,t.u_coord_matrix),u_is_text:new l.aH(y,t.u_is_text),u_pitch_with_map:new l.aH(y,t.u_pitch_with_map),u_is_along_line:new l.aH(y,t.u_is_along_line),u_is_variable_anchor:new l.aH(y,t.u_is_variable_anchor),u_texsize:new l.aO(y,t.u_texsize),u_texture:new l.aH(y,t.u_texture),u_gamma_scale:new l.aI(y,t.u_gamma_scale),u_device_pixel_ratio:new l.aI(y,t.u_device_pixel_ratio),u_is_halo:new l.aH(y,t.u_is_halo),u_translation:new l.aO(y,t.u_translation),u_pitched_scale:new l.aI(y,t.u_pitched_scale)}),symbolTextAndIcon:(y,t)=>({u_is_size_zoom_constant:new l.aH(y,t.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(y,t.u_is_size_feature_constant),u_size_t:new l.aI(y,t.u_size_t),u_size:new l.aI(y,t.u_size),u_camera_to_center_distance:new l.aI(y,t.u_camera_to_center_distance),u_pitch:new l.aI(y,t.u_pitch),u_rotate_symbol:new l.aH(y,t.u_rotate_symbol),u_aspect_ratio:new l.aI(y,t.u_aspect_ratio),u_fade_change:new l.aI(y,t.u_fade_change),u_matrix:new l.aJ(y,t.u_matrix),u_label_plane_matrix:new l.aJ(y,t.u_label_plane_matrix),u_coord_matrix:new l.aJ(y,t.u_coord_matrix),u_is_text:new l.aH(y,t.u_is_text),u_pitch_with_map:new l.aH(y,t.u_pitch_with_map),u_is_along_line:new l.aH(y,t.u_is_along_line),u_is_variable_anchor:new l.aH(y,t.u_is_variable_anchor),u_texsize:new l.aO(y,t.u_texsize),u_texsize_icon:new l.aO(y,t.u_texsize_icon),u_texture:new l.aH(y,t.u_texture),u_texture_icon:new l.aH(y,t.u_texture_icon),u_gamma_scale:new l.aI(y,t.u_gamma_scale),u_device_pixel_ratio:new l.aI(y,t.u_device_pixel_ratio),u_is_halo:new l.aH(y,t.u_is_halo),u_translation:new l.aO(y,t.u_translation),u_pitched_scale:new l.aI(y,t.u_pitched_scale)}),background:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_opacity:new l.aI(y,t.u_opacity),u_color:new l.aL(y,t.u_color)}),backgroundPattern:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_opacity:new l.aI(y,t.u_opacity),u_image:new l.aH(y,t.u_image),u_pattern_tl_a:new l.aO(y,t.u_pattern_tl_a),u_pattern_br_a:new l.aO(y,t.u_pattern_br_a),u_pattern_tl_b:new l.aO(y,t.u_pattern_tl_b),u_pattern_br_b:new l.aO(y,t.u_pattern_br_b),u_texsize:new l.aO(y,t.u_texsize),u_mix:new l.aI(y,t.u_mix),u_pattern_size_a:new l.aO(y,t.u_pattern_size_a),u_pattern_size_b:new l.aO(y,t.u_pattern_size_b),u_scale_a:new l.aI(y,t.u_scale_a),u_scale_b:new l.aI(y,t.u_scale_b),u_pixel_coord_upper:new l.aO(y,t.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(y,t.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aI(y,t.u_tile_units_to_pixels)}),terrain:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_texture:new l.aH(y,t.u_texture),u_ele_delta:new l.aI(y,t.u_ele_delta),u_fog_matrix:new l.aJ(y,t.u_fog_matrix),u_fog_color:new l.aL(y,t.u_fog_color),u_fog_ground_blend:new l.aI(y,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new l.aI(y,t.u_fog_ground_blend_opacity),u_horizon_color:new l.aL(y,t.u_horizon_color),u_horizon_fog_blend:new l.aI(y,t.u_horizon_fog_blend)}),terrainDepth:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_ele_delta:new l.aI(y,t.u_ele_delta)}),terrainCoords:(y,t)=>({u_matrix:new l.aJ(y,t.u_matrix),u_texture:new l.aH(y,t.u_texture),u_terrain_coords_id:new l.aI(y,t.u_terrain_coords_id),u_ele_delta:new l.aI(y,t.u_ele_delta)}),sky:(y,t)=>({u_sky_color:new l.aL(y,t.u_sky_color),u_horizon_color:new l.aL(y,t.u_horizon_color),u_horizon:new l.aI(y,t.u_horizon),u_sky_horizon_blend:new l.aI(y,t.u_sky_horizon_blend)})};class Or{constructor(t,u,m){this.context=t;const p=t.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const hg={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class yd{constructor(t,u,m,p){this.length=u.length,this.attributes=m,this.itemSize=u.bytesPerElement,this.dynamicDraw=p,this.context=t;const v=t.gl;this.buffer=v.createBuffer(),t.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,u){for(let m=0;m<this.attributes.length;m++){const p=u.attributes[this.attributes[m].name];p!==void 0&&t.enableVertexAttribArray(p)}}setVertexAttribPointers(t,u,m){for(let p=0;p<this.attributes.length;p++){const v=this.attributes[p],P=u.attributes[v.name];P!==void 0&&t.vertexAttribPointer(P,v.components,t[hg[v.type]],!1,this.itemSize,v.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Hs=new WeakMap;function ys(y){var t;if(Hs.has(y))return Hs.get(y);{const u=(t=y.getParameter(y.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return Hs.set(y,u),u}}class On{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class $u extends On{getDefault(){return l.aM.transparent}set(t){const u=this.current;(t.r!==u.r||t.g!==u.g||t.b!==u.b||t.a!==u.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class fg extends On{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class To extends On{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class mg extends On{getDefault(){return[!0,!0,!0,!0]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||t[3]!==u[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Vf extends On{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class pg extends On{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class zf extends On{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const u=this.current;(t.func!==u.func||t.ref!==u.ref||t.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class _d extends On{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Lf extends On{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=t,this.dirty=!1}}class Bf extends On{getDefault(){return[0,1]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Rf extends On{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=t,this.dirty=!1}}class Ff extends On{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class qs extends On{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.BLEND):u.disable(u.BLEND),this.current=t,this.dirty=!1}}class Of extends On{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class gg extends On{getDefault(){return l.aM.transparent}set(t){const u=this.current;(t.r!==u.r||t.g!==u.g||t.b!==u.b||t.a!==u.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class $f extends On{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class Tl extends On{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=t,this.dirty=!1}}class vg extends On{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class Nu extends On{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class yg extends On{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class _g extends On{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class Nf extends On{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||t[3]!==u[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class jf extends On{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class Uf extends On{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class bd extends On{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Hf extends On{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ju extends On{getDefault(){return null}set(t){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ts extends On{getDefault(){return null}set(t){var u;if(t===this.current&&!this.dirty)return;const m=this.gl;ys(m)?m.bindVertexArray(t):(u=m.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class xd extends On{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class wd extends On{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class Sd extends On{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Uu extends On{constructor(t,u){super(t),this.context=t,this.parent=u}getDefault(){return null}}class kd extends Uu{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Gs extends Uu{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Cd extends Uu{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class bg{constructor(t,u,m,p,v){this.context=t,this.width=u,this.height=m;const P=t.gl,A=this.framebuffer=P.createFramebuffer();if(this.colorAttachment=new kd(t,A),p)this.depthAttachment=v?new Cd(t,A):new Gs(t,A);else if(v)throw new Error("Stencil cannot be set without depth");if(P.checkFramebufferStatus(P.FRAMEBUFFER)!==P.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const t=this.context.gl,u=this.colorAttachment.get();if(u&&t.deleteTexture(u),this.depthAttachment){const m=this.depthAttachment.get();m&&t.deleteRenderbuffer(m)}t.deleteFramebuffer(this.framebuffer)}}class Ii{constructor(t,u,m){this.blendFunction=t,this.blendColor=u,this.mask=m}}Ii.Replace=[1,0],Ii.disabled=new Ii(Ii.Replace,l.aM.transparent,[!1,!1,!1,!1]),Ii.unblended=new Ii(Ii.Replace,l.aM.transparent,[!0,!0,!0,!0]),Ii.alphaBlended=new Ii([1,771],l.aM.transparent,[!0,!0,!0,!0]);class xg{constructor(t){var u,m;if(this.gl=t,this.clearColor=new $u(this),this.clearDepth=new fg(this),this.clearStencil=new To(this),this.colorMask=new mg(this),this.depthMask=new Vf(this),this.stencilMask=new pg(this),this.stencilFunc=new zf(this),this.stencilOp=new _d(this),this.stencilTest=new Lf(this),this.depthRange=new Bf(this),this.depthTest=new Rf(this),this.depthFunc=new Ff(this),this.blend=new qs(this),this.blendFunc=new Of(this),this.blendColor=new gg(this),this.blendEquation=new $f(this),this.cullFace=new Tl(this),this.cullFaceSide=new vg(this),this.frontFace=new Nu(this),this.program=new yg(this),this.activeTexture=new _g(this),this.viewport=new Nf(this),this.bindFramebuffer=new jf(this),this.bindRenderbuffer=new Uf(this),this.bindTexture=new bd(this),this.bindVertexBuffer=new Hf(this),this.bindElementBuffer=new ju(this),this.bindVertexArray=new ts(this),this.pixelStoreUnpack=new xd(this),this.pixelStoreUnpackPremultiplyAlpha=new wd(this),this.pixelStoreUnpackFlipY=new Sd(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),ys(t)){this.HALF_FLOAT=t.HALF_FLOAT;const p=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=t.RGBA16F)!==null&&u!==void 0?u:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(m=t.RGB16F)!==null&&m!==void 0?m:p==null?void 0:p.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const p=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,u){return new Or(this,t,u)}createVertexBuffer(t,u,m){return new yd(this,t,u,m)}createRenderbuffer(t,u,m){const p=this.gl,v=p.createRenderbuffer();return this.bindRenderbuffer.set(v),p.renderbufferStorage(p.RENDERBUFFER,t,u,m),this.bindRenderbuffer.set(null),v}createFramebuffer(t,u,m,p){return new bg(this,t,u,m,p)}clear({color:t,depth:u,stencil:m}){const p=this.gl;let v=0;t&&(v|=p.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(v|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),m!==void 0&&(v|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),p.clear(v)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){l.aE(t.blendFunction,Ii.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return ys(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var u;return ys(this.gl)?this.gl.deleteVertexArray(t):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}class In{constructor(t,u,m){this.func=t,this.mask=u,this.range=m}}In.ReadOnly=!1,In.ReadWrite=!0,In.disabled=new In(519,In.ReadOnly,[0,1]);const Hu=7680;class ii{constructor(t,u,m,p,v,P){this.test=t,this.ref=u,this.mask=m,this.fail=p,this.depthFail=v,this.pass=P}}ii.disabled=new ii({func:519,mask:0},0,0,Hu,Hu,Hu);class Kn{constructor(t,u,m){this.enable=t,this.mode=u,this.frontFace=m}}let Ws;function Al(y,t,u,m,p){const v=y.context,P=v.gl,A=y.useProgram("collisionBox"),M=[];let $=0,j=0;for(let Ae=0;Ae<m.length;Ae++){const De=m[Ae],ve=t.getTile(De).getBucket(u);if(!ve)continue;const Oe=p?ve.textCollisionBox:ve.iconCollisionBox,Ue=ve.collisionCircleArray;if(Ue.length>0){const Je=l.H();l.aQ(Je,ve.placementInvProjMatrix,y.transform.glCoordMatrix),l.aQ(Je,Je,ve.placementViewportMatrix),M.push({circleArray:Ue,circleOffset:j,transform:De.posMatrix,invTransform:Je,coord:De}),$+=Ue.length/4,j=$}Oe&&A.draw(v,P.LINES,In.disabled,ii.disabled,y.colorModeForRenderPass(),Kn.disabled,{u_matrix:De.posMatrix,u_pixel_extrude_scale:[1/(U=y.transform).width,1/U.height]},y.style.map.terrain&&y.style.map.terrain.getTerrainData(De),u.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,null,y.transform.zoom,null,null,Oe.collisionVertexBuffer)}var U;if(!p||!M.length)return;const ee=y.useProgram("collisionCircle"),de=new l.aR;de.resize(4*$),de._trim();let me=0;for(const Ae of M)for(let De=0;De<Ae.circleArray.length/4;De++){const ve=4*De,Oe=Ae.circleArray[ve+0],Ue=Ae.circleArray[ve+1],Je=Ae.circleArray[ve+2],gt=Ae.circleArray[ve+3];de.emplace(me++,Oe,Ue,Je,gt,0),de.emplace(me++,Oe,Ue,Je,gt,1),de.emplace(me++,Oe,Ue,Je,gt,2),de.emplace(me++,Oe,Ue,Je,gt,3)}(!Ws||Ws.length<2*$)&&(Ws=(function(Ae){const De=2*Ae,ve=new l.aT;ve.resize(De),ve._trim();for(let Oe=0;Oe<De;Oe++){const Ue=6*Oe;ve.uint16[Ue+0]=4*Oe+0,ve.uint16[Ue+1]=4*Oe+1,ve.uint16[Ue+2]=4*Oe+2,ve.uint16[Ue+3]=4*Oe+2,ve.uint16[Ue+4]=4*Oe+3,ve.uint16[Ue+5]=4*Oe+0}return ve})($));const be=v.createIndexBuffer(Ws,!0),Pe=v.createVertexBuffer(de,l.aS.members,!0);for(const Ae of M){const De=Us(Ae.transform,Ae.invTransform,y.transform);ee.draw(v,P.TRIANGLES,In.disabled,ii.disabled,y.colorModeForRenderPass(),Kn.disabled,De,y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ae.coord),u.id,Pe,be,l.a0.simpleSegment(0,2*Ae.circleOffset,Ae.circleArray.length,Ae.circleArray.length/2),null,y.transform.zoom,null,null,null)}Pe.destroy(),be.destroy()}Kn.disabled=new Kn(!1,1029,2305),Kn.backCCW=new Kn(!0,1029,2305);const El=l.an(new Float32Array(16));function Id(y,t,u,m,p,v){const{horizontalAlign:P,verticalAlign:A}=l.au(y);return new l.P((-(P-.5)*t/p+m[0])*v,(-(A-.5)*u/p+m[1])*v)}function Zs(y,t,u,m,p,v){const P=t.tileAnchorPoint.add(new l.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let A=m.mult(v);u||(A=A.rotate(-p));const M=P.add(A);return ke(M.x,M.y,t.labelPlaneMatrix,t.getElevation).point}if(u){const A=ut(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(y),M=Math.atan(A.y/A.x)+(A.x<0?Math.PI:0);return y.add(m.rotate(M))}return y.add(m)}function Ao(y,t,u,m,p,v,P,A,M,$,j,U,ee,de){const me=y.text.placedSymbolArray,be=y.text.dynamicLayoutVertexArray,Pe=y.icon.dynamicLayoutVertexArray,Ae={};be.clear();for(let De=0;De<me.length;De++){const ve=me.get(De),Oe=ve.hidden||!ve.crossTileID||y.allowVerticalPlacement&&!ve.placedOrientation?null:m[ve.crossTileID];if(Oe){const Ue=new l.P(ve.anchorX,ve.anchorY),Je={getElevation:de,width:p.width,height:p.height,labelPlaneMatrix:v,pitchWithMap:u,projection:j,tileAnchorPoint:Ue,translation:U,unwrappedTileID:ee},gt=u?ke(Ue.x,Ue.y,P,de):ut(Ue.x,Ue.y,Je),Ct=W(p.cameraToCenterDistance,gt.signedDistanceFromCamera);let zt=l.ai(y.textSizeData,M,ve)*Ct/l.ap;u&&(zt*=y.tilePixelRatio/A);const{width:jt,height:Mt,anchor:Et,textOffset:Xt,textBoxScale:fn}=Oe,Dt=Id(Et,jt,Mt,Xt,fn,zt),$t=j.getPitchedTextCorrection(p,Ue.add(new l.P(U[0],U[1])),ee),cn=Zs(gt.point,Je,t,Dt,p.angle,$t),oi=y.allowVerticalPlacement&&ve.placedOrientation===l.ah.vertical?Math.PI/2:0;for(let wn=0;wn<ve.numGlyphs;wn++)l.aj(be,cn,oi);$&&ve.associatedIconIndex>=0&&(Ae[ve.associatedIconIndex]={shiftedAnchor:cn,angle:oi})}else sn(ve.numGlyphs,be)}if($){Pe.clear();const De=y.icon.placedSymbolArray;for(let ve=0;ve<De.length;ve++){const Oe=De.get(ve);if(Oe.hidden)sn(Oe.numGlyphs,Pe);else{const Ue=Ae[ve];if(Ue)for(let Je=0;Je<Oe.numGlyphs;Je++)l.aj(Pe,Ue.shiftedAnchor,Ue.angle);else sn(Oe.numGlyphs,Pe)}}y.icon.dynamicLayoutVertexBuffer.updateData(Pe)}y.text.dynamicLayoutVertexBuffer.updateData(be)}function lr(y,t,u){return u.iconsInText&&t?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Pd(y,t,u,m,p,v,P,A,M,$,j,U){const ee=y.context,de=ee.gl,me=y.transform,be=Ns(),Pe=A==="map",Ae=M==="map",De=A!=="viewport"&&u.layout.get("symbol-placement")!=="point",ve=Pe&&!Ae&&!De,Oe=!Ae&&De,Ue=!u.layout.get("symbol-sort-key").isConstant();let Je=!1;const gt=y.depthModeForSublayer(0,In.ReadOnly),Ct=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),zt=[],jt=be.getCircleRadiusCorrection(me);for(const Mt of m){const Et=t.getTile(Mt),Xt=Et.getBucket(u);if(!Xt)continue;const fn=p?Xt.text:Xt.icon;if(!fn||!fn.segments.get().length||!fn.hasVisibleVertices)continue;const Dt=fn.programConfigurations.get(u.id),$t=p||Xt.sdfIcons,cn=p?Xt.textSizeData:Xt.iconSizeData,oi=Ae||me.pitch!==0,wn=y.useProgram(lr($t,p,Xt),Dt),An=l.ag(cn,me.zoom),li=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Mt);let la,wr,ui,Ea,_a=[0,0],ua=null;if(p)wr=Et.glyphAtlasTexture,ui=de.LINEAR,la=Et.glyphAtlasTexture.size,Xt.iconsInText&&(_a=Et.imageAtlasTexture.size,ua=Et.imageAtlasTexture,Ea=oi||y.options.rotating||y.options.zooming||cn.kind==="composite"||cn.kind==="camera"?de.LINEAR:de.NEAREST);else{const Mn=u.layout.get("icon-size").constantOr(0)!==1||Xt.iconsNeedLinear;wr=Et.imageAtlasTexture,ui=$t||y.options.rotating||y.options.zooming||Mn||oi?de.LINEAR:de.NEAREST,la=Et.imageAtlasTexture.size}const ba=Tn(Et,1,y.transform.zoom),jr=Oe?Mt.posMatrix:El,Ho=gs(jr,Ae,Pe,y.transform,ba),uc=Fr(jr,Ae,Pe,y.transform,ba),qo=Fr(Mt.posMatrix,Ae,Pe,y.transform,ba),dr=be.translatePosition(y.transform,Et,v,P),cc=Ct&&Xt.hasTextData(),Jd=u.layout.get("icon-text-fit")!=="none"&&cc&&Xt.hasIconData();if(De){const Mn=y.style.map.terrain?(Go,Wo)=>y.style.map.terrain.getElevation(Mt,Go,Wo):null,Qs=u.layout.get("text-rotation-alignment")==="map";ce(Xt,Mt.posMatrix,y,p,Ho,qo,Ae,$,Qs,be,Mt.toUnwrapped(),me.width,me.height,dr,Mn)}const hr=Mt.posMatrix,fr=p&&Ct||Jd,_s=De||fr?El:Ho,Sr=uc,ea=$t&&u.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ca;ca=$t?Xt.iconsInText?pd(cn.kind,An,ve,Ae,De,fr,y,hr,_s,Sr,dr,la,_a,jt):Pl(cn.kind,An,ve,Ae,De,fr,y,hr,_s,Sr,dr,p,la,!0,jt):Df(cn.kind,An,ve,Ae,De,fr,y,hr,_s,Sr,dr,p,la,jt);const Ja={program:wn,buffers:fn,uniformValues:ca,atlasTexture:wr,atlasTextureIcon:ua,atlasInterpolation:ui,atlasInterpolationIcon:Ea,isSDF:$t,hasHalo:ea};if(Ue&&Xt.canOverlap){Je=!0;const Mn=fn.segments.get();for(const Qs of Mn)zt.push({segments:new l.a0([Qs]),sortKey:Qs.sortKey,state:Ja,terrainData:li})}else zt.push({segments:fn.segments,sortKey:0,state:Ja,terrainData:li})}Je&&zt.sort(((Mt,Et)=>Mt.sortKey-Et.sortKey));for(const Mt of zt){const Et=Mt.state;if(ee.activeTexture.set(de.TEXTURE0),Et.atlasTexture.bind(Et.atlasInterpolation,de.CLAMP_TO_EDGE),Et.atlasTextureIcon&&(ee.activeTexture.set(de.TEXTURE1),Et.atlasTextureIcon&&Et.atlasTextureIcon.bind(Et.atlasInterpolationIcon,de.CLAMP_TO_EDGE)),Et.isSDF){const Xt=Et.uniformValues;Et.hasHalo&&(Xt.u_is_halo=1,Td(Et.buffers,Mt.segments,u,y,Et.program,gt,j,U,Xt,Mt.terrainData)),Xt.u_is_halo=0}Td(Et.buffers,Mt.segments,u,y,Et.program,gt,j,U,Et.uniformValues,Mt.terrainData)}}function Td(y,t,u,m,p,v,P,A,M,$){const j=m.context;p.draw(j,j.gl.TRIANGLES,v,P,A,Kn.disabled,M,$,u.id,y.layoutVertexBuffer,y.indexBuffer,t,u.paint,m.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Ad(y,t,u,m){const p=y.context,v=p.gl,P=ii.disabled,A=new Ii([v.ONE,v.ONE],l.aM.transparent,[!0,!0,!0,!0]),M=t.getBucket(u);if(!M)return;const $=m.key;let j=u.heatmapFbos.get($);j||(j=Ml(p,t.tileSize,t.tileSize),u.heatmapFbos.set($,j)),p.bindFramebuffer.set(j.framebuffer),p.viewport.set([0,0,t.tileSize,t.tileSize]),p.clear({color:l.aM.transparent});const U=M.programConfigurations.get(u.id),ee=y.useProgram("heatmap",U),de=y.style.map.terrain.getTerrainData(m);ee.draw(p,v.TRIANGLES,In.disabled,P,A,Kn.disabled,Aa(m.posMatrix,t,y.transform.zoom,u.paint.get("heatmap-intensity")),de,u.id,M.layoutVertexBuffer,M.indexBuffer,M.segments,u.paint,y.transform.zoom,U)}function Ks(y,t,u){const m=y.context,p=m.gl;m.setColorMode(y.colorModeForRenderPass());const v=Dl(m,t),P=u.key,A=t.heatmapFbos.get(P);A&&(m.activeTexture.set(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,A.colorAttachment.get()),m.activeTexture.set(p.TEXTURE1),v.bind(p.LINEAR,p.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(m,p.TRIANGLES,In.disabled,ii.disabled,y.colorModeForRenderPass(),Kn.disabled,Bu(y,t,0,1),null,t.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments,t.paint,y.transform.zoom),A.destroy(),t.heatmapFbos.delete(P))}function Ml(y,t,u){var m,p;const v=y.gl,P=v.createTexture();v.bindTexture(v.TEXTURE_2D,P),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR);const A=(m=y.HALF_FLOAT)!==null&&m!==void 0?m:v.UNSIGNED_BYTE,M=(p=y.RGBA16F)!==null&&p!==void 0?p:v.RGBA;v.texImage2D(v.TEXTURE_2D,0,M,t,u,0,v.RGBA,A,null);const $=y.createFramebuffer(t,u,!1,!1);return $.colorAttachment.set(P),$}function Dl(y,t){return t.colorRampTexture||(t.colorRampTexture=new ue(y,t.colorRamp,y.gl.RGBA)),t.colorRampTexture}function Eo(y,t,u,m,p){if(!u||!m||!m.imageAtlas)return;const v=m.imageAtlas.patternPositions;let P=v[u.to.toString()],A=v[u.from.toString()];if(!P&&A&&(P=A),!A&&P&&(A=P),!P||!A){const M=p.getPaintProperty(t);P=v[M],A=v[M]}P&&A&&y.setConstantPatternPositions(P,A)}function Vl(y,t,u,m,p,v,P){const A=y.context.gl,M="fill-pattern",$=u.paint.get(M),j=$&&$.constantOr(1),U=u.getCrossfadeParameters();let ee,de,me,be,Pe;P?(de=j&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ee=A.LINES):(de=j?"fillPattern":"fill",ee=A.TRIANGLES);const Ae=$.constantOr(null);for(const De of m){const ve=t.getTile(De);if(j&&!ve.patternsLoaded())continue;const Oe=ve.getBucket(u);if(!Oe)continue;const Ue=Oe.programConfigurations.get(u.id),Je=y.useProgram(de,Ue),gt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(De);j&&(y.context.activeTexture.set(A.TEXTURE0),ve.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),Ue.updatePaintBuffers(U)),Eo(Ue,M,Ae,ve,u);const Ct=gt?De:null,zt=y.translatePosMatrix(Ct?Ct.posMatrix:De.posMatrix,ve,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(P){be=Oe.indexBuffer2,Pe=Oe.segments2;const jt=[A.drawingBufferWidth,A.drawingBufferHeight];me=de==="fillOutlinePattern"&&j?Tf(zt,y,U,ve,jt):og(zt,jt)}else be=Oe.indexBuffer,Pe=Oe.segments,me=j?Pf(zt,y,U,ve):Io(zt);Je.draw(y.context,ee,p,y.stencilModeForClipping(De),v,Kn.disabled,me,gt,u.id,Oe.layoutVertexBuffer,be,Pe,u.paint,y.transform.zoom,Ue)}}function qu(y,t,u,m,p,v,P){const A=y.context,M=A.gl,$="fill-extrusion-pattern",j=u.paint.get($),U=j.constantOr(1),ee=u.getCrossfadeParameters(),de=u.paint.get("fill-extrusion-opacity"),me=j.constantOr(null);for(const be of m){const Pe=t.getTile(be),Ae=Pe.getBucket(u);if(!Ae)continue;const De=y.style.map.terrain&&y.style.map.terrain.getTerrainData(be),ve=Ae.programConfigurations.get(u.id),Oe=y.useProgram(U?"fillExtrusionPattern":"fillExtrusion",ve);U&&(y.context.activeTexture.set(M.TEXTURE0),Pe.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),ve.updatePaintBuffers(ee)),Eo(ve,$,me,Pe,u);const Ue=y.translatePosMatrix(be.posMatrix,Pe,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Je=u.paint.get("fill-extrusion-vertical-gradient"),gt=U?Lu(Ue,y,Je,de,be,ee,Pe):Cl(Ue,y,Je,de);Oe.draw(A,A.gl.TRIANGLES,p,v,P,Kn.backCCW,gt,De,u.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,u.paint,y.transform.zoom,ve,y.style.map.terrain&&Ae.centroidVertexBuffer)}}function Mo(y,t,u,m,p,v,P){const A=y.context,M=A.gl,$=u.fbo;if(!$)return;const j=y.useProgram("hillshade"),U=y.style.map.terrain&&y.style.map.terrain.getTerrainData(t);A.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,$.colorAttachment.get()),j.draw(A,M.TRIANGLES,p,v,P,Kn.disabled,((ee,de,me,be)=>{const Pe=me.paint.get("hillshade-shadow-color"),Ae=me.paint.get("hillshade-highlight-color"),De=me.paint.get("hillshade-accent-color");let ve=me.paint.get("hillshade-illumination-direction")*(Math.PI/180);me.paint.get("hillshade-illumination-anchor")==="viewport"&&(ve-=ee.transform.angle);const Oe=!ee.options.moving;return{u_matrix:be?be.posMatrix:ee.transform.calculatePosMatrix(de.tileID.toUnwrapped(),Oe),u_image:0,u_latrange:Ru(0,de.tileID),u_light:[me.paint.get("hillshade-exaggeration"),ve],u_shadow:Pe,u_highlight:Ae,u_accent:De}})(y,u,m,U?t:null),U,m.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Do(y,t,u,m,p,v){const P=y.context,A=P.gl,M=t.dem;if(M&&M.data){const $=M.dim,j=M.stride,U=M.getPixels();if(P.activeTexture.set(A.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||y.getTileTexture(j),t.demTexture){const de=t.demTexture;de.update(U,{premultiply:!1}),de.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else t.demTexture=new ue(P,U,A.RGBA,{premultiply:!1}),t.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);P.activeTexture.set(A.TEXTURE0);let ee=t.fbo;if(!ee){const de=new ue(P,{width:$,height:$,data:null},A.RGBA);de.bind(A.LINEAR,A.CLAMP_TO_EDGE),ee=t.fbo=P.createFramebuffer($,$,!0,!1),ee.colorAttachment.set(de.texture)}P.bindFramebuffer.set(ee.framebuffer),P.viewport.set([0,0,$,$]),y.useProgram("hillshadePrepare").draw(P,A.TRIANGLES,m,p,v,Kn.disabled,((de,me)=>{const be=me.stride,Pe=l.H();return l.aP(Pe,0,l.X,-l.X,0,0,1),l.J(Pe,Pe,[0,-l.X,0]),{u_matrix:Pe,u_image:1,u_dimension:[be,be],u_zoom:de.overscaledZ,u_unpack:me.getUnpackVector()}})(t.tileID,M),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),t.needsHillshadePrepare=!1}}function qf(y,t,u,m,p,v){const P=m.paint.get("raster-fade-duration");if(!v&&P>0){const A=k.now(),M=(A-y.timeAdded)/P,$=t?(A-t.timeAdded)/P:-1,j=u.getSource(),U=p.coveringZoomLevel({tileSize:j.tileSize,roundZoom:j.roundZoom}),ee=!t||Math.abs(t.tileID.overscaledZ-U)>Math.abs(y.tileID.overscaledZ-U),de=ee&&y.refreshedUponExpiration?1:l.ac(ee?M:1-$,0,1);return y.refreshedUponExpiration&&M>=1&&(y.refreshedUponExpiration=!1),t?{opacity:1,mix:1-de}:{opacity:de,mix:0}}return{opacity:1,mix:0}}const Ed=new l.aM(1,0,0,1),Ln=new l.aM(0,1,0,1),Gu=new l.aM(0,0,1,1),wg=new l.aM(1,0,1,1),Gf=new l.aM(0,1,1,1);function Vo(y,t,u,m){Wu(y,0,t+u/2,y.transform.width,u,m)}function Wf(y,t,u,m){Wu(y,t-u/2,0,u,y.transform.height,m)}function Wu(y,t,u,m,p,v){const P=y.context,A=P.gl;A.enable(A.SCISSOR_TEST),A.scissor(t*y.pixelRatio,u*y.pixelRatio,m*y.pixelRatio,p*y.pixelRatio),P.clear({color:v}),A.disable(A.SCISSOR_TEST)}function Zf(y,t,u){const m=y.context,p=m.gl,v=u.posMatrix,P=y.useProgram("debug"),A=In.disabled,M=ii.disabled,$=y.colorModeForRenderPass(),j="$debug",U=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);m.activeTexture.set(p.TEXTURE0);const ee=t.getTileByID(u.key).latestRawTileData,de=Math.floor((ee&&ee.byteLength||0)/1024),me=t.getTile(u).tileSize,be=512/Math.min(me,512)*(u.overscaledZ/y.transform.zoom)*.5;let Pe=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Pe+=` => ${u.overscaledZ}`),(function(Ae,De){Ae.initDebugOverlayCanvas();const ve=Ae.debugOverlayCanvas,Oe=Ae.context.gl,Ue=Ae.debugOverlayCanvas.getContext("2d");Ue.clearRect(0,0,ve.width,ve.height),Ue.shadowColor="white",Ue.shadowBlur=2,Ue.lineWidth=1.5,Ue.strokeStyle="white",Ue.textBaseline="top",Ue.font="bold 36px Open Sans, sans-serif",Ue.fillText(De,5,5),Ue.strokeText(De,5,5),Ae.debugOverlayTexture.update(ve),Ae.debugOverlayTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE)})(y,`${Pe} ${de}kB`),P.draw(m,p.TRIANGLES,A,M,Ii.alphaBlended,Kn.disabled,Il(v,l.aM.transparent,be),null,j,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),P.draw(m,p.LINE_STRIP,A,M,$,Kn.disabled,Il(v,l.aM.red),U,j,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Kf(y,t,u){const m=y.context,p=m.gl,v=y.colorModeForRenderPass(),P=new In(p.LEQUAL,In.ReadWrite,y.depthRangeFor3D),A=y.useProgram("terrain"),M=t.getTerrainMesh();m.bindFramebuffer.set(null),m.viewport.set([0,0,y.width,y.height]);for(const $ of u){const j=y.renderToTexture.getTexture($),U=t.getTerrainData($.tileID);m.activeTexture.set(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,j.texture);const ee=y.transform.calculatePosMatrix($.tileID.toUnwrapped()),de=t.getMeshFrameDelta(y.transform.zoom),me=y.transform.calculateFogMatrix($.tileID.toUnwrapped()),be=fd(ee,de,me,y.style.sky,y.transform.pitch);A.draw(m,p.TRIANGLES,P,ii.disabled,v,Kn.backCCW,be,U,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class Zu{constructor(t,u,m){this.vertexBuffer=t,this.indexBuffer=u,this.segments=m}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Ku{constructor(t,u){this.context=new xg(t),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Jt.maxUnderzooming+Jt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new dd}resize(t,u,m){if(this.width=Math.floor(t*m),this.height=Math.floor(u*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const t=this.context,u=new l.aX;u.emplaceBack(0,0),u.emplaceBack(l.X,0),u.emplaceBack(0,l.X),u.emplaceBack(l.X,l.X),this.tileExtentBuffer=t.createVertexBuffer(u,js.members),this.tileExtentSegments=l.a0.simpleSegment(0,0,4,2);const m=new l.aX;m.emplaceBack(0,0),m.emplaceBack(l.X,0),m.emplaceBack(0,l.X),m.emplaceBack(l.X,l.X),this.debugBuffer=t.createVertexBuffer(m,js.members),this.debugSegments=l.a0.simpleSegment(0,0,4,5);const p=new l.$;p.emplaceBack(0,0,0,0),p.emplaceBack(l.X,0,l.X,0),p.emplaceBack(0,l.X,0,l.X),p.emplaceBack(l.X,l.X,l.X,l.X),this.rasterBoundsBuffer=t.createVertexBuffer(p,yt.members),this.rasterBoundsSegments=l.a0.simpleSegment(0,0,4,2);const v=new l.aX;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(v,js.members),this.viewportSegments=l.a0.simpleSegment(0,0,4,2);const P=new l.aZ;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(P);const A=new l.aY;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(A);const M=this.context.gl;this.stencilClearMode=new ii({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const t=this.context,u=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=l.H();l.aP(m,0,this.width,this.height,0,0,1),l.K(m,m,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,u.TRIANGLES,In.disabled,this.stencilClearMode,Ii.disabled,Kn.disabled,Ta(m),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,u){if(this.currentStencilSource===t.source||!t.isTileClipped()||!u||!u.length)return;this.currentStencilSource=t.source;const m=this.context,p=m.gl;this.nextStencilID+u.length>256&&this.clearStencil(),m.setColorMode(Ii.disabled),m.setDepthMode(In.disabled);const v=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of u){const A=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(P);v.draw(m,p.TRIANGLES,In.disabled,new ii({func:p.ALWAYS,mask:0},A,255,p.KEEP,p.KEEP,p.REPLACE),Ii.disabled,Kn.disabled,Ta(P.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,u=this.context.gl;return new ii({func:u.NOTEQUAL,mask:255},t,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(t){const u=this.context.gl;return new ii({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(t){const u=this.context.gl,m=t.sort(((P,A)=>A.overscaledZ-P.overscaledZ)),p=m[m.length-1].overscaledZ,v=m[0].overscaledZ-p+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const P={};for(let A=0;A<v;A++)P[A+p]=new ii({func:u.GEQUAL,mask:255},A+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=v,[P,m]}return[{[p]:ii.disabled},m]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new Ii([t.CONSTANT_COLOR,t.ONE],new l.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ii.unblended:Ii.alphaBlended}depthModeForSublayer(t,u,m){if(!this.opaquePassEnabledForLayer())return In.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new In(m||this.context.gl.LEQUAL,u,[p,p])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,u){this.style=t,this.options=u,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(k.now()),this.imageManager.beginFrame();const m=this.style._order,p=this.style.sourceCaches,v={},P={},A={};for(const M in p){const $=p[M];$.used&&$.prepare(this.context),v[M]=$.getVisibleCoordinates(),P[M]=v[M].slice().reverse(),A[M]=$.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<m.length;M++)if(this.style._layers[m[M]].is3D()){this.opaquePassCutoff=M;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const M of m){const $=this.style._layers[M];if(!$.hasOffscreenPass()||$.isHidden(this.transform.zoom))continue;const j=P[$.source];($.type==="custom"||j.length)&&this.renderLayer(this,p[$.source],$,j)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.aM.black:l.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(M,$){const j=M.context,U=j.gl,ee=((Ae,De,ve)=>({u_sky_color:Ae.properties.get("sky-color"),u_horizon_color:Ae.properties.get("horizon-color"),u_horizon:(De.height/2+De.getHorizon())*ve,u_sky_horizon_blend:Ae.properties.get("sky-horizon-blend")*De.height/2*ve}))($,M.style.map.transform,M.pixelRatio),de=new In(U.LEQUAL,In.ReadWrite,[0,1]),me=ii.disabled,be=M.colorModeForRenderPass(),Pe=M.useProgram("sky");if(!$.mesh){const Ae=new l.aX;Ae.emplaceBack(-1,-1),Ae.emplaceBack(1,-1),Ae.emplaceBack(1,1),Ae.emplaceBack(-1,1);const De=new l.aY;De.emplaceBack(0,1,2),De.emplaceBack(0,2,3),$.mesh=new Zu(j.createVertexBuffer(Ae,js.members),j.createIndexBuffer(De),l.a0.simpleSegment(0,0,Ae.length,De.length))}Pe.draw(j,U.TRIANGLES,de,me,be,Kn.disabled,ee,void 0,"sky",$.mesh.vertexBuffer,$.mesh.indexBuffer,$.mesh.segments)})(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[m[this.currentLayer]],$=p[M.source],j=v[M.source];this._renderTileClippingMasks(M,j),this.renderLayer(this,$,M,j)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const M=this.style._layers[m[this.currentLayer]],$=p[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const j=(M.type==="symbol"?A:P)[M.source];this._renderTileClippingMasks(M,v[M.source]),this.renderLayer(this,$,M,j)}if(this.options.showTileBoundaries){const M=(function($,j){let U=null;const ee=Object.values($._layers).flatMap((Pe=>Pe.source&&!Pe.isHidden(j)?[$.sourceCaches[Pe.source]]:[])),de=ee.filter((Pe=>Pe.getSource().type==="vector")),me=ee.filter((Pe=>Pe.getSource().type!=="vector")),be=Pe=>{(!U||U.getSource().maxzoom<Pe.getSource().maxzoom)&&(U=Pe)};return de.forEach((Pe=>be(Pe))),U||me.forEach((Pe=>be(Pe))),U})(this.style,this.transform.zoom);M&&(function($,j,U){for(let ee=0;ee<U.length;ee++)Zf($,j,U[ee])})(this,M,M.getVisibleCoordinates())}this.options.showPadding&&(function(M){const $=M.transform.padding;Vo(M,M.transform.height-($.top||0),3,Ed),Vo(M,$.bottom||0,3,Ln),Wf(M,$.left||0,3,Gu),Wf(M,M.transform.width-($.right||0),3,wg);const j=M.transform.centerPoint;(function(U,ee,de,me){Wu(U,ee-1,de-10,2,20,me),Wu(U,ee-10,de-1,20,2,me)})(M,j.x,M.transform.height-j.y,Gf)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,m=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=t?!l.a_(u,m):!l.a$(u,m)),p||(p=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),p&&(l.b0(u,m),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(v,P){const A=v.context,M=A.gl,$=Ii.unblended,j=new In(M.LEQUAL,In.ReadWrite,[0,1]),U=P.getTerrainMesh(),ee=P.sourceCache.getRenderableTiles(),de=v.useProgram("terrainDepth");A.bindFramebuffer.set(P.getFramebuffer("depth").framebuffer),A.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),A.clear({color:l.aM.transparent,depth:1});for(const me of ee){const be=P.getTerrainData(me.tileID),Pe={u_matrix:v.transform.calculatePosMatrix(me.tileID.toUnwrapped()),u_ele_delta:P.getMeshFrameDelta(v.transform.zoom)};de.draw(A,M.TRIANGLES,j,ii.disabled,$,Kn.backCCW,Pe,be,"terrain",U.vertexBuffer,U.indexBuffer,U.segments)}A.bindFramebuffer.set(null),A.viewport.set([0,0,v.width,v.height])})(this,this.style.map.terrain),(function(v,P){const A=v.context,M=A.gl,$=Ii.unblended,j=new In(M.LEQUAL,In.ReadWrite,[0,1]),U=P.getTerrainMesh(),ee=P.getCoordsTexture(),de=P.sourceCache.getRenderableTiles(),me=v.useProgram("terrainCoords");A.bindFramebuffer.set(P.getFramebuffer("coords").framebuffer),A.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),A.clear({color:l.aM.transparent,depth:1}),P.coordsIndex=[];for(const be of de){const Pe=P.getTerrainData(be.tileID);A.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,ee.texture);const Ae={u_matrix:v.transform.calculatePosMatrix(be.tileID.toUnwrapped()),u_terrain_coords_id:(255-P.coordsIndex.length)/255,u_texture:0,u_ele_delta:P.getMeshFrameDelta(v.transform.zoom)};me.draw(A,M.TRIANGLES,j,ii.disabled,$,Kn.backCCW,Ae,Pe,"terrain",U.vertexBuffer,U.indexBuffer,U.segments),P.coordsIndex.push(be.tileID.key)}A.bindFramebuffer.set(null),A.viewport.set([0,0,v.width,v.height])})(this,this.style.map.terrain))}renderLayer(t,u,m,p){if(!m.isHidden(this.transform.zoom)&&(m.type==="background"||m.type==="custom"||(p||[]).length))switch(this.id=m.id,m.type){case"symbol":(function(v,P,A,M,$){if(v.renderPass!=="translucent")return;const j=ii.disabled,U=v.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ee,de,me,be,Pe,Ae,De,ve,Oe){const Ue=de.transform,Je=Ns(),gt=Pe==="map",Ct=Ae==="map";for(const zt of ee){const jt=be.getTile(zt),Mt=jt.getBucket(me);if(!Mt||!Mt.text||!Mt.text.segments.get().length)continue;const Et=l.ag(Mt.textSizeData,Ue.zoom),Xt=Tn(jt,1,de.transform.zoom),fn=gs(zt.posMatrix,Ct,gt,de.transform,Xt),Dt=me.layout.get("icon-text-fit")!=="none"&&Mt.hasIconData();if(Et){const $t=Math.pow(2,Ue.zoom-jt.tileID.overscaledZ),cn=de.style.map.terrain?(wn,An)=>de.style.map.terrain.getElevation(zt,wn,An):null,oi=Je.translatePosition(Ue,jt,De,ve);Ao(Mt,gt,Ct,Oe,Ue,fn,zt.posMatrix,$t,Et,Dt,Je,oi,zt.toUnwrapped(),cn)}}})(M,v,A,P,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),$),A.paint.get("icon-opacity").constantOr(1)!==0&&Pd(v,P,A,M,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),j,U),A.paint.get("text-opacity").constantOr(1)!==0&&Pd(v,P,A,M,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),j,U),P.map.showCollisionBoxes&&(Al(v,P,A,M,!0),Al(v,P,A,M,!1))})(t,u,m,p,this.style.placement.variableOffsets);break;case"circle":(function(v,P,A,M){if(v.renderPass!=="translucent")return;const $=A.paint.get("circle-opacity"),j=A.paint.get("circle-stroke-width"),U=A.paint.get("circle-stroke-opacity"),ee=!A.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(j.constantOr(1)===0||U.constantOr(1)===0))return;const de=v.context,me=de.gl,be=v.depthModeForSublayer(0,In.ReadOnly),Pe=ii.disabled,Ae=v.colorModeForRenderPass(),De=[];for(let ve=0;ve<M.length;ve++){const Oe=M[ve],Ue=P.getTile(Oe),Je=Ue.getBucket(A);if(!Je)continue;const gt=Je.programConfigurations.get(A.id),Ct=v.useProgram("circle",gt),zt=Je.layoutVertexBuffer,jt=Je.indexBuffer,Mt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Oe),Et={programConfiguration:gt,program:Ct,layoutVertexBuffer:zt,indexBuffer:jt,uniformValues:lg(v,Oe,Ue,A),terrainData:Mt};if(ee){const Xt=Je.segments.get();for(const fn of Xt)De.push({segments:new l.a0([fn]),sortKey:fn.sortKey,state:Et})}else De.push({segments:Je.segments,sortKey:0,state:Et})}ee&&De.sort(((ve,Oe)=>ve.sortKey-Oe.sortKey));for(const ve of De){const{programConfiguration:Oe,program:Ue,layoutVertexBuffer:Je,indexBuffer:gt,uniformValues:Ct,terrainData:zt}=ve.state;Ue.draw(de,me.TRIANGLES,be,Pe,Ae,Kn.disabled,Ct,zt,A.id,Je,gt,ve.segments,A.paint,v.transform.zoom,Oe)}})(t,u,m,p);break;case"heatmap":(function(v,P,A,M){if(A.paint.get("heatmap-opacity")===0)return;const $=v.context;if(v.style.map.terrain){for(const j of M){const U=P.getTile(j);P.hasRenderableParent(j)||(v.renderPass==="offscreen"?Ad(v,U,A,j):v.renderPass==="translucent"&&Ks(v,A,j))}$.viewport.set([0,0,v.width,v.height])}else v.renderPass==="offscreen"?(function(j,U,ee,de){const me=j.context,be=me.gl,Pe=ii.disabled,Ae=new Ii([be.ONE,be.ONE],l.aM.transparent,[!0,!0,!0,!0]);(function(De,ve,Oe){const Ue=De.gl;De.activeTexture.set(Ue.TEXTURE1),De.viewport.set([0,0,ve.width/4,ve.height/4]);let Je=Oe.heatmapFbos.get(l.aU);Je?(Ue.bindTexture(Ue.TEXTURE_2D,Je.colorAttachment.get()),De.bindFramebuffer.set(Je.framebuffer)):(Je=Ml(De,ve.width/4,ve.height/4),Oe.heatmapFbos.set(l.aU,Je))})(me,j,ee),me.clear({color:l.aM.transparent});for(let De=0;De<de.length;De++){const ve=de[De];if(U.hasRenderableParent(ve))continue;const Oe=U.getTile(ve),Ue=Oe.getBucket(ee);if(!Ue)continue;const Je=Ue.programConfigurations.get(ee.id),gt=j.useProgram("heatmap",Je),{zoom:Ct}=j.transform;gt.draw(me,be.TRIANGLES,In.disabled,Pe,Ae,Kn.disabled,Aa(ve.posMatrix,Oe,Ct,ee.paint.get("heatmap-intensity")),null,ee.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,ee.paint,j.transform.zoom,Je)}me.viewport.set([0,0,j.width,j.height])})(v,P,A,M):v.renderPass==="translucent"&&(function(j,U){const ee=j.context,de=ee.gl;ee.setColorMode(j.colorModeForRenderPass());const me=U.heatmapFbos.get(l.aU);me&&(ee.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,me.colorAttachment.get()),ee.activeTexture.set(de.TEXTURE1),Dl(ee,U).bind(de.LINEAR,de.CLAMP_TO_EDGE),j.useProgram("heatmapTexture").draw(ee,de.TRIANGLES,In.disabled,ii.disabled,j.colorModeForRenderPass(),Kn.disabled,Bu(j,U,0,1),null,U.id,j.viewportBuffer,j.quadTriangleIndexBuffer,j.viewportSegments,U.paint,j.transform.zoom))})(v,A)})(t,u,m,p);break;case"line":(function(v,P,A,M){if(v.renderPass!=="translucent")return;const $=A.paint.get("line-opacity"),j=A.paint.get("line-width");if($.constantOr(1)===0||j.constantOr(1)===0)return;const U=v.depthModeForSublayer(0,In.ReadOnly),ee=v.colorModeForRenderPass(),de=A.paint.get("line-dasharray"),me=A.paint.get("line-pattern"),be=me.constantOr(1),Pe=A.paint.get("line-gradient"),Ae=A.getCrossfadeParameters(),De=be?"linePattern":de?"lineSDF":Pe?"lineGradient":"line",ve=v.context,Oe=ve.gl;let Ue=!0;for(const Je of M){const gt=P.getTile(Je);if(be&&!gt.patternsLoaded())continue;const Ct=gt.getBucket(A);if(!Ct)continue;const zt=Ct.programConfigurations.get(A.id),jt=v.context.program.get(),Mt=v.useProgram(De,zt),Et=Ue||Mt.program!==jt,Xt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Je),fn=me.constantOr(null);if(fn&&gt.imageAtlas){const cn=gt.imageAtlas,oi=cn.patternPositions[fn.to.toString()],wn=cn.patternPositions[fn.from.toString()];oi&&wn&&zt.setConstantPatternPositions(oi,wn)}const Dt=Xt?Je:null,$t=be?Po(v,gt,A,Ae,Dt):de?ug(v,gt,A,de,Ae,Dt):Pe?Af(v,gt,A,Ct.lineClipsArray.length,Dt):Fu(v,gt,A,Dt);if(be)ve.activeTexture.set(Oe.TEXTURE0),gt.imageAtlasTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),zt.updatePaintBuffers(Ae);else if(de&&(Et||v.lineAtlas.dirty))ve.activeTexture.set(Oe.TEXTURE0),v.lineAtlas.bind(ve);else if(Pe){const cn=Ct.gradients[A.id];let oi=cn.texture;if(A.gradientVersion!==cn.version){let wn=256;if(A.stepInterpolant){const An=P.getSource().maxzoom,li=Je.canonical.z===An?Math.ceil(1<<v.transform.maxZoom-Je.canonical.z):1;wn=l.ac(l.aV(Ct.maxLineLength/l.X*1024*li),256,ve.maxTextureSize)}cn.gradient=l.aW({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:wn,image:cn.gradient||void 0,clips:Ct.lineClipsArray}),cn.texture?cn.texture.update(cn.gradient):cn.texture=new ue(ve,cn.gradient,Oe.RGBA),cn.version=A.gradientVersion,oi=cn.texture}ve.activeTexture.set(Oe.TEXTURE0),oi.bind(A.stepInterpolant?Oe.NEAREST:Oe.LINEAR,Oe.CLAMP_TO_EDGE)}Mt.draw(ve,Oe.TRIANGLES,U,v.stencilModeForClipping(Je),ee,Kn.disabled,$t,Xt,A.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,A.paint,v.transform.zoom,zt,Ct.layoutVertexBuffer2),Ue=!1}})(t,u,m,p);break;case"fill":(function(v,P,A,M){const $=A.paint.get("fill-color"),j=A.paint.get("fill-opacity");if(j.constantOr(1)===0)return;const U=v.colorModeForRenderPass(),ee=A.paint.get("fill-pattern"),de=v.opaquePassEnabledForLayer()&&!ee.constantOr(1)&&$.constantOr(l.aM.transparent).a===1&&j.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===de){const me=v.depthModeForSublayer(1,v.renderPass==="opaque"?In.ReadWrite:In.ReadOnly);Vl(v,P,A,M,me,U,!1)}if(v.renderPass==="translucent"&&A.paint.get("fill-antialias")){const me=v.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,In.ReadOnly);Vl(v,P,A,M,me,U,!0)}})(t,u,m,p);break;case"fill-extrusion":(function(v,P,A,M){const $=A.paint.get("fill-extrusion-opacity");if($!==0&&v.renderPass==="translucent"){const j=new In(v.context.gl.LEQUAL,In.ReadWrite,v.depthRangeFor3D);if($!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))qu(v,P,A,M,j,ii.disabled,Ii.disabled),qu(v,P,A,M,j,v.stencilModeFor3D(),v.colorModeForRenderPass());else{const U=v.colorModeForRenderPass();qu(v,P,A,M,j,ii.disabled,U)}}})(t,u,m,p);break;case"hillshade":(function(v,P,A,M){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;const $=v.context,j=v.depthModeForSublayer(0,In.ReadOnly),U=v.colorModeForRenderPass(),[ee,de]=v.renderPass==="translucent"?v.stencilConfigForOverlap(M):[{},M];for(const me of de){const be=P.getTile(me);be.needsHillshadePrepare!==void 0&&be.needsHillshadePrepare&&v.renderPass==="offscreen"?Do(v,be,A,j,ii.disabled,U):v.renderPass==="translucent"&&Mo(v,me,be,A,j,ee[me.overscaledZ],U)}$.viewport.set([0,0,v.width,v.height])})(t,u,m,p);break;case"raster":(function(v,P,A,M){if(v.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!M.length)return;const $=v.context,j=$.gl,U=P.getSource(),ee=v.useProgram("raster"),de=v.colorModeForRenderPass(),[me,be]=U instanceof It?[{},M]:v.stencilConfigForOverlap(M),Pe=be[be.length-1].overscaledZ,Ae=!v.options.moving;for(const De of be){const ve=v.depthModeForSublayer(De.overscaledZ-Pe,A.paint.get("raster-opacity")===1?In.ReadWrite:In.ReadOnly,j.LESS),Oe=P.getTile(De);Oe.registerFadeDuration(A.paint.get("raster-fade-duration"));const Ue=P.findLoadedParent(De,0),Je=P.findLoadedSibling(De),gt=qf(Oe,Ue||Je||null,P,A,v.transform,v.style.map.terrain);let Ct,zt;const jt=A.paint.get("raster-resampling")==="nearest"?j.NEAREST:j.LINEAR;$.activeTexture.set(j.TEXTURE0),Oe.texture.bind(jt,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),$.activeTexture.set(j.TEXTURE1),Ue?(Ue.texture.bind(jt,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),Ct=Math.pow(2,Ue.tileID.overscaledZ-Oe.tileID.overscaledZ),zt=[Oe.tileID.canonical.x*Ct%1,Oe.tileID.canonical.y*Ct%1]):Oe.texture.bind(jt,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),Oe.texture.useMipmap&&$.extTextureFilterAnisotropic&&v.transform.pitch>20&&j.texParameterf(j.TEXTURE_2D,$.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,$.extTextureFilterAnisotropicMax);const Mt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(De),Et=Mt?De:null,Xt=Et?Et.posMatrix:v.transform.calculatePosMatrix(De.toUnwrapped(),Ae),fn=cg(Xt,zt||[0,0],Ct||1,gt,A);U instanceof It?ee.draw($,j.TRIANGLES,ve,ii.disabled,de,Kn.disabled,fn,Mt,A.id,U.boundsBuffer,v.quadTriangleIndexBuffer,U.boundsSegments):ee.draw($,j.TRIANGLES,ve,me[De.overscaledZ],de,Kn.disabled,fn,Mt,A.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}})(t,u,m,p);break;case"background":(function(v,P,A,M){const $=A.paint.get("background-color"),j=A.paint.get("background-opacity");if(j===0)return;const U=v.context,ee=U.gl,de=v.transform,me=de.tileSize,be=A.paint.get("background-pattern");if(v.isPatternMissing(be))return;const Pe=!be&&$.a===1&&j===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==Pe)return;const Ae=ii.disabled,De=v.depthModeForSublayer(0,Pe==="opaque"?In.ReadWrite:In.ReadOnly),ve=v.colorModeForRenderPass(),Oe=v.useProgram(be?"backgroundPattern":"background"),Ue=M||de.coveringTiles({tileSize:me,terrain:v.style.map.terrain});be&&(U.activeTexture.set(ee.TEXTURE0),v.imageManager.bind(v.context));const Je=A.getCrossfadeParameters();for(const gt of Ue){const Ct=M?gt.posMatrix:v.transform.calculatePosMatrix(gt.toUnwrapped()),zt=be?gd(Ct,j,v,be,{tileID:gt,tileSize:me},Je):Ou(Ct,j,$),jt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(gt);Oe.draw(U,ee.TRIANGLES,De,Ae,ve,Kn.disabled,zt,jt,A.id,v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}})(t,0,m,p);break;case"custom":(function(v,P,A){const M=v.context,$=A.implementation;if(v.renderPass==="offscreen"){const j=$.prerender;j&&(v.setCustomLayerDefaults(),M.setColorMode(v.colorModeForRenderPass()),j.call($,M.gl,v.transform.customLayerMatrix()),M.setDirty(),v.setBaseState())}else if(v.renderPass==="translucent"){v.setCustomLayerDefaults(),M.setColorMode(v.colorModeForRenderPass()),M.setStencilMode(ii.disabled);const j=$.renderingMode==="3d"?new In(v.context.gl.LEQUAL,In.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,In.ReadOnly);M.setDepthMode(j),$.render(M.gl,v.transform.customLayerMatrix(),{farZ:v.transform.farZ,nearZ:v.transform.nearZ,fov:v.transform._fov,modelViewProjectionMatrix:v.transform.modelViewProjectionMatrix,projectionMatrix:v.transform.projectionMatrix}),M.setDirty(),v.setBaseState(),M.bindFramebuffer.set(null)}})(t,0,m)}}translatePosMatrix(t,u,m,p,v){if(!m[0]&&!m[1])return t;const P=v?p==="map"?this.transform.angle:0:p==="viewport"?-this.transform.angle:0;if(P){const $=Math.sin(P),j=Math.cos(P);m=[m[0]*j-m[1]*$,m[0]*$+m[1]*j]}const A=[v?m[0]:Tn(u,m[0],this.transform.zoom),v?m[1]:Tn(u,m[1],this.transform.zoom),0],M=new Float32Array(16);return l.J(M,t,A),M}saveTileTexture(t){const u=this._tileTextures[t.size[0]];u?u.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const u=this._tileTextures[t];return u&&u.length>0?u.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const u=this.imageManager.getPattern(t.from.toString()),m=this.imageManager.getPattern(t.to.toString());return!u||!m}useProgram(t,u){this.cache=this.cache||{};const m=t+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[m]||(this.cache[m]=new md(this.context,vs[t],u,vd[t],this._showOverdrawInspector,this.style.map.terrain)),this.cache[m]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ue(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:u}=this.context.gl;return this.width!==t||this.height!==u}}class zo{constructor(t,u){this.points=t,this.planes=u}static fromInvProjectionMatrix(t,u,m){const p=Math.pow(2,m),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((A=>{const M=1/(A=l.af([],A,t))[3]/u*p;return l.b1(A,A,[M,M,1/A[3],M])})),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((A=>{const M=(function(ee,de){var me=de[0],be=de[1],Pe=de[2],Ae=me*me+be*be+Pe*Pe;return Ae>0&&(Ae=1/Math.sqrt(Ae)),ee[0]=de[0]*Ae,ee[1]=de[1]*Ae,ee[2]=de[2]*Ae,ee})([],(function(ee,de,me){var be=de[0],Pe=de[1],Ae=de[2],De=me[0],ve=me[1],Oe=me[2];return ee[0]=Pe*Oe-Ae*ve,ee[1]=Ae*De-be*Oe,ee[2]=be*ve-Pe*De,ee})([],he([],v[A[0]],v[A[1]]),he([],v[A[2]],v[A[1]]))),$=-((j=M)[0]*(U=v[A[1]])[0]+j[1]*U[1]+j[2]*U[2]);var j,U;return M.concat($)}));return new zo(v,P)}}class Lo{constructor(t,u){this.min=t,this.max=u,this.center=(function(m,p,v){return m[0]=.5*p[0],m[1]=.5*p[1],m[2]=.5*p[2],m})([],(function(m,p,v){return m[0]=p[0]+v[0],m[1]=p[1]+v[1],m[2]=p[2]+v[2],m})([],this.min,this.max))}quadrant(t){const u=[t%2==0,t<2],m=J(this.min),p=J(this.max);for(let v=0;v<u.length;v++)m[v]=u[v]?this.min[v]:this.center[v],p[v]=u[v]?this.center[v]:this.max[v];return p[2]=this.max[2],new Lo(m,p)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(t){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let m=!0;for(let p=0;p<t.planes.length;p++){const v=t.planes[p];let P=0;for(let A=0;A<u.length;A++)l.b2(v,u[A])>=0&&P++;if(P===0)return 0;P!==u.length&&(m=!1)}if(m)return 2;for(let p=0;p<3;p++){let v=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let A=0;A<t.points.length;A++){const M=t.points[A][p]-this.min[p];v=Math.min(v,M),P=Math.max(P,M)}if(P<0||v>this.max[p]-this.min[p])return 0}return 1}}class Bo{constructor(t=0,u=0,m=0,p=0){if(isNaN(t)||t<0||isNaN(u)||u<0||isNaN(m)||m<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=u,this.left=m,this.right=p}interpolate(t,u,m){return u.top!=null&&t.top!=null&&(this.top=l.y.number(t.top,u.top,m)),u.bottom!=null&&t.bottom!=null&&(this.bottom=l.y.number(t.bottom,u.bottom,m)),u.left!=null&&t.left!=null&&(this.left=l.y.number(t.left,u.left,m)),u.right!=null&&t.right!=null&&(this.right=l.y.number(t.right,u.right,m)),this}getCenter(t,u){const m=l.ac((this.left+t-this.right)/2,0,t),p=l.ac((this.top+u-this.bottom)/2,0,u);return new l.P(m,p)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Bo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Md=85.051129;class Ro{constructor(t,u,m,p,v){this.tileSize=512,this._renderWorldCopies=v===void 0||!!v,this._minZoom=t||0,this._maxZoom=u||22,this._minPitch=m??0,this._maxPitch=p??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Bo,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const t=new Ro(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.apply(this),t}apply(t){this.tileSize=t.tileSize,this.latRange=t.latRange,this.lngRange=t.lngRange,this.width=t.width,this.height=t.height,this._center=t._center,this._elevation=t._elevation,this.minElevationForCurrentTile=t.minElevationForCurrentTile,this.zoom=t.zoom,this.angle=t.angle,this._fov=t._fov,this._pitch=t._pitch,this._unmodified=t._unmodified,this._edgeInsets=t._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const u=-l.b3(t,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(function(){var m=new l.A(4);return l.A!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m})(),(function(m,p,v){var P=p[0],A=p[1],M=p[2],$=p[3],j=Math.sin(v),U=Math.cos(v);m[0]=P*U+M*j,m[1]=A*U+$*j,m[2]=P*-j+M*U,m[3]=A*-j+$*U})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const u=l.ac(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const u=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,u,m){this._unmodified=!1,this._edgeInsets.interpolate(t,u,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const u=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(t){const u=[new l.b4(0,t)];if(this._renderWorldCopies){const m=this.pointCoordinate(new l.P(0,0)),p=this.pointCoordinate(new l.P(this.width,0)),v=this.pointCoordinate(new l.P(this.width,this.height)),P=this.pointCoordinate(new l.P(0,this.height)),A=Math.floor(Math.min(m.x,p.x,v.x,P.x)),M=Math.floor(Math.max(m.x,p.x,v.x,P.x)),$=1;for(let j=A-$;j<=M+$;j++)j!==0&&u.push(new l.b4(j,t))}return u}coveringTiles(t){var u,m;let p=this.coveringZoomLevel(t);const v=p;if(t.minzoom!==void 0&&p<t.minzoom)return[];t.maxzoom!==void 0&&p>t.maxzoom&&(p=t.maxzoom);const P=this.pointCoordinate(this.getCameraPoint()),A=l.Z.fromLngLat(this.center),M=Math.pow(2,p),$=[M*P.x,M*P.y,0],j=[M*A.x,M*A.y,0],U=zo.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,p);let ee=t.minzoom||0;!t.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ee=p);const de=t.terrain?2/Math.min(this.tileSize,t.tileSize)*this.tileSize:3,me=ve=>({aabb:new Lo([ve*M,0,0],[(ve+1)*M,M,0]),zoom:0,x:0,y:0,wrap:ve,fullyVisible:!1}),be=[],Pe=[],Ae=p,De=t.reparseOverscaled?v:p;if(this._renderWorldCopies)for(let ve=1;ve<=3;ve++)be.push(me(-ve)),be.push(me(ve));for(be.push(me(0));be.length>0;){const ve=be.pop(),Oe=ve.x,Ue=ve.y;let Je=ve.fullyVisible;if(!Je){const Mt=ve.aabb.intersects(U);if(Mt===0)continue;Je=Mt===2}const gt=t.terrain?$:j,Ct=ve.aabb.distanceX(gt),zt=ve.aabb.distanceY(gt),jt=Math.max(Math.abs(Ct),Math.abs(zt));if(ve.zoom===Ae||jt>de+(1<<Ae-ve.zoom)-2&&ve.zoom>=ee){const Mt=Ae-ve.zoom,Et=$[0]-.5-(Oe<<Mt),Xt=$[1]-.5-(Ue<<Mt);Pe.push({tileID:new l.S(ve.zoom===Ae?De:ve.zoom,ve.wrap,ve.zoom,Oe,Ue),distanceSq:te([j[0]-.5-Oe,j[1]-.5-Ue]),tileDistanceToCamera:Math.sqrt(Et*Et+Xt*Xt)})}else for(let Mt=0;Mt<4;Mt++){const Et=(Oe<<1)+Mt%2,Xt=(Ue<<1)+(Mt>>1),fn=ve.zoom+1;let Dt=ve.aabb.quadrant(Mt);if(t.terrain){const $t=new l.S(fn,ve.wrap,fn,Et,Xt),cn=t.terrain.getMinMaxElevation($t),oi=(u=cn.minElevation)!==null&&u!==void 0?u:this.elevation,wn=(m=cn.maxElevation)!==null&&m!==void 0?m:this.elevation;Dt=new Lo([Dt.min[0],Dt.min[1],oi],[Dt.max[0],Dt.max[1],wn])}be.push({aabb:Dt,zoom:fn,x:Et,y:Xt,wrap:ve.wrap,fullyVisible:Je})}}return Pe.sort(((ve,Oe)=>ve.distanceSq-Oe.distanceSq)).map((ve=>ve.tileID))}resize(t,u){this.width=t,this.height=u,this.pixelsToGLUnits=[2/t,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){const u=l.ac(t.lat,-85.051129,Md);return new l.P(l.O(t.lng)*this.worldSize,l.Q(u)*this.worldSize)}unproject(t){return new l.Z(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(t){const u=this.elevation,m=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,p=this.pointLocation(this.centerPoint,t),v=t.getElevationForLngLatZoom(p,this.tileZoom);if(!(this.elevation-v))return;const P=m+u-v,A=Math.cos(this._pitch)*this.cameraToCenterDistance/P/l.b5(1,p.lat),M=this.scaleZoom(A/this.tileSize);this._elevation=v,this._center=p,this.zoom=M}setLocationAtPoint(t,u){const m=this.pointCoordinate(u),p=this.pointCoordinate(this.centerPoint),v=this.locationCoordinate(t),P=new l.Z(v.x-(m.x-p.x),v.y-(m.y-p.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,u){return u?this.coordinatePoint(this.locationCoordinate(t),u.getElevationForLngLatZoom(t,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,u){return this.coordinateLocation(this.pointCoordinate(t,u))}locationCoordinate(t){return l.Z.fromLngLat(t)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(t,u){if(u){const ee=u.pointCoordinate(t);if(ee!=null)return ee}const m=[t.x,t.y,0,1],p=[t.x,t.y,1,1];l.af(m,m,this.pixelMatrixInverse),l.af(p,p,this.pixelMatrixInverse);const v=m[3],P=p[3],A=m[1]/v,M=p[1]/P,$=m[2]/v,j=p[2]/P,U=$===j?0:(0-$)/(j-$);return new l.Z(l.y.number(m[0]/v,p[0]/P,U)/this.worldSize,l.y.number(A,M,U)/this.worldSize)}coordinatePoint(t,u=0,m=this.pixelMatrix){const p=[t.x*this.worldSize,t.y*this.worldSize,u,1];return l.af(p,p,m),new l.P(p[0]/p[3],p[1]/p[3])}getBounds(){const t=Math.max(0,this.height/2-this.getHorizon());return new le().extend(this.pointLocation(new l.P(0,t))).extend(this.pointLocation(new l.P(this.width,t))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new le([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Md])}calculateTileMatrix(t){const u=t.canonical,m=this.worldSize/this.zoomScale(u.z),p=u.x+Math.pow(2,u.z)*t.wrap,v=l.an(new Float64Array(16));return l.J(v,v,[p*m,u.y*m,0]),l.K(v,v,[m/l.X,m/l.X,1]),v}calculatePosMatrix(t,u=!1){const m=t.key,p=u?this._alignedPosMatrixCache:this._posMatrixCache;if(p[m])return p[m];const v=this.calculateTileMatrix(t);return l.L(v,u?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,v),p[m]=new Float32Array(v),p[m]}calculateFogMatrix(t){const u=t.key,m=this._fogMatrixCache;if(m[u])return m[u];const p=this.calculateTileMatrix(t);return l.L(p,this.fogMatrix,p),m[u]=new Float32Array(p),m[u]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(t,u){u=l.ac(+u,this.minZoom,this.maxZoom);const m={center:new l.N(t.lng,t.lat),zoom:u};let p=this.lngRange;if(!this._renderWorldCopies&&p===null){const ve=179.9999999999;p=[-ve,ve]}const v=this.tileSize*this.zoomScale(m.zoom);let P=0,A=v,M=0,$=v,j=0,U=0;const{x:ee,y:de}=this.size;if(this.latRange){const ve=this.latRange;P=l.Q(ve[1])*v,A=l.Q(ve[0])*v,A-P<de&&(j=de/(A-P))}p&&(M=l.b3(l.O(p[0])*v,0,v),$=l.b3(l.O(p[1])*v,0,v),$<M&&($+=v),$-M<ee&&(U=ee/($-M)));const{x:me,y:be}=this.project.call({worldSize:v},t);let Pe,Ae;const De=Math.max(U||0,j||0);if(De){const ve=new l.P(U?($+M)/2:me,j?(A+P)/2:be);return m.center=this.unproject.call({worldSize:v},ve).wrap(),m.zoom+=this.scaleZoom(De),m}if(this.latRange){const ve=de/2;be-ve<P&&(Ae=P+ve),be+ve>A&&(Ae=A-ve)}if(p){const ve=(M+$)/2;let Oe=me;this._renderWorldCopies&&(Oe=l.b3(me,ve-v/2,ve+v/2));const Ue=ee/2;Oe-Ue<M&&(Pe=M+Ue),Oe+Ue>$&&(Pe=$-Ue)}if(Pe!==void 0||Ae!==void 0){const ve=new l.P(Pe??me,Ae??be);m.center=this.unproject.call({worldSize:v},ve).wrap()}return m}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:u,zoom:m}=this.getConstrained(this.center,this.zoom);this.center=u,this.zoom=m,this._unmodified=t,this._constraining=!1}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,u=this.point.x,m=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b5(1,this.center.lat)*this.worldSize;let p=l.an(new Float64Array(16));l.K(p,p,[this.width/2,-this.height/2,1]),l.J(p,p,[1,-1,0]),this.labelPlaneMatrix=p,p=l.an(new Float64Array(16)),l.K(p,p,[1,-1,1]),l.J(p,p,[-1,-1,0]),l.K(p,p,[2/this.width,2/this.height,1]),this.glCoordMatrix=p;const v=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),P=Math.min(this.elevation,this.minElevationForCurrentTile),A=v-P*this._pixelPerMeter/Math.cos(this._pitch),M=P<0?A:v,$=Math.PI/2+this._pitch,j=this._fov*(.5+t.y/this.height),U=Math.sin(j)*M/Math.sin(l.ac(Math.PI-$-j,.01,Math.PI-.01)),ee=this.getHorizon(),de=2*Math.atan(ee/this.cameraToCenterDistance)*(.5+t.y/(2*ee)),me=Math.sin(de)*M/Math.sin(l.ac(Math.PI-$-de,.01,Math.PI-.01)),be=Math.min(U,me);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*be+M),this.nearZ=this.height/50,p=new Float64Array(16),l.b6(p,this._fov,this.width/this.height,this.nearZ,this.farZ),p[8]=2*-t.x/this.width,p[9]=2*t.y/this.height,this.projectionMatrix=l.ae(p),l.K(p,p,[1,-1,1]),l.J(p,p,[0,0,-this.cameraToCenterDistance]),l.b7(p,p,this._pitch),l.ad(p,p,this.angle),l.J(p,p,[-u,-m,0]),this.mercatorMatrix=l.K([],p,[this.worldSize,this.worldSize,this.worldSize]),l.K(p,p,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.L(new Float64Array(16),this.labelPlaneMatrix,p),l.J(p,p,[0,0,-this.elevation]),this.modelViewProjectionMatrix=p,this.invModelViewProjectionMatrix=l.as([],p),this.fogMatrix=new Float64Array(16),l.b6(this.fogMatrix,this._fov,this.width/this.height,v,this.farZ),this.fogMatrix[8]=2*-t.x/this.width,this.fogMatrix[9]=2*t.y/this.height,l.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),l.b7(this.fogMatrix,this.fogMatrix,this._pitch),l.ad(this.fogMatrix,this.fogMatrix,this.angle),l.J(this.fogMatrix,this.fogMatrix,[-u,-m,0]),l.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=l.L(new Float64Array(16),this.labelPlaneMatrix,p);const Pe=this.width%2/2,Ae=this.height%2/2,De=Math.cos(this.angle),ve=Math.sin(this.angle),Oe=u-Math.round(u)+De*Pe+ve*Ae,Ue=m-Math.round(m)+De*Ae+ve*Pe,Je=new Float64Array(p);if(l.J(Je,Je,[Oe>.5?Oe-1:Oe,Ue>.5?Ue-1:Ue,0]),this.alignedModelViewProjectionMatrix=Je,p=l.as(new Float64Array(16),this.pixelMatrix),!p)throw new Error("failed to invert matrix");this.pixelMatrixInverse=p,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const t=this.pointCoordinate(new l.P(0,0)),u=[t.x*this.worldSize,t.y*this.worldSize,0,1];return l.af(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,t))}getCameraQueryGeometry(t){const u=this.getCameraPoint();if(t.length===1)return[t[0],u];{let m=u.x,p=u.y,v=u.x,P=u.y;for(const A of t)m=Math.min(m,A.x),p=Math.min(p,A.y),v=Math.max(v,A.x),P=Math.max(P,A.y);return[new l.P(m,p),new l.P(v,p),new l.P(v,P),new l.P(m,P),new l.P(m,p)]}}lngLatToCameraDepth(t,u){const m=this.locationCoordinate(t),p=[m.x*this.worldSize,m.y*this.worldSize,u,1];return l.af(p,p,this.modelViewProjectionMatrix),p[2]/p[3]}}function zl(y,t){let u,m=!1,p=null,v=null;const P=()=>{p=null,m&&(y.apply(v,u),p=setTimeout(P,t),m=!1)};return(...A)=>(m=!0,v=this,u=A,p||P(),p)}class Xu{constructor(t){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let m;return u.split("&").map((p=>p.split("="))).forEach((p=>{p[0]===this._hashName&&(m=p)})),(m&&m[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some((m=>isNaN(m)))){const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:m,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(u.length===0)return;const m=u.join("/");let p=m;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${m}`);let v=window.location.hash.replace(p,"");v.startsWith("#&")?v=v.slice(0,1)+v.slice(2):v==="#"&&(v="");let P=window.location.href.replace(/(#.+)?$/,v);P=P.replace("&&","&"),window.history.replaceState(window.history.state,null,P)},this._updateHash=zl(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){const u=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,p=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,p),P=Math.round(u.lng*v)/v,A=Math.round(u.lat*v)/v,M=this._map.getBearing(),$=this._map.getPitch();let j="";if(j+=t?`/${P}/${A}/${m}`:`${m}/${A}/${P}`,(M||$)&&(j+="/"+Math.round(10*M)/10),$&&(j+=`/${Math.round($)}`),this._hashName){const U=this._hashName;let ee=!1;const de=window.location.hash.slice(1).split("&").map((me=>{const be=me.split("=")[0];return be===U?(ee=!0,`${be}=${j}`):me})).filter((me=>me));return ee||de.push(`${U}=${j}`),`#${de.join("&")}`}return`#${j}`}}const Yu={linearity:.3,easing:l.b8(0,0,.3,1)},Dd=l.e({deceleration:2500,maxSpeed:1400},Yu),Sg=l.e({deceleration:20,maxSpeed:1400},Yu),Xf=l.e({deceleration:1e3,maxSpeed:360},Yu),Ju=l.e({deceleration:1e3,maxSpeed:90},Yu);class Vd{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:k.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,u=k.now();for(;t.length>0&&u-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)u.zoom+=v.zoomDelta||0,u.bearing+=v.bearingDelta||0,u.pitch+=v.pitchDelta||0,v.panDelta&&u.pan._add(v.panDelta),v.around&&(u.around=v.around),v.pinchAround&&(u.pinchAround=v.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(u.pan.mag()){const v=Bl(u.pan.mag(),m,l.e({},Dd,t||{}));p.offset=u.pan.mult(v.amount/u.pan.mag()),p.center=this._map.transform.center,Ll(p,v)}if(u.zoom){const v=Bl(u.zoom,m,Sg);p.zoom=this._map.transform.zoom+v.amount,Ll(p,v)}if(u.bearing){const v=Bl(u.bearing,m,Xf);p.bearing=this._map.transform.bearing+l.ac(v.amount,-179,179),Ll(p,v)}if(u.pitch){const v=Bl(u.pitch,m,Ju);p.pitch=this._map.transform.pitch+v.amount,Ll(p,v)}if(p.zoom||p.bearing){const v=u.pinchAround===void 0?u.around:u.pinchAround;p.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),l.e(p,{noMoveStart:!0})}}function Ll(y,t){(!y.duration||y.duration<t.duration)&&(y.duration=t.duration,y.easing=t.easing)}function Bl(y,t,u){const{maxSpeed:m,linearity:p,deceleration:v}=u,P=l.ac(y*p/(t/1e3),-m,m),A=Math.abs(P)/(v*p);return{easing:u.easing,duration:1e3*A,amount:P*(A/2)}}class oa extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,u,m,p={}){const v=I.mousePos(u.getCanvas(),m),P=u.unproject(v);super(t,l.e({point:v,lngLat:P,originalEvent:m},p)),this._defaultPrevented=!1,this.target=u}}class Xs extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,u,m){const p=t==="touchend"?m.changedTouches:m.touches,v=I.touchPos(u.getCanvasContainer(),p),P=v.map((M=>u.unproject(M))),A=v.reduce(((M,$,j,U)=>M.add($.div(U.length))),new l.P(0,0));super(t,{points:v,point:A,lngLats:P,lngLat:u.unproject(A),originalEvent:m}),this._defaultPrevented=!1}}class Yf extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,u,m){super(t,{originalEvent:m}),this._defaultPrevented=!1}}class Jf{constructor(t,u){this._map=t,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Yf(t.type,this._map,t))}mousedown(t,u){return this._mousedownPos=u,this._firePreventable(new oa(t.type,this._map,t))}mouseup(t){this._map.fire(new oa(t.type,this._map,t))}click(t,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new oa(t.type,this._map,t))}dblclick(t){return this._firePreventable(new oa(t.type,this._map,t))}mouseover(t){this._map.fire(new oa(t.type,this._map,t))}mouseout(t){this._map.fire(new oa(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Xs(t.type,this._map,t))}touchmove(t){this._map.fire(new Xs(t.type,this._map,t))}touchend(t){this._map.fire(new Xs(t.type,this._map,t))}touchcancel(t){this._map.fire(new Xs(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Pi{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new oa(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new oa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new oa(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class br{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.pointLocation(l.P.convert(t),this._map.terrain)}}class Xa{constructor(t,u){this._map=t,this._tr=new br(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,u){this.isEnabled()&&t.shiftKey&&t.button===0&&(I.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(t,u){if(!this._active)return;const m=u;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=m,this._box||(this._box=I.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const v=Math.min(p.x,m.x),P=Math.max(p.x,m.x),A=Math.min(p.y,m.y),M=Math.max(p.y,m.y);I.setTransform(this._box,`translate(${v}px,${A}px)`),this._box.style.width=P-v+"px",this._box.style.height=M-A+"px"}mouseupWindow(t,u){if(!this._active||t.button!==0)return;const m=this._startPos,p=u;if(this.reset(),I.suppressClick(),m.x!==p.x||m.y!==p.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:t})),{cameraAnimation:v=>v.fitScreenCoordinates(m,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,u){return this._map.fire(new l.k(t,{originalEvent:u}))}}function Rl(y,t){if(y.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${t.length}`);const u={};for(let m=0;m<y.length;m++)u[y[m].identifier]=t[m];return u}class zd{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,u,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),m.length===this.numTouches&&(this.centroid=(function(p){const v=new l.P(0,0);for(const P of p)v._add(P);return v.div(p.length)})(u),this.touches=Rl(m,u)))}touchmove(t,u,m){if(this.aborted||!this.centroid)return;const p=Rl(m,u);for(const v in this.touches){const P=p[v];(!P||P.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(t,u,m){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class Qu{constructor(t){this.singleTap=new zd(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,u,m){this.singleTap.touchstart(t,u,m)}touchmove(t,u,m){this.singleTap.touchmove(t,u,m)}touchend(t,u,m){const p=this.singleTap.touchend(t,u,m);if(p){const v=t.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(p)<30;if(v&&P||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class Fo{constructor(t){this._tr=new br(t),this._zoomIn=new Qu({numTouches:1,numTaps:2}),this._zoomOut=new Qu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,u,m){this._zoomIn.touchstart(t,u,m),this._zoomOut.touchstart(t,u,m)}touchmove(t,u,m){this._zoomIn.touchmove(t,u,m),this._zoomOut.touchmove(t,u,m)}touchend(t,u,m){const p=this._zoomIn.touchend(t,u,m),v=this._zoomOut.touchend(t,u,m),P=this._tr;return p?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:P.zoom+1,around:P.unproject(p)},{originalEvent:t})}):v?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:P.zoom-1,around:P.unproject(v)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ns{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const u=this._moveFunction(...t);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(t,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,u){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const p=u.length?u[0]:u;return!this._moved&&p.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(m,p))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&I.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Ld={0:1,2:2};class ec{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const u=I.mouseButton(t);this._eventButton=u}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!(function(u,m){const p=Ld[m];return u.buttons===void 0||(u.buttons&p)!==p})(t,this._eventButton)}isValidEndEvent(t){return I.mouseButton(t)===this._eventButton}}class Bd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}const tc=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=t=>{t.preventDefault()}},Rd=({enable:y,clickTolerance:t,bearingDegreesPerPixelMoved:u=.8})=>{const m=new ec({checkCorrectEvent:p=>I.mouseButton(p)===0&&p.ctrlKey||I.mouseButton(p)===2});return new ns({clickTolerance:t,move:(p,v)=>({bearingDelta:(v.x-p.x)*u}),moveStateManager:m,enable:y,assignEvents:tc})},Fd=({enable:y,clickTolerance:t,pitchDegreesPerPixelMoved:u=-.5})=>{const m=new ec({checkCorrectEvent:p=>I.mouseButton(p)===0&&p.ctrlKey||I.mouseButton(p)===2});return new ns({clickTolerance:t,move:(p,v)=>({pitchDelta:(v.y-p.y)*u}),moveStateManager:m,enable:y,assignEvents:tc})};class Ys{constructor(t,u){this._clickTolerance=t.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,u,m){return this._calculateTransform(t,u,m)}touchmove(t,u,m){if(this._active){if(!this._shouldBePrevented(m.length))return t.preventDefault(),this._calculateTransform(t,u,m);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,u,m){this._calculateTransform(t,u,m),this._active&&this._shouldBePrevented(m.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,u,m){m.length>0&&(this._active=!0);const p=Rl(m,u),v=new l.P(0,0),P=new l.P(0,0);let A=0;for(const $ in p){const j=p[$],U=this._touches[$];U&&(v._add(j),P._add(j.sub(U)),A++,p[$]=j)}if(this._touches=p,this._shouldBePrevented(A)||!P.mag())return;const M=P.div(A);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(A),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,u,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([u[0],u[1]]))}touchmove(t,u,m){if(!this._firstTwoTouches)return;t.preventDefault();const[p,v]=this._firstTwoTouches,P=Fl(m,u,p),A=Fl(m,u,v);if(!P||!A)return;const M=this._aroundCenter?null:P.add(A).div(2);return this._move([P,A],M,t)}touchend(t,u,m){if(!this._firstTwoTouches)return;const[p,v]=this._firstTwoTouches,P=Fl(m,u,p),A=Fl(m,u,v);P&&A||(this._active&&I.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Fl(y,t,u){for(let m=0;m<y.length;m++)if(y[m].identifier===u)return t[m]}function Od(y,t){return Math.log(y/t)/Math.LN2}class $d extends nc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,u){const m=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Od(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Od(this._distance,m),pinchAround:u}}}function Nd(y,t){return 180*y.angleWith(t)/Math.PI}class jd extends nc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,u,m){const p=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Nd(this._vector,p),pinchAround:u}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const u=25/(Math.PI*this._minDiameter)*360,m=Nd(t,this._startVector);return Math.abs(m)<u}}function ic(y){return Math.abs(y.y)>Math.abs(y.x)}class Ol extends nc{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,u,m){super.touchstart(t,u,m),this._currentTouchCount=m.length}_start(t){this._lastPoints=t,ic(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,u,m){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=t[0].sub(this._lastPoints[0]),v=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,v,m.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(p.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(t,u,m){if(this._valid!==void 0)return this._valid;const p=t.mag()>=2,v=u.mag()>=2;if(!p&&!v)return;if(!p||!v)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const P=t.y>0==u.y>0;return ic(t)&&ic(u)&&P}}const Qf={panStep:100,bearingStep:15,pitchStep:10};class ur{constructor(t){this._tr=new br(t);const u=Qf;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let u=0,m=0,p=0,v=0,P=0;switch(t.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:t.shiftKey?m=-1:(t.preventDefault(),v=-1);break;case 39:t.shiftKey?m=1:(t.preventDefault(),v=1);break;case 38:t.shiftKey?p=1:(t.preventDefault(),P=-1);break;case 40:t.shiftKey?p=-1:(t.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(m=0,p=0),{cameraAnimation:A=>{const M=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:$r,zoom:u?Math.round(M.zoom)+u*(t.shiftKey?2:1):M.zoom,bearing:M.bearing+m*this._bearingStep,pitch:M.pitch+p*this._pitchStep,offset:[-v*this._panStep,-P*this._panStep],center:M.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function $r(y){return y*(2-y)}const Ud=4.000244140625;class xr{constructor(t,u){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=t,this._tr=new br(t),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let u=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const m=k.now(),p=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,u!==0&&u%Ud==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(p*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),t.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=t,this._delta-=u,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=I.mousePos(this._map.getCanvas(),t),m=this._tr;this._around=u.y>m.transform.height/2-m.transform.getHorizon()?l.N.convert(this._aroundCenter?m.center:m.unproject(u)):l.N.convert(m.center),this._aroundPoint=m.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(this._delta!==0){const M=this._type==="wheel"&&Math.abs(this._delta)>Ud?this._wheelZoomRate:this._defaultZoomRate;let $=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&$!==0&&($=1/$);const j=typeof this._targetZoom=="number"?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(j*$))),this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:t.zoom,m=this._startZoom,p=this._easing;let v,P=!1;const A=k.now()-this._lastWheelEventTime;if(this._type==="wheel"&&m&&p&&A){const M=Math.min(A/200,1),$=p(M);v=l.y.number(m,u,$),M<1?this._frameId||(this._frameId=!0):P=!0}else v=u,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:v-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let u=l.b9;if(this._prevEase){const m=this._prevEase,p=(k.now()-m.start)/m.duration,v=m.easing(p+.01)-m.easing(p),P=.27/Math.sqrt(v*v+1e-4)*.01,A=Math.sqrt(.0729-P*P);u=l.b8(P,A,.25,1)}return this._prevEase={start:k.now(),duration:t,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Js{constructor(t,u){this._clickZoom=t,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class kg{constructor(t){this._tr=new br(t),this.reset()}reset(){this._active=!1}dblclick(t,u){return t.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cg{constructor(){this._tap=new Qu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,u,m){if(!this._swipePoint)if(this._tapTime){const p=u[0],v=t.timeStamp-this._tapTime<500,P=this._tapPoint.dist(p)<30;v&&P?m.length>0&&(this._swipePoint=p,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(t,u,m)}touchmove(t,u,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const p=u[0],v=p.y-this._swipePoint.y;return this._swipePoint=p,t.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(t,u,m)}touchend(t,u,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const p=this._tap.touchend(t,u,m);p&&(this._tapTime=t.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class em{constructor(t,u,m){this._el=t,this._mousePan=u,this._touchPan=m}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class tm{constructor(t,u,m){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=u,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Hd{constructor(t,u,m,p){this._el=t,this._touchZoom=u,this._touchRotate=m,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Oo{constructor(t,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=I.create("div","maplibregl-cooperative-gesture-screen",t);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const m=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=u,this._container.appendChild(p);const v=document.createElement("div");v.className="maplibregl-mobile-message",v.textContent=m,this._container.appendChild(v),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(I.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,u){this._enabled&&(this._map.fire(new l.k("cooperativegestureprevented",{gestureType:t,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const cr=y=>y.zoom||y.drag||y.pitch||y.rotate;class qt extends l.k{}function ac(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class qd{constructor(t,u){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,v)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const P=p.type==="renderFrame"?void 0:p,A={needsRenderFrame:!1},M={},$={},j=p.touches,U=j?this._getMapTouches(j):void 0,ee=U?I.touchPos(this._map.getCanvas(),U):I.mousePos(this._map.getCanvas(),p);for(const{handlerName:be,handler:Pe,allowed:Ae}of this._handlers){if(!Pe.isEnabled())continue;let De;this._blockedByActive($,Ae,be)?Pe.reset():Pe[v||p.type]&&(De=Pe[v||p.type](p,ee,U),this.mergeHandlerResult(A,M,De,be,P),De&&De.needsRenderFrame&&this._triggerRenderFrame()),(De||Pe.isActive())&&($[be]=Pe)}const de={};for(const be in this._previousActiveHandlers)$[be]||(de[be]=P);this._previousActiveHandlers=$,(Object.keys(de).length||ac(A))&&(this._changes.push([A,M,de]),this._triggerRenderFrame()),(Object.keys($).length||ac(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:me}=A;me&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],me(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Vd(t),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,v,P]of this._listeners)I.addEventListener(p,v,p===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[t,u,m]of this._listeners)I.removeEventListener(t,u,t===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(t){const u=this._map,m=u.getCanvasContainer();this._add("mapEvent",new Jf(u,t));const p=u.boxZoom=new Xa(u,t);this._add("boxZoom",p),t.interactive&&t.boxZoom&&p.enable();const v=u.cooperativeGestures=new Oo(u,t.cooperativeGestures);this._add("cooperativeGestures",v),t.cooperativeGestures&&v.enable();const P=new Fo(u),A=new kg(u);u.doubleClickZoom=new Js(A,P),this._add("tapZoom",P),this._add("clickZoom",A),t.interactive&&t.doubleClickZoom&&u.doubleClickZoom.enable();const M=new Cg;this._add("tapDragZoom",M);const $=u.touchPitch=new Ol(u);this._add("touchPitch",$),t.interactive&&t.touchPitch&&u.touchPitch.enable(t.touchPitch);const j=Rd(t),U=Fd(t);u.dragRotate=new tm(t,j,U),this._add("mouseRotate",j,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]),t.interactive&&t.dragRotate&&u.dragRotate.enable();const ee=(({enable:De,clickTolerance:ve})=>{const Oe=new ec({checkCorrectEvent:Ue=>I.mouseButton(Ue)===0&&!Ue.ctrlKey});return new ns({clickTolerance:ve,move:(Ue,Je)=>({around:Je,panDelta:Je.sub(Ue)}),activateOnStart:!0,moveStateManager:Oe,enable:De,assignEvents:tc})})(t),de=new Ys(t,u);u.dragPan=new em(m,ee,de),this._add("mousePan",ee),this._add("touchPan",de,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&u.dragPan.enable(t.dragPan);const me=new jd,be=new $d;u.touchZoomRotate=new Hd(m,be,me,M),this._add("touchRotate",me,["touchPan","touchZoom"]),this._add("touchZoom",be,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&u.touchZoomRotate.enable(t.touchZoomRotate);const Pe=u.scrollZoom=new xr(u,(()=>this._triggerRenderFrame()));this._add("scrollZoom",Pe,["mousePan"]),t.interactive&&t.scrollZoom&&u.scrollZoom.enable(t.scrollZoom);const Ae=u.keyboard=new ur(u);this._add("keyboard",Ae),t.interactive&&t.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Pi(u))}_add(t,u,m){this._handlers.push({handlerName:t,handler:u,allowed:m}),this._handlersById[t]=u}stop(t){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!cr(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,u,m){for(const p in t)if(p!==m&&(!u||u.indexOf(p)<0))return!0;return!1}_getMapTouches(t){const u=[];for(const m of t)this._el.contains(m.target)&&u.push(m);return u}mergeHandlerResult(t,u,m,p,v){if(!m)return;l.e(t,m);const P={handlerName:p,originalEvent:m.originalEvent||v};m.zoomDelta!==void 0&&(u.zoom=P),m.panDelta!==void 0&&(u.drag=P),m.pitchDelta!==void 0&&(u.pitch=P),m.bearingDelta!==void 0&&(u.rotate=P)}_applyChanges(){const t={},u={},m={};for(const[p,v,P]of this._changes)p.panDelta&&(t.panDelta=(t.panDelta||new l.P(0,0))._add(p.panDelta)),p.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+p.pitchDelta),p.around!==void 0&&(t.around=p.around),p.pinchAround!==void 0&&(t.pinchAround=p.pinchAround),p.noInertia&&(t.noInertia=p.noInertia),l.e(u,v),l.e(m,P);this._updateMapTransform(t,u,m),this._changes=[]}_updateMapTransform(t,u,m){const p=this._map,v=p._getTransformForUpdate(),P=p.terrain;if(!(ac(t)||P&&this._terrainMovement))return this._fireEvents(u,m,!0);let{panDelta:A,zoomDelta:M,bearingDelta:$,pitchDelta:j,around:U,pinchAround:ee}=t;ee!==void 0&&(U=ee),p._stop(!0),U=U||p.transform.centerPoint;const de=v.pointLocation(A?U.sub(A):U);$&&(v.bearing+=$),j&&(v.pitch+=j),M&&(v.zoom+=M),P?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?v.center=v.pointLocation(v.centerPoint.sub(A)):v.setLocationAtPoint(de,U):(this._terrainMovement=!0,this._map._elevationFreeze=!0,v.setLocationAtPoint(de,U)):v.setLocationAtPoint(de,U),p._applyUpdatedTransform(v),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(u,m,!0)}_fireEvents(t,u,m){const p=cr(this._eventsInProgress),v=cr(t),P={};for(const U in t){const{originalEvent:ee}=t[U];this._eventsInProgress[U]||(P[`${U}start`]=ee),this._eventsInProgress[U]=t[U]}!p&&v&&this._fireEvent("movestart",v.originalEvent);for(const U in P)this._fireEvent(U,P[U]);v&&this._fireEvent("move",v.originalEvent);for(const U in t){const{originalEvent:ee}=t[U];this._fireEvent(U,ee)}const A={};let M;for(const U in this._eventsInProgress){const{handlerName:ee,originalEvent:de}=this._eventsInProgress[U];this._handlersById[ee].isActive()||(delete this._eventsInProgress[U],M=u[ee]||de,A[`${U}end`]=M)}for(const U in A)this._fireEvent(U,A[U]);const $=cr(this._eventsInProgress),j=(p||v)&&!$;if(j&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const U=this._map._getTransformForUpdate();U.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(U)}if(m&&j){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ee=de=>de!==0&&-this._bearingSnap<de&&de<this._bearingSnap;!U||!U.essential&&k.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:M})),ee(this._map.getBearing())&&this._map.resetNorth()):(ee(U.bearing||this._map.getBearing())&&(U.bearing=0),U.freezeElevation=!0,this._map.easeTo(U,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(t,u){this._map.fire(new l.k(t,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new qt("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class nm extends l.E{constructor(t,u){super(),this._renderFrameCallback=()=>{const m=Math.min((k.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=u.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new l.N(this.transform.center.lng,this.transform.center.lat)}setCenter(t,u){return this.jumpTo({center:t},u)}panBy(t,u,m){return t=l.P.convert(t).mult(-1),this.panTo(this.transform.center,l.e({offset:t},u),m)}panTo(t,u,m){return this.easeTo(l.e({center:t},u),m)}getZoom(){return this.transform.zoom}setZoom(t,u){return this.jumpTo({zoom:t},u),this}zoomTo(t,u,m){return this.easeTo(l.e({zoom:t},u),m)}zoomIn(t,u){return this.zoomTo(this.getZoom()+1,t,u),this}zoomOut(t,u){return this.zoomTo(this.getZoom()-1,t,u),this}getBearing(){return this.transform.bearing}setBearing(t,u){return this.jumpTo({bearing:t},u),this}getPadding(){return this.transform.padding}setPadding(t,u){return this.jumpTo({padding:t},u),this}rotateTo(t,u,m){return this.easeTo(l.e({bearing:t},u),m)}resetNorth(t,u){return this.rotateTo(0,l.e({duration:1e3},t),u),this}resetNorthPitch(t,u){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},t),u),this}snapToNorth(t,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,u):this}getPitch(){return this.transform.pitch}setPitch(t,u){return this.jumpTo({pitch:t},u),this}cameraForBounds(t,u){t=le.convert(t).adjustAntiMeridian();const m=u&&u.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),m,u)}_cameraForBoxAndBearing(t,u,m,p){const v={top:0,bottom:0,right:0,left:0};if(typeof(p=l.e({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const Mt=p.padding;p.padding={top:Mt,bottom:Mt,right:Mt,left:Mt}}p.padding=l.e(v,p.padding);const P=this.transform,A=P.padding,M=new le(t,u),$=P.project(M.getNorthWest()),j=P.project(M.getNorthEast()),U=P.project(M.getSouthEast()),ee=P.project(M.getSouthWest()),de=l.ba(-m),me=$.rotate(de),be=j.rotate(de),Pe=U.rotate(de),Ae=ee.rotate(de),De=new l.P(Math.max(me.x,be.x,Ae.x,Pe.x),Math.max(me.y,be.y,Ae.y,Pe.y)),ve=new l.P(Math.min(me.x,be.x,Ae.x,Pe.x),Math.min(me.y,be.y,Ae.y,Pe.y)),Oe=De.sub(ve),Ue=(P.width-(A.left+A.right+p.padding.left+p.padding.right))/Oe.x,Je=(P.height-(A.top+A.bottom+p.padding.top+p.padding.bottom))/Oe.y;if(Je<0||Ue<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const gt=Math.min(P.scaleZoom(P.scale*Math.min(Ue,Je)),p.maxZoom),Ct=l.P.convert(p.offset),zt=new l.P((p.padding.left-p.padding.right)/2,(p.padding.top-p.padding.bottom)/2).rotate(l.ba(m)),jt=Ct.add(zt).mult(P.scale/P.zoomScale(gt));return{center:P.unproject($.add(U).div(2).sub(jt)),zoom:gt,bearing:m}}fitBounds(t,u,m){return this._fitInternal(this.cameraForBounds(t,u),u,m)}fitScreenCoordinates(t,u,m,p,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(t)),this.transform.pointLocation(l.P.convert(u)),m,p),p,v)}_fitInternal(t,u,m){return t?(delete(u=l.e(t,u)).padding,u.linear?this.easeTo(u,m):this.flyTo(u,m)):this}jumpTo(t,u){this.stop();const m=this._getTransformForUpdate();let p=!1,v=!1,P=!1;return"zoom"in t&&m.zoom!==+t.zoom&&(p=!0,m.zoom=+t.zoom),t.center!==void 0&&(m.center=l.N.convert(t.center)),"bearing"in t&&m.bearing!==+t.bearing&&(v=!0,m.bearing=+t.bearing),"pitch"in t&&m.pitch!==+t.pitch&&(P=!0,m.pitch=+t.pitch),t.padding==null||m.isPaddingEqual(t.padding)||(m.padding=t.padding),this._applyUpdatedTransform(m),this.fire(new l.k("movestart",u)).fire(new l.k("move",u)),p&&this.fire(new l.k("zoomstart",u)).fire(new l.k("zoom",u)).fire(new l.k("zoomend",u)),v&&this.fire(new l.k("rotatestart",u)).fire(new l.k("rotate",u)).fire(new l.k("rotateend",u)),P&&this.fire(new l.k("pitchstart",u)).fire(new l.k("pitch",u)).fire(new l.k("pitchend",u)),this.fire(new l.k("moveend",u))}calculateCameraOptionsFromTo(t,u,m,p=0){const v=l.Z.fromLngLat(t,u),P=l.Z.fromLngLat(m,p),A=P.x-v.x,M=P.y-v.y,$=P.z-v.z,j=Math.hypot(A,M,$);if(j===0)throw new Error("Can't calculate camera options with same From and To");const U=Math.hypot(A,M),ee=this.transform.scaleZoom(this.transform.cameraToCenterDistance/j/this.transform.tileSize),de=180*Math.atan2(A,-M)/Math.PI;let me=180*Math.acos(U/j)/Math.PI;return me=$<0?90-me:90+me,{center:P.toLngLat(),zoom:ee,pitch:me,bearing:de}}easeTo(t,u){var m;this._stop(!1,t.easeId),((t=l.e({offset:[0,0],duration:500,easing:l.b9},t)).animate===!1||!t.essential&&k.prefersReducedMotion)&&(t.duration=0);const p=this._getTransformForUpdate(),v=p.zoom,P=p.bearing,A=p.pitch,M=p.padding,$="bearing"in t?this._normalizeBearing(t.bearing,P):P,j="pitch"in t?+t.pitch:A,U="padding"in t?t.padding:p.padding,ee=l.P.convert(t.offset);let de=p.centerPoint.add(ee);const me=p.pointLocation(de),{center:be,zoom:Pe}=p.getConstrained(l.N.convert(t.center||me),(m=t.zoom)!==null&&m!==void 0?m:v);this._normalizeCenter(be,p);const Ae=p.project(me),De=p.project(be).sub(Ae),ve=p.zoomScale(Pe-v);let Oe,Ue;t.around&&(Oe=l.N.convert(t.around),Ue=p.locationPoint(Oe));const Je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Pe!==v,this._rotating=this._rotating||P!==$,this._pitching=this._pitching||j!==A,this._padding=!p.isPaddingEqual(U),this._easeId=t.easeId,this._prepareEase(u,t.noMoveStart,Je),this.terrain&&this._prepareElevation(be),this._ease((gt=>{if(this._zooming&&(p.zoom=l.y.number(v,Pe,gt)),this._rotating&&(p.bearing=l.y.number(P,$,gt)),this._pitching&&(p.pitch=l.y.number(A,j,gt)),this._padding&&(p.interpolatePadding(M,U,gt),de=p.centerPoint.add(ee)),this.terrain&&!t.freezeElevation&&this._updateElevation(gt),Oe)p.setLocationAtPoint(Oe,Ue);else{const Ct=p.zoomScale(p.zoom-v),zt=Pe>v?Math.min(2,ve):Math.max(.5,ve),jt=Math.pow(zt,1-gt),Mt=p.unproject(Ae.add(De.mult(gt*jt)).mult(Ct));p.setLocationAtPoint(p.renderWorldCopies?Mt.wrap():Mt,de)}this._applyUpdatedTransform(p),this._fireMoveEvents(u)}),(gt=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(u,gt)}),t),this}_prepareEase(t,u,m={}){this._moving=!0,u||m.moving||this.fire(new l.k("movestart",t)),this._zooming&&!m.zooming&&this.fire(new l.k("zoomstart",t)),this._rotating&&!m.rotating&&this.fire(new l.k("rotatestart",t)),this._pitching&&!m.pitching&&this.fire(new l.k("pitchstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&u!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(m-(u-(m*t+this._elevationStart))/(1-t)),this._elevationTarget=u}this.transform.elevation=l.y.number(this._elevationStart,this._elevationTarget,t)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){const u=t.getCameraPosition(),m=this.terrain.getElevationForLngLatZoom(u.lngLat,t.zoom);if(u.altitude<m){const p=this.calculateCameraOptionsFromTo(u.lngLat,m,t.center,t.elevation);return{pitch:p.pitch,zoom:p.zoom}}return{}}_applyUpdatedTransform(t){const u=[];if(this.terrain&&u.push((p=>this._elevateCameraIfInsideTerrain(p))),this.transformCameraUpdate&&u.push((p=>this.transformCameraUpdate(p))),!u.length)return;const m=t.clone();for(const p of u){const v=m.clone(),{center:P,zoom:A,pitch:M,bearing:$,elevation:j}=p(v);P&&(v.center=P),A!==void 0&&(v.zoom=A),M!==void 0&&(v.pitch=M),$!==void 0&&(v.bearing=$),j!==void 0&&(v.elevation=j),m.apply(v)}this.transform.apply(m)}_fireMoveEvents(t){this.fire(new l.k("move",t)),this._zooming&&this.fire(new l.k("zoom",t)),this._rotating&&this.fire(new l.k("rotate",t)),this._pitching&&this.fire(new l.k("pitch",t))}_afterEase(t,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const m=this._zooming,p=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new l.k("zoomend",t)),p&&this.fire(new l.k("rotateend",t)),v&&this.fire(new l.k("pitchend",t)),this.fire(new l.k("moveend",t))}flyTo(t,u){var m;if(!t.essential&&k.prefersReducedMotion){const $t=l.M(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo($t,u)}this.stop(),t=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.b9},t);const p=this._getTransformForUpdate(),v=p.zoom,P=p.bearing,A=p.pitch,M=p.padding,$="bearing"in t?this._normalizeBearing(t.bearing,P):P,j="pitch"in t?+t.pitch:A,U="padding"in t?t.padding:p.padding,ee=l.P.convert(t.offset);let de=p.centerPoint.add(ee);const me=p.pointLocation(de),{center:be,zoom:Pe}=p.getConstrained(l.N.convert(t.center||me),(m=t.zoom)!==null&&m!==void 0?m:v);this._normalizeCenter(be,p);const Ae=p.zoomScale(Pe-v),De=p.project(me),ve=p.project(be).sub(De);let Oe=t.curve;const Ue=Math.max(p.width,p.height),Je=Ue/Ae,gt=ve.mag();if("minZoom"in t){const $t=l.ac(Math.min(t.minZoom,v,Pe),p.minZoom,p.maxZoom),cn=Ue/p.zoomScale($t-v);Oe=Math.sqrt(cn/gt*2)}const Ct=Oe*Oe;function zt($t){const cn=(Je*Je-Ue*Ue+($t?-1:1)*Ct*Ct*gt*gt)/(2*($t?Je:Ue)*Ct*gt);return Math.log(Math.sqrt(cn*cn+1)-cn)}function jt($t){return(Math.exp($t)-Math.exp(-$t))/2}function Mt($t){return(Math.exp($t)+Math.exp(-$t))/2}const Et=zt(!1);let Xt=function($t){return Mt(Et)/Mt(Et+Oe*$t)},fn=function($t){return Ue*((Mt(Et)*(jt(cn=Et+Oe*$t)/Mt(cn))-jt(Et))/Ct)/gt;var cn},Dt=(zt(!0)-Et)/Oe;if(Math.abs(gt)<1e-6||!isFinite(Dt)){if(Math.abs(Ue-Je)<1e-6)return this.easeTo(t,u);const $t=Je<Ue?-1:1;Dt=Math.abs(Math.log(Je/Ue))/Oe,fn=()=>0,Xt=cn=>Math.exp($t*Oe*cn)}return t.duration="duration"in t?+t.duration:1e3*Dt/("screenSpeed"in t?+t.screenSpeed/Oe:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=P!==$,this._pitching=j!==A,this._padding=!p.isPaddingEqual(U),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(be),this._ease(($t=>{const cn=$t*Dt,oi=1/Xt(cn);p.zoom=$t===1?Pe:v+p.scaleZoom(oi),this._rotating&&(p.bearing=l.y.number(P,$,$t)),this._pitching&&(p.pitch=l.y.number(A,j,$t)),this._padding&&(p.interpolatePadding(M,U,$t),de=p.centerPoint.add(ee)),this.terrain&&!t.freezeElevation&&this._updateElevation($t);const wn=$t===1?be:p.unproject(De.add(ve.mult(fn(cn))).mult(oi));p.setLocationAtPoint(p.renderWorldCopies?wn.wrap():wn,de),this._applyUpdatedTransform(p),this._fireMoveEvents(u)}),(()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(u)}),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,u){var m;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,u)}return t||(m=this.handlers)===null||m===void 0||m.stop(!1),this}_ease(t,u,m){m.animate===!1||m.duration===0?(t(1),u()):(this._easeStart=k.now(),this._easeOptions=m,this._onEaseFrame=t,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,u){t=l.b3(t,-180,180);const m=Math.abs(t-u);return Math.abs(t-360-u)<m&&(t-=360),Math.abs(t+360-u)<m&&(t+=360),t}_normalizeCenter(t,u){if(!u.renderWorldCopies||u.lngRange)return;const m=t.lng-u.center.lng;t.lng+=m>180?-360:m<-180?360:0}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLatZoom(l.N.convert(t),this.transform.tileZoom)-this.transform.elevation:null}}const $o={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class No{constructor(t=$o){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=I.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=I.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,u){const m=this._map._getUIString(`AttributionControl.${u}`);t.title=m,t.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((p=>typeof p!="string"?"":p))):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const u=this._map.style.sourceCaches;for(const p in u){const v=u[p];if(v.used||v.usedForTerrain){const P=v.getSource();P.attribution&&t.indexOf(P.attribution)<0&&t.push(P.attribution)}}t=t.filter((p=>String(p).trim())),t.sort(((p,v)=>p.length-v.length)),t=t.filter(((p,v)=>{for(let P=v+1;P<t.length;P++)if(t[P].indexOf(p)>=0)return!1;return!0}));const m=t.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,t.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Gd{constructor(t={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const m=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=I.create("div","maplibregl-ctrl");const u=I.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){I.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class En{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const u=++this._id;return this._queue.push({callback:t,id:u,cancelled:!1}),u}remove(t){const u=this._currentlyRunning,m=u?this._queue.concat(u):this._queue;for(const p of m)if(p.id===t)return void(p.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const m of u)if(!m.cancelled&&(m.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Wd=l.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Ig extends l.E{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,t.usedForTerrain=!0,t.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,u){this.sourceCache.update(t,u),this._renderableTilesKeys=[];const m={};for(const p of t.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))m[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.posMatrix=new Float64Array(16),l.aP(p.posMatrix,0,l.X,0,l.X,0,1),this._tiles[p.key]=new Ni(p,this.tileSize));for(const p in this._tiles)m[p]||delete this._tiles[p]}freeRtt(t){for(const u in this._tiles){const m=this._tiles[u];(!t||m.tileID.equals(t)||m.tileID.isChildOf(t)||t.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t){const u={};for(const m of this._renderableTilesKeys){const p=this._tiles[m].tileID;if(p.canonical.equals(t.canonical)){const v=t.clone();v.posMatrix=new Float64Array(16),l.aP(v.posMatrix,0,l.X,0,l.X,0,1),u[m]=v}else if(p.canonical.isChildOf(t.canonical)){const v=t.clone();v.posMatrix=new Float64Array(16);const P=p.canonical.z-t.canonical.z,A=p.canonical.x-(p.canonical.x>>P<<P),M=p.canonical.y-(p.canonical.y>>P<<P),$=l.X>>P;l.aP(v.posMatrix,0,$,0,$,0,1),l.J(v.posMatrix,v.posMatrix,[-A*$,-M*$,0]),u[m]=v}else if(t.canonical.isChildOf(p.canonical)){const v=t.clone();v.posMatrix=new Float64Array(16);const P=t.canonical.z-p.canonical.z,A=t.canonical.x-(t.canonical.x>>P<<P),M=t.canonical.y-(t.canonical.y>>P<<P),$=l.X>>P;l.aP(v.posMatrix,0,l.X,0,l.X,0,1),l.J(v.posMatrix,v.posMatrix,[A*$,M*$,0]),l.K(v.posMatrix,v.posMatrix,[1/2**P,1/2**P,0]),u[m]=v}}return u}getSourceTile(t,u){const m=this.sourceCache._source;let p=t.overscaledZ-this.deltaZoom;if(p>m.maxzoom&&(p=m.maxzoom),p<m.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(p).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!v||!v.dem)&&u)for(;p>=m.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(t.scaledTo(p--).key);return v}tilesAfterTime(t=Date.now()){return Object.values(this._tiles).filter((u=>u.timeAdded>=t))}}class Zd{constructor(t,u,m){this.painter=t,this.sourceCache=new Ig(u),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,u,m,p=l.X){var v;if(!(u>=0&&u<p&&m>=0&&m<p))return 0;const P=this.getTerrainData(t),A=(v=P.tile)===null||v===void 0?void 0:v.dem;if(!A)return 0;const M=(function(me,be,Pe){var Ae=be[0],De=be[1];return me[0]=Pe[0]*Ae+Pe[4]*De+Pe[12],me[1]=Pe[1]*Ae+Pe[5]*De+Pe[13],me})([],[u/p*l.X,m/p*l.X],P.u_terrain_matrix),$=[M[0]*A.dim,M[1]*A.dim],j=Math.floor($[0]),U=Math.floor($[1]),ee=$[0]-j,de=$[1]-U;return A.get(j,U)*(1-ee)*(1-de)+A.get(j+1,U)*ee*(1-de)+A.get(j,U+1)*(1-ee)*de+A.get(j+1,U+1)*ee*de}getElevationForLngLatZoom(t,u){if(!l.bb(u,t.wrap()))return 0;const{tileID:m,mercatorX:p,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(t,u);return this.getElevation(m,p%l.X,v%l.X,l.X)}getElevation(t,u,m,p=l.X){return this.getDEMElevation(t,u,m,p)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const p=this.painter.context,v=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ue(p,v,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ue(p,new l.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.an([])}const u=this.sourceCache.getSourceTile(t,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const p=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new ue(p,u.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),u.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const m=u&&u+u.tileID.key+t.key;if(m&&!this._demMatrixCache[m]){const p=this.sourceCache.sourceCache._source.maxzoom;let v=t.canonical.z-u.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=p?v=t.canonical.z-p:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=t.canonical.x-(t.canonical.x>>v<<v),A=t.canonical.y-(t.canonical.y>>v<<v),M=l.bc(new Float64Array(16),[1/(l.X<<v),1/(l.X<<v),0]);l.J(M,M,[P*l.X,A*l.X,0]),this._demMatrixCache[t.key]={matrix:M,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(t){const u=this.painter,m=u.width/devicePixelRatio,p=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ue(u.context,{width:m,height:p,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ue(u.context,{width:m,height:p,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(m,p,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,m,p))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,P=0;v<this._coordsTextureSize;v++)for(let A=0;A<this._coordsTextureSize;A++,P+=4)u[P+0]=255&A,u[P+1]=255&v,u[P+2]=A>>8<<4|v>>8,u[P+3]=0;const m=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),p=new ue(t,m,t.gl.RGBA,{premultiply:!1});return p.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),m=this.painter.context,p=m.gl,v=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),P=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),A=Math.round(this.painter.height/devicePixelRatio);m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(v,A-P-1,1,1,p.RGBA,p.UNSIGNED_BYTE,u),m.bindFramebuffer.set(null);const M=u[0]+(u[2]>>4<<8),$=u[1]+((15&u[2])<<8),j=this.coordsIndex[255-u[3]],U=j&&this.sourceCache.getTileByID(j);if(!U)return null;const ee=this._coordsTextureSize,de=(1<<U.tileID.canonical.z)*ee;return new l.Z((U.tileID.canonical.x*ee+M)/de+U.tileID.wrap,(U.tileID.canonical.y*ee+$)/de,this.getElevation(U.tileID,M,$,ee))}depthAtPoint(t){const u=new Uint8Array(4),m=this.painter.context,p=m.gl;return m.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,u),m.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const t=this.painter.context,u=new l.bd,m=new l.aY,p=this.meshSize,v=l.X/p,P=p*p;for(let U=0;U<=p;U++)for(let ee=0;ee<=p;ee++)u.emplaceBack(ee*v,U*v,0);for(let U=0;U<P;U+=p+1)for(let ee=0;ee<p;ee++)m.emplaceBack(ee+U,p+ee+U+1,p+ee+U+2),m.emplaceBack(ee+U,p+ee+U+2,ee+U+1);const A=u.length,M=A+2*(p+1);for(const U of[0,1])for(let ee=0;ee<=p;ee++)for(const de of[0,1])u.emplaceBack(ee*v,U*l.X,de);for(let U=0;U<2*p;U+=2)m.emplaceBack(M+U,M+U+1,M+U+3),m.emplaceBack(M+U,M+U+3,M+U+2),m.emplaceBack(A+U,A+U+3,A+U+1),m.emplaceBack(A+U,A+U+2,A+U+3);const $=u.length,j=$+2*(p+1);for(const U of[0,1])for(let ee=0;ee<=p;ee++)for(const de of[0,1])u.emplaceBack(U*l.X,ee*v,de);for(let U=0;U<2*p;U+=2)m.emplaceBack($+U,$+U+1,$+U+3),m.emplaceBack($+U,$+U+3,$+U+2),m.emplaceBack(j+U,j+U+3,j+U+1),m.emplaceBack(j+U,j+U+2,j+U+3);return this._mesh=new Zu(t.createVertexBuffer(u,Wd.members),t.createIndexBuffer(m),l.a0.simpleSegment(0,0,u.length,m.length)),this._mesh}getMeshFrameDelta(t){return 2*Math.PI*l.be/Math.pow(2,t)/5}getMinTileElevationForLngLatZoom(t,u){var m;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(t,u);return(m=this.getMinMaxElevation(p).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(t){const u=this.getTerrainData(t).tile,m={minElevation:null,maxElevation:null};return u&&u.dem&&(m.minElevation=u.dem.min*this.exaggeration,m.maxElevation=u.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(t,u){const m=l.Z.fromLngLat(t.wrap()),p=(1<<u)*l.X,v=m.x*p,P=m.y*p,A=Math.floor(v/l.X),M=Math.floor(P/l.X);return{tileID:new l.S(u,0,u,A,M),mercatorX:v,mercatorY:P}}}class Pg{constructor(t,u,m){this._context=t,this._size=u,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new ue(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(m.texture),{id:t,fbo:u,texture:m,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((u=>t.id!==u)),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((t=>!t.inUse))===!1}}const jo={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class im{constructor(t,u){this.painter=t,this.terrain=u,this.pool=new Pg(t.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter((m=>!t._layers[m].isHidden(u))),this._coordsDescendingInv={};for(const m in t.sourceCaches){this._coordsDescendingInv[m]={};const p=t.sourceCaches[m].getVisibleCoordinates();for(const v of p){const P=this.terrain.sourceCache.getTerrainCoords(v);for(const A in P)this._coordsDescendingInv[m][A]||(this._coordsDescendingInv[m][A]=[]),this._coordsDescendingInv[m][A].push(P[A])}}this._coordsDescendingInvStr={};for(const m of t._order){const p=t._layers[m],v=p.source;if(jo[p.type]&&!this._coordsDescendingInvStr[v]){this._coordsDescendingInvStr[v]={};for(const P in this._coordsDescendingInv[v])this._coordsDescendingInvStr[v][P]=this._coordsDescendingInv[v][P].map((A=>A.key)).sort().join()}}for(const m of this._renderableTiles)for(const p in this._coordsDescendingInvStr){const v=this._coordsDescendingInvStr[p][m.tileID.key];v&&v!==m.rttCoords[p]&&(m.rtt=[])}}renderLayer(t){if(t.isHidden(this.painter.transform.zoom))return!1;const u=t.type,m=this.painter,p=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(jo[u]&&(this._prevType&&jo[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(t.id),!p))return!0;if(jo[this._prevType]||jo[u]&&p){this._prevType=u;const v=this._stacks.length-1,P=this._stacks[v]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(Kf(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[v]){const $=this.pool.getObjectForId(A.rtt[v].id);if($.stamp===A.rtt[v].stamp){this.pool.useObject($);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),A.rtt[v]={id:M.id,stamp:M.stamp},m.context.bindFramebuffer.set(M.fbo.framebuffer),m.context.clear({color:l.aM.transparent,stencil:0}),m.currentStencilSource=void 0;for(let $=0;$<P.length;$++){const j=m.style._layers[P[$]],U=j.source?this._coordsDescendingInv[j.source][A.tileID.key]:[A.tileID];m.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),m._renderTileClippingMasks(j,U),m.renderLayer(m,m.style.sourceCaches[j.source],j,U),j.source&&(A.rttCoords[j.source]=this._coordsDescendingInvStr[j.source][A.tileID.key])}}return Kf(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),jo[u]}return!1}}const Kd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},am=b,Tg={hash:!1,interactive:!0,bearingSnap:7,attributionControl:$o,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Xd=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},Ag={showCompass:!0,showZoom:!0,visualizePitch:!1};class Eg{constructor(t,u,m=!1){this.mousedown=P=>{this.startMouse(l.e({},P,{ctrlKey:!0,preventDefault:()=>P.preventDefault()}),I.mousePos(this.element,P)),I.addEventListener(window,"mousemove",this.mousemove),I.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=P=>{this.moveMouse(P,I.mousePos(this.element,P))},this.mouseup=P=>{this.mouseRotate.dragEnd(P),this.mousePitch&&this.mousePitch.dragEnd(P),this.offTemp()},this.touchstart=P=>{P.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=I.touchPos(this.element,P.targetTouches)[0],this.startTouch(P,this._startPos),I.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.addEventListener(window,"touchend",this.touchend))},this.touchmove=P=>{P.targetTouches.length!==1?this.reset():(this._lastPos=I.touchPos(this.element,P.targetTouches)[0],this.moveTouch(P,this._lastPos))},this.touchend=P=>{P.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const p=t.dragRotate._mouseRotate.getClickTolerance(),v=t.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Rd({clickTolerance:p,enable:!0}),this.touchRotate=(({enable:P,clickTolerance:A,bearingDegreesPerPixelMoved:M=.8})=>{const $=new Bd;return new ns({clickTolerance:A,move:(j,U)=>({bearingDelta:(U.x-j.x)*M}),moveStateManager:$,enable:P,assignEvents:Xd})})({clickTolerance:p,enable:!0}),this.map=t,m&&(this.mousePitch=Fd({clickTolerance:v,enable:!0}),this.touchPitch=(({enable:P,clickTolerance:A,pitchDegreesPerPixelMoved:M=-.5})=>{const $=new Bd;return new ns({clickTolerance:A,move:(j,U)=>({pitchDelta:(U.y-j.y)*M}),moveStateManager:$,enable:P,assignEvents:Xd})})({clickTolerance:v,enable:!0})),I.addEventListener(u,"mousedown",this.mousedown),I.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),I.addEventListener(u,"touchcancel",this.reset)}startMouse(t,u){this.mouseRotate.dragStart(t,u),this.mousePitch&&this.mousePitch.dragStart(t,u),I.disableDrag()}startTouch(t,u){this.touchRotate.dragStart(t,u),this.touchPitch&&this.touchPitch.dragStart(t,u),I.disableDrag()}moveMouse(t,u){const m=this.map,{bearingDelta:p}=this.mouseRotate.dragMove(t,u)||{};if(p&&m.setBearing(m.getBearing()+p),this.mousePitch){const{pitchDelta:v}=this.mousePitch.dragMove(t,u)||{};v&&m.setPitch(m.getPitch()+v)}}moveTouch(t,u){const m=this.map,{bearingDelta:p}=this.touchRotate.dragMove(t,u)||{};if(p&&m.setBearing(m.getBearing()+p),this.touchPitch){const{pitchDelta:v}=this.touchPitch.dragMove(t,u)||{};v&&m.setPitch(m.getPitch()+v)}}off(){const t=this.element;I.removeEventListener(t,"mousedown",this.mousedown),I.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend),I.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){I.enableDrag(),I.removeEventListener(window,"mousemove",this.mousemove),I.removeEventListener(window,"mouseup",this.mouseup),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend)}}let Ya;function si(y,t,u){const m=new l.N(y.lng,y.lat);if(y=new l.N(y.lng,y.lat),t){const p=new l.N(y.lng-360,y.lat),v=new l.N(y.lng+360,y.lat),P=u.locationPoint(y).distSqr(t);u.locationPoint(p).distSqr(t)<P?y=p:u.locationPoint(v).distSqr(t)<P&&(y=v)}for(;Math.abs(y.lng-u.center.lng)>180;){const p=u.locationPoint(y);if(p.x>=0&&p.y>=0&&p.x<=u.width&&p.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y.lng!==m.lng&&u.locationPoint(y).y>u.height/2-u.getHorizon()?y:m}const Uo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function rc(y,t,u){const m=y.classList;for(const p in Uo)m.remove(`maplibregl-${u}-anchor-${p}`);m.add(`maplibregl-${u}-anchor-${t}`)}class sc extends l.E{constructor(t){if(super(),this._onKeyPress=u=>{const m=u.code,p=u.charCode||u.keyCode;m!=="Space"&&m!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=u=>{const m=u.originalEvent.target,p=this._element;this._popup&&(m===p||p.contains(m))&&this.togglePopup()},this._update=u=>{var m;if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?si(this._lngLat,this._flatPos,this._map.transform):(m=this._lngLat)===null||m===void 0?void 0:m.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let P="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?P="rotateX(0deg)":this._pitchAlignment==="map"&&(P=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),I.setTransform(this._element,`${Uo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${P} ${v}`),k.frameAsync(new AbortController).then((()=>{this._updateOpacity(u&&u.type==="moveend")})).catch((()=>{}))},this._onMove=u=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(t==null?void 0:t.opacity,t==null?void 0:t.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=l.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div");const u=I.createNS("http://www.w3.org/2000/svg","svg"),m=41,p=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${m}px`),u.setAttributeNS(null,"width",`${p}px`),u.setAttributeNS(null,"viewBox",`0 0 ${p} ${m}`);const v=I.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");const P=I.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill-rule","nonzero");const A=I.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ae of M){const De=I.createNS("http://www.w3.org/2000/svg","ellipse");De.setAttributeNS(null,"opacity","0.04"),De.setAttributeNS(null,"cx","10.5"),De.setAttributeNS(null,"cy","5.80029008"),De.setAttributeNS(null,"rx",Ae.rx),De.setAttributeNS(null,"ry",Ae.ry),A.appendChild(De)}const $=I.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill",this._color);const j=I.createNS("http://www.w3.org/2000/svg","path");j.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$.appendChild(j);const U=I.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"opacity","0.25"),U.setAttributeNS(null,"fill","#000000");const ee=I.createNS("http://www.w3.org/2000/svg","path");ee.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),U.appendChild(ee);const de=I.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"transform","translate(6.0, 7.0)"),de.setAttributeNS(null,"fill","#FFFFFF");const me=I.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"transform","translate(8.0, 8.0)");const be=I.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#000000"),be.setAttributeNS(null,"opacity","0.25"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962");const Pe=I.createNS("http://www.w3.org/2000/svg","circle");Pe.setAttributeNS(null,"fill","#FFFFFF"),Pe.setAttributeNS(null,"cx","5.5"),Pe.setAttributeNS(null,"cy","5.5"),Pe.setAttributeNS(null,"r","5.4999962"),me.appendChild(be),me.appendChild(Pe),P.appendChild(A),P.appendChild($),P.appendChild(U),P.appendChild(de),P.appendChild(me),u.appendChild(P),u.setAttributeNS(null,"height",m*this._scale+"px"),u.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(u),this._offset=l.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(u=>{u.preventDefault()})),this._element.addEventListener("mousedown",(u=>{u.preventDefault()})),rc(this._element,this._anchor,"marker"),t&&t.className)for(const u of t.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=l.N.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const p=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var u,m;if(!(!((u=this._map)===null||u===void 0)&&u.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const p=this._map,v=p.terrain.depthAtPoint(this._pos),P=p.terrain.getElevationForLngLatZoom(this._lngLat,p.transform.tileZoom);if(p.transform.lngLatToCameraDepth(this._lngLat,P)-v<.006)return void(this._element.style.opacity=this._opacity);const A=-this._offset.y/p.transform._pixelPerMeter,M=Math.sin(p.getPitch()*Math.PI/180)*A,$=p.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),j=p.transform.lngLatToCameraDepth(this._lngLat,P+M)-$>.006;!((m=this._popup)===null||m===void 0)&&m.isOpen()&&j&&this._popup.remove(),this._element.style.opacity=j?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=l.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,u){return t===void 0&&u===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const rm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let $l=0,Nl=!1;const Nr={maxWidth:100,unit:"metric"};function jl(y,t,u){const m=u&&u.maxWidth||100,p=y._container.clientHeight/2,v=y.unproject([0,p]),P=y.unproject([m,p]),A=v.distanceTo(P);if(u&&u.unit==="imperial"){const M=3.2808*A;M>5280?Kt(t,m,M/5280,y._getUIString("ScaleControl.Miles")):Kt(t,m,M,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Kt(t,m,A/1852,y._getUIString("ScaleControl.NauticalMiles")):A>=1e3?Kt(t,m,A/1e3,y._getUIString("ScaleControl.Kilometers")):Kt(t,m,A,y._getUIString("ScaleControl.Meters"))}function Kt(y,t,u,m){const p=(function(v){const P=Math.pow(10,`${Math.floor(v)}`.length-1);let A=v/P;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:(function(M){const $=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*$)/$})(A),P*A})(u);y.style.width=t*(p/u)+"px",y.innerHTML=`${p}&nbsp;${m}`}const ln={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},oc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function lc(y){if(y){if(typeof y=="number"){const t=Math.round(Math.abs(y)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,y),"top-left":new l.P(t,t),"top-right":new l.P(-t,t),bottom:new l.P(0,-y),"bottom-left":new l.P(t,-t),"bottom-right":new l.P(-t,-t),left:new l.P(y,0),right:new l.P(-y,0)}}if(y instanceof l.P||Array.isArray(y)){const t=l.P.convert(y);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:l.P.convert(y.center||[0,0]),top:l.P.convert(y.top||[0,0]),"top-left":l.P.convert(y["top-left"]||[0,0]),"top-right":l.P.convert(y["top-right"]||[0,0]),bottom:l.P.convert(y.bottom||[0,0]),"bottom-left":l.P.convert(y["bottom-left"]||[0,0]),"bottom-right":l.P.convert(y["bottom-right"]||[0,0]),left:l.P.convert(y.left||[0,0]),right:l.P.convert(y.right||[0,0])}}return lc(new l.P(0,0))}const Yd=b;h.AJAXError=l.bh,h.Evented=l.E,h.LngLat=l.N,h.MercatorCoordinate=l.Z,h.Point=l.P,h.addProtocol=l.bi,h.config=l.a,h.removeProtocol=l.bj,h.AttributionControl=No,h.BoxZoomHandler=Xa,h.CanvasSource=nn,h.CooperativeGesturesHandler=Oo,h.DoubleClickZoomHandler=Js,h.DragPanHandler=em,h.DragRotateHandler=tm,h.EdgeInsets=Bo,h.FullscreenControl=class extends l.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var t;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=u==null?void 0:u.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){I.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=I.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);I.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},h.GeoJSONSource=dt,h.GeolocateControl=class extends l.E{constructor(y){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",t)),this._finish()}},this._updateCamera=t=>{const u=new l.N(t.coords.longitude,t.coords.latitude),m=t.coords.accuracy,p=this._map.getBearing(),v=l.e({bearing:p},this.options.fitBoundsOptions),P=le.fromLngLat(u,m);this._map.fitBounds(P,v,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const u=new l.N(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=t=>{if(this._map){if(this.options.trackUserLocation)if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&Nl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=I.create("button","maplibregl-ctrl-geolocate",this._container),I.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new sc({element:this._dotElement}),this._circleElement=I.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new sc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")),this.fire(new l.k("userlocationlostfocus")))}))}},this.options=l.e({},rm,y)}onAdd(y){return this._map=y,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return l._(this,arguments,void 0,(function*(t=!1){if(Ya!==void 0&&!t)return Ya;if(window.navigator.permissions===void 0)return Ya=!!window.navigator.geolocation,Ya;try{Ya=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ya=!!window.navigator.geolocation}return Ya}))})().then((t=>this._finishSetupUI(t))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),I.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,$l=0,Nl=!1}_isOutOfMapMaxBounds(y){const t=this._map.getMaxBounds(),u=y.coords;return t&&(u.longitude<t.getWest()||u.longitude>t.getEast()||u.latitude<t.getSouth()||u.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),t=y.getSouthEast(),u=y.getNorthEast(),m=t.distanceTo(u),p=Math.ceil(this._accuracy/(m/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":$l--,Nl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart")),this.fire(new l.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),$l++,$l>1?(y={maximumAge:6e5,timeout:0},Nl=!0):(y=this.options.positionOptions,Nl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},h.Hash=Xu,h.ImageSource=It,h.KeyboardHandler=ur,h.LngLatBounds=le,h.LogoControl=Gd,h.Map=class extends nm{constructor(y){l.bf.mark(l.bg.create);const t=Object.assign(Object.assign({},Tg),y);if(t.minZoom!=null&&t.maxZoom!=null&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(t.minPitch!=null&&t.maxPitch!=null&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(t.minPitch!=null&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(t.maxPitch!=null&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ro(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),{bearingSnap:t.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new En,this._controls=[],this._mapId=l.a4(),this._contextLost=u=>{u.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.k("webglcontextlost",{originalEvent:u}))},this._contextRestored=u=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:u}))},this._onMapScroll=u=>{if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._maxTileCacheZoomLevels=t.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=t.preserveDrawingBuffer===!0,this._antialias=t.antialias===!0,this._trackResize=t.trackResize===!0,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles===!0,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions===!0,this._collectResourceTiming=t.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Kd),t.locale),this._clickTolerance=t.clickTolerance,this._overridePixelRatio=t.pixelRatio,this._maxCanvasSize=t.maxCanvasSize,this.transformCameraUpdate=t.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=t.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Z.addThrottleControl((()=>this.isMoving())),this._requestManager=new Y(t.transformRequest),typeof t.container=="string"){if(this._container=document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))).on("moveend",(()=>this._update(!1))).on("zoom",(()=>this._update(!0))).on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})).once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1;const m=zl((p=>{this._trackResize&&!this._removed&&(this.resize(p),this.redraw())}),50);this._resizeObserver=new ResizeObserver((p=>{u?m(p):u=!0})),this._resizeObserver.observe(this._container)}this.handlers=new qd(this,t),this._hash=t.hash&&new Xu(typeof t.hash=="string"&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,l.e({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,this._validateStyle=t.validateStyle,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new No(typeof t.attributionControl=="boolean"?void 0:t.attributionControl)),t.maplibreLogo&&this.addControl(new Gd,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(u=>{this._update(u.dataType==="style"),this.fire(new l.k(`${u.dataType}data`,u))})),this.on("dataloading",(u=>{this.fire(new l.k(`${u.dataType}dataloading`,u))})),this.on("dataabort",(u=>{this.fire(new l.k("sourcedataabort",u))}))}_getMapId(){return this._mapId}addControl(y,t){if(t===void 0&&(t=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const m=this._controlPositions[t];return t.indexOf("bottom")!==-1?m.insertBefore(u,m.firstChild):m.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(y);return t>-1&&this._controls.splice(t,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,t,u,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,t,u,m)}resize(y){var t;const u=this._containerDimensions(),m=u[0],p=u[1],v=this._getClampedPixelRatio(m,p);if(this._resizeCanvas(m,p,v),this.painter.resize(m,p,v),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const M=this._getClampedPixelRatio(m,p);this._resizeCanvas(m,p,M),this.painter.resize(m,p,M)}this.transform.resize(m,p),(t=this._requestedCameraState)===null||t===void 0||t.resize(m,p);const P=!this._moving;return P&&(this.stop(),this.fire(new l.k("movestart",y)).fire(new l.k("move",y))),this.fire(new l.k("resize",y)),P&&this.fire(new l.k("moveend",y)),this}_getClampedPixelRatio(y,t){const{0:u,1:m}=this._maxCanvasSize,p=this.getPixelRatio(),v=y*p,P=t*p;return Math.min(v>u?u/v:1,P>m?m/P:1)*p}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(le.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(l.N.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(l.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,t,u){if(y==="mouseenter"||y==="mouseover"){let m=!1;return{layers:t,listener:u,delegates:{mousemove:v=>{const P=t.filter((M=>this.getLayer(M))),A=P.length!==0?this.queryRenderedFeatures(v.point,{layers:P}):[];A.length?m||(m=!0,u.call(this,new oa(y,this,v.originalEvent,{features:A}))):m=!1},mouseout:()=>{m=!1}}}}if(y==="mouseleave"||y==="mouseout"){let m=!1;return{layers:t,listener:u,delegates:{mousemove:P=>{const A=t.filter((M=>this.getLayer(M)));(A.length!==0?this.queryRenderedFeatures(P.point,{layers:A}):[]).length?m=!0:m&&(m=!1,u.call(this,new oa(y,this,P.originalEvent)))},mouseout:P=>{m&&(m=!1,u.call(this,new oa(y,this,P.originalEvent)))}}}}{const m=p=>{const v=t.filter((A=>this.getLayer(A))),P=v.length!==0?this.queryRenderedFeatures(p.point,{layers:v}):[];P.length&&(p.features=P,u.call(this,p),delete p.features)};return{layers:t,listener:u,delegates:{[y]:m}}}}_saveDelegatedListener(y,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(t)}_removeDelegatedListener(y,t,u){if(!this._delegatedListeners||!this._delegatedListeners[y])return;const m=this._delegatedListeners[y];for(let p=0;p<m.length;p++){const v=m[p];if(v.listener===u&&v.layers.length===t.length&&v.layers.every((P=>t.includes(P)))){for(const P in v.delegates)this.off(P,v.delegates[P]);return void m.splice(p,1)}}}on(y,t,u){if(u===void 0)return super.on(y,t);const m=this._createDelegatedListener(y,typeof t=="string"?[t]:t,u);this._saveDelegatedListener(y,m);for(const p in m.delegates)this.on(p,m.delegates[p]);return this}once(y,t,u){if(u===void 0)return super.once(y,t);const m=typeof t=="string"?[t]:t,p=this._createDelegatedListener(y,m,u);for(const v in p.delegates){const P=p.delegates[v];p.delegates[v]=(...A)=>{this._removeDelegatedListener(y,m,u),P(...A)}}this._saveDelegatedListener(y,p);for(const v in p.delegates)this.once(v,p.delegates[v]);return this}off(y,t,u){return u===void 0?super.off(y,t):(this._removeDelegatedListener(y,typeof t=="string"?[t]:t,u),this)}queryRenderedFeatures(y,t){if(!this.style)return[];let u;const m=y instanceof l.P||Array.isArray(y),p=m?y:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(m?{}:y)||{},p instanceof l.P||typeof p[0]=="number")u=[l.P.convert(p)];else{const v=l.P.convert(p[0]),P=l.P.convert(p[1]);u=[v,new l.P(P.x,v.y),P,new l.P(v.x,P.y),v]}return this.style.queryRenderedFeatures(u,t,this.transform)}querySourceFeatures(y,t){return this.style.querySourceFeatures(y,t)}setStyle(y,t){return(t=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(y,t))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const t=this._locale[y];if(t==null)throw new Error(`Missing UI string '${y}'`);return t}_updateStyle(y,t){if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(y,t)));const u=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new Vu(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,t,u):this.style.loadJSON(y,t,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Vu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,t){if(typeof y=="string"){const u=this._requestManager.transformRequest(y,"Style");l.h(u,new AbortController).then((m=>{this._updateDiff(m.data,t)})).catch((m=>{m&&this.fire(new l.j(m))}))}else typeof y=="object"&&this._updateDiff(y,t)}_updateDiff(y,t){try{this.style.setState(y,t)&&this._update(!0)}catch(u){l.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(y,t){return this._lazyInitEmptyStyle(),this.style.addSource(y,t),this._update(!0)}isSourceLoaded(y){const t=this.style&&this.style.sourceCaches[y];if(t!==void 0)return t.loaded();this.fire(new l.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const t=this.style.sourceCaches[y.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&t.reload();for(const u in this.style._layers){const m=this.style._layers[u];m.type==="hillshade"&&m.source===y.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Zd(this.painter,t,y),this.painter.renderToTexture=new im(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:y})),this}getTerrain(){var y,t;return(t=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&t!==void 0?t:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const t in y){const u=y[t]._tiles;for(const m in u){const p=u[m];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,t,u={}){const{pixelRatio:m=1,sdf:p=!1,stretchX:v,stretchY:P,content:A,textFitWidth:M,textFitHeight:$}=u;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||l.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:j,height:U,data:ee}=t,de=t;return this.style.addImage(y,{data:new l.R({width:j,height:U},new Uint8Array(ee)),pixelRatio:m,stretchX:v,stretchY:P,content:A,textFitWidth:M,textFitHeight:$,sdf:p,version:0,userImage:de}),de.onAdd&&de.onAdd(this,y),this}}{const{width:j,height:U,data:ee}=k.getImageData(t);this.style.addImage(y,{data:new l.R({width:j,height:U},ee),pixelRatio:m,stretchX:v,stretchY:P,content:A,textFitWidth:M,textFitHeight:$,sdf:p,version:0})}}updateImage(y,t){const u=this.style.getImage(y);if(!u)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=t instanceof HTMLImageElement||l.b(t)?k.getImageData(t):t,{width:p,height:v,data:P}=m;if(p===void 0||v===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==u.data.width||v!==u.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(t instanceof HTMLImageElement||l.b(t));return u.data.replace(P,A),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return Z.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,t){return this._lazyInitEmptyStyle(),this.style.addLayer(y,t),this._update(!0)}moveLayer(y,t){return this.style.moveLayer(y,t),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,t,u){return this.style.setLayerZoomRange(y,t,u),this._update(!0)}setFilter(y,t,u={}){return this.style.setFilter(y,t,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,t,u,m={}){return this.style.setPaintProperty(y,t,u,m),this._update(!0)}getPaintProperty(y,t){return this.style.getPaintProperty(y,t)}setLayoutProperty(y,t,u,m={}){return this.style.setLayoutProperty(y,t,u,m),this._update(!0)}getLayoutProperty(y,t){return this.style.getLayoutProperty(y,t)}setGlyphs(y,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,t,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,t,u,(m=>{m||this._update(!0)})),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,t,(u=>{u||this._update(!0)})),this}setLight(y,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(y){return this._lazyInitEmptyStyle(),this.style.setSky(y),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(y,t){return this.style.setFeatureState(y,t),this._update()}removeFeatureState(y,t){return this.style.removeFeatureState(y,t),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,t=0;return this._container&&(y=this._container.clientWidth||400,t=this._container.clientHeight||300),[y,t]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const t=this._canvasContainer=I.create("div","maplibregl-canvas-container",y);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=I.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),m=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],m);const p=this._controlContainer=I.create("div","maplibregl-control-container",y),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((P=>{v[P]=I.create("div",`maplibregl-ctrl-${P} `,p)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,t,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*t),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let t=null;this._canvas.addEventListener("webglcontextcreationerror",(m=>{t={requestedAttributes:y},m&&(t.statusMessage=m.statusMessage,t.type=m.type)}),{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const m="Failed to initialize WebGL";throw t?(t.message=m,new Error(JSON.stringify(t))):new Error(m)}this.painter=new Ku(u,this.transform),E.testSupport(u)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const t=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const p=this.transform.zoom,v=k.now();this.style.zoomHistory.update(p,v);const P=new l.z(p,{now:v,fadeDuration:t,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=P.crossFadingFactor();A===1&&A===this._crossFadingFactor||(u=!0,this._crossFadingFactor=A),this.style.update(P)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,t,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:t,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bf.mark(l.bg.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const m=this._sourcesDirty||this._styleDirty||this._placementDirty;return m||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||m||(this._fullyLoaded=!0,l.bf.mark(l.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Z.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t!=null&&t.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),I.remove(this._canvasContainer),I.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),l.bf.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,k.frameAsync(this._frameRequest).then((y=>{l.bf.frame(y),this._frameRequest=null,this._render(y)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return am}getCameraTargetElevation(){return this.transform.elevation}},h.MapMouseEvent=oa,h.MapTouchEvent=Xs,h.MapWheelEvent=Yf,h.Marker=sc,h.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const t=this._map.getZoom(),u=t===this._map.getMaxZoom(),m=t===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t},this._setButtonTitle=(t,u)=>{const m=this._map._getUIString(`NavigationControl.${u}`);t.title=m,t.setAttribute("aria-label",m)},this.options=l.e({},Ag,y),this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),I.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),I.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=I.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Eg(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,t){const u=I.create("button",y,this._container);return u.type="button",u.addEventListener("click",t),u}},h.Popup=class extends l.E{constructor(y){super(),this.remove=()=>(this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.k("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{var u;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=I.create("div","maplibregl-popup",this._map.getContainer()),this._tip=I.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?si(this._lngLat,this._flatPos,this._map.transform):(u=this._lngLat)===null||u===void 0?void 0:u.wrap(),this._trackPointer&&!t)return;const m=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationPoint(this._lngLat));let p=this.options.anchor;const v=lc(this.options.offset);if(!p){const A=this._container.offsetWidth,M=this._container.offsetHeight;let $;$=m.y+v.bottom.y<M?["top"]:m.y>this._map.transform.height-M?["bottom"]:[],m.x<A/2?$.push("left"):m.x>this._map.transform.width-A/2&&$.push("right"),p=$.length===0?"bottom":$.join("-")}let P=m.add(v[p]);this.options.subpixelPositioning||(P=P.round()),I.setTransform(this._container,`${Uo[p]} translate(${P.x}px,${P.y}px)`),rc(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(ln),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=l.N.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const t=document.createDocumentFragment(),u=document.createElement("body");let m;for(u.innerHTML=y;m=u.firstChild,m;)t.appendChild(m);return this.setDOMContent(t)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=I.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=I.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(oc);y&&y.focus()}},h.RasterDEMTileSource=tt,h.RasterTileSource=et,h.ScaleControl=class{constructor(y){this._onMove=()=>{jl(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,jl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Nr),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},h.ScrollZoomHandler=xr,h.Style=Vu,h.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=I.create("button","maplibregl-ctrl-terrain",this._container),I.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){I.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},h.TwoFingersTouchPitchHandler=Ol,h.TwoFingersTouchRotateHandler=jd,h.TwoFingersTouchZoomHandler=$d,h.TwoFingersTouchZoomRotateHandler=Hd,h.VectorTileSource=ht,h.VideoSource=Ut,h.addSourceType=(y,t)=>l._(void 0,void 0,void 0,(function*(){if(Pn(y))throw new Error(`A source type called "${y}" already exists.`);((u,m)=>{bn[u]=m})(y,t)})),h.clearPrewarmedResources=function(){const y=ge;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(lt),ge=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},h.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},h.getRTLTextPluginStatus=function(){return Ei().getRTLTextPluginStatus()},h.getVersion=function(){return Yd},h.getWorkerCount=function(){return vt.workerCount},h.getWorkerUrl=function(){return l.a.WORKER_URL},h.importScriptInWorkers=function(y){return Rt().broadcast("IS",y)},h.prewarm=function(){rt().acquire(lt)},h.setMaxParallelImageRequests=function(y){l.a.MAX_PARALLEL_IMAGE_REQUESTS=y},h.setRTLTextPlugin=function(y,t){return Ei().setRTLTextPlugin(y,t)},h.setWorkerCount=function(y){vt.workerCount=y},h.setWorkerUrl=function(y){l.a.WORKER_URL=y}}));var f=a;return f}))})(Gm)),Gm.exports}var OB=FB();const d1=BB(OB),Up=b_("zones",()=>{const e=Qe(null),i=Qe({}),a=Qe(!1),o=Qe(null);async function c(){a.value=!0,o.value=null;try{const S=await fetch("/shipping-calculator/data/zones.geojson");e.value=await S.json()}catch(b){o.value="Failed to load zones",console.error(b)}finally{a.value=!1}}async function f(){try{const S=await fetch("/shipping-calculator/data/matrix.json");i.value=await S.json()}catch(b){console.error("Failed to load distance matrix",b)}}function h(b){var S,w;return(w=(S=e.value)==null?void 0:S.features.find(k=>k.properties.zone_id===b))==null?void 0:w.properties}function l(b,S){var w;return((w=i.value[b])==null?void 0:w[S])??500}return{zones:e,matrix:i,loading:a,error:o,loadZones:c,loadMatrix:f,getZone:h,getDistance:l}}),$B=hs({__name:"ZoneMap",props:{showHeatmap:{type:Boolean}},emits:["zonePicked"],setup(e,{emit:i}){const a=i,o=e,c=Qe(null);let f=null;const h=Up();Fi(async()=>{await h.loadZones(),await h.loadMatrix(),l()});function l(){!c.value||!h.zones||(f=new d1.Map({container:c.value,style:{version:8,sources:{"carto-light":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'}},layers:[{id:"carto-light-layer",type:"raster",source:"carto-light",minzoom:0,maxzoom:22}]},center:[-98,39],zoom:3.5}),f.on("load",()=>{if(!f||!h.zones)return;f.addSource("zones",{type:"geojson",data:h.zones}),f.addLayer({id:"zones-fill",type:"fill",source:"zones",paint:{"fill-color":["interpolate",["linear"],["get","multiplier"],.98,"#4CAF50",1,"#8BC34A",1.05,"#FFC107",1.1,"#FF9800",1.15,"#FF5722"],"fill-opacity":o.showHeatmap?.6:.3}}),f.addLayer({id:"zones-outline",type:"line",source:"zones",paint:{"line-color":"#333","line-width":2}}),f.on("click","zones-fill",S=>{if(!S.features||!S.features[0])return;const w=S.features[0].properties;a("zonePicked",w.zone_id)}),f.on("mouseenter","zones-fill",()=>{f&&(f.getCanvas().style.cursor="pointer")}),f.on("mouseleave","zones-fill",()=>{f&&(f.getCanvas().style.cursor="")});const b=new d1.Popup({closeButton:!1,closeOnClick:!1});f.on("mousemove","zones-fill",S=>{if(!S.features||!S.features[0]||!f)return;const w=S.features[0].properties;b.setLngLat(S.lngLat).setHTML(`
          <div style="padding: 8px;">
            <strong>${w.name}</strong><br/>
            Zone: ${w.zone_id}<br/>
            Multiplier: ${w.multiplier}<br/>
            Remote Fee: $${w.remote_fee}
          </div>
        `).addTo(f)}),f.on("mouseleave","zones-fill",()=>{b.remove()})}))}return xt(()=>o.showHeatmap,b=>{!f||!f.getLayer("zones-fill")||f.setPaintProperty("zones-fill","fill-opacity",b?.6:.3)}),(b,S)=>(Yi(),hl("div",{ref_key:"mapContainer",ref:c,class:"map-container"},null,512))}}),NB=Np($B,[["__scopeId","data-v-85177c68"]]),l2=b_("quotes",()=>{const e=Qe(null),i=Qe([]);function a(f){const h=Up(),l=Lp(),b=l.currentParams,S=f.length_in*f.width_in*f.height_in/b.dim_divisor,w=Math.max(f.weight_lb,S),k=h.getDistance(f.origin_zone,f.dest_zone),I=h.getZone(f.origin_zone),E=h.getZone(f.dest_zone),L=(((I==null?void 0:I.multiplier)??1)+((E==null?void 0:E.multiplier)??1))/2,F=f.service==="standard"?b.service_multiplier.standard:b.service_multiplier.expedited,z=b.per_mile*k+b.per_lb*w,B=(b.base_rate+z)*L*F,R=B*(b.fuel_pct/100),Z=B*(b.peak_pct/100);let Y=0;f.residential&&(Y+=b.residential_fee),I!=null&&I.remote_fee&&(Y+=I.remote_fee),E!=null&&E.remote_fee&&(Y+=E.remote_fee);const J=Math.max(0,f.declared_value-100)*.01,ae=Math.round((B+R+Z+Y+J)*100)/100,he=Math.round(ae*(l.confidencePct/100)*100)/100;return{shipment:f,breakdown:{dim_weight:S,billable_weight:w,miles:k,zone_factor:L,service_factor:F,variable_cost:z,subtotal:B,fuel_surcharge:R,peak_surcharge:Z,fixed_fees:Y,insurance:J,total:ae,confidence_band:he},total:ae,band:he}}function o(f){e.value=a(f)}function c(f){return i.value=f.map(h=>a(h)),i.value}return{currentQuote:e,batchResults:i,calculateQuote:a,setCurrentQuote:o,calculateBatch:c}}),jB=Re({...Ft(),...iL()},"VForm"),u2=it()({name:"VForm",props:jB(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,i){let{slots:a,emit:o}=i;const c=aL(e),f=Qe();function h(b){b.preventDefault(),c.reset()}function l(b){const S=b,w=c.validate();S.then=w.then.bind(w),S.catch=w.catch.bind(w),S.finally=w.finally.bind(w),o("submit",S),S.defaultPrevented||w.then(k=>{var E;let{valid:I}=k;I&&((E=f.value)==null||E.submit())}),S.preventDefault()}return ct(()=>{var b;return q("form",{ref:f,class:st(["v-form",e.class]),style:St(e.style),novalidate:!0,onReset:h,onSubmit:l},[(b=a.default)==null?void 0:b.call(a,c)])}),sa(c,f)}}),c2=Symbol.for("vuetify:selection-control-group"),ib=Re({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:Gt,trueIcon:Gt,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:ia},...Ft(),...Ji(),...Dn()},"SelectionControlGroup"),UB=Re({...ib({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),d2=it()({name:"VSelectionControlGroup",props:UB(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const o=Zt(e,"modelValue"),c=Ia(),f=we(()=>e.id||`v-selection-control-group-${c}`),h=we(()=>e.name||f.value),l=new Set;return Jn(c2,{modelValue:o,forceUpdate:()=>{l.forEach(b=>b())},onForceUpdate:b=>{l.add(b),Hi(()=>{l.delete(b)})}}),ki({[e.defaultsTarget]:{color:we(()=>e.color),disabled:we(()=>e.disabled),density:we(()=>e.density),error:we(()=>e.error),inline:we(()=>e.inline),modelValue:o,multiple:we(()=>!!e.multiple||e.multiple==null&&Array.isArray(o.value)),name:h,falseIcon:we(()=>e.falseIcon),trueIcon:we(()=>e.trueIcon),readonly:we(()=>e.readonly),ripple:we(()=>e.ripple),type:we(()=>e.type),valueComparator:we(()=>e.valueComparator)}}),ct(()=>{var b;return q("div",{class:st(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:St(e.style),role:e.type==="radio"?"radiogroup":void 0},[(b=a.default)==null?void 0:b.call(a)])}),{}}}),Hp=Re({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Ft(),...ib()},"VSelectionControl");function HB(e){const i=vn(c2,void 0),{densityClasses:a}=Ga(e),o=Zt(e,"modelValue"),c=K(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),f=K(()=>e.falseValue!==void 0?e.falseValue:!1),h=K(()=>!!e.multiple||e.multiple==null&&Array.isArray(o.value)),l=K({get(){const E=i?i.modelValue.value:o.value;return h.value?Si(E).some(L=>e.valueComparator(L,c.value)):e.valueComparator(E,c.value)},set(E){if(e.readonly)return;const L=E?c.value:f.value;let F=L;h.value&&(F=E?[...Si(o.value),L]:Si(o.value).filter(z=>!e.valueComparator(z,c.value))),i?i.modelValue.value=F:o.value=F}}),{textColorClasses:b,textColorStyles:S}=ga(()=>{if(!(e.error||e.disabled))return l.value?e.color:e.baseColor}),{backgroundColorClasses:w,backgroundColorStyles:k}=Un(()=>l.value&&!e.error&&!e.disabled?e.color:e.baseColor),I=K(()=>l.value?e.trueIcon:e.falseIcon);return{group:i,densityClasses:a,trueValue:c,falseValue:f,model:l,textColorClasses:b,textColorStyles:S,backgroundColorClasses:w,backgroundColorStyles:k,icon:I}}const _l=it()({name:"VSelectionControl",directives:{vRipple:qa},inheritAttrs:!1,props:Hp(),emits:{"update:modelValue":e=>!0},setup(e,i){let{attrs:a,slots:o}=i;const{group:c,densityClasses:f,icon:h,model:l,textColorClasses:b,textColorStyles:S,backgroundColorClasses:w,backgroundColorStyles:k,trueValue:I}=HB(e),E=Ia(),L=bt(!1),F=bt(!1),z=Qe(),B=we(()=>e.id||`input-${E}`),R=we(()=>!e.disabled&&!e.readonly);c==null||c.onForceUpdate(()=>{z.value&&(z.value.checked=l.value)});function Z(he){R.value&&(L.value=!0,qc(he.target,":focus-visible")!==!1&&(F.value=!0))}function Y(){L.value=!1,F.value=!1}function J(he){he.stopPropagation()}function ae(he){if(!R.value){z.value&&(z.value.checked=l.value);return}e.readonly&&c&&kn(()=>c.forceUpdate()),l.value=he.target.checked}return ct(()=>{var ue,Q;const he=o.label?o.label({label:e.label,props:{for:B.value}}):e.label,[te,re]=xl(a),ie=q("input",nt({ref:z,checked:l.value,disabled:!!e.disabled,id:B.value,onBlur:Y,onFocus:Z,onInput:ae,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:I.value,name:e.name,"aria-checked":e.type==="checkbox"?l.value:void 0},re),null);return q("div",nt({class:["v-selection-control",{"v-selection-control--dirty":l.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":L.value,"v-selection-control--focus-visible":F.value,"v-selection-control--inline":e.inline},f.value,e.class]},te,{style:e.style}),[q("div",{class:st(["v-selection-control__wrapper",b.value]),style:St(S.value)},[(ue=o.default)==null?void 0:ue.call(o,{backgroundColorClasses:w,backgroundColorStyles:k}),yi(q("div",{class:st(["v-selection-control__input"])},[((Q=o.input)==null?void 0:Q.call(o,{model:l,textColorClasses:b,textColorStyles:S,backgroundColorClasses:w,backgroundColorStyles:k,inputNode:ie,icon:h.value,props:{onFocus:Z,onBlur:Y,id:B.value}}))??q(Bt,null,[h.value&&V(un,{key:"icon",icon:h.value},null),ie])]),[[qa,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),he&&V(rd,{for:B.value,onClick:J},{default:()=>[he]})])}),{isFocused:L,input:z}}}),h2=Re({indeterminate:Boolean,indeterminateIcon:{type:Gt,default:"$checkboxIndeterminate"},...Hp({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),Bs=it()({name:"VCheckboxBtn",props:h2(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,i){let{slots:a}=i;const o=Zt(e,"indeterminate"),c=Zt(e,"modelValue");function f(b){o.value&&(o.value=!1)}const h=we(()=>o.value?e.indeterminateIcon:e.falseIcon),l=we(()=>o.value?e.indeterminateIcon:e.trueIcon);return ct(()=>{const b=Wn(_l.filterProps(e),["modelValue"]);return V(_l,nt(b,{modelValue:c.value,"onUpdate:modelValue":[S=>c.value=S,f],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:h.value,trueIcon:l.value,"aria-checked":o.value?"mixed":void 0}),a)}),{}}}),qB=Re({...wo(),...Wn(h2(),["inline"])},"VCheckbox"),GB=it()({name:"VCheckbox",inheritAttrs:!1,props:qB(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,i){let{attrs:a,slots:o}=i;const c=Zt(e,"modelValue"),{isFocused:f,focus:h,blur:l}=xo(e),b=Qe(),S=Ia();return ct(()=>{const[w,k]=xl(a),I=Ca.filterProps(e),E=Bs.filterProps(e);return V(Ca,nt({ref:b,class:["v-checkbox",e.class]},w,I,{modelValue:c.value,"onUpdate:modelValue":L=>c.value=L,id:e.id||`checkbox-${S}`,focused:f.value,style:e.style}),{...o,default:L=>{let{id:F,messagesId:z,isDisabled:B,isReadonly:R,isValid:Z}=L;return V(Bs,nt(E,{id:F.value,"aria-describedby":z.value,disabled:B.value,readonly:R.value},k,{error:Z.value===!1,modelValue:c.value,"onUpdate:modelValue":Y=>c.value=Y,onFocus:h,onBlur:l}),o)}})}),sa({},b)}});function WB(e){let{selectedElement:i,containerElement:a,isRtl:o,isHorizontal:c}=e;const f=sf(c,a),h=f2(c,o,a),l=sf(c,i),b=m2(c,i),S=l*.4;return h>b?b-S:h+f<b+l?b-f+l+S:h}function ZB(e){let{selectedElement:i,containerElement:a,isHorizontal:o}=e;const c=sf(o,a),f=m2(o,i),h=sf(o,i);return f-c/2+h/2}function h1(e,i){const a=e?"scrollWidth":"scrollHeight";return(i==null?void 0:i[a])||0}function KB(e,i){const a=e?"clientWidth":"clientHeight";return(i==null?void 0:i[a])||0}function f2(e,i,a){if(!a)return 0;const{scrollLeft:o,offsetWidth:c,scrollWidth:f}=a;return e?i?f-c+o:o:a.scrollTop}function sf(e,i){const a=e?"offsetWidth":"offsetHeight";return(i==null?void 0:i[a])||0}function m2(e,i){const a=e?"offsetLeft":"offsetTop";return(i==null?void 0:i[a])||0}const ab=Symbol.for("vuetify:v-slide-group"),rb=Re({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:ab},nextIcon:{type:Gt,default:"$next"},prevIcon:{type:Gt,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...Ft(),...Su({mobile:null}),...mn(),...Tu({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),of=it()({name:"VSlideGroup",props:rb(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const{isRtl:o}=qi(),{displayClasses:c,mobile:f}=Jr(e),h=Sl(e,e.symbol),l=bt(!1),b=bt(0),S=bt(0),w=bt(0),k=K(()=>e.direction==="horizontal"),{resizeRef:I,contentRect:E}=Yr(),{resizeRef:L,contentRect:F}=Yr(),z=WD(),B=K(()=>({container:I.el,duration:200,easing:"easeOutQuart"})),R=K(()=>h.selected.value.length?h.items.value.findIndex(Fe=>Fe.id===h.selected.value[0]):-1),Z=K(()=>h.selected.value.length?h.items.value.findIndex(Fe=>Fe.id===h.selected.value[h.selected.value.length-1]):-1);if(jn){let Fe=-1;xt(()=>[h.selected.value,E.value,F.value,k.value],()=>{cancelAnimationFrame(Fe),Fe=requestAnimationFrame(()=>{if(E.value&&F.value){const Be=k.value?"width":"height";S.value=E.value[Be],w.value=F.value[Be],l.value=S.value+1<w.value}if(R.value>=0&&L.el){const Be=L.el.children[Z.value];J(Be,e.centerActive)}})})}const Y=bt(!1);function J(Fe,Be){let lt=0;Be?lt=ZB({containerElement:I.el,isHorizontal:k.value,selectedElement:Fe}):lt=WB({containerElement:I.el,isHorizontal:k.value,isRtl:o.value,selectedElement:Fe}),ae(lt)}function ae(Fe){if(!jn||!I.el)return;const Be=sf(k.value,I.el),lt=f2(k.value,o.value,I.el);if(!(h1(k.value,I.el)<=Be||Math.abs(Fe-lt)<16)){if(k.value&&o.value&&I.el){const{scrollWidth:kt,offsetWidth:ge}=I.el;Fe=kt-ge-Fe}k.value?z.horizontal(Fe,B.value):z(Fe,B.value)}}function he(Fe){const{scrollTop:Be,scrollLeft:lt}=Fe.target;b.value=k.value?lt:Be}function te(Fe){if(Y.value=!0,!(!l.value||!L.el)){for(const Be of Fe.composedPath())for(const lt of L.el.children)if(lt===Be){J(lt);return}}}function re(Fe){Y.value=!1}let ie=!1;function ue(Fe){var Be;!ie&&!Y.value&&!(Fe.relatedTarget&&((Be=L.el)!=null&&Be.contains(Fe.relatedTarget)))&&$e(),ie=!1}function Q(){ie=!0}function pe(Fe){if(!L.el)return;function Be(lt){Fe.preventDefault(),$e(lt)}k.value?Fe.key==="ArrowRight"?Be(o.value?"prev":"next"):Fe.key==="ArrowLeft"&&Be(o.value?"next":"prev"):Fe.key==="ArrowDown"?Be("next"):Fe.key==="ArrowUp"&&Be("prev"),Fe.key==="Home"?Be("first"):Fe.key==="End"&&Be("last")}function Ce(Fe,Be){if(!Fe)return;let lt=Fe;do lt=lt==null?void 0:lt[Be==="next"?"nextElementSibling":"previousElementSibling"];while(lt!=null&&lt.hasAttribute("disabled"));return lt}function $e(Fe){if(!L.el)return;let Be;if(!Fe)Be=Hc(L.el)[0];else if(Fe==="next"){if(Be=Ce(L.el.querySelector(":focus"),Fe),!Be)return $e("first")}else if(Fe==="prev"){if(Be=Ce(L.el.querySelector(":focus"),Fe),!Be)return $e("last")}else Fe==="first"?(Be=L.el.firstElementChild,Be!=null&&Be.hasAttribute("disabled")&&(Be=Ce(Be,"next"))):Fe==="last"&&(Be=L.el.lastElementChild,Be!=null&&Be.hasAttribute("disabled")&&(Be=Ce(Be,"prev")));Be&&Be.focus({preventScroll:!0})}function Xe(Fe){const Be=k.value&&o.value?-1:1,lt=(Fe==="prev"?-Be:Be)*S.value;let vt=b.value+lt;if(k.value&&o.value&&I.el){const{scrollWidth:kt,offsetWidth:ge}=I.el;vt+=kt-ge}ae(vt)}const Ye=K(()=>({next:h.next,prev:h.prev,select:h.select,isSelected:h.isSelected})),qe=K(()=>l.value||Math.abs(b.value)>0),Te=K(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!f.value;case!0:return qe.value;case"mobile":return f.value||qe.value;default:return!f.value&&qe.value}}),Me=K(()=>Math.abs(b.value)>1),Ve=K(()=>{if(!I.value||!qe.value)return!1;const Fe=h1(k.value,I.el),Be=KB(k.value,I.el);return Fe-Be-Math.abs(b.value)>1});return ct(()=>V(e.tag,{class:st(["v-slide-group",{"v-slide-group--vertical":!k.value,"v-slide-group--has-affixes":Te.value,"v-slide-group--is-overflowing":l.value},c.value,e.class]),style:St(e.style),tabindex:Y.value||h.selected.value.length?-1:0,onFocus:ue},{default:()=>{var Fe,Be,lt;return[Te.value&&q("div",{key:"prev",class:st(["v-slide-group__prev",{"v-slide-group__prev--disabled":!Me.value}]),onMousedown:Q,onClick:()=>Me.value&&Xe("prev")},[((Fe=a.prev)==null?void 0:Fe.call(a,Ye.value))??V(ef,null,{default:()=>[V(un,{icon:o.value?e.nextIcon:e.prevIcon},null)]})]),q("div",{key:"container",ref:I,class:st(["v-slide-group__container",e.contentClass]),onScroll:he},[q("div",{ref:L,class:"v-slide-group__content",onFocusin:te,onFocusout:re,onKeydown:pe},[(Be=a.default)==null?void 0:Be.call(a,Ye.value)])]),Te.value&&q("div",{key:"next",class:st(["v-slide-group__next",{"v-slide-group__next--disabled":!Ve.value}]),onMousedown:Q,onClick:()=>Ve.value&&Xe("next")},[((lt=a.next)==null?void 0:lt.call(a,Ye.value))??V(ef,null,{default:()=>[V(un,{icon:o.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:h.selected,scrollTo:Xe,scrollOffset:b,focus:$e,hasPrev:Me,hasNext:Ve}}}),p2=Symbol.for("vuetify:v-chip-group"),XB=Re({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:ia},...rb(),...Ft(),...Tu({selectedClass:"v-chip--selected"}),...mn(),...Dn(),...Qr({variant:"tonal"})},"VChipGroup"),YB=it()({name:"VChipGroup",props:XB(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const{themeClasses:o}=$n(e),{isSelected:c,select:f,next:h,prev:l,selected:b}=Sl(e,p2);return ki({VChip:{baseColor:we(()=>e.baseColor),color:we(()=>e.color),disabled:we(()=>e.disabled),filter:we(()=>e.filter),variant:we(()=>e.variant)}}),ct(()=>{const S=of.filterProps(e);return V(of,nt(S,{class:["v-chip-group",{"v-chip-group--column":e.column},o.value,e.class],style:e.style}),{default:()=>{var w;return[(w=a.default)==null?void 0:w.call(a,{isSelected:c,select:f,next:h,prev:l,selected:b.value})]}})}),{}}}),JB=Re({activeClass:String,appendAvatar:String,appendIcon:Gt,baseColor:String,closable:Boolean,closeIcon:{type:Gt,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:Gt,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:Gt,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:pa(),onClickOnce:pa(),...sr(),...Ft(),...Ji(),...Gi(),...Au(),...gi(),...wf(),...$s(),...mn({tag:"span"}),...Dn(),...Qr({variant:"tonal"})},"VChip"),Vs=it()({name:"VChip",directives:{vRipple:qa},props:JB(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,i){let{attrs:a,emit:o,slots:c}=i;const{t:f}=Zn(),{borderClasses:h}=gr(e),{densityClasses:l}=Ga(e),{elevationClasses:b}=ra(e),{roundedClasses:S}=Ci(e),{sizeClasses:w}=td(e),{themeClasses:k}=$n(e),I=Zt(e,"modelValue"),E=vl(e,p2,!1),L=vl(e,ab,!1),F=xf(e,a),z=we(()=>e.link!==!1&&F.isLink.value),B=K(()=>!e.disabled&&e.link!==!1&&(!!E||e.link||F.isClickable.value)),R=we(()=>({"aria-label":f(e.closeLabel),disabled:e.disabled,onClick(te){te.preventDefault(),te.stopPropagation(),I.value=!1,o("click:close",te)}}));xt(I,te=>{te?(E==null||E.register(),L==null||L.register()):(E==null||E.unregister(),L==null||L.unregister())});const{colorClasses:Z,colorStyles:Y,variantClasses:J}=Iu(()=>({color:!E||E.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function ae(te){var re;o("click",te),B.value&&((re=F.navigate)==null||re.call(F,te),E==null||E.toggle())}function he(te){(te.key==="Enter"||te.key===" ")&&(te.preventDefault(),ae(te))}return()=>{var $e;const te=F.isLink.value?"a":e.tag,re=!!(e.appendIcon||e.appendAvatar),ie=!!(re||c.append),ue=!!(c.close||e.closable),Q=!!(c.filter||e.filter)&&E,pe=!!(e.prependIcon||e.prependAvatar),Ce=!!(pe||c.prepend);return I.value&&yi(V(te,nt(F.linkProps,{class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":B.value,"v-chip--filter":Q,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&(($e=F.isActive)==null?void 0:$e.value)},k.value,h.value,Z.value,l.value,b.value,S.value,w.value,J.value,E==null?void 0:E.selectedClass.value,e.class],style:[Y.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:B.value?0:void 0,onClick:ae,onKeydown:B.value&&!z.value&&he}),{default:()=>{var Xe;return[wl(B.value,"v-chip"),Q&&V(U_,{key:"filter"},{default:()=>[yi(q("div",{class:"v-chip__filter"},[c.filter?V(pn,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},c.filter):V(un,{key:"filter-icon",icon:e.filterIcon},null)]),[[ms,E.isSelected.value]])]}),Ce&&q("div",{key:"prepend",class:"v-chip__prepend"},[c.prepend?V(pn,{key:"prepend-defaults",disabled:!pe,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},c.prepend):q(Bt,null,[e.prependIcon&&V(un,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&V(zr,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),q("div",{class:"v-chip__content","data-no-activator":""},[((Xe=c.default)==null?void 0:Xe.call(c,{isSelected:E==null?void 0:E.isSelected.value,selectedClass:E==null?void 0:E.selectedClass.value,select:E==null?void 0:E.select,toggle:E==null?void 0:E.toggle,value:E==null?void 0:E.value.value,disabled:e.disabled}))??Nn(e.text)]),ie&&q("div",{key:"append",class:"v-chip__append"},[c.append?V(pn,{key:"append-defaults",disabled:!re,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},c.append):q(Bt,null,[e.appendIcon&&V(un,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&V(zr,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),ue&&q("button",nt({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},R.value),[c.close?V(pn,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},c.close):V(un,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[qa,B.value&&e.ripple,null]])}}});function qv(e,i){return{x:e.x+i.x,y:e.y+i.y}}function QB(e,i){return{x:e.x-i.x,y:e.y-i.y}}function f1(e,i){if(e.side==="top"||e.side==="bottom"){const{side:a,align:o}=e,c=o==="left"?0:o==="center"?i.width/2:o==="right"?i.width:o,f=a==="top"?0:a==="bottom"?i.height:a;return qv({x:c,y:f},i)}else if(e.side==="left"||e.side==="right"){const{side:a,align:o}=e,c=a==="left"?0:a==="right"?i.width:a,f=o==="top"?0:o==="center"?i.height/2:o==="bottom"?i.height:o;return qv({x:c,y:f},i)}return qv({x:i.width/2,y:i.height/2},i)}const g2={static:nR,connected:aR},eR=Re({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in g2},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array],stickToTarget:Boolean},"VOverlay-location-strategies");function tR(e,i){const a=Qe({}),o=Qe();jn&&ka(()=>!!(i.isActive.value&&e.locationStrategy),l=>{var b,S;xt(()=>e.locationStrategy,l),Hi(()=>{window.removeEventListener("resize",c),visualViewport==null||visualViewport.removeEventListener("resize",f),visualViewport==null||visualViewport.removeEventListener("scroll",h),o.value=void 0}),window.addEventListener("resize",c,{passive:!0}),visualViewport==null||visualViewport.addEventListener("resize",f,{passive:!0}),visualViewport==null||visualViewport.addEventListener("scroll",h,{passive:!0}),typeof e.locationStrategy=="function"?o.value=(b=e.locationStrategy(i,e,a))==null?void 0:b.updateLocation:o.value=(S=g2[e.locationStrategy](i,e,a))==null?void 0:S.updateLocation});function c(l){var b;(b=o.value)==null||b.call(o,l)}function f(l){var b;(b=o.value)==null||b.call(o,l)}function h(l){var b;(b=o.value)==null||b.call(o,l)}return{contentStyles:a,updateLocation:o}}function nR(){}function iR(e,i){const a=I_(e);return i?a.x+=parseFloat(e.style.right||0):a.x-=parseFloat(e.style.left||0),a.y-=parseFloat(e.style.top||0),a}function aR(e,i,a){(Array.isArray(e.target.value)||XM(e.target.value))&&Object.assign(a.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:c,preferredOrigin:f}=C_(()=>{const B=hy(i.location,e.isRtl.value),R=i.origin==="overlap"?B:i.origin==="auto"?zv(B):hy(i.origin,e.isRtl.value);return B.side===R.side&&B.align===Lv(R).align?{preferredAnchor:ow(B),preferredOrigin:ow(R)}:{preferredAnchor:B,preferredOrigin:R}}),[h,l,b,S]=["minWidth","minHeight","maxWidth","maxHeight"].map(B=>K(()=>{const R=parseFloat(i[B]);return isNaN(R)?1/0:R})),w=K(()=>{if(Array.isArray(i.offset))return i.offset;if(typeof i.offset=="string"){const B=i.offset.split(" ").map(parseFloat);return B.length<2&&B.push(0),B}return typeof i.offset=="number"?[i.offset,0]:[0,0]});let k=!1,I=-1;const E=new ok(4),L=new ResizeObserver(()=>{if(!k)return;if(requestAnimationFrame(R=>{R!==I&&E.clear(),requestAnimationFrame(Z=>{I=Z})}),E.isFull){const R=E.values();if(ia(R.at(-1),R.at(-3))&&!ia(R.at(-1),R.at(-2)))return}const B=z();B&&E.push(B.flipped)});let F=new Zr({x:0,y:0,width:0,height:0});xt(e.target,(B,R)=>{R&&!Array.isArray(R)&&L.unobserve(R),Array.isArray(B)?ia(B,R)||z():B&&L.observe(B)},{immediate:!0}),xt(e.contentEl,(B,R)=>{R&&L.unobserve(R),B&&L.observe(B)},{immediate:!0}),Hi(()=>{L.disconnect()});function z(){if(k=!1,requestAnimationFrame(()=>k=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(F=hk(e.target.value));const B=iR(e.contentEl.value,e.isRtl.value),R=up(e.contentEl.value),Z=12;R.length||(R.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(B.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),B.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const Y=R.reduce((pe,Ce)=>{const $e=_M(Ce);return pe?new Zr({x:Math.max(pe.left,$e.left),y:Math.max(pe.top,$e.top),width:Math.min(pe.right,$e.right)-Math.max(pe.left,$e.left),height:Math.min(pe.bottom,$e.bottom)-Math.max(pe.top,$e.top)}):$e},void 0);Y.x+=Z,Y.y+=Z,Y.width-=Z*2,Y.height-=Z*2;let J={anchor:c.value,origin:f.value};function ae(pe){const Ce=new Zr(B),$e=f1(pe.anchor,F),Xe=f1(pe.origin,Ce);let{x:Ye,y:qe}=QB($e,Xe);switch(pe.anchor.side){case"top":qe-=w.value[0];break;case"bottom":qe+=w.value[0];break;case"left":Ye-=w.value[0];break;case"right":Ye+=w.value[0];break}switch(pe.anchor.align){case"top":qe-=w.value[1];break;case"bottom":qe+=w.value[1];break;case"left":Ye-=w.value[1];break;case"right":Ye+=w.value[1];break}return Ce.x+=Ye,Ce.y+=qe,Ce.width=Math.min(Ce.width,b.value),Ce.height=Math.min(Ce.height,S.value),{overflows:uw(Ce,Y),x:Ye,y:qe}}let he=0,te=0;const re={x:0,y:0},ie={x:!1,y:!1};let ue=-1;for(;!(ue++>10);){const{x:pe,y:Ce,overflows:$e}=ae(J);he+=pe,te+=Ce,B.x+=pe,B.y+=Ce;{const Xe=lw(J.anchor),Ye=$e.x.before||$e.x.after,qe=$e.y.before||$e.y.after;let Te=!1;if(["x","y"].forEach(Me=>{if(Me==="x"&&Ye&&!ie.x||Me==="y"&&qe&&!ie.y){const Ve={anchor:{...J.anchor},origin:{...J.origin}},Fe=Me==="x"?Xe==="y"?Lv:zv:Xe==="y"?zv:Lv;Ve.anchor=Fe(Ve.anchor),Ve.origin=Fe(Ve.origin);const{overflows:Be}=ae(Ve);(Be[Me].before<=$e[Me].before&&Be[Me].after<=$e[Me].after||Be[Me].before+Be[Me].after<($e[Me].before+$e[Me].after)/2)&&(J=Ve,Te=ie[Me]=!0)}}),Te)continue}$e.x.before&&(i.stickToTarget||(he+=$e.x.before),B.x+=$e.x.before),$e.x.after&&(i.stickToTarget||(he-=$e.x.after),B.x-=$e.x.after),$e.y.before&&(i.stickToTarget||(te+=$e.y.before),B.y+=$e.y.before),$e.y.after&&(i.stickToTarget||(te-=$e.y.after),B.y-=$e.y.after);{const Xe=uw(B,Y);re.x=Y.width-Xe.x.before-Xe.x.after,re.y=Y.height-Xe.y.before-Xe.y.after,i.stickToTarget||(he+=Xe.x.before),B.x+=Xe.x.before,i.stickToTarget||(te+=Xe.y.before),B.y+=Xe.y.before}break}const Q=lw(J.anchor);return Object.assign(a.value,{"--v-overlay-anchor-origin":`${J.anchor.side} ${J.anchor.align}`,transformOrigin:`${J.origin.side} ${J.origin.align}`,top:Tt(Gv(te)),left:e.isRtl.value?void 0:Tt(Gv(he)),right:e.isRtl.value?Tt(Gv(-he)):void 0,minWidth:Tt(Q==="y"?Math.min(h.value,F.width):h.value),maxWidth:Tt(m1(ni(re.x,h.value===1/0?0:h.value,b.value))),maxHeight:Tt(m1(ni(re.y,l.value===1/0?0:l.value,S.value)))}),{available:re,contentBox:B,flipped:ie}}return xt(()=>[c.value,f.value,i.offset,i.minWidth,i.minHeight,i.maxWidth,i.maxHeight],()=>z()),kn(()=>{const B=z();if(!B)return;const{available:R,contentBox:Z}=B;Z.height>R.y&&requestAnimationFrame(()=>{z(),requestAnimationFrame(()=>{z()})})}),{updateLocation:z}}function Gv(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function m1(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let Vy=!0;const mp=[];function rR(e){!Vy||mp.length?(mp.push(e),zy()):(Vy=!1,e(),zy())}let p1=-1;function zy(){cancelAnimationFrame(p1),p1=requestAnimationFrame(()=>{const e=mp.shift();e&&e(),mp.length?zy():Vy=!0})}const Wm={none:null,close:lR,block:uR,reposition:cR},sR=Re({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in Wm}},"VOverlay-scroll-strategies");function oR(e,i){if(!jn)return;let a;pi(async()=>{a==null||a.stop(),i.isActive.value&&e.scrollStrategy&&(a=fl(),await new Promise(o=>setTimeout(o)),a.active&&a.run(()=>{var o;typeof e.scrollStrategy=="function"?e.scrollStrategy(i,e,a):(o=Wm[e.scrollStrategy])==null||o.call(Wm,i,e,a)}))}),Hi(()=>{a==null||a.stop()})}function lR(e){function i(a){e.isActive.value=!1}v2(sb(e.target.value,e.contentEl.value),i)}function uR(e,i){var l;const a=(l=e.root.value)==null?void 0:l.offsetParent,o=sb(e.target.value,e.contentEl.value),c=[...new Set([...up(o,i.contained?a:void 0),...up(e.contentEl.value,i.contained?a:void 0)])].filter(b=>!b.classList.contains("v-overlay-scroll-blocked")),f=window.innerWidth-document.documentElement.offsetWidth,h=(b=>M_(b)&&b)(a||document.documentElement);h&&e.root.value.classList.add("v-overlay--scroll-blocked"),c.forEach((b,S)=>{b.style.setProperty("--v-body-scroll-x",Tt(-b.scrollLeft)),b.style.setProperty("--v-body-scroll-y",Tt(-b.scrollTop)),b!==document.documentElement&&b.style.setProperty("--v-scrollbar-offset",Tt(f)),b.classList.add("v-overlay-scroll-blocked")}),Hi(()=>{c.forEach((b,S)=>{const w=parseFloat(b.style.getPropertyValue("--v-body-scroll-x")),k=parseFloat(b.style.getPropertyValue("--v-body-scroll-y")),I=b.style.scrollBehavior;b.style.scrollBehavior="auto",b.style.removeProperty("--v-body-scroll-x"),b.style.removeProperty("--v-body-scroll-y"),b.style.removeProperty("--v-scrollbar-offset"),b.classList.remove("v-overlay-scroll-blocked"),b.scrollLeft=-w,b.scrollTop=-k,b.style.scrollBehavior=I}),h&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function cR(e,i,a){let o=!1,c=-1,f=-1;function h(l){rR(()=>{var w,k;const b=performance.now();(k=(w=e.updateLocation).value)==null||k.call(w,l),o=(performance.now()-b)/(1e3/60)>2})}f=(typeof requestIdleCallback>"u"?l=>l():requestIdleCallback)(()=>{a.run(()=>{v2(sb(e.target.value,e.contentEl.value),l=>{o?(cancelAnimationFrame(c),c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{h(l)})})):h(l)})})}),Hi(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(f),cancelAnimationFrame(c)})}function sb(e,i){return Array.isArray(e)?document.elementsFromPoint(...e).find(a=>!(i!=null&&i.contains(a))):e??i}function v2(e,i){const a=[document,...up(e)];a.forEach(o=>{o.addEventListener("scroll",i,{passive:!0})}),Hi(()=>{a.forEach(o=>{o.removeEventListener("scroll",i)})})}const Ly=Symbol.for("vuetify:v-menu"),dR=Re({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...tb()},"VOverlay-activator");function hR(e,i){let{isActive:a,isTop:o,contentEl:c}=i;const f=Vi("useActivator"),h=Qe();let l=!1,b=!1,S=!0;const w=K(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),k=K(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!w.value),{runOpenDelay:I,runCloseDelay:E}=nb(e,te=>{te===(e.openOnHover&&l||w.value&&b)&&!(e.openOnHover&&a.value&&!o.value)&&(a.value!==te&&(S=!0),a.value=te)}),L=Qe(),F={onClick:te=>{te.stopPropagation(),h.value=te.currentTarget||te.target,a.value||(L.value=[te.clientX,te.clientY]),a.value=!a.value},onMouseenter:te=>{var re;(re=te.sourceCapabilities)!=null&&re.firesTouchEvents||(l=!0,h.value=te.currentTarget||te.target,I())},onMouseleave:te=>{l=!1,E()},onFocus:te=>{qc(te.target,":focus-visible")!==!1&&(b=!0,te.stopPropagation(),h.value=te.currentTarget||te.target,I())},onBlur:te=>{b=!1,te.stopPropagation(),E()}},z=K(()=>{const te={};return k.value&&(te.onClick=F.onClick),e.openOnHover&&(te.onMouseenter=F.onMouseenter,te.onMouseleave=F.onMouseleave),w.value&&(te.onFocus=F.onFocus,te.onBlur=F.onBlur),te}),B=K(()=>{const te={};if(e.openOnHover&&(te.onMouseenter=()=>{l=!0,I()},te.onMouseleave=()=>{l=!1,E()}),w.value&&(te.onFocusin=()=>{b=!0,I()},te.onFocusout=()=>{b=!1,E()}),e.closeOnContentClick){const re=vn(Ly,null);te.onClick=()=>{a.value=!1,re==null||re.closeParents()}}return te}),R=K(()=>{const te={};return e.openOnHover&&(te.onMouseenter=()=>{S&&(l=!0,S=!1,I())},te.onMouseleave=()=>{l=!1,E()}),te});xt(o,te=>{var re;te&&(e.openOnHover&&!l&&(!w.value||!b)||w.value&&!b&&(!e.openOnHover||!l))&&!((re=c.value)!=null&&re.contains(document.activeElement))&&(a.value=!1)}),xt(a,te=>{te||setTimeout(()=>{L.value=void 0})},{flush:"post"});const Z=sp();pi(()=>{Z.value&&kn(()=>{h.value=Z.el})});const Y=sp(),J=K(()=>e.target==="cursor"&&L.value?L.value:Y.value?Y.el:y2(e.target,f)||h.value),ae=K(()=>Array.isArray(J.value)?void 0:J.value);let he;return xt(()=>!!e.activator,te=>{te&&jn?(he=fl(),he.run(()=>{fR(e,f,{activatorEl:h,activatorEvents:z})})):he&&he.stop()},{flush:"post",immediate:!0}),Hi(()=>{he==null||he.stop()}),{activatorEl:h,activatorRef:Z,target:J,targetEl:ae,targetRef:Y,activatorEvents:z,contentEvents:B,scrimEvents:R}}function fR(e,i,a){let{activatorEl:o,activatorEvents:c}=a;xt(()=>e.activator,(b,S)=>{if(S&&b!==S){const w=l(S);w&&h(w)}b&&kn(()=>f())},{immediate:!0}),xt(()=>e.activatorProps,()=>{f()}),Hi(()=>{h()});function f(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l(),S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;b&&bM(b,nt(c.value,S))}function h(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l(),S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;b&&xM(b,nt(c.value,S))}function l(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const S=y2(b,i);return o.value=(S==null?void 0:S.nodeType)===Node.ELEMENT_NODE?S:void 0,o.value}}function y2(e,i){var o,c;if(!e)return;let a;if(e==="parent"){let f=(c=(o=i==null?void 0:i.proxy)==null?void 0:o.$el)==null?void 0:c.parentNode;for(;f!=null&&f.hasAttribute("data-no-activator");)f=f.parentNode;a=f}else typeof e=="string"?a=document.querySelector(e):"$el"in e?a=e.$el:a=e;return a}function _2(){if(!jn)return bt(!1);const{ssr:e}=Jr();if(e){const i=bt(!1);return Fi(()=>{i.value=!0}),i}else return bt(!0)}const g1=Symbol.for("vuetify:stack"),xh=Ui([]);function mR(e,i,a){const o=Vi("useStack"),c=!a,f=vn(g1,void 0),h=Ui({activeChildren:new Set});Jn(g1,h);const l=bt(Number(rr(i)));ka(e,()=>{var k;const w=(k=xh.at(-1))==null?void 0:k[1];l.value=w?w+10:Number(rr(i)),c&&xh.push([o.uid,l.value]),f==null||f.activeChildren.add(o.uid),Hi(()=>{if(c){const I=rn(xh).findIndex(E=>E[0]===o.uid);xh.splice(I,1)}f==null||f.activeChildren.delete(o.uid)})});const b=bt(!0);c&&pi(()=>{var k;const w=((k=xh.at(-1))==null?void 0:k[0])===o.uid;setTimeout(()=>b.value=w)});const S=we(()=>!h.activeChildren.size);return{globalTop:hu(b),localTop:S,stackStyles:we(()=>({zIndex:l.value}))}}function pR(e){return{teleportTarget:K(()=>{const a=e();if(a===!0||!jn)return;const o=a===!1?document.body:typeof a=="string"?document.querySelector(a):a;if(o==null)return;let c=[...o.children].find(f=>f.matches(".v-overlay-container"));return c||(c=document.createElement("div"),c.className="v-overlay-container",o.appendChild(c)),c})}}function gR(){return!0}function b2(e,i,a){if(!e||x2(e,a)===!1)return!1;const o=Sk(i);if(typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&o.host===e.target)return!1;const c=(typeof a.value=="object"&&a.value.include||(()=>[]))();return c.push(i),!c.some(f=>f==null?void 0:f.contains(e.target))}function x2(e,i){return(typeof i.value=="object"&&i.value.closeConditional||gR)(e)}function vR(e,i,a){const o=typeof a.value=="function"?a.value:a.value.handler;e.shadowTarget=e.target,i._clickOutside.lastMousedownWasOutside&&b2(e,i,a)&&setTimeout(()=>{x2(e,a)&&o&&o(e)},0)}function v1(e,i){const a=Sk(e);i(document),typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&i(a)}const By={mounted(e,i){const a=c=>vR(c,e,i),o=c=>{e._clickOutside.lastMousedownWasOutside=b2(c,e,i)};v1(e,c=>{c.addEventListener("click",a,!0),c.addEventListener("mousedown",o,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[i.instance.$.uid]={onClick:a,onMousedown:o}},beforeUnmount(e,i){e._clickOutside&&(v1(e,a=>{var f;if(!a||!((f=e._clickOutside)!=null&&f[i.instance.$.uid]))return;const{onClick:o,onMousedown:c}=e._clickOutside[i.instance.$.uid];a.removeEventListener("click",o,!0),a.removeEventListener("mousedown",c,!0)}),delete e._clickOutside[i.instance.$.uid])}};function yR(e){const{modelValue:i,color:a,...o}=e;return V(pl,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&q("div",nt({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},o),null)]})}const If=Re({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...dR(),...Ft(),...Oi(),...H_(),...eR(),...sR(),...Dn(),...ps()},"VOverlay"),Rs=it()({name:"VOverlay",directives:{vClickOutside:By},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...If()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,i){let{slots:a,attrs:o,emit:c}=i;const f=Vi("VOverlay"),h=Qe(),l=Qe(),b=Qe(),S=Zt(e,"modelValue"),w=K({get:()=>S.value,set:ge=>{ge&&e.disabled||(S.value=ge)}}),{themeClasses:k}=$n(e),{rtlClasses:I,isRtl:E}=qi(),{hasContent:L,onAfterLeave:F}=q_(e,w),z=Un(()=>typeof e.scrim=="string"?e.scrim:null),{globalTop:B,localTop:R,stackStyles:Z}=mR(w,()=>e.zIndex,e._disableGlobalStack),{activatorEl:Y,activatorRef:J,target:ae,targetEl:he,targetRef:te,activatorEvents:re,contentEvents:ie,scrimEvents:ue}=hR(e,{isActive:w,isTop:R,contentEl:b}),{teleportTarget:Q}=pR(()=>{var rt,ft,Rt;const ge=e.attach||e.contained;if(ge)return ge;const je=((rt=Y==null?void 0:Y.value)==null?void 0:rt.getRootNode())||((Rt=(ft=f.proxy)==null?void 0:ft.$el)==null?void 0:Rt.getRootNode());return je instanceof ShadowRoot?je:!1}),{dimensionStyles:pe}=$i(e),Ce=_2(),{scopeId:$e}=Mu();xt(()=>e.disabled,ge=>{ge&&(w.value=!1)});const{contentStyles:Xe,updateLocation:Ye}=tR(e,{isRtl:E,contentEl:b,target:ae,isActive:w});oR(e,{root:h,contentEl:b,targetEl:he,target:ae,isActive:w,updateLocation:Ye});function qe(ge){c("click:outside",ge),e.persistent?lt():w.value=!1}function Te(ge){return w.value&&B.value&&(!e.scrim||ge.target===l.value||ge instanceof MouseEvent&&ge.shadowTarget===l.value)}jn&&xt(w,ge=>{ge?window.addEventListener("keydown",Me):window.removeEventListener("keydown",Me)},{immediate:!0}),va(()=>{jn&&window.removeEventListener("keydown",Me)});function Me(ge){var je,rt,ft;ge.key==="Escape"&&B.value&&((je=b.value)!=null&&je.contains(document.activeElement)||c("keydown",ge),e.persistent?lt():(w.value=!1,(rt=b.value)!=null&&rt.contains(document.activeElement)&&((ft=Y.value)==null||ft.focus())))}function Ve(ge){ge.key==="Escape"&&!B.value||c("keydown",ge)}const Fe=iC();ka(()=>e.closeOnBack,()=>{zz(Fe,ge=>{B.value&&w.value?(ge(!1),e.persistent?lt():w.value=!1):ge()})});const Be=Qe();xt(()=>w.value&&(e.absolute||e.contained)&&Q.value==null,ge=>{if(ge){const je=E_(h.value);je&&je!==document.scrollingElement&&(Be.value=je.scrollTop)}});function lt(){e.noClickAnimation||b.value&&uo(b.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Hh})}function vt(){c("afterEnter")}function kt(){F(),c("afterLeave")}return ct(()=>{var ge;return q(Bt,null,[(ge=a.activator)==null?void 0:ge.call(a,{isActive:w.value,targetRef:te,props:nt({ref:J},re.value,e.activatorProps)}),Ce.value&&L.value&&V(xA,{disabled:!Q.value,to:Q.value},{default:()=>[q("div",nt({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":w.value,"v-overlay--contained":e.contained},k.value,I.value,e.class],style:[Z.value,{"--v-overlay-opacity":e.opacity,top:Tt(Be.value)},e.style],ref:h,onKeydown:Ve},$e,o),[V(yR,nt({color:z,modelValue:w.value&&!!e.scrim,ref:l},ue.value),null),V(Ua,{appear:!0,persisted:!0,transition:e.transition,target:ae.value,onAfterEnter:vt,onAfterLeave:kt},{default:()=>{var je;return[yi(q("div",nt({ref:b,class:["v-overlay__content",e.contentClass],style:[pe.value,Xe.value]},ie.value,e.contentProps),[(je=a.default)==null?void 0:je.call(a,{isActive:w})]),[[ms,w.value],[By,{handler:qe,closeConditional:Te,include:()=>[Y.value]}]])]}})])]})])}),{activatorEl:Y,scrimEl:l,target:ae,animateClick:lt,contentEl:b,globalTop:B,localTop:R,updateLocation:Ye}}}),w2=Re({id:String,submenu:Boolean,disableInitialFocus:Boolean,...Wn(If({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Fp}}),["absolute"])},"VMenu"),Yc=it()({name:"VMenu",props:w2(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const o=Zt(e,"modelValue"),{scopeId:c}=Mu(),{isRtl:f}=qi(),h=Ia(),l=we(()=>e.id||`v-menu-${h}`),b=Qe(),S=vn(Ly,null),w=bt(new Set);Jn(Ly,{register(){w.value.add(h)},unregister(){w.value.delete(h)},closeParents(z){setTimeout(()=>{var B;!w.value.size&&!e.persistent&&(z==null||(B=b.value)!=null&&B.contentEl&&!mM(z,b.value.contentEl))&&(o.value=!1,S==null||S.closeParents())},40)}}),va(()=>{S==null||S.unregister(),document.removeEventListener("focusin",k)}),h_(()=>o.value=!1);async function k(z){var Z,Y,J;const B=z.relatedTarget,R=z.target;await kn(),o.value&&B!==R&&((Z=b.value)!=null&&Z.contentEl)&&((Y=b.value)!=null&&Y.globalTop)&&![document,b.value.contentEl].includes(R)&&!b.value.contentEl.contains(R)&&((J=Hc(b.value.contentEl)[0])==null||J.focus())}xt(o,z=>{z?(S==null||S.register(),jn&&!e.disableInitialFocus&&document.addEventListener("focusin",k,{once:!0})):(S==null||S.unregister(),jn&&document.removeEventListener("focusin",k))},{immediate:!0});function I(z){S==null||S.closeParents(z)}function E(z){var B,R,Z,Y,J;if(!e.disabled)if(z.key==="Tab"||z.key==="Enter"&&!e.closeOnContentClick){if(z.key==="Enter"&&(z.target instanceof HTMLTextAreaElement||z.target instanceof HTMLInputElement&&z.target.closest("form")))return;z.key==="Enter"&&z.preventDefault(),uk(Hc((B=b.value)==null?void 0:B.contentEl,!1),z.shiftKey?"prev":"next",he=>he.tabIndex>=0)||(o.value=!1,(Z=(R=b.value)==null?void 0:R.activatorEl)==null||Z.focus())}else e.submenu&&z.key===(f.value?"ArrowRight":"ArrowLeft")&&(o.value=!1,(J=(Y=b.value)==null?void 0:Y.activatorEl)==null||J.focus())}function L(z){var R;if(e.disabled)return;const B=(R=b.value)==null?void 0:R.contentEl;B&&o.value?z.key==="ArrowDown"?(z.preventDefault(),z.stopImmediatePropagation(),uu(B,"next")):z.key==="ArrowUp"?(z.preventDefault(),z.stopImmediatePropagation(),uu(B,"prev")):e.submenu&&(z.key===(f.value?"ArrowRight":"ArrowLeft")?o.value=!1:z.key===(f.value?"ArrowLeft":"ArrowRight")&&(z.preventDefault(),uu(B,"first"))):(e.submenu?z.key===(f.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(z.key))&&(o.value=!0,z.preventDefault(),setTimeout(()=>setTimeout(()=>L(z))))}const F=K(()=>nt({"aria-haspopup":"menu","aria-expanded":String(o.value),"aria-controls":l.value,onKeydown:L},e.activatorProps));return ct(()=>{const z=Rs.filterProps(e);return V(Rs,nt({ref:b,id:l.value,class:["v-menu",e.class],style:e.style},z,{modelValue:o.value,"onUpdate:modelValue":B=>o.value=B,absolute:!0,activatorProps:F.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":I,onKeydown:E},c),{activator:a.activator,default:function(){for(var B=arguments.length,R=new Array(B),Z=0;Z<B;Z++)R[Z]=arguments[Z];return V(pn,{root:"VMenu"},{default:()=>{var Y;return[(Y=a.default)==null?void 0:Y.call(a,...R)]}})}})}),sa({id:l,ΨopenChildren:w},b)}}),_R=Re({renderless:Boolean,...Ft()},"VVirtualScrollItem"),S2=it()({name:"VVirtualScrollItem",inheritAttrs:!1,props:_R(),emits:{"update:height":e=>!0},setup(e,i){let{attrs:a,emit:o,slots:c}=i;const{resizeRef:f,contentRect:h}=Yr(void 0,"border");xt(()=>{var l;return(l=h.value)==null?void 0:l.height},l=>{l!=null&&o("update:height",l)}),ct(()=>{var l,b;return e.renderless?q(Bt,null,[(l=c.default)==null?void 0:l.call(c,{itemRef:f})]):q("div",nt({ref:f,class:["v-virtual-scroll__item",e.class],style:e.style},a),[(b=c.default)==null?void 0:b.call(c)])})}}),bR=-1,xR=1,Wv=100,k2=Re({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function C2(e,i){const a=Jr(),o=bt(0);pi(()=>{o.value=parseFloat(e.itemHeight||0)});const c=bt(0),f=bt(Math.ceil((parseInt(e.height)||a.height.value)/(o.value||16))||1),h=bt(0),l=bt(0),b=Qe(),S=Qe();let w=0;const{resizeRef:k,contentRect:I}=Yr();pi(()=>{k.value=b.value});const E=K(()=>{var Me;return b.value===document.documentElement?a.height.value:((Me=I.value)==null?void 0:Me.height)||parseInt(e.height)||0}),L=K(()=>!!(b.value&&S.value&&E.value&&o.value));let F=Array.from({length:i.value.length}),z=Array.from({length:i.value.length});const B=bt(0);let R=-1;function Z(Me){return F[Me]||o.value}const Y=rk(()=>{const Me=performance.now();z[0]=0;const Ve=i.value.length;for(let Fe=1;Fe<=Ve-1;Fe++)z[Fe]=(z[Fe-1]||0)+Z(Fe-1);B.value=Math.max(B.value,performance.now()-Me)},B),J=xt(L,Me=>{Me&&(J(),w=S.value.offsetTop,Y.immediate(),Xe(),~R&&kn(()=>{jn&&window.requestAnimationFrame(()=>{qe(R),R=-1})}))});Hi(()=>{Y.clear()});function ae(Me,Ve){const Fe=F[Me],Be=o.value;o.value=Be?Math.min(o.value,Ve):Ve,(Fe!==Ve||Be!==o.value)&&(F[Me]=Ve,Y())}function he(Me){Me=ni(Me,0,i.value.length-1);const Ve=Math.floor(Me),Fe=Me%1,Be=Ve+1,lt=z[Ve]||0,vt=z[Be]||lt;return lt+(vt-lt)*Fe}function te(Me){return wR(z,Me)}let re=0,ie=0,ue=0;xt(E,(Me,Ve)=>{Ve&&(Xe(),Me<Ve&&requestAnimationFrame(()=>{ie=0,Xe()}))});let Q=-1;function pe(){if(!b.value||!S.value)return;const Me=b.value.scrollTop,Ve=performance.now();Ve-ue>500?(ie=Math.sign(Me-re),w=S.value.offsetTop):ie=Me-re,re=Me,ue=Ve,window.clearTimeout(Q),Q=window.setTimeout(Ce,500),Xe()}function Ce(){!b.value||!S.value||(ie=0,ue=0,window.clearTimeout(Q),Xe())}let $e=-1;function Xe(){cancelAnimationFrame($e),$e=requestAnimationFrame(Ye)}function Ye(){if(!b.value||!E.value||!o.value)return;const Me=re-w,Ve=Math.sign(ie),Fe=Math.max(0,Me-Wv),Be=ni(te(Fe),0,i.value.length),lt=Me+E.value+Wv,vt=ni(te(lt)+1,Be+1,i.value.length);if((Ve!==bR||Be<c.value)&&(Ve!==xR||vt>f.value)){const kt=he(c.value)-he(Be),ge=he(vt)-he(f.value);Math.max(kt,ge)>Wv?(c.value=Be,f.value=vt):(Be<=0&&(c.value=Be),vt>=i.value.length&&(f.value=vt))}h.value=he(c.value),l.value=he(i.value.length)-he(f.value)}function qe(Me){const Ve=he(Me);!b.value||Me&&!Ve?R=Me:b.value.scrollTop=Ve}const Te=K(()=>i.value.slice(c.value,f.value).map((Me,Ve)=>{const Fe=Ve+c.value;return{raw:Me,index:Fe,key:Ri(Me,e.itemKey,Fe)}}));return xt(i,()=>{F=Array.from({length:i.value.length}),z=Array.from({length:i.value.length}),Y.immediate(),Xe()},{deep:1}),{calculateVisibleItems:Xe,containerRef:b,markerRef:S,computedItems:Te,paddingTop:h,paddingBottom:l,scrollToIndex:qe,handleScroll:pe,handleScrollend:Ce,handleItemResize:ae}}function wR(e,i){let a=e.length-1,o=0,c=0,f=null,h=-1;if(e[a]<i)return a;for(;o<=a;)if(c=o+a>>1,f=e[c],f>i)a=c-1;else if(f<i)h=c,o=c+1;else return f===i?c:o;return h}const SR=Re({items:{type:Array,default:()=>[]},renderless:Boolean,...k2(),...Ft(),...Oi()},"VVirtualScroll"),qp=it()({name:"VVirtualScroll",props:SR(),setup(e,i){let{slots:a}=i;const o=Vi("VVirtualScroll"),{dimensionStyles:c}=$i(e),{calculateVisibleItems:f,containerRef:h,markerRef:l,handleScroll:b,handleScrollend:S,handleItemResize:w,scrollToIndex:k,paddingTop:I,paddingBottom:E,computedItems:L}=C2(e,we(()=>e.items));return ka(()=>e.renderless,()=>{function F(){var R,Z;const B=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";h.value===document.documentElement?(document[B]("scroll",b,{passive:!0}),document[B]("scrollend",S)):((R=h.value)==null||R[B]("scroll",b,{passive:!0}),(Z=h.value)==null||Z[B]("scrollend",S))}Fi(()=>{h.value=E_(o.vnode.el,!0),F(!0)}),Hi(F)}),ct(()=>{const F=L.value.map(z=>V(S2,{key:z.key,renderless:e.renderless,"onUpdate:height":B=>w(z.index,B)},{default:B=>{var R;return(R=a.default)==null?void 0:R.call(a,{item:z.raw,index:z.index,...B})}}));return e.renderless?q(Bt,null,[q("div",{ref:l,class:"v-virtual-scroll__spacer",style:{paddingTop:Tt(I.value)}},null),F,q("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Tt(E.value)}},null)]):q("div",{ref:h,class:st(["v-virtual-scroll",e.class]),onScrollPassive:b,onScrollend:S,style:St([c.value,e.style])},[q("div",{ref:l,class:"v-virtual-scroll__container",style:{paddingTop:Tt(I.value),paddingBottom:Tt(E.value)}},[F])])}),{calculateVisibleItems:f,scrollToIndex:k}}});function ob(e,i){const a=bt(!1);let o;function c(l){cancelAnimationFrame(o),a.value=!0,o=requestAnimationFrame(()=>{o=requestAnimationFrame(()=>{a.value=!1})})}async function f(){await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>{if(a.value){const b=xt(a,()=>{b(),l()})}else l()})}async function h(l){var w,k;if(l.key==="Tab"&&((w=i.value)==null||w.focus()),!["PageDown","PageUp","Home","End"].includes(l.key))return;const b=(k=e.value)==null?void 0:k.$el;if(!b)return;(l.key==="Home"||l.key==="End")&&b.scrollTo({top:l.key==="Home"?0:b.scrollHeight,behavior:"smooth"}),await f();const S=b.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(l.key==="PageDown"||l.key==="Home"){const I=b.getBoundingClientRect().top;for(const E of S)if(E.getBoundingClientRect().top>=I){E.focus();break}}else{const I=b.getBoundingClientRect().bottom;for(const E of[...S].reverse())if(E.getBoundingClientRect().bottom<=I){E.focus();break}}}return{onScrollPassive:c,onKeydown:h}}const kR=Re({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function lb(e,i){const{t:a}=Zn(),o=Ia(),c=K(()=>`menu-${o}`),f=we(()=>rr(i)),h=we(()=>c.value),l=we(()=>a(rr(i)?e.closeText:e.openText));return{menuId:c,ariaExpanded:f,ariaControls:h,ariaLabel:l}}const ub=Re({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Gt,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...kR(),...NC({itemChildren:!1})},"Select"),CR=Re({...ub(),...Wn(Cf({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ps({transition:{component:Fp}})},"VSelect"),jc=it()({name:"VSelect",props:CR(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,i){let{slots:a}=i;const{t:o}=Zn(),c=Qe(),f=Qe(),h=Qe(),{items:l,transformIn:b,transformOut:S}=Y_(e),w=Zt(e,"modelValue",[],Be=>b(Be===null?[null]:Si(Be)),Be=>{const lt=S(Be);return e.multiple?lt:lt[0]??null}),k=K(()=>typeof e.counterValue=="function"?e.counterValue(w.value):typeof e.counterValue=="number"?e.counterValue:w.value.length),I=ad(e),E=K(()=>w.value.map(Be=>Be.value)),L=bt(!1);let F="",z=-1,B;const R=K(()=>e.hideSelected?l.value.filter(Be=>!w.value.some(lt=>(e.valueComparator||ia)(lt,Be))):l.value),Z=K(()=>e.hideNoData&&!R.value.length||I.isReadonly.value||I.isDisabled.value),Y=Zt(e,"menu"),J=K({get:()=>Y.value,set:Be=>{var lt;Y.value&&!Be&&((lt=f.value)!=null&&lt.ΨopenChildren.size)||Be&&Z.value||(Y.value=Be)}}),{menuId:ae,ariaExpanded:he,ariaControls:te,ariaLabel:re}=lb(e,J),ie=K(()=>{var Be;return{...e.menuProps,activatorProps:{...((Be=e.menuProps)==null?void 0:Be.activatorProps)||{},"aria-haspopup":"listbox"}}}),ue=Qe(),Q=ob(ue,c);function pe(Be){e.openOnClear&&(J.value=!0)}function Ce(){Z.value||(J.value=!J.value)}function $e(Be){Gc(Be)&&Xe(Be)}function Xe(Be){var fe,se,Se;if(!Be.key||I.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(Be.key)&&Be.preventDefault(),["Enter","ArrowDown"," "].includes(Be.key)&&(J.value=!0),["Escape","Tab"].includes(Be.key)&&(J.value=!1),Be.key==="Home"?(fe=ue.value)==null||fe.focus("first"):Be.key==="End"&&((se=ue.value)==null||se.focus("last"));const lt=1e3;if(!Gc(Be))return;const vt=performance.now();vt-B>lt&&(F="",z=-1),F+=Be.key.toLowerCase(),B=vt;const kt=R.value;function ge(){let xe=je();return xe||F.at(-1)===F.at(-2)&&(F=F.slice(0,-1),xe=je(),xe)||(z=-1,xe=je(),xe)?xe:(F=Be.key.toLowerCase(),je())}function je(){for(let xe=z+1;xe<kt.length;xe++){const le=kt[xe];if(le.title.toLowerCase().startsWith(F))return[le,xe]}}const rt=ge();if(!rt)return;const[ft,Rt]=rt;z=Rt,(Se=ue.value)==null||Se.focus(Rt),e.multiple||(w.value=[ft])}function Ye(Be){let lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!Be.props.disabled)if(e.multiple){const vt=w.value.findIndex(ge=>(e.valueComparator||ia)(ge.value,Be.value)),kt=lt??!~vt;if(~vt){const ge=kt?[...w.value,Be]:[...w.value];ge.splice(vt,1),w.value=ge}else kt&&(w.value=[...w.value,Be])}else{const vt=lt!==!1;w.value=vt?[Be]:[],kn(()=>{J.value=!1})}}function qe(Be){var lt;(lt=ue.value)!=null&&lt.$el.contains(Be.relatedTarget)||(J.value=!1)}function Te(){var Be;e.eager&&((Be=h.value)==null||Be.calculateVisibleItems())}function Me(){var Be;L.value&&((Be=c.value)==null||Be.focus())}function Ve(Be){L.value=!0}function Fe(Be){if(Be==null)w.value=[];else if(qc(c.value,":autofill")||qc(c.value,":-webkit-autofill")){const lt=l.value.find(vt=>vt.title===Be);lt&&Ye(lt)}else c.value&&(c.value.value="")}return xt(J,()=>{if(!e.hideSelected&&J.value&&w.value.length){const Be=R.value.findIndex(lt=>w.value.some(vt=>(e.valueComparator||ia)(vt.value,lt.value)));jn&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{var lt;Be>=0&&((lt=h.value)==null||lt.scrollToIndex(Be))})}}),xt(l,(Be,lt)=>{J.value||L.value&&e.hideNoData&&!lt.length&&Be.length&&(J.value=!0)}),ct(()=>{const Be=!!(e.chips||a.chip),lt=!!(!e.hideNoData||R.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),vt=w.value.length>0,kt=xi.filterProps(e),ge=vt||!L.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return V(xi,nt({ref:c},kt,{modelValue:w.value.map(je=>je.props.value).join(", "),"onUpdate:modelValue":Fe,focused:L.value,"onUpdate:focused":je=>L.value=je,validationValue:w.externalValue,counterValue:k.value,dirty:vt,class:["v-select",{"v-select--active-menu":J.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":w.value.length,"v-select--selection-slot":!!a.selection},e.class],style:e.style,inputmode:"none",placeholder:ge,"onClick:clear":pe,"onMousedown:control":Ce,onBlur:qe,onKeydown:Xe,"aria-expanded":he.value,"aria-controls":te.value,"aria-label":re.value,title:re.value}),{...a,default:()=>q(Bt,null,[V(Yc,nt({id:ae.value,ref:f,modelValue:J.value,"onUpdate:modelValue":je=>J.value=je,activator:"parent",contentClass:"v-select__content",disabled:Z.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Te,onAfterLeave:Me},ie.value),{default:()=>[lt&&V(vo,nt({ref:ue,selected:E.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:je=>je.preventDefault(),onKeydown:$e,onFocusin:Ve,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},Q,e.listProps),{default:()=>{var je,rt,ft;return[(je=a["prepend-item"])==null?void 0:je.call(a),!R.value.length&&!e.hideNoData&&(((rt=a["no-data"])==null?void 0:rt.call(a))??V(ri,{key:"no-data",title:o(e.noDataText)},null)),V(qp,{ref:h,renderless:!0,items:R.value,itemKey:"value"},{default:Rt=>{var Ke,ht,et;let{item:fe,index:se,itemRef:Se}=Rt;const xe=gM(fe.props),le=nt(fe.props,{ref:Se,key:fe.value,onClick:()=>Ye(fe,null)});return fe.type==="divider"?((Ke=a.divider)==null?void 0:Ke.call(a,{props:fe.raw,index:se}))??V(Ha,nt(fe.props,{key:`divider-${se}`}),null):fe.type==="subheader"?((ht=a.subheader)==null?void 0:ht.call(a,{props:fe.raw,index:se}))??V(sd,nt(fe.props,{key:`subheader-${se}`}),null):((et=a.item)==null?void 0:et.call(a,{item:fe,index:se,props:le}))??V(ri,nt(le,{role:"option"}),{prepend:tt=>{let{isSelected:dt}=tt;return q(Bt,null,[e.multiple&&!e.hideSelected?V(Bs,{key:fe.value,modelValue:dt,ripple:!1,tabindex:"-1"},null):void 0,xe.prependAvatar&&V(zr,{image:xe.prependAvatar},null),xe.prependIcon&&V(un,{icon:xe.prependIcon},null)])}})}}),(ft=a["append-item"])==null?void 0:ft.call(a)]}})]}),w.value.map((je,rt)=>{function ft(Se){Se.stopPropagation(),Se.preventDefault(),Ye(je,!1)}const Rt={"onClick:close":ft,onKeydown(Se){Se.key!=="Enter"&&Se.key!==" "||(Se.preventDefault(),Se.stopPropagation(),ft(Se))},onMousedown(Se){Se.preventDefault(),Se.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},fe=Be?!!a.chip:!!a.selection,se=fe?Ep(Be?a.chip({item:je,index:rt,props:Rt}):a.selection({item:je,index:rt})):void 0;if(!(fe&&!se))return q("div",{key:je.value,class:"v-select__selection"},[Be?a.chip?V(pn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:je.title}}},{default:()=>[se]}):V(Vs,nt({key:"chip",closable:e.closableChips,size:"small",text:je.title,disabled:je.props.disabled},Rt),null):se??q("span",{class:"v-select__selection-text"},[je.title,e.multiple&&rt<w.value.length-1&&q("span",{class:"v-select__selection-comma"},[Lt(",")])])])})]),"append-inner":function(){var Rt,fe;for(var je=arguments.length,rt=new Array(je),ft=0;ft<je;ft++)rt[ft]=arguments[ft];return q(Bt,null,[(Rt=a["append-inner"])==null?void 0:Rt.call(a,...rt),e.menuIcon?V(un,{class:"v-select__menu-icon",color:(fe=c.value)==null?void 0:fe.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),sa({isFocused:L,menu:J,select:Ye},c)}}),IR=Re({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...wo(),...Hp()},"VSwitch"),cb=it()({name:"VSwitch",inheritAttrs:!1,props:IR(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,i){let{attrs:a,slots:o}=i;const c=Zt(e,"indeterminate"),f=Zt(e,"modelValue"),{loaderClasses:h}=_f(e),{isFocused:l,focus:b,blur:S}=xo(e),w=Qe(),k=Qe(),I=w_&&window.matchMedia("(forced-colors: active)").matches,E=we(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),L=Ia(),F=we(()=>e.id||`switch-${L}`);function z(){c.value&&(c.value=!1)}function B(R){var Z,Y;R.stopPropagation(),R.preventDefault(),(Y=(Z=w.value)==null?void 0:Z.input)==null||Y.click()}return ct(()=>{const[R,Z]=xl(a),Y=Ca.filterProps(e),J=_l.filterProps(e);return V(Ca,nt({ref:k,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":c.value},h.value,e.class]},R,Y,{modelValue:f.value,"onUpdate:modelValue":ae=>f.value=ae,id:F.value,focused:l.value,style:e.style}),{...o,default:ae=>{let{id:he,messagesId:te,isDisabled:re,isReadonly:ie,isValid:ue}=ae;const Q={model:f,isValid:ue};return V(_l,nt({ref:w},J,{modelValue:f.value,"onUpdate:modelValue":[pe=>f.value=pe,z],id:he.value,"aria-describedby":te.value,type:"checkbox","aria-checked":c.value?"mixed":void 0,disabled:re.value,readonly:ie.value,onFocus:b,onBlur:S},Z),{...o,default:pe=>{let{backgroundColorClasses:Ce,backgroundColorStyles:$e}=pe;return q("div",{class:st(["v-switch__track",I?void 0:Ce.value]),style:St($e.value),onClick:B},[o["track-true"]&&q("div",{key:"prepend",class:"v-switch__track-true"},[o["track-true"](Q)]),o["track-false"]&&q("div",{key:"append",class:"v-switch__track-false"},[o["track-false"](Q)])])},input:pe=>{let{inputNode:Ce,icon:$e,backgroundColorClasses:Xe,backgroundColorStyles:Ye}=pe;return q(Bt,null,[Ce,q("div",{class:st(["v-switch__thumb",{"v-switch__thumb--filled":$e||e.loading},e.inset||I?void 0:Xe.value]),style:St(e.inset?void 0:Ye.value)},[o.thumb?V(pn,{defaults:{VIcon:{icon:$e,size:"x-small"}}},{default:()=>[o.thumb({...Q,icon:$e})]}):V(N_,null,{default:()=>[e.loading?V(bf,{name:"v-switch",active:!0,color:ue.value===!1?void 0:E.value},{default:qe=>o.loader?o.loader(qe):V(pu,{active:qe.isActive,color:qe.color,indeterminate:!0,size:"16",width:"2"},null)}):$e&&V(un,{key:String($e),icon:$e,size:"x-small"},null)]})])])}})}})}),sa({},k)}}),PR=hs({__name:"EstimatorForm",props:{origin:{},dest:{}},setup(e){const i=e,a=Up(),o=l2(),c=Ui({origin_zone:"",dest_zone:"",length_in:12,width_in:10,height_in:8,weight_lb:5,service:"standard",declared_value:100,residential:!1}),f=K(()=>{var S;const b=new Map;return(S=a.zones)==null||S.features.forEach(w=>{b.has(w.properties.zone_id)||b.set(w.properties.zone_id,{title:w.properties.name,value:w.properties.zone_id})}),Array.from(b.values())}),h=[{title:"Standard",value:"standard"},{title:"Expedited",value:"expedited"}];xt(()=>i.origin,b=>{b&&(c.origin_zone=b)}),xt(()=>i.dest,b=>{b&&(c.dest_zone=b)}),xt(c,()=>{c.origin_zone&&c.dest_zone&&l()},{deep:!0});function l(){!c.origin_zone||!c.dest_zone||o.setCurrentQuote({...c})}return(b,S)=>(Yi(),Wr(u2,{onSubmit:Sh(l,["prevent"])},{default:Ge(()=>[V(fo,null,{default:Ge(()=>[V(na,{cols:"12",md:"6"},{default:Ge(()=>[V(jc,{modelValue:c.origin_zone,"onUpdate:modelValue":S[0]||(S[0]=w=>c.origin_zone=w),items:f.value,label:"Origin Zone",density:"compact"},null,8,["modelValue","items"])]),_:1}),V(na,{cols:"12",md:"6"},{default:Ge(()=>[V(jc,{modelValue:c.dest_zone,"onUpdate:modelValue":S[1]||(S[1]=w=>c.dest_zone=w),items:f.value,label:"Destination Zone",density:"compact"},null,8,["modelValue","items"])]),_:1})]),_:1}),V(fo,null,{default:Ge(()=>[V(na,{cols:"4"},{default:Ge(()=>[V(xi,{modelValue:c.length_in,"onUpdate:modelValue":S[2]||(S[2]=w=>c.length_in=w),modelModifiers:{number:!0},label:"Length (in)",type:"number",density:"compact"},null,8,["modelValue"])]),_:1}),V(na,{cols:"4"},{default:Ge(()=>[V(xi,{modelValue:c.width_in,"onUpdate:modelValue":S[3]||(S[3]=w=>c.width_in=w),modelModifiers:{number:!0},label:"Width (in)",type:"number",density:"compact"},null,8,["modelValue"])]),_:1}),V(na,{cols:"4"},{default:Ge(()=>[V(xi,{modelValue:c.height_in,"onUpdate:modelValue":S[4]||(S[4]=w=>c.height_in=w),modelModifiers:{number:!0},label:"Height (in)",type:"number",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),V(fo,null,{default:Ge(()=>[V(na,{cols:"12",md:"6"},{default:Ge(()=>[V(xi,{modelValue:c.weight_lb,"onUpdate:modelValue":S[5]||(S[5]=w=>c.weight_lb=w),modelModifiers:{number:!0},label:"Weight (lb)",type:"number",density:"compact"},null,8,["modelValue"])]),_:1}),V(na,{cols:"12",md:"6"},{default:Ge(()=>[V(xi,{modelValue:c.declared_value,"onUpdate:modelValue":S[6]||(S[6]=w=>c.declared_value=w),modelModifiers:{number:!0},label:"Declared Value ($)",type:"number",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),V(fo,null,{default:Ge(()=>[V(na,{cols:"12",md:"6"},{default:Ge(()=>[V(jc,{modelValue:c.service,"onUpdate:modelValue":S[7]||(S[7]=w=>c.service=w),items:h,label:"Service Level",density:"compact"},null,8,["modelValue"])]),_:1}),V(na,{cols:"12",md:"6"},{default:Ge(()=>[V(cb,{modelValue:c.residential,"onUpdate:modelValue":S[8]||(S[8]=w=>c.residential=w),label:"Residential Delivery",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}))}}),I2=_o("v-alert-title"),TR=Re({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function AR(e,i){return{iconSize:K(()=>{const o=new Map(e.iconSizes),c=e.iconSize??i()??"default";return o.has(c)?o.get(c):c})}}const ER=["success","info","warning","error"],MR=Re({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:Gt,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>ER.includes(e)},...Ft(),...Ji(),...Oi(),...Gi(),...TR(),...bo(),...nd(),...gi(),...mn(),...Dn(),...Qr({variant:"flat"})},"VAlert"),db=it()({name:"VAlert",props:MR(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,i){let{emit:a,slots:o}=i;const c=Zt(e,"modelValue"),f=we(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:h}=AR(e,()=>e.prominent?44:void 0),{themeClasses:l}=$n(e),{colorClasses:b,colorStyles:S,variantClasses:w}=Iu(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:k}=Ga(e),{dimensionStyles:I}=$i(e),{elevationClasses:E}=ra(e),{locationStyles:L}=Pu(e),{positionClasses:F}=id(e),{roundedClasses:z}=Ci(e),{textColorClasses:B,textColorStyles:R}=ga(()=>e.borderColor),{t:Z}=Zn(),Y=we(()=>({"aria-label":Z(e.closeLabel),onClick(J){c.value=!1,a("click:close",J)}}));return()=>{const J=!!(o.prepend||f.value),ae=!!(o.title||e.title),he=!!(o.close||e.closable),te={density:e.density,icon:f.value,size:e.iconSize||e.prominent?h.value:void 0};return c.value&&V(e.tag,{class:st(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},l.value,b.value,k.value,E.value,F.value,z.value,w.value,e.class]),style:St([S.value,I.value,L.value,e.style]),role:"alert"},{default:()=>{var re,ie;return[wl(!1,"v-alert"),e.border&&q("div",{key:"border",class:st(["v-alert__border",B.value]),style:St(R.value)},null),J&&q("div",{key:"prepend",class:"v-alert__prepend"},[o.prepend?V(pn,{key:"prepend-defaults",disabled:!f.value,defaults:{VIcon:{...te}}},o.prepend):V(un,nt({key:"prepend-icon"},te),null)]),q("div",{class:"v-alert__content"},[ae&&V(I2,{key:"title"},{default:()=>{var ue;return[((ue=o.title)==null?void 0:ue.call(o))??e.title]}}),((re=o.text)==null?void 0:re.call(o))??e.text,(ie=o.default)==null?void 0:ie.call(o)]),o.append&&q("div",{key:"append",class:"v-alert__append"},[o.append()]),he&&q("div",{key:"close",class:"v-alert__close"},[o.close?V(pn,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var ue;return[(ue=o.close)==null?void 0:ue.call(o,{props:Y.value})]}}):V(gn,nt({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},Y.value),null)])]}})}}}),DR=Re({id:String,interactive:Boolean,text:String,...Wn(If({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),hb=it()({name:"VTooltip",props:DR(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const o=Zt(e,"modelValue"),{scopeId:c}=Mu(),f=Ia(),h=we(()=>e.id||`v-tooltip-${f}`),l=Qe(),b=K(()=>e.location.split(" ").length>1?e.location:e.location+" center"),S=K(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),w=we(()=>e.transition!=null?e.transition:o.value?"scale-transition":"fade-transition"),k=K(()=>nt({"aria-describedby":h.value},e.activatorProps));return ct(()=>{const I=Rs.filterProps(e);return V(Rs,nt({ref:l,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:h.value},I,{modelValue:o.value,"onUpdate:modelValue":E=>o.value=E,transition:w.value,absolute:!0,location:b.value,origin:S.value,persistent:!0,role:"tooltip",activatorProps:k.value,_disableGlobalStack:!0},c),{activator:a.activator,default:function(){var z;for(var E=arguments.length,L=new Array(E),F=0;F<E;F++)L[F]=arguments[F];return((z=a.default)==null?void 0:z.call(a,...L))??e.text}})}),sa({},l)}}),VR=hs({__name:"PriceBreakdown",props:{result:{}},setup(e){return(i,a)=>e.result?(Yi(),Wr(ss,{key:0,class:"mt-4"},{default:Ge(()=>[V(gl,{class:"d-flex align-center"},{default:Ge(()=>[a[0]||(a[0]=q("span",null,"Price Quote",-1)),V(rf),V(Vs,{color:"success",size:"large"},{default:Ge(()=>[Lt(" $"+Nn(e.result.total.toFixed(2))+" ",1),V(hb,{activator:"parent",location:"top"},{default:Ge(()=>[Lt(" ±$"+Nn(e.result.band.toFixed(2))+" confidence band ",1)]),_:1})]),_:1})]),_:1}),V(Ms,null,{default:Ge(()=>[V(G_,null,{default:Ge(()=>[V(ul,null,{default:Ge(()=>[V(Es,null,{default:Ge(()=>[V(un,{start:""},{default:Ge(()=>[...a[1]||(a[1]=[Lt("mdi-information",-1)])]),_:1}),a[2]||(a[2]=Lt(" Breakdown Details ",-1))]),_:1}),V(As,null,{default:Ge(()=>[V(vo,{density:"compact"},{default:Ge(()=>[V(ri,null,{prepend:Ge(()=>[V(un,null,{default:Ge(()=>[...a[3]||(a[3]=[Lt("mdi-weight",-1)])]),_:1})]),default:Ge(()=>[V(Ra,null,{default:Ge(()=>[...a[4]||(a[4]=[Lt("DIM Weight",-1)])]),_:1}),V(Ba,null,{default:Ge(()=>[Lt(Nn(e.result.breakdown.dim_weight.toFixed(2))+" lb",1)]),_:1})]),_:1}),V(ri,null,{prepend:Ge(()=>[V(un,null,{default:Ge(()=>[...a[5]||(a[5]=[Lt("mdi-scale-balance",-1)])]),_:1})]),default:Ge(()=>[V(Ra,null,{default:Ge(()=>[...a[6]||(a[6]=[Lt("Billable Weight",-1)])]),_:1}),V(Ba,null,{default:Ge(()=>[Lt(Nn(e.result.breakdown.billable_weight.toFixed(2))+" lb",1)]),_:1})]),_:1}),V(ri,null,{prepend:Ge(()=>[V(un,null,{default:Ge(()=>[...a[7]||(a[7]=[Lt("mdi-map-marker-distance",-1)])]),_:1})]),default:Ge(()=>[V(Ra,null,{default:Ge(()=>[...a[8]||(a[8]=[Lt("Distance",-1)])]),_:1}),V(Ba,null,{default:Ge(()=>[Lt(Nn(e.result.breakdown.miles)+" miles",1)]),_:1})]),_:1}),V(ri,null,{prepend:Ge(()=>[V(un,null,{default:Ge(()=>[...a[9]||(a[9]=[Lt("mdi-map",-1)])]),_:1})]),default:Ge(()=>[V(Ra,null,{default:Ge(()=>[...a[10]||(a[10]=[Lt("Zone Factor",-1)])]),_:1}),V(Ba,null,{default:Ge(()=>[Lt(Nn(e.result.breakdown.zone_factor.toFixed(3)),1)]),_:1})]),_:1}),V(ri,null,{prepend:Ge(()=>[V(un,null,{default:Ge(()=>[...a[11]||(a[11]=[Lt("mdi-truck-fast",-1)])]),_:1})]),default:Ge(()=>[V(Ra,null,{default:Ge(()=>[...a[12]||(a[12]=[Lt("Service Factor",-1)])]),_:1}),V(Ba,null,{default:Ge(()=>[Lt(Nn(e.result.breakdown.service_factor.toFixed(3)),1)]),_:1})]),_:1}),V(Ha,{class:"my-2"}),V(ri,null,{default:Ge(()=>[V(Ra,null,{default:Ge(()=>[...a[13]||(a[13]=[Lt("Variable Cost",-1)])]),_:1}),V(Ba,null,{default:Ge(()=>[Lt("$"+Nn(e.result.breakdown.variable_cost.toFixed(2)),1)]),_:1})]),_:1}),V(ri,null,{default:Ge(()=>[V(Ra,null,{default:Ge(()=>[...a[14]||(a[14]=[Lt("Subtotal",-1)])]),_:1}),V(Ba,null,{default:Ge(()=>[Lt("$"+Nn(e.result.breakdown.subtotal.toFixed(2)),1)]),_:1})]),_:1}),V(ri,null,{default:Ge(()=>[V(Ra,null,{default:Ge(()=>[...a[15]||(a[15]=[Lt("Fuel Surcharge",-1)])]),_:1}),V(Ba,null,{default:Ge(()=>[Lt("$"+Nn(e.result.breakdown.fuel_surcharge.toFixed(2)),1)]),_:1})]),_:1}),e.result.breakdown.peak_surcharge>0?(Yi(),Wr(ri,{key:0},{default:Ge(()=>[V(Ra,null,{default:Ge(()=>[...a[16]||(a[16]=[Lt("Peak Surcharge",-1)])]),_:1}),V(Ba,null,{default:Ge(()=>[Lt("$"+Nn(e.result.breakdown.peak_surcharge.toFixed(2)),1)]),_:1})]),_:1})):Nc("",!0),e.result.breakdown.fixed_fees>0?(Yi(),Wr(ri,{key:1},{default:Ge(()=>[V(Ra,null,{default:Ge(()=>[...a[17]||(a[17]=[Lt("Fixed Fees",-1)])]),_:1}),V(Ba,null,{default:Ge(()=>[Lt("$"+Nn(e.result.breakdown.fixed_fees.toFixed(2)),1)]),_:1})]),_:1})):Nc("",!0),e.result.breakdown.insurance>0?(Yi(),Wr(ri,{key:2},{default:Ge(()=>[V(Ra,null,{default:Ge(()=>[...a[18]||(a[18]=[Lt("Insurance",-1)])]),_:1}),V(Ba,null,{default:Ge(()=>[Lt("$"+Nn(e.result.breakdown.insurance.toFixed(2)),1)]),_:1})]),_:1})):Nc("",!0),V(Ha,{class:"my-2"}),V(ri,null,{default:Ge(()=>[V(Ra,{class:"text-h6"},{default:Ge(()=>[...a[19]||(a[19]=[Lt("Total",-1)])]),_:1}),V(Ba,{class:"text-h6 text-success"},{default:Ge(()=>[Lt("$"+Nn(e.result.breakdown.total.toFixed(2)),1)]),_:1})]),_:1}),V(ri,null,{default:Ge(()=>[V(Ra,null,{default:Ge(()=>[...a[20]||(a[20]=[Lt("Confidence Band (±)",-1)])]),_:1}),V(Ba,null,{default:Ge(()=>[Lt("$"+Nn(e.result.breakdown.confidence_band.toFixed(2)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),V(db,{type:"info",variant:"tonal",class:"mt-4"},{default:Ge(()=>[a[21]||(a[21]=q("strong",null,"Price Range:",-1)),Lt(" $"+Nn((e.result.total-e.result.band).toFixed(2))+" - $"+Nn((e.result.total+e.result.band).toFixed(2)),1)]),_:1})]),_:1})]),_:1})):(Yi(),Wr(ss,{key:1,class:"mt-4"},{default:Ge(()=>[V(Ms,{class:"text-center text-medium-emphasis"},{default:Ge(()=>[V(un,{size:"64",class:"mb-4"},{default:Ge(()=>[...a[22]||(a[22]=[Lt("mdi-calculator",-1)])]),_:1}),a[23]||(a[23]=q("div",null,"Select origin and destination zones to get a quote",-1))]),_:1})]),_:1}))}}),zR={class:"estimator-layout"},LR={class:"map-section"},BR={class:"map-header"},RR={key:0},FR={key:1},OR=hs({__name:"EstimatorView",setup(e){const i=Up(),a=Lp(),o=l2(),c=Qe(),f=Qe(),h=Qe(!0),l=Qe(),b=Qe({x:0,y:0}),S=Qe(!1),w=Qe({x:0,y:0});Fi(()=>{const B=window.innerWidth,R=window.innerHeight,Z=280,Y=420,J=24;b.value={x:B-Z-Y-J,y:Math.max(100,R-550)}}),Fi(async()=>{await a.loadPresets()});function k(B){S.value=!0,w.value={x:B.clientX-b.value.x,y:B.clientY-b.value.y},document.addEventListener("mousemove",I),document.addEventListener("mouseup",E)}function I(B){S.value&&(b.value={x:B.clientX-w.value.x,y:B.clientY-w.value.y})}function E(){S.value=!1,document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",E)}Ip(()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",E)});function L(B){c.value?f.value?(c.value=B,f.value=void 0):f.value=B:c.value=B}function F(){c.value=void 0,f.value=void 0}function z(B){var R;return((R=i.getZone(B))==null?void 0:R.name)??B}return(B,R)=>(Yi(),hl("div",zR,[q("div",LR,[q("div",BR,[V(cb,{modelValue:h.value,"onUpdate:modelValue":R[0]||(R[0]=Z=>h.value=Z),label:"Heatmap",color:"primary","hide-details":"",density:"compact",class:"ml-4"},null,8,["modelValue"])]),V(NB,{"show-heatmap":h.value,onZonePicked:L},null,8,["show-heatmap"]),c.value||f.value?(Yi(),Wr(db,{key:0,type:"info",class:"zone-alert",closable:""},{default:Ge(()=>[c.value&&!f.value?(Yi(),hl("div",RR,[R[1]||(R[1]=Lt(" Origin: ",-1)),V(Vs,{size:"small",color:"primary"},{default:Ge(()=>[Lt(Nn(z(c.value)),1)]),_:1}),R[2]||(R[2]=q("span",{class:"ml-2"},"Click another zone for destination",-1))])):c.value&&f.value?(Yi(),hl("div",FR,[R[4]||(R[4]=Lt(" Origin: ",-1)),V(Vs,{size:"small",color:"primary"},{default:Ge(()=>[Lt(Nn(z(c.value)),1)]),_:1}),R[5]||(R[5]=Lt(" → Dest: ",-1)),V(Vs,{size:"small",color:"success"},{default:Ge(()=>[Lt(Nn(z(f.value)),1)]),_:1}),V(gn,{size:"small",variant:"text",onClick:F,class:"ml-2"},{default:Ge(()=>[...R[3]||(R[3]=[Lt("Reset",-1)])]),_:1})])):Nc("",!0)]),_:1})):Nc("",!0),V(gn,{to:"/scanner",color:"primary",size:"large",class:"scanner-fab",icon:"",elevation:"8"},{default:Ge(()=>[V(un,null,{default:Ge(()=>[...R[6]||(R[6]=[Lt("mdi-barcode-scan",-1)])]),_:1})]),_:1})]),V(ss,{ref_key:"formPanel",ref:l,class:"form-panel",elevation:"8",style:St({left:b.value.x+"px",top:b.value.y+"px"})},{default:Ge(()=>[V(gl,{class:"text-h6 bg-primary drag-handle",onMousedown:k,style:{cursor:"move","user-select":"none"}},{default:Ge(()=>[V(un,{start:"",size:"small"},{default:Ge(()=>[...R[7]||(R[7]=[Lt("mdi-drag",-1)])]),_:1}),R[8]||(R[8]=Lt(" Shipment Details ",-1))]),_:1}),V(Ms,{class:"pa-3"},{default:Ge(()=>[V(PR,{origin:c.value,dest:f.value},null,8,["origin","dest"]),V(VR,{result:en(o).currentQuote},null,8,["result"])]),_:1})]),_:1},8,["style"])]))}}),$R=Np(OR,[["__scopeId","data-v-89a721d8"]]),NR=fz({history:jV("/shipping-calculator/"),routes:[{path:"/",name:"home",component:LB},{path:"/shipping",name:"estimator",component:$R},{path:"/shipping/zones",name:"zones",component:()=>Dc(()=>import("./ZonesView-C25xKjpf.js"),__vite__mapDeps([0,1]))},{path:"/shipping/batch",name:"batch",component:()=>Dc(()=>import("./BatchView-DjKvrQeR.js"),[])},{path:"/shipping/settings",name:"settings",component:()=>Dc(()=>import("./SettingsView-DocGAv4e.js"),[])},{path:"/scanner",name:"scanner",component:()=>Dc(()=>import("./BarcodeScannerView-Dz6ePMHy.js"),__vite__mapDeps([2,3]))},{path:"/amazon-seller",name:"amazon-seller",component:()=>Dc(()=>import("./AmazonSellerView-lZB18EpG.js"),[])},{path:"/amazon-flow-demo",name:"amazon-flow-demo",component:()=>Dc(()=>import("./AmazonFlowDemoView-BMTyJczT.js").then(e=>e.bC),__vite__mapDeps([4,5]))}]}),jR=(e,i,a)=>{if(e==null||i==null)return-1;if(!i.length)return 0;e=e.toString().toLocaleLowerCase(),i=i.toString().toLocaleLowerCase();const o=[];let c=e.indexOf(i);for(;~c;)o.push([c,c+i.length]),c=e.indexOf(i,c+i.length);return o.length?o:-1};function Zv(e,i){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+i.length]]:Array.isArray(e[0])?e:[e]}const od=Re({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function UR(e,i,a){var b;const o=[],c=(a==null?void 0:a.default)??jR,f=a!=null&&a.filterKeys?Si(a.filterKeys):!1,h=Object.keys((a==null?void 0:a.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return o;let l=null;e:for(let S=0;S<e.length;S++){const[w,k=w]=Si(e[S]),I={},E={};let L=-1;if((i||h>0)&&!(a!=null&&a.noFilter)){let F=!1;if(typeof w=="object"){if(w.type==="divider"||w.type==="subheader"){(l==null?void 0:l.type)==="divider"&&w.type==="subheader"&&o.push(l),l={index:S,matches:{},type:w.type};continue}const R=f||Object.keys(k);F=R.length===h;for(const Z of R){const Y=Ri(k,Z),J=(b=a==null?void 0:a.customKeyFilter)==null?void 0:b[Z];if(L=J?J(Y,i,w):c(Y,i,w),L!==-1&&L!==!1)J?I[Z]=Zv(L,i):E[Z]=Zv(L,i);else if((a==null?void 0:a.filterMode)==="every")continue e}}else L=c(w,i,w),L!==-1&&L!==!1&&(E.title=Zv(L,i));const z=Object.keys(E).length,B=Object.keys(I).length;if(!z&&!B||(a==null?void 0:a.filterMode)==="union"&&B!==h&&!z||(a==null?void 0:a.filterMode)==="intersection"&&(B!==h||!z&&h>0&&!F))continue}l&&(o.push(l),l=null),o.push({index:S,matches:{...E,...I}})}return o}function ld(e,i,a,o){const c=bt([]),f=bt(new Map),h=K(()=>o!=null&&o.transform?en(i).map(b=>[b,o.transform(b)]):en(i));pi(()=>{const b=typeof a=="function"?a():en(a),S=typeof b!="string"&&typeof b!="number"?"":String(b),w=UR(h.value,S,{customKeyFilter:{...e.customKeyFilter,...en(o==null?void 0:o.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),k=en(i),I=[],E=new Map;w.forEach(L=>{let{index:F,matches:z}=L;const B=k[F];I.push(B),E.set(B.value,z)}),c.value=I,f.value=E});function l(b){return f.value.get(b.value)}return{filteredItems:c,filteredMatches:f,getMatches:l}}function P2(e,i,a){return a==null||!a.length?i:a.map((o,c)=>{const f=c===0?0:a[c-1][1],h=[q("span",{class:st(`${e}__unmask`)},[i.slice(f,o[0])]),q("span",{class:st(`${e}__mask`)},[i.slice(o[0],o[1])])];return c===a.length-1&&h.push(q("span",{class:st(`${e}__unmask`)},[i.slice(o[1])])),q(Bt,null,[h])})}const HR=Re({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...od({filterKeys:["title"]}),...ub(),...Wn(Cf({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ps({transition:!1})},"VAutocomplete"),qR=it()({name:"VAutocomplete",props:HR(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,i){let{slots:a}=i;const{t:o}=Zn(),c=Qe(),f=bt(!1),h=bt(!0),l=bt(!1),b=Qe(),S=Qe(),w=bt(-1),{items:k,transformIn:I,transformOut:E}=Y_(e),{textColorClasses:L,textColorStyles:F}=ga(()=>{var se;return(se=c.value)==null?void 0:se.color}),z=Zt(e,"search",""),B=Zt(e,"modelValue",[],se=>I(se===null?[null]:Si(se)),se=>{const Se=E(se);return e.multiple?Se:Se[0]??null}),R=K(()=>typeof e.counterValue=="function"?e.counterValue(B.value):typeof e.counterValue=="number"?e.counterValue:B.value.length),Z=ad(e),{filteredItems:Y,getMatches:J}=ld(e,k,()=>h.value?"":z.value),ae=K(()=>e.hideSelected?Y.value.filter(se=>!B.value.some(Se=>Se.value===se.value)):Y.value),he=K(()=>!!(e.chips||a.chip)),te=K(()=>he.value||!!a.selection),re=K(()=>B.value.map(se=>se.props.value)),ie=K(()=>{var Se;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&z.value===((Se=ae.value[0])==null?void 0:Se.title))&&ae.value.length>0&&!h.value&&!l.value}),ue=K(()=>e.hideNoData&&!ae.value.length||Z.isReadonly.value||Z.isDisabled.value),Q=Zt(e,"menu"),pe=K({get:()=>Q.value,set:se=>{var Se;Q.value&&!se&&((Se=b.value)!=null&&Se.ΨopenChildren.size)||se&&ue.value||(Q.value=se)}}),{menuId:Ce,ariaExpanded:$e,ariaControls:Xe,ariaLabel:Ye}=lb(e,pe),qe=Qe(),Te=ob(qe,c);function Me(se){e.openOnClear&&(pe.value=!0),z.value=""}function Ve(){ue.value||(pe.value=!0)}function Fe(se){ue.value||(f.value&&(se.preventDefault(),se.stopPropagation()),pe.value=!pe.value)}function Be(se){var Se;(Gc(se)||se.key==="Backspace")&&((Se=c.value)==null||Se.focus())}function lt(se){var le,Ke,ht,et,tt;if(Z.isReadonly.value)return;const Se=(le=c.value)==null?void 0:le.selectionStart,xe=B.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(se.key)&&se.preventDefault(),["Enter","ArrowDown"].includes(se.key)&&(pe.value=!0),["Escape"].includes(se.key)&&(pe.value=!1),ie.value&&["Enter","Tab"].includes(se.key)&&!B.value.some(dt=>{let{value:yt}=dt;return yt===ae.value[0].value})&&fe(ae.value[0]),se.key==="ArrowDown"&&ie.value&&((Ke=qe.value)==null||Ke.focus("next")),["Backspace","Delete"].includes(se.key)){if(!e.multiple&&te.value&&B.value.length>0&&!z.value)return fe(B.value[0],!1);if(~w.value){se.preventDefault();const dt=w.value;fe(B.value[w.value],!1),w.value=dt>=xe-1?xe-2:dt}else se.key==="Backspace"&&!z.value&&(w.value=xe-1);return}if(e.multiple)if(se.key==="ArrowLeft"){if(w.value<0&&Se&&Se>0)return;const dt=w.value>-1?w.value-1:xe-1;if(B.value[dt])w.value=dt;else{const yt=((ht=z.value)==null?void 0:ht.length)??null;w.value=-1,(et=c.value)==null||et.setSelectionRange(yt,yt)}}else if(se.key==="ArrowRight"){if(w.value<0)return;const dt=w.value+1;B.value[dt]?w.value=dt:(w.value=-1,(tt=c.value)==null||tt.setSelectionRange(0,0))}else~w.value&&Gc(se)&&(w.value=-1)}function vt(se){if(qc(c.value,":autofill")||qc(c.value,":-webkit-autofill")){const Se=k.value.find(xe=>xe.title===se.target.value);Se&&fe(Se)}}function kt(){var se;e.eager&&((se=S.value)==null||se.calculateVisibleItems())}function ge(){var se;f.value&&(h.value=!0,(se=c.value)==null||se.focus())}function je(se){f.value=!0,setTimeout(()=>{l.value=!0})}function rt(se){l.value=!1}function ft(se){(se==null||se===""&&!e.multiple&&!te.value)&&(B.value=[])}const Rt=bt(!1);function fe(se){let Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!se||se.props.disabled))if(e.multiple){const xe=B.value.findIndex(Ke=>(e.valueComparator||ia)(Ke.value,se.value)),le=Se??!~xe;if(~xe){const Ke=le?[...B.value,se]:[...B.value];Ke.splice(xe,1),B.value=Ke}else le&&(B.value=[...B.value,se]);e.clearOnSelect&&(z.value="")}else{const xe=Se!==!1;B.value=xe?[se]:[],z.value=xe&&!te.value?se.title:"",kn(()=>{pe.value=!1,h.value=!0})}}return xt(f,(se,Se)=>{var xe;se!==Se&&(se?(Rt.value=!0,z.value=e.multiple||te.value?"":String(((xe=B.value.at(-1))==null?void 0:xe.props.title)??""),h.value=!0,kn(()=>Rt.value=!1)):(!e.multiple&&z.value==null&&(B.value=[]),pe.value=!1,z.value="",w.value=-1))}),xt(z,se=>{!f.value||Rt.value||(se&&(pe.value=!0),h.value=!se)}),xt(pe,()=>{if(!e.hideSelected&&pe.value&&B.value.length){const se=ae.value.findIndex(Se=>B.value.some(xe=>Se.value===xe.value));jn&&window.requestAnimationFrame(()=>{var Se;se>=0&&((Se=S.value)==null||Se.scrollToIndex(se))})}}),xt(k,(se,Se)=>{pe.value||f.value&&!Se.length&&se.length&&(pe.value=!0)}),ct(()=>{const se=!!(!e.hideNoData||ae.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),Se=B.value.length>0,xe=xi.filterProps(e);return V(xi,nt({ref:c},xe,{modelValue:z.value,"onUpdate:modelValue":[le=>z.value=le,ft],focused:f.value,"onUpdate:focused":le=>f.value=le,validationValue:B.externalValue,counterValue:R.value,dirty:Se,onChange:vt,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":pe.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!te.value,"v-autocomplete--selecting-index":w.value>-1},e.class],style:e.style,readonly:Z.isReadonly.value,placeholder:Se?void 0:e.placeholder,"onClick:clear":Me,"onMousedown:control":Ve,onKeydown:lt,"aria-expanded":$e.value,"aria-controls":Xe.value}),{...a,default:()=>q(Bt,null,[V(Yc,nt({id:Ce.value,ref:b,modelValue:pe.value,"onUpdate:modelValue":le=>pe.value=le,activator:"parent",contentClass:"v-autocomplete__content",disabled:ue.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:kt,onAfterLeave:ge},e.menuProps),{default:()=>[se&&V(vo,nt({ref:qe,filterable:!0,selected:re.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:le=>le.preventDefault(),onKeydown:Be,onFocusin:je,onFocusout:rt,tabindex:"-1",selectable:!0,"aria-live":"polite",color:e.itemColor??e.color},Te,e.listProps),{default:()=>{var le,Ke,ht;return[(le=a["prepend-item"])==null?void 0:le.call(a),!ae.value.length&&!e.hideNoData&&(((Ke=a["no-data"])==null?void 0:Ke.call(a))??V(ri,{key:"no-data",title:o(e.noDataText)},null)),V(qp,{ref:S,renderless:!0,items:ae.value,itemKey:"value"},{default:et=>{var Ut,nn,bn;let{item:tt,index:dt,itemRef:yt}=et;const It=nt(tt.props,{ref:yt,key:tt.value,active:ie.value&&dt===0?!0:void 0,onClick:()=>fe(tt,null)});return tt.type==="divider"?((Ut=a.divider)==null?void 0:Ut.call(a,{props:tt.raw,index:dt}))??V(Ha,nt(tt.props,{key:`divider-${dt}`}),null):tt.type==="subheader"?((nn=a.subheader)==null?void 0:nn.call(a,{props:tt.raw,index:dt}))??V(sd,nt(tt.props,{key:`subheader-${dt}`}),null):((bn=a.item)==null?void 0:bn.call(a,{item:tt,index:dt,props:It}))??V(ri,nt(It,{role:"option"}),{prepend:Pn=>{let{isSelected:mt}=Pn;return q(Bt,null,[e.multiple&&!e.hideSelected?V(Bs,{key:tt.value,modelValue:mt,ripple:!1,tabindex:"-1"},null):void 0,tt.props.prependAvatar&&V(zr,{image:tt.props.prependAvatar},null),tt.props.prependIcon&&V(un,{icon:tt.props.prependIcon},null)])},title:()=>{var Pn;return h.value?tt.title:P2("v-autocomplete",tt.title,(Pn=J(tt))==null?void 0:Pn.title)}})}}),(ht=a["append-item"])==null?void 0:ht.call(a)]}})]}),B.value.map((le,Ke)=>{function ht(yt){yt.stopPropagation(),yt.preventDefault(),fe(le,!1)}const et={"onClick:close":ht,onKeydown(yt){yt.key!=="Enter"&&yt.key!==" "||(yt.preventDefault(),yt.stopPropagation(),ht(yt))},onMousedown(yt){yt.preventDefault(),yt.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},tt=he.value?!!a.chip:!!a.selection,dt=tt?Ep(he.value?a.chip({item:le,index:Ke,props:et}):a.selection({item:le,index:Ke})):void 0;if(!(tt&&!dt))return q("div",{key:le.value,class:st(["v-autocomplete__selection",Ke===w.value&&["v-autocomplete__selection--selected",L.value]]),style:St(Ke===w.value?F.value:{})},[he.value?a.chip?V(pn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:le.title}}},{default:()=>[dt]}):V(Vs,nt({key:"chip",closable:e.closableChips,size:"small",text:le.title,disabled:le.props.disabled},et),null):dt??q("span",{class:"v-autocomplete__selection-text"},[le.title,e.multiple&&Ke<B.value.length-1&&q("span",{class:"v-autocomplete__selection-comma"},[Lt(",")])])])})]),"append-inner":function(){var et,tt;for(var le=arguments.length,Ke=new Array(le),ht=0;ht<le;ht++)Ke[ht]=arguments[ht];return q(Bt,null,[(et=a["append-inner"])==null?void 0:et.call(a,...Ke),e.menuIcon?V(un,{class:"v-autocomplete__menu-icon",color:(tt=c.value)==null?void 0:tt.fieldIconColor,icon:e.menuIcon,onMousedown:Fe,onClick:ck,"aria-label":Ye.value,title:Ye.value,tabindex:"-1"},null):void 0])}})}),sa({isFocused:f,isPristine:h,menu:pe,search:z,filteredItems:Y,select:fe},c)}}),GR=Re({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Gt,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Ft(),...bo({location:"top end"}),...gi(),...mn(),...Dn(),...ps({transition:"scale-rotate-transition"}),...Oi()},"VBadge"),WR=it()({name:"VBadge",inheritAttrs:!1,props:GR(),setup(e,i){const{backgroundColorClasses:a,backgroundColorStyles:o}=Un(()=>e.color),{roundedClasses:c}=Ci(e),{t:f}=Zn(),{textColorClasses:h,textColorStyles:l}=ga(()=>e.textColor),{themeClasses:b}=Vp(),{locationStyles:S}=Pu(e,!0,k=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(k)?Number(e.offsetY??0):["left","right"].includes(k)?Number(e.offsetX??0):0)),{dimensionStyles:w}=$i(e);return ct(()=>{const k=Number(e.content),I=!e.max||isNaN(k)?e.content:k<=Number(e.max)?k:`${e.max}+`,[E,L]=cy(i.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return V(e.tag,nt({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},L,{style:e.style}),{default:()=>{var F,z;return[q("div",{class:"v-badge__wrapper"},[(z=(F=i.slots).default)==null?void 0:z.call(F),V(Ua,{transition:e.transition},{default:()=>{var B,R;return[yi(q("span",nt({class:["v-badge__badge",b.value,a.value,c.value,h.value],style:[o.value,l.value,w.value,e.inline?{}:S.value],"aria-atomic":"true","aria-label":f(e.label,k),"aria-live":"polite",role:"status"},E),[e.dot?void 0:i.slots.badge?(R=(B=i.slots).badge)==null?void 0:R.call(B):e.icon?V(un,{icon:e.icon},null):I]),[[ms,e.modelValue]])]}})])]}})}),{}}}),ZR=Re({color:String,density:String,...Ft()},"VBannerActions"),T2=it()({name:"VBannerActions",props:ZR(),setup(e,i){let{slots:a}=i;return ki({VBtn:{color:e.color,density:e.density,slim:!0,variant:"text"}}),ct(()=>{var o;return q("div",{class:st(["v-banner-actions",e.class]),style:St(e.style)},[(o=a.default)==null?void 0:o.call(a)])}),{}}}),A2=_o("v-banner-text"),KR=Re({avatar:String,bgColor:String,color:String,icon:Gt,lines:String,stacked:Boolean,sticky:Boolean,text:String,...sr(),...Ft(),...Ji(),...Oi(),...Su({mobile:null}),...Gi(),...bo(),...nd(),...gi(),...mn(),...Dn()},"VBanner"),XR=it()({name:"VBanner",props:KR(),setup(e,i){let{slots:a}=i;const{backgroundColorClasses:o,backgroundColorStyles:c}=Un(()=>e.bgColor),{borderClasses:f}=gr(e),{densityClasses:h}=Ga(e),{displayClasses:l,mobile:b}=Jr(e),{dimensionStyles:S}=$i(e),{elevationClasses:w}=ra(e),{locationStyles:k}=Pu(e),{positionClasses:I}=id(e),{roundedClasses:E}=Ci(e),{themeClasses:L}=$n(e),F=we(()=>e.color),z=we(()=>e.density);ki({VBannerActions:{color:F,density:z}}),ct(()=>{const B=!!(e.text||a.text),R=!!(e.avatar||e.icon),Z=!!(R||a.prepend);return V(e.tag,{class:st(["v-banner",{"v-banner--stacked":e.stacked||b.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},L.value,o.value,f.value,h.value,l.value,w.value,I.value,E.value,e.class]),style:St([c.value,S.value,k.value,e.style]),role:"banner"},{default:()=>{var Y;return[Z&&q("div",{key:"prepend",class:"v-banner__prepend"},[a.prepend?V(pn,{key:"prepend-defaults",disabled:!R,defaults:{VAvatar:{color:F.value,density:z.value,icon:e.icon,image:e.avatar}}},a.prepend):V(zr,{key:"prepend-avatar",color:F.value,density:z.value,icon:e.icon,image:e.avatar},null)]),q("div",{class:"v-banner__content"},[B&&V(A2,{key:"text"},{default:()=>{var J;return[((J=a.text)==null?void 0:J.call(a))??e.text]}}),(Y=a.default)==null?void 0:Y.call(a)]),a.actions&&V(T2,{key:"actions"},a.actions)]}})})}}),YR=Re({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...sr(),...Ft(),...Ji(),...Gi(),...gi(),...ku({name:"bottom-navigation"}),...mn({tag:"header"}),...Tu({selectedClass:"v-btn--selected"}),...Dn()},"VBottomNavigation"),JR=it()({name:"VBottomNavigation",props:YR(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const{themeClasses:o}=Vp(),{borderClasses:c}=gr(e),{backgroundColorClasses:f,backgroundColorStyles:h}=Un(()=>e.bgColor),{densityClasses:l}=Ga(e),{elevationClasses:b}=ra(e),{roundedClasses:S}=Ci(e),{ssrBootStyles:w}=Eu(),k=K(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),I=Zt(e,"active",e.active),{layoutItemStyles:E}=Cu({id:e.name,order:K(()=>parseInt(e.order,10)),position:we(()=>"bottom"),layoutSize:we(()=>I.value?k.value:0),elementSize:k,active:I,absolute:we(()=>e.absolute)});return Sl(e,Z_),ki({VBtn:{baseColor:we(()=>e.baseColor),color:we(()=>e.color),density:we(()=>e.density),stacked:we(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),ct(()=>V(e.tag,{class:st(["v-bottom-navigation",{"v-bottom-navigation--active":I.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},o.value,f.value,c.value,l.value,b.value,S.value,e.class]),style:St([h.value,E.value,{height:Tt(k.value)},w.value,e.style])},{default:()=>[a.default&&q("div",{class:"v-bottom-navigation__content"},[a.default()])]})),{}}}),E2=Re({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...If({origin:"center center",scrollStrategy:"block",transition:{component:Fp},zIndex:2400})},"VDialog"),Ry=it()({name:"VDialog",props:E2(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,i){let{emit:a,slots:o}=i;const c=Zt(e,"modelValue"),{scopeId:f}=Mu(),h=Qe();async function l(k){var L,F,z;const I=k.relatedTarget,E=k.target;await kn(),c.value&&I!==E&&((L=h.value)!=null&&L.contentEl)&&((F=h.value)!=null&&F.globalTop)&&![document,h.value.contentEl].includes(E)&&!h.value.contentEl.contains(E)&&((z=Hc(h.value.contentEl)[0])==null||z.focus())}function b(k){var z;if(k.key!=="Tab"||!((z=h.value)!=null&&z.contentEl))return;const I=Hc(h.value.contentEl);if(!I.length)return;const E=I[0],L=I[I.length-1],F=document.activeElement;k.shiftKey&&F===E?(k.preventDefault(),L.focus()):!k.shiftKey&&F===L&&(k.preventDefault(),E.focus())}va(()=>{document.removeEventListener("focusin",l),document.removeEventListener("keydown",b)}),jn&&xt(()=>c.value&&e.retainFocus,k=>{k?(document.addEventListener("focusin",l,{once:!0}),document.addEventListener("keydown",b)):(document.removeEventListener("focusin",l),document.removeEventListener("keydown",b))},{immediate:!0});function S(){var k;a("afterEnter"),(e.scrim||e.retainFocus)&&((k=h.value)!=null&&k.contentEl)&&!h.value.contentEl.contains(document.activeElement)&&h.value.contentEl.focus({preventScroll:!0})}function w(){a("afterLeave")}return xt(c,async k=>{var I;k||(await kn(),(I=h.value.activatorEl)==null||I.focus({preventScroll:!0}))}),ct(()=>{const k=Rs.filterProps(e),I=nt({"aria-haspopup":"dialog"},e.activatorProps),E=nt({tabindex:-1},e.contentProps);return V(Rs,nt({ref:h,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},k,{modelValue:c.value,"onUpdate:modelValue":L=>c.value=L,"aria-modal":"true",activatorProps:I,contentProps:E,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:S,onAfterLeave:w},f),{activator:o.activator,default:function(){for(var L=arguments.length,F=new Array(L),z=0;z<L;z++)F[z]=arguments[z];return V(pn,{root:"VDialog"},{default:()=>{var B;return[(B=o.default)==null?void 0:B.call(o,...F)]}})}})}),sa({},h)}}),QR=Re({inset:Boolean,...E2({transition:"bottom-sheet-transition"})},"VBottomSheet"),eF=it()({name:"VBottomSheet",props:QR(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const o=Zt(e,"modelValue");return ct(()=>{const c=Ry.filterProps(e);return V(Ry,nt(c,{contentClass:["v-bottom-sheet__content",e.contentClass],modelValue:o.value,"onUpdate:modelValue":f=>o.value=f,class:["v-bottom-sheet",{"v-bottom-sheet--inset":e.inset},e.class],style:e.style}),a)}),{}}}),tF=Re({divider:[Number,String],...Ft()},"VBreadcrumbsDivider"),M2=it()({name:"VBreadcrumbsDivider",props:tF(),setup(e,i){let{slots:a}=i;return ct(()=>{var o;return q("li",{"aria-hidden":"true",class:st(["v-breadcrumbs-divider",e.class]),style:St(e.style)},[((o=a==null?void 0:a.default)==null?void 0:o.call(a))??e.divider])}),{}}}),nF=Re({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...Ft(),...wf(),...mn({tag:"li"})},"VBreadcrumbsItem"),D2=it()({name:"VBreadcrumbsItem",props:nF(),setup(e,i){let{slots:a,attrs:o}=i;const c=xf(e,o),f=K(()=>{var b;return e.active||((b=c.isActive)==null?void 0:b.value)}),{textColorClasses:h,textColorStyles:l}=ga(()=>f.value?e.activeColor:e.color);return ct(()=>V(e.tag,{class:st(["v-breadcrumbs-item",{"v-breadcrumbs-item--active":f.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:f.value&&e.activeClass},h.value,e.class]),style:St([l.value,e.style]),"aria-current":f.value?"page":void 0},{default:()=>{var b,S;return[c.isLink.value?q("a",nt({class:"v-breadcrumbs-item--link",onClick:c.navigate},c.linkProps),[((S=a.default)==null?void 0:S.call(a))??e.title]):((b=a.default)==null?void 0:b.call(a))??e.title]}})),{}}}),iF=Re({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:Gt,items:{type:Array,default:()=>[]},...Ft(),...Ji(),...gi(),...mn({tag:"ul"})},"VBreadcrumbs"),aF=it()({name:"VBreadcrumbs",props:iF(),setup(e,i){let{slots:a}=i;const{backgroundColorClasses:o,backgroundColorStyles:c}=Un(()=>e.bgColor),{densityClasses:f}=Ga(e),{roundedClasses:h}=Ci(e);ki({VBreadcrumbsDivider:{divider:we(()=>e.divider)},VBreadcrumbsItem:{activeClass:we(()=>e.activeClass),activeColor:we(()=>e.activeColor),color:we(()=>e.color),disabled:we(()=>e.disabled)}});const l=K(()=>e.items.map(b=>typeof b=="string"?{item:{title:b},raw:b}:{item:b,raw:b}));return ct(()=>{const b=!!(a.prepend||e.icon);return V(e.tag,{class:st(["v-breadcrumbs",o.value,f.value,h.value,e.class]),style:St([c.value,e.style])},{default:()=>{var S;return[b&&q("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[a.prepend?V(pn,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},a.prepend):V(un,{key:"prepend-icon",start:!0,icon:e.icon},null)]),l.value.map((w,k,I)=>{var F;let{item:E,raw:L}=w;return q(Bt,null,[((F=a.item)==null?void 0:F.call(a,{item:E,index:k}))??V(D2,nt({key:k,disabled:k>=I.length-1},typeof E=="string"?{title:E}:E),{default:a.title?()=>{var z;return(z=a.title)==null?void 0:z.call(a,{item:E,index:k})}:void 0}),k<I.length-1&&V(M2,null,{default:a.divider?()=>{var z;return(z=a.divider)==null?void 0:z.call(a,{item:L,index:k})}:void 0})])}),(S=a.default)==null?void 0:S.call(a)]}})}),{}}}),rF=e=>{const{touchstartX:i,touchendX:a,touchstartY:o,touchendY:c}=e,f=.5,h=16;e.offsetX=a-i,e.offsetY=c-o,Math.abs(e.offsetY)<f*Math.abs(e.offsetX)&&(e.left&&a<i-h&&e.left(e),e.right&&a>i+h&&e.right(e)),Math.abs(e.offsetX)<f*Math.abs(e.offsetY)&&(e.up&&c<o-h&&e.up(e),e.down&&c>o+h&&e.down(e))};function sF(e,i){var o;const a=e.changedTouches[0];i.touchstartX=a.clientX,i.touchstartY=a.clientY,(o=i.start)==null||o.call(i,{originalEvent:e,...i})}function oF(e,i){var o;const a=e.changedTouches[0];i.touchendX=a.clientX,i.touchendY=a.clientY,(o=i.end)==null||o.call(i,{originalEvent:e,...i}),rF(i)}function lF(e,i){var o;const a=e.changedTouches[0];i.touchmoveX=a.clientX,i.touchmoveY=a.clientY,(o=i.move)==null||o.call(i,{originalEvent:e,...i})}function uF(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:a=>sF(a,i),touchend:a=>oF(a,i),touchmove:a=>lF(a,i)}}function cF(e,i){var l;const a=i.value,o=a!=null&&a.parent?e.parentElement:e,c=(a==null?void 0:a.options)??{passive:!0},f=(l=i.instance)==null?void 0:l.$.uid;if(!o||f===void 0)return;const h=uF(i.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[f]=h,ik(h).forEach(b=>{o.addEventListener(b,h[b],c)})}function dF(e,i){var f,h;const a=(f=i.value)!=null&&f.parent?e.parentElement:e,o=(h=i.instance)==null?void 0:h.$.uid;if(!(a!=null&&a._touchHandlers)||o===void 0)return;const c=a._touchHandlers[o];ik(c).forEach(l=>{a.removeEventListener(l,c[l])}),delete a._touchHandlers[o]}const pp={mounted:cF,unmounted:dF},V2=Symbol.for("vuetify:v-window"),z2=Symbol.for("vuetify:v-window-group"),Gp=Re({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},crossfade:Boolean,transitionDuration:Number,...Ft(),...mn(),...Dn()},"VWindow"),gu=it()({name:"VWindow",directives:{vTouch:pp},props:Gp(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const{themeClasses:o}=$n(e),{isRtl:c}=qi(),{t:f}=Zn(),h=Sl(e,z2),l=Qe(),b=K(()=>c.value?!e.reverse:e.reverse),S=bt(!1),w=K(()=>{if(e.crossfade)return"v-window-crossfade-transition";const Y=e.direction==="vertical"?"y":"x",ae=(b.value?!S.value:S.value)?"-reverse":"";return`v-window-${Y}${ae}-transition`}),k=bt(0),I=Qe(void 0),E=K(()=>h.items.value.findIndex(Y=>h.selected.value.includes(Y.id)));xt(E,(Y,J)=>{const ae=h.items.value.length,he=ae-1;ae<=2?S.value=Y<J:Y===he&&J===0?S.value=!0:Y===0&&J===he?S.value=!1:S.value=Y<J}),Jn(V2,{transition:w,isReversed:S,transitionCount:k,transitionHeight:I,rootRef:l});const L=we(()=>e.continuous||E.value!==0),F=we(()=>e.continuous||E.value!==h.items.value.length-1);function z(){L.value&&h.prev()}function B(){F.value&&h.next()}const R=K(()=>{const Y=[],J={icon:c.value?e.nextIcon:e.prevIcon,class:`v-window__${b.value?"right":"left"}`,onClick:h.prev,"aria-label":f("$vuetify.carousel.prev")};Y.push(L.value?a.prev?a.prev({props:J}):V(gn,J,null):q("div",null,null));const ae={icon:c.value?e.prevIcon:e.nextIcon,class:`v-window__${b.value?"left":"right"}`,onClick:h.next,"aria-label":f("$vuetify.carousel.next")};return Y.push(F.value?a.next?a.next({props:ae}):V(gn,ae,null):q("div",null,null)),Y}),Z=K(()=>e.touch===!1?e.touch:{...{left:()=>{b.value?z():B()},right:()=>{b.value?B():z()},start:J=>{let{originalEvent:ae}=J;ae.stopPropagation()}},...e.touch===!0?{}:e.touch});return ct(()=>yi(V(e.tag,{ref:l,class:st(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover","v-window--vertical-arrows":!!e.verticalArrows,"v-window--crossfade":!!e.crossfade},o.value,e.class]),style:St([e.style,e.transitionDuration&&!zs?{"--v-window-transition-duration":Tt(e.transitionDuration,"ms")}:void 0])},{default:()=>{var Y,J;return[q("div",{class:"v-window__container",style:{height:I.value}},[(Y=a.default)==null?void 0:Y.call(a,{group:h}),e.showArrows!==!1&&q("div",{class:st(["v-window__controls",{"v-window__controls--left":e.verticalArrows==="left"||e.verticalArrows===!0},{"v-window__controls--right":e.verticalArrows==="right"}])},[R.value])]),(J=a.additional)==null?void 0:J.call(a,{group:h})]}}),[[pp,Z.value]])),{group:h}}}),hF=Re({color:String,cycle:Boolean,delimiterIcon:{type:Gt,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...Gp({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),fF=it()({name:"VCarousel",props:hF(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const o=Zt(e,"modelValue"),{t:c}=Zn(),f=Qe();let h=-1;xt(o,b),xt(()=>e.interval,b),xt(()=>e.cycle,S=>{S?b():window.clearTimeout(h)}),Fi(l);function l(){!e.cycle||!f.value||(h=window.setTimeout(f.value.group.next,Number(e.interval)>0?Number(e.interval):6e3))}function b(){window.clearTimeout(h),window.requestAnimationFrame(l)}return ct(()=>{const S=gu.filterProps(e);return V(gu,nt({ref:f},S,{modelValue:o.value,"onUpdate:modelValue":w=>o.value=w,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:Tt(e.height)},e.style]}),{default:a.default,additional:w=>{let{group:k}=w;return q(Bt,null,[!e.hideDelimiters&&q("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[k.items.value.length>0&&V(pn,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[k.items.value.map((I,E)=>{const L={id:`carousel-item-${I.id}`,"aria-label":c("$vuetify.carousel.ariaLabel.delimiter",E+1,k.items.value.length),class:["v-carousel__controls__item",k.isSelected(I.id)&&"v-btn--active"],onClick:()=>k.select(I.id,!0)};return a.item?a.item({props:L,item:I}):V(gn,nt(I,L),null)})]})]),e.progress&&V(Bp,{absolute:!0,class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(k.getItemIndex(o.value)+1)/k.items.value.length*100},null)])},prev:a.prev,next:a.next})}),{}}}),Wp=Re({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Ft(),...Au(),...H_()},"VWindowItem"),vu=it()({name:"VWindowItem",directives:{vTouch:pp},props:Wp(),emits:{"group:selected":e=>!0},setup(e,i){let{slots:a}=i;const o=vn(V2),c=vl(e,z2),{isBooted:f}=Eu();if(!o||!c)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const h=bt(!1),l=K(()=>f.value&&(o.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function b(){!h.value||!o||(h.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function S(){var L;h.value||!o||(h.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=Tt((L=o.rootRef.value)==null?void 0:L.clientHeight)),o.transitionCount.value+=1)}function w(){b()}function k(L){h.value&&kn(()=>{!l.value||!h.value||!o||(o.transitionHeight.value=Tt(L.clientHeight))})}const I=K(()=>{const L=o.isReversed.value?e.reverseTransition:e.transition;return l.value?{name:typeof L!="string"?o.transition.value:L,onBeforeEnter:S,onAfterEnter:b,onEnterCancelled:w,onBeforeLeave:S,onAfterLeave:b,onLeaveCancelled:w,onEnter:k}:!1}),{hasContent:E}=q_(e,c.isSelected);return ct(()=>V(Ua,{transition:I.value,disabled:!f.value},{default:()=>{var L;return[yi(q("div",{class:st(["v-window-item",c.selectedClass.value,e.class]),style:St(e.style)},[E.value&&((L=a.default)==null?void 0:L.call(a))]),[[ms,c.isSelected.value]])]}})),{groupItem:c}}}),mF=Re({...tC(),...Wp()},"VCarouselItem"),pF=it()({name:"VCarouselItem",inheritAttrs:!1,props:mF(),setup(e,i){let{slots:a,attrs:o}=i;ct(()=>{const c=Xr.filterProps(e),f=vu.filterProps(e);return V(vu,nt({class:["v-carousel-item",e.class]},f),{default:()=>[V(Xr,nt(o,c),a)]})})}}),gF=_o("v-code","code"),vF=Re({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...Ft()},"VColorPickerCanvas"),yF=Lr({name:"VColorPickerCanvas",props:vF(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,i){let{emit:a}=i;const o=bt(!1),c=Qe(),f=bt(parseFloat(e.width)),h=bt(parseFloat(e.height)),l=Qe({x:0,y:0}),b=K({get:()=>l.value,set(z){var Z,Y;if(!c.value)return;const{x:B,y:R}=z;l.value=z,a("update:color",{h:((Z=e.color)==null?void 0:Z.h)??0,s:ni(B,0,f.value)/f.value,v:1-ni(R,0,h.value)/h.value,a:((Y=e.color)==null?void 0:Y.a)??1})}}),S=K(()=>{const{x:z,y:B}=b.value,R=parseInt(e.dotSize,10)/2;return{width:Tt(e.dotSize),height:Tt(e.dotSize),transform:`translate(${Tt(z-R)}, ${Tt(B-R)})`}}),{resizeRef:w}=Yr(z=>{var Z;if(!((Z=w.el)!=null&&Z.offsetParent))return;const{width:B,height:R}=z[0].contentRect;f.value=B,h.value=R});function k(z,B,R){const{left:Z,top:Y,width:J,height:ae}=R;b.value={x:ni(z-Z,0,J),y:ni(B-Y,0,ae)}}function I(z){z.type==="mousedown"&&z.preventDefault(),!e.disabled&&(E(z),window.addEventListener("mousemove",E),window.addEventListener("mouseup",L),window.addEventListener("touchmove",E),window.addEventListener("touchend",L))}function E(z){if(e.disabled||!c.value)return;o.value=!0;const B=hM(z);k(B.clientX,B.clientY,c.value.getBoundingClientRect())}function L(){window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",L),window.removeEventListener("touchmove",E),window.removeEventListener("touchend",L)}function F(){var Y;if(!c.value)return;const z=c.value,B=z.getContext("2d");if(!B)return;const R=B.createLinearGradient(0,0,z.width,0);R.addColorStop(0,"hsla(0, 0%, 100%, 1)"),R.addColorStop(1,`hsla(${((Y=e.color)==null?void 0:Y.h)??0}, 100%, 50%, 1)`),B.fillStyle=R,B.fillRect(0,0,z.width,z.height);const Z=B.createLinearGradient(0,0,0,z.height);Z.addColorStop(0,"hsla(0, 0%, 0%, 0)"),Z.addColorStop(1,"hsla(0, 0%, 0%, 1)"),B.fillStyle=Z,B.fillRect(0,0,z.width,z.height)}return xt(()=>{var z;return(z=e.color)==null?void 0:z.h},F,{immediate:!0}),xt(()=>[f.value,h.value],(z,B)=>{F(),l.value={x:b.value.x*z[0]/B[0],y:b.value.y*z[1]/B[1]}},{flush:"post"}),xt(()=>e.color,()=>{if(o.value){o.value=!1;return}l.value=e.color?{x:e.color.s*f.value,y:(1-e.color.v)*h.value}:{x:0,y:0}},{deep:!0,immediate:!0}),Fi(()=>F()),ct(()=>q("div",{ref:w,class:st(["v-color-picker-canvas",e.class]),style:St(e.style),onMousedown:I,onTouchstartPassive:I},[q("canvas",{ref:c,width:f.value,height:h.value},null),e.color&&q("div",{class:st(["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}]),style:St(S.value)},null)])),{}}});function _F(e,i){if(i){const{a,...o}=e;return o}return e}function bF(e,i){if(i==null||typeof i=="string"){const a=e.a!==1;if(i!=null&&i.startsWith("rgb(")){const{r:c,g:f,b:h,a:l}=Ls(e);return`rgb(${c} ${f} ${h}`+(a?` / ${l})`:")")}else if(i!=null&&i.startsWith("hsl(")){const{h:c,s:f,l:h,a:l}=py(e);return`hsl(${c} ${Math.round(f*100)} ${Math.round(h*100)}`+(a?` / ${l})`:")")}const o=xk(e);return e.a===1?o.slice(0,7):o}if(typeof i=="object"){let a;return au(i,["r","g","b"])?a=Ls(e):au(i,["h","s","l"])?a=py(e):au(i,["h","s","v"])&&(a=e),_F(a,!au(i,["a"])&&e.a===1)}return e}const Rc={h:0,s:0,v:0,a:1},Fy={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,i)=>({...e,r:Number(i)}),localeKey:"redInput"},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,i)=>({...e,g:Number(i)}),localeKey:"greenInput"},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,i)=>({...e,b:Number(i)}),localeKey:"blueInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:i}=e;return i!=null?Math.round(i*100)/100:1},getColor:(e,i)=>({...e,a:Number(i)}),localeKey:"alphaInput"}],to:Ls,from:pf};var C1;const xF={...Fy,inputs:(C1=Fy.inputs)==null?void 0:C1.slice(0,3)},Oy={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,i)=>({...e,h:Number(i)}),localeKey:"hueInput"},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,i)=>({...e,s:Number(i)}),localeKey:"saturationInput"},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,i)=>({...e,l:Number(i)}),localeKey:"lightnessInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:i}=e;return i!=null?Math.round(i*100)/100:1},getColor:(e,i)=>({...e,a:Number(i)}),localeKey:"alphaInput"}],to:py,from:T_},wF={...Oy,inputs:Oy.inputs.slice(0,3)},L2={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,i)=>i,localeKey:"hexaInput"}],to:xk,from:RM},SF={...L2,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,i)=>i,localeKey:"hexInput"}]},du={rgb:xF,rgba:Fy,hsl:wF,hsla:Oy,hex:SF,hexa:L2},kF=e=>{let{label:i,...a}=e;return q("div",{class:"v-color-picker-edit__input"},[q("input",NT(FS(a)),null),q("span",null,[i])])},CF=Re({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(du).includes(e)},modes:{type:Array,default:()=>Object.keys(du),validator:e=>Array.isArray(e)&&e.every(i=>Object.keys(du).includes(i))},...Ft()},"VColorPickerEdit"),IF=Lr({name:"VColorPickerEdit",props:CF(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,i){let{emit:a}=i;const{t:o}=Zn(),c=K(()=>e.modes.map(h=>({...du[h],name:h}))),f=K(()=>{var b;const h=c.value.find(S=>S.name===e.mode);if(!h)return[];const l=e.color?h.to(e.color):null;return(b=h.inputs)==null?void 0:b.map(S=>{let{getValue:w,getColor:k,localeKey:I,...E}=S;return{...h.inputProps,...E,ariaLabel:o(`$vuetify.colorPicker.ariaLabel.${I}`),disabled:e.disabled,value:l&&w(l),onChange:L=>{const F=L.target;F&&a("update:color",h.from(k(l??h.to(Rc),F.value)))}}})});return ct(()=>{var h;return q("div",{class:st(["v-color-picker-edit",e.class]),style:St(e.style)},[(h=f.value)==null?void 0:h.map(l=>V(kF,l,null)),c.value.length>1&&V(gn,{icon:"$unfold",size:"x-small",variant:"plain","aria-label":o("$vuetify.colorPicker.ariaLabel.changeFormat"),onClick:()=>{const l=c.value.findIndex(b=>b.name===e.mode);a("update:mode",c.value[(l+1)%c.value.length].name)}},null)])}),{}}}),B2=Re({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,hideEyeDropper:Boolean,eyeDropperIcon:{type:Gt,default:"$eyeDropper"},...Ft()},"VColorPickerPreview"),PF=Lr({name:"VColorPickerPreview",props:B2(),emits:{"update:color":e=>!0},setup(e,i){let{emit:a}=i;const{t:o}=Zn(),c=new AbortController;Ip(()=>c.abort());async function f(){if(!J0||e.disabled)return;const h=new window.EyeDropper;try{const l=await h.open({signal:c.signal}),b=pf(Vr(l.sRGBHex));a("update:color",{...e.color??Rc,...b})}catch{}}return ct(()=>{var h,l;return q("div",{class:st(["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class]),style:St(e.style)},[J0&&!e.hideEyeDropper&&q("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[V(gn,{"aria-label":o("$vuetify.colorPicker.ariaLabel.eyedropper"),density:"comfortable",disabled:e.disabled,icon:e.eyeDropperIcon,variant:"plain",onClick:f},null)]),q("div",{class:"v-color-picker-preview__dot"},[q("div",{style:{background:yk(e.color??Rc)}},null)]),q("div",{class:"v-color-picker-preview__sliders"},[V(Gr,{class:"v-color-picker-preview__track v-color-picker-preview__hue",name:o("$vuetify.colorPicker.ariaLabel.hueSlider"),modelValue:(h=e.color)==null?void 0:h.h,"onUpdate:modelValue":b=>a("update:color",{...e.color??Rc,h:b}),step:0,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&V(Gr,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",name:o("$vuetify.colorPicker.ariaLabel.alphaSlider"),modelValue:((l=e.color)==null?void 0:l.a)??1,"onUpdate:modelValue":b=>a("update:color",{...e.color??Rc,a:b}),step:1/256,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])}),{}}}),TF={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},AF={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},EF={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},MF={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},DF={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},VF={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},zF={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},LF={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},BF={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},RF={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},FF={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},OF={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},$F={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},NF={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},jF={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},UF={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},HF={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},qF={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},GF={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},WF={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},ZF={red:TF,pink:AF,purple:EF,deepPurple:MF,indigo:DF,blue:VF,lightBlue:zF,cyan:LF,teal:BF,green:RF,lightGreen:FF,lime:OF,yellow:$F,amber:NF,orange:jF,deepOrange:UF,brown:HF,blueGrey:qF,grey:GF,shades:WF},KF=Re({swatches:{type:Array,default:()=>XF(ZF)},disabled:Boolean,color:Object,maxHeight:[Number,String],...Ft()},"VColorPickerSwatches");function XF(e){return Object.keys(e).map(i=>{const a=e[i];return a.base?[a.base,a.darken4,a.darken3,a.darken2,a.darken1,a.lighten1,a.lighten2,a.lighten3,a.lighten4,a.lighten5]:[a.black,a.white,a.transparent]})}const YF=Lr({name:"VColorPickerSwatches",props:KF(),emits:{"update:color":e=>!0},setup(e,i){let{emit:a}=i;return ct(()=>q("div",{class:st(["v-color-picker-swatches",e.class]),style:St([{maxHeight:Tt(e.maxHeight)},e.style])},[q("div",null,[e.swatches.map(o=>q("div",{class:"v-color-picker-swatches__swatch"},[o.map(c=>{const f=Vr(c),h=pf(f),l=vk(f);return q("div",{class:"v-color-picker-swatches__color",onClick:()=>h&&a("update:color",h)},[q("div",{style:{background:l}},[e.color&&ia(e.color,h)?V(un,{size:"x-small",icon:"$success",color:NM(c,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),JF=_o("v-picker-title"),fb=Re({color:String,...sr(),...Ft(),...Oi(),...Gi(),...bo(),...nd(),...gi(),...mn(),...Dn()},"VSheet"),lf=it()({name:"VSheet",props:fb(),setup(e,i){let{slots:a}=i;const{themeClasses:o}=$n(e),{backgroundColorClasses:c,backgroundColorStyles:f}=Un(()=>e.color),{borderClasses:h}=gr(e),{dimensionStyles:l}=$i(e),{elevationClasses:b}=ra(e),{locationStyles:S}=Pu(e),{positionClasses:w}=id(e),{roundedClasses:k}=Ci(e);return ct(()=>V(e.tag,{class:st(["v-sheet",o.value,c.value,h.value,b.value,w.value,k.value,e.class]),style:St([f.value,l.value,S.value,e.style])},a)),{}}}),Zp=Re({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,hideTitle:Boolean,...fb()},"VPicker"),Jc=it()({name:"VPicker",props:Zp(),setup(e,i){let{slots:a}=i;const{backgroundColorClasses:o,backgroundColorStyles:c}=Un(()=>e.color);return ct(()=>{const f=lf.filterProps(e),h=!e.hideTitle&&!!(e.title||a.title);return V(lf,nt(f,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!a.actions},e.class],style:e.style}),{default:()=>{var l;return[!e.hideHeader&&q("div",{key:"header",class:st([o.value]),style:St([c.value])},[h&&V(JF,{key:"picker-title"},{default:()=>{var b;return[((b=a.title)==null?void 0:b.call(a))??e.title]}}),a.header&&q("div",{class:"v-picker__header"},[a.header()])]),q("div",{class:"v-picker__body"},[(l=a.default)==null?void 0:l.call(a)]),a.actions&&V(pn,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[q("div",{class:"v-picker__actions"},[a.actions()])]})]}})}),{}}}),QF=Re({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(du).includes(e)},modes:{type:Array,default:()=>Object.keys(du),validator:e=>Array.isArray(e)&&e.every(i=>Object.keys(du).includes(i))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...Zp({hideHeader:!0}),...pr(B2(),["hideEyeDropper","eyeDropperIcon"])},"VColorPicker"),eO=Lr({name:"VColorPicker",props:QF(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e,i){let{slots:a}=i;const o=Zt(e,"mode"),c=Qe(null),f=Zt(e,"modelValue",void 0,w=>{if(w==null||w==="")return null;let k;try{k=pf(Vr(w))}catch{return null}return k},w=>w?bF(w,e.modelValue):null),h=K(()=>f.value?{...f.value,h:c.value??f.value.h}:null),{rtlClasses:l}=qi();let b=!0;xt(f,w=>{if(!b){b=!0;return}w&&(c.value=w.h)},{immediate:!0});const S=w=>{b=!1,c.value=w.h,f.value=w};return Qc(()=>{e.modes.includes(o.value)||(o.value=e.modes[0])}),ki({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),ct(()=>{const w=Jc.filterProps(e);return V(Jc,nt(w,{class:["v-color-picker",l.value,e.class],style:[{"--v-color-picker-color-hsv":yk({...h.value??Rc,a:1})},e.style]}),{...a,default:()=>q(Bt,null,[!e.hideCanvas&&V(yF,{key:"canvas",color:h.value,"onUpdate:color":S,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&q("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&V(PF,{key:"preview",color:h.value,"onUpdate:color":S,hideAlpha:!o.value.endsWith("a"),disabled:e.disabled,hideEyeDropper:e.hideEyeDropper,eyeDropperIcon:e.eyeDropperIcon},null),!e.hideInputs&&V(IF,{key:"edit",modes:e.modes,mode:o.value,"onUpdate:mode":k=>o.value=k,color:h.value,"onUpdate:color":S,disabled:e.disabled},null)]),e.showSwatches&&V(YF,{key:"swatches",color:h.value,"onUpdate:color":S,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)])})}),{}}}),tO=Re({alwaysFilter:Boolean,autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...od({filterKeys:["title"]}),...ub({hideNoData:!0,returnObject:!0}),...Wn(Cf({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ps({transition:!1})},"VCombobox"),nO=it()({name:"VCombobox",props:tO(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,i){var Se;let{emit:a,slots:o}=i;const{t:c}=Zn(),f=Qe(),h=bt(!1),l=bt(!0),b=bt(!1),S=Qe(),w=Qe(),k=bt(-1);let I=!1;const{items:E,transformIn:L,transformOut:F}=Y_(e),{textColorClasses:z,textColorStyles:B}=ga(()=>{var xe;return(xe=f.value)==null?void 0:xe.color}),R=Zt(e,"modelValue",[],xe=>L(Si(xe)),xe=>{const le=F(xe);return e.multiple?le:le[0]??null}),Z=ad(e),Y=K(()=>!!(e.chips||o.chip)),J=K(()=>Y.value||!!o.selection),ae=bt(!e.multiple&&!J.value?((Se=R.value[0])==null?void 0:Se.title)??"":""),he=K({get:()=>ae.value,set:async xe=>{var le;if(ae.value=xe??"",!e.multiple&&!J.value&&(R.value=[os(e,xe)],kn(()=>{var Ke;return(Ke=w.value)==null?void 0:Ke.scrollToIndex(0)})),xe&&e.multiple&&((le=e.delimiters)!=null&&le.length)){const Ke=e.delimiters.map(op).join("|"),ht=xe.split(new RegExp(`(?:${Ke})+`));if(ht.length>1){for(let et of ht)et=et.trim(),et&&(ft(os(e,et)),await kn());ae.value=""}}xe||(k.value=-1),l.value=!xe}}),te=K(()=>typeof e.counterValue=="function"?e.counterValue(R.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?R.value.length:he.value.length),{filteredItems:re,getMatches:ie}=ld(e,E,()=>e.alwaysFilter||!l.value?he.value:""),ue=K(()=>e.hideSelected?re.value.filter(xe=>!R.value.some(le=>le.value===xe.value)):re.value),Q=K(()=>e.hideNoData&&!ue.value.length||Z.isReadonly.value||Z.isDisabled.value),pe=Zt(e,"menu"),Ce=K({get:()=>pe.value,set:xe=>{var le;pe.value&&!xe&&((le=S.value)!=null&&le.ΨopenChildren.size)||xe&&Q.value||(pe.value=xe)}}),{menuId:$e,ariaExpanded:Xe,ariaControls:Ye,ariaLabel:qe}=lb(e,Ce);xt(ae,xe=>{I?kn(()=>I=!1):h.value&&!Ce.value&&(Ce.value=!0),a("update:search",xe)}),xt(R,xe=>{var le;!e.multiple&&!J.value&&(ae.value=((le=xe[0])==null?void 0:le.title)??"")});const Te=K(()=>R.value.map(xe=>xe.value)),Me=K(()=>{var le;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&he.value===((le=ue.value[0])==null?void 0:le.title))&&ue.value.length>0&&!l.value&&!b.value}),Ve=Qe(),Fe=ob(Ve,f);function Be(xe){I=!0,kn(()=>I=!1),e.openOnClear&&(Ce.value=!0)}function lt(){Q.value||(Ce.value=!0)}function vt(xe){Q.value||(h.value&&(xe.preventDefault(),xe.stopPropagation()),Ce.value=!Ce.value)}function kt(xe){var le;(Gc(xe)||xe.key==="Backspace")&&((le=f.value)==null||le.focus())}function ge(xe){var ht,et,tt,dt;if(cM(xe)||Z.isReadonly.value)return;const le=(ht=f.value)==null?void 0:ht.selectionStart,Ke=R.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(xe.key)&&xe.preventDefault(),["Enter","ArrowDown"].includes(xe.key)&&(Ce.value=!0),["Escape"].includes(xe.key)&&(Ce.value=!1),["Enter","Escape","Tab"].includes(xe.key)&&(Me.value&&["Enter","Tab"].includes(xe.key)&&!R.value.some(yt=>{let{value:It}=yt;return It===ue.value[0].value})&&ft(re.value[0]),l.value=!0),xe.key==="ArrowDown"&&Me.value&&((et=Ve.value)==null||et.focus("next")),xe.key==="Enter"&&he.value&&(ft(os(e,he.value)),J.value&&(ae.value="")),["Backspace","Delete"].includes(xe.key)){if(!e.multiple&&J.value&&R.value.length>0&&!he.value)return ft(R.value[0],!1);if(~k.value){xe.preventDefault();const yt=k.value;ft(R.value[k.value],!1),k.value=yt>=Ke-1?Ke-2:yt}else xe.key==="Backspace"&&!he.value&&(k.value=Ke-1);return}if(e.multiple)if(xe.key==="ArrowLeft"){if(k.value<0&&le&&le>0)return;const yt=k.value>-1?k.value-1:Ke-1;R.value[yt]?k.value=yt:(k.value=-1,(tt=f.value)==null||tt.setSelectionRange(he.value.length,he.value.length))}else if(xe.key==="ArrowRight"){if(k.value<0)return;const yt=k.value+1;R.value[yt]?k.value=yt:(k.value=-1,(dt=f.value)==null||dt.setSelectionRange(0,0))}else~k.value&&Gc(xe)&&(k.value=-1)}function je(){var xe;e.eager&&((xe=w.value)==null||xe.calculateVisibleItems())}function rt(){var xe;h.value&&(l.value=!0,(xe=f.value)==null||xe.focus())}function ft(xe){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!xe||xe.props.disabled))if(e.multiple){const Ke=R.value.findIndex(et=>(e.valueComparator||ia)(et.value,xe.value)),ht=le??!~Ke;if(~Ke){const et=ht?[...R.value,xe]:[...R.value];et.splice(Ke,1),R.value=et}else ht&&(R.value=[...R.value,xe]);e.clearOnSelect&&(he.value="")}else{const Ke=le!==!1;R.value=Ke?[xe]:[],ae.value=Ke&&!J.value?xe.title:"",kn(()=>{Ce.value=!1,l.value=!0})}}function Rt(xe){h.value=!0,setTimeout(()=>{b.value=!0})}function fe(xe){b.value=!1}function se(xe){(xe==null||xe===""&&!e.multiple&&!J.value)&&(R.value=[])}return xt(h,(xe,le)=>{if(!(xe||xe===le)&&(k.value=-1,Ce.value=!1,he.value)){if(e.multiple){ft(os(e,he.value));return}if(!J.value)return;R.value.some(Ke=>{let{title:ht}=Ke;return ht===he.value})?ae.value="":ft(os(e,he.value))}}),xt(Ce,()=>{if(!e.hideSelected&&Ce.value&&R.value.length){const xe=ue.value.findIndex(le=>R.value.some(Ke=>(e.valueComparator||ia)(Ke.value,le.value)));jn&&window.requestAnimationFrame(()=>{var le;xe>=0&&((le=w.value)==null||le.scrollToIndex(xe))})}}),xt(E,(xe,le)=>{Ce.value||h.value&&!le.length&&xe.length&&(Ce.value=!0)}),ct(()=>{const xe=!!(!e.hideNoData||ue.value.length||o["prepend-item"]||o["append-item"]||o["no-data"]),le=R.value.length>0,Ke=xi.filterProps(e);return V(xi,nt({ref:f},Ke,{modelValue:he.value,"onUpdate:modelValue":[ht=>he.value=ht,se],focused:h.value,"onUpdate:focused":ht=>h.value=ht,validationValue:R.externalValue,counterValue:te.value,dirty:le,class:["v-combobox",{"v-combobox--active-menu":Ce.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!J.value,"v-combobox--selecting-index":k.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:Z.isReadonly.value,placeholder:le?void 0:e.placeholder,"onClick:clear":Be,"onMousedown:control":lt,onKeydown:ge,"aria-expanded":Xe.value,"aria-controls":Ye.value}),{...o,default:()=>q(Bt,null,[V(Yc,nt({id:$e.value,ref:S,modelValue:Ce.value,"onUpdate:modelValue":ht=>Ce.value=ht,activator:"parent",contentClass:"v-combobox__content",disabled:Q.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:je,onAfterLeave:rt},e.menuProps),{default:()=>[xe&&V(vo,nt({ref:Ve,filterable:!0,selected:Te.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:ht=>ht.preventDefault(),selectable:!0,onKeydown:kt,onFocusin:Rt,onFocusout:fe,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Fe,e.listProps),{default:()=>{var ht,et,tt;return[(ht=o["prepend-item"])==null?void 0:ht.call(o),!ue.value.length&&!e.hideNoData&&(((et=o["no-data"])==null?void 0:et.call(o))??V(ri,{key:"no-data",title:c(e.noDataText)},null)),V(qp,{ref:w,renderless:!0,items:ue.value,itemKey:"value"},{default:dt=>{var bn,Pn,mt;let{item:yt,index:It,itemRef:Ut}=dt;const nn=nt(yt.props,{ref:Ut,key:yt.value,active:Me.value&&It===0?!0:void 0,onClick:()=>ft(yt,null)});return yt.type==="divider"?((bn=o.divider)==null?void 0:bn.call(o,{props:yt.raw,index:It}))??V(Ha,nt(yt.props,{key:`divider-${It}`}),null):yt.type==="subheader"?((Pn=o.subheader)==null?void 0:Pn.call(o,{props:yt.raw,index:It}))??V(sd,nt(yt.props,{key:`subheader-${It}`}),null):((mt=o.item)==null?void 0:mt.call(o,{item:yt,index:It,props:nn}))??V(ri,nt(nn,{role:"option"}),{prepend:Hn=>{let{isSelected:Fn}=Hn;return q(Bt,null,[e.multiple&&!e.hideSelected?V(Bs,{key:yt.value,modelValue:Fn,ripple:!1,tabindex:"-1"},null):void 0,yt.props.prependAvatar&&V(zr,{image:yt.props.prependAvatar},null),yt.props.prependIcon&&V(un,{icon:yt.props.prependIcon},null)])},title:()=>{var Hn;return l.value?yt.title:P2("v-combobox",yt.title,(Hn=ie(yt))==null?void 0:Hn.title)}})}}),(tt=o["append-item"])==null?void 0:tt.call(o)]}})]}),R.value.map((ht,et)=>{function tt(Ut){Ut.stopPropagation(),Ut.preventDefault(),ft(ht,!1)}const dt={"onClick:close":tt,onKeydown(Ut){Ut.key!=="Enter"&&Ut.key!==" "||(Ut.preventDefault(),Ut.stopPropagation(),tt(Ut))},onMousedown(Ut){Ut.preventDefault(),Ut.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},yt=Y.value?!!o.chip:!!o.selection,It=yt?Ep(Y.value?o.chip({item:ht,index:et,props:dt}):o.selection({item:ht,index:et})):void 0;if(!(yt&&!It))return q("div",{key:ht.value,class:st(["v-combobox__selection",et===k.value&&["v-combobox__selection--selected",z.value]]),style:St(et===k.value?B.value:{})},[Y.value?o.chip?V(pn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:ht.title}}},{default:()=>[It]}):V(Vs,nt({key:"chip",closable:e.closableChips,size:"small",text:ht.title,disabled:ht.props.disabled},dt),null):It??q("span",{class:"v-combobox__selection-text"},[ht.title,e.multiple&&et<R.value.length-1&&q("span",{class:"v-combobox__selection-comma"},[Lt(",")])])])})]),"append-inner":function(){var dt,yt;for(var ht=arguments.length,et=new Array(ht),tt=0;tt<ht;tt++)et[tt]=arguments[tt];return q(Bt,null,[(dt=o["append-inner"])==null?void 0:dt.call(o,...et),(!e.hideNoData||e.items.length)&&e.menuIcon?V(un,{class:"v-combobox__menu-icon",color:(yt=f.value)==null?void 0:yt.fieldIconColor,icon:e.menuIcon,onMousedown:vt,onClick:ck,"aria-label":qe.value,title:qe.value,tabindex:"-1"},null):void 0])}})}),sa({isFocused:h,isPristine:l,menu:Ce,search:he,selectionIndex:k,filteredItems:re,select:ft},f)}}),iO=Re({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),aO=it()({name:"VConfirmEdit",props:iO(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,i){let{emit:a,slots:o}=i;const c=Zt(e,"modelValue"),f=Qe();pi(()=>{f.value=structuredClone(rn(c.value))});const{t:h}=Zn(),l=K(()=>ia(c.value,f.value));function b(F){return typeof e.disabled=="boolean"?e.disabled:Array.isArray(e.disabled)?e.disabled.includes(F):l.value}const S=K(()=>b("save")),w=K(()=>b("cancel"));function k(){c.value=f.value,a("save",f.value)}function I(){f.value=structuredClone(rn(c.value)),a("cancel")}function E(F){return q(Bt,null,[V(gn,nt({disabled:w.value,variant:"text",color:e.color,onClick:I,text:h(e.cancelText)},F),null),V(gn,nt({disabled:S.value,variant:"text",color:e.color,onClick:k,text:h(e.okText)},F),null)])}let L=!1;return ct(()=>{var F;return q(Bt,null,[(F=o.default)==null?void 0:F.call(o,{model:f,save:k,cancel:I,isPristine:l.value,get actions(){return L=!0,E}}),!e.hideActions&&!L&&E()])}),{save:k,cancel:I,isPristine:l}}}),R2=Re({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),F2=Symbol.for("vuetify:datatable:expanded");function Kp(e){const i=we(()=>e.expandOnClick),a=Zt(e,"expanded",e.expanded,l=>new Set(l),l=>[...l.values()]);function o(l,b){const S=new Set(a.value),w=rn(l.value);if(b)S.add(w);else{const k=[...a.value].find(I=>rn(I)===w);S.delete(k)}a.value=S}function c(l){const b=rn(l.value);return[...a.value].some(S=>rn(S)===b)}function f(l){o(l,!c(l))}const h={expand:o,expanded:a,expandOnClick:i,isExpanded:c,toggleExpand:f};return Jn(F2,h),h}function O2(){const e=vn(F2);if(!e)throw new Error("foo");return e}const mb=Re({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),$2=Symbol.for("vuetify:data-table-group");function pb(e){return{groupBy:Zt(e,"groupBy")}}function Xp(e){const{disableSort:i,groupBy:a,sortBy:o}=e,c=Qe(new Set),f=K(()=>a.value.map(w=>({...w,order:w.order??!1})).concat(i!=null&&i.value?[]:o.value));function h(w){return c.value.has(w.id)}function l(w){const k=new Set(c.value);h(w)?k.delete(w.id):k.add(w.id),c.value=k}function b(w){function k(I){const E=[];for(const L of I.items)"type"in L&&L.type==="group"?E.push(...k(L)):E.push(L);return[...new Set(E)]}return k({items:w})}const S={sortByWithGroups:f,toggleGroup:l,opened:c,groupBy:a,extractRows:b,isGroupOpen:h};return Jn($2,S),S}function N2(){const e=vn($2);if(!e)throw new Error("Missing group!");return e}function rO(e,i){if(!e.length)return[];const a=new Map;for(const o of e){const c=mu(o.raw,i);a.has(c)||a.set(c,[]),a.get(c).push(o)}return a}function j2(e,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!i.length)return[];const c=rO(e,i[0]),f=[],h=i.slice(1);return c.forEach((l,b)=>{const S=i[0],w=`${o}_${S}_${b}`;f.push({depth:a,id:w,key:S,value:b,items:h.length?j2(l,h,a+1,w):l,type:"group"})}),f}function U2(e,i,a){const o=[];for(const c of e)"type"in c&&c.type==="group"?(c.value!=null&&o.push(c),(i.has(c.id)||c.value==null)&&(o.push(...U2(c.items,i,a)),a&&o.push({...c,type:"group-summary"}))):o.push(c);return o}function Yp(e,i,a,o){return{flatItems:K(()=>{if(!i.value.length)return e.value;const f=j2(e.value,i.value.map(h=>h.key));return U2(f,a.value,rr(o))})}}function Jp(e){let{page:i,itemsPerPage:a,sortBy:o,groupBy:c,search:f}=e;const h=Vi("VDataTable"),l=()=>({page:i.value,itemsPerPage:a.value,sortBy:o.value,groupBy:c.value,search:f.value});let b=null;xt(l,S=>{ia(b,S)||(b&&b.search!==S.search&&(i.value=1),h.emit("update:options",S),b=S)},{deep:!0,immediate:!0})}const gb=Re({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),H2=Symbol.for("vuetify:data-table-pagination");function vb(e){const i=Zt(e,"page",void 0,o=>Number(o??1)),a=Zt(e,"itemsPerPage",void 0,o=>Number(o??10));return{page:i,itemsPerPage:a}}function yb(e){const{page:i,itemsPerPage:a,itemsLength:o}=e,c=K(()=>a.value===-1?0:a.value*(i.value-1)),f=K(()=>a.value===-1?o.value:Math.min(o.value,c.value+a.value)),h=K(()=>a.value===-1||o.value===0?1:Math.ceil(o.value/a.value));xt([i,h],()=>{i.value>h.value&&(i.value=h.value)});function l(I){a.value=I,i.value=1}function b(){i.value=ni(i.value+1,1,h.value)}function S(){i.value=ni(i.value-1,1,h.value)}function w(I){i.value=ni(I,1,h.value)}const k={page:i,itemsPerPage:a,startIndex:c,stopIndex:f,pageCount:h,itemsLength:o,nextPage:b,prevPage:S,setPage:w,setItemsPerPage:l};return Jn(H2,k),k}function sO(){const e=vn(H2);if(!e)throw new Error("Missing pagination!");return e}function q2(e){const i=Vi("usePaginatedItems"),{items:a,startIndex:o,stopIndex:c,itemsPerPage:f}=e,h=K(()=>f.value<=0?a.value:a.value.slice(o.value,c.value));return xt(h,l=>{i.emit("update:currentItems",l)},{immediate:!0}),{paginatedItems:h}}const oO={showSelectAll:!1,allSelected:()=>[],select:e=>{var o;let{items:i,value:a}=e;return new Set(a?[(o=i[0])==null?void 0:o.value]:[])},selectAll:e=>{let{selected:i}=e;return i}},G2={showSelectAll:!0,allSelected:e=>{let{currentPage:i}=e;return i},select:e=>{let{items:i,value:a,selected:o}=e;for(const c of i)a?o.add(c.value):o.delete(c.value);return o},selectAll:e=>{let{value:i,currentPage:a,selected:o}=e;return G2.select({items:a,value:i,selected:o})}},W2={showSelectAll:!0,allSelected:e=>{let{allItems:i}=e;return i},select:e=>{let{items:i,value:a,selected:o}=e;for(const c of i)a?o.add(c.value):o.delete(c.value);return o},selectAll:e=>{let{value:i,allItems:a,selected:o}=e;return W2.select({items:a,value:i,selected:o})}},Z2=Re({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:ia}},"DataTable-select"),K2=Symbol.for("vuetify:data-table-selection");function Qp(e,i){let{allItems:a,currentPage:o}=i;const c=Zt(e,"modelValue",e.modelValue,R=>new Set(Si(R).map(Z=>{var Y;return((Y=a.value.find(J=>e.valueComparator(Z,J.value)))==null?void 0:Y.value)??Z})),R=>[...R.values()]),f=K(()=>a.value.filter(R=>R.selectable)),h=K(()=>o.value.filter(R=>R.selectable)),l=K(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return oO;case"all":return W2;case"page":default:return G2}}),b=bt(null);function S(R){return Si(R).every(Z=>c.value.has(Z.value))}function w(R){return Si(R).some(Z=>c.value.has(Z.value))}function k(R,Z){const Y=l.value.select({items:R,value:Z,selected:new Set(c.value)});c.value=Y}function I(R,Z,Y){const J=[];if(Z=Z??o.value.findIndex(ae=>ae.value===R.value),e.selectStrategy!=="single"&&(Y!=null&&Y.shiftKey)&&b.value!==null){const[ae,he]=[b.value,Z].sort((te,re)=>te-re);J.push(...o.value.slice(ae,he+1).filter(te=>te.selectable))}else J.push(R),b.value=Z;k(J,!S([R]))}function E(R){const Z=l.value.selectAll({value:R,allItems:f.value,currentPage:h.value,selected:new Set(c.value)});c.value=Z}const L=K(()=>c.value.size>0),F=K(()=>{const R=l.value.allSelected({allItems:f.value,currentPage:h.value});return!!R.length&&S(R)}),z=we(()=>l.value.showSelectAll),B={toggleSelect:I,select:k,selectAll:E,isSelected:S,isSomeSelected:w,someSelected:L,allSelected:F,showSelectAll:z,lastSelectedIndex:b,selectStrategy:l};return Jn(K2,B),B}function eg(){const e=vn(K2);if(!e)throw new Error("Missing selection!");return e}const X2=Re({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),Y2=Symbol.for("vuetify:data-table-sort");function tg(e){const i=Zt(e,"sortBy"),a=we(()=>e.mustSort),o=we(()=>e.multiSort);return{sortBy:i,mustSort:a,multiSort:o}}function ng(e){const{sortBy:i,mustSort:a,multiSort:o,page:c}=e,f=b=>{if(b.key==null)return;let S=i.value.map(k=>({...k}))??[];const w=S.find(k=>k.key===b.key);w?w.order==="desc"?a.value&&S.length===1?w.order="asc":S=S.filter(k=>k.key!==b.key):w.order="desc":o.value?S.push({key:b.key,order:"asc"}):S=[{key:b.key,order:"asc"}],i.value=S,c&&(c.value=1)};function h(b){return!!i.value.find(S=>S.key===b.key)}const l={sortBy:i,toggleSort:f,isSorted:h};return Jn(Y2,l),l}function J2(){const e=vn(Y2);if(!e)throw new Error("Missing sort!");return e}function _b(e,i,a,o){const c=Zn();return{sortedItems:K(()=>{var h,l;return a.value.length?lO(i.value,a.value,c.current.value,{transform:o==null?void 0:o.transform,sortFunctions:{...e.customKeySort,...(h=o==null?void 0:o.sortFunctions)==null?void 0:h.value},sortRawFunctions:(l=o==null?void 0:o.sortRawFunctions)==null?void 0:l.value}):i.value})}}function lO(e,i,a,o){const c=new Intl.Collator(a,{sensitivity:"accent",usage:"sort"});return e.map(h=>[h,o!=null&&o.transform?o.transform(h):h]).sort((h,l)=>{var b,S;for(let w=0;w<i.length;w++){let k=!1;const I=i[w].key,E=i[w].order??"asc";if(E===!1)continue;let L=mu(h[1],I),F=mu(l[1],I),z=h[0].raw,B=l[0].raw;if(E==="desc"&&([L,F]=[F,L],[z,B]=[B,z]),(b=o==null?void 0:o.sortRawFunctions)!=null&&b[I]){const R=o.sortRawFunctions[I](z,B);if(R==null)continue;if(k=!0,R)return R}if((S=o==null?void 0:o.sortFunctions)!=null&&S[I]){const R=o.sortFunctions[I](L,F);if(R==null)continue;if(k=!0,R)return R}if(!k&&(L instanceof Date&&F instanceof Date&&(L=L.getTime(),F=F.getTime()),[L,F]=[L,F].map(R=>R!=null?R.toString().toLocaleLowerCase():R),L!==F))return zm(L)&&zm(F)?0:zm(L)?-1:zm(F)?1:!isNaN(L)&&!isNaN(F)?Number(L)-Number(F):c.compare(L,F)}return 0}).map(h=>{let[l]=h;return l})}const uO=Re({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function cO(e,i){const a=e.returnObject?i:Ri(i,e.itemValue),o=Ri(i,e.itemSelectable,!0);return{type:"item",value:a,selectable:o,raw:i}}function dO(e,i){const a=[];for(const o of i)a.push(cO(e,o));return a}function hO(e){return{items:K(()=>dO(e,e.items))}}const fO=Re({search:String,loading:Boolean,...Ft(),...uO(),...Z2(),...X2(),...gb({itemsPerPage:5}),...R2(),...mb(),...od(),...mn(),...ps({transition:{component:ef,hideOnLeave:!0}})},"VDataIterator"),mO=it()({name:"VDataIterator",props:fO(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,i){let{slots:a}=i;const o=Zt(e,"groupBy"),c=we(()=>e.search),{items:f}=hO(e),{filteredItems:h}=ld(e,f,c,{transform:Ve=>Ve.raw}),{sortBy:l,multiSort:b,mustSort:S}=tg(e),{page:w,itemsPerPage:k}=vb(e),{toggleSort:I}=ng({sortBy:l,multiSort:b,mustSort:S,page:w}),{sortByWithGroups:E,opened:L,extractRows:F,isGroupOpen:z,toggleGroup:B}=Xp({groupBy:o,sortBy:l}),{sortedItems:R}=_b(e,h,E,{transform:Ve=>Ve.raw}),{flatItems:Z}=Yp(R,o,L,!1),Y=we(()=>Z.value.length),{startIndex:J,stopIndex:ae,pageCount:he,prevPage:te,nextPage:re,setItemsPerPage:ie,setPage:ue}=yb({page:w,itemsPerPage:k,itemsLength:Y}),{paginatedItems:Q}=q2({items:Z,startIndex:J,stopIndex:ae,itemsPerPage:k}),pe=K(()=>F(Q.value)),{isSelected:Ce,select:$e,selectAll:Xe,toggleSelect:Ye}=Qp(e,{allItems:f,currentPage:pe}),{isExpanded:qe,toggleExpand:Te}=Kp(e);Jp({page:w,itemsPerPage:k,sortBy:l,groupBy:o,search:c});const Me=K(()=>({page:w.value,itemsPerPage:k.value,sortBy:l.value,pageCount:he.value,toggleSort:I,prevPage:te,nextPage:re,setPage:ue,setItemsPerPage:ie,isSelected:Ce,select:$e,selectAll:Xe,toggleSelect:Ye,isExpanded:qe,toggleExpand:Te,isGroupOpen:z,toggleGroup:B,items:pe.value,itemsCount:h.value.length,groupedItems:Q.value}));return ct(()=>V(e.tag,{class:st(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:St(e.style)},{default:()=>{var Ve,Fe;return[(Ve=a.header)==null?void 0:Ve.call(a,Me.value),V(Ua,{transition:e.transition},{default:()=>{var Be,lt;return[e.loading?V(bf,{key:"loader",name:"v-data-iterator",active:!0},{default:vt=>{var kt;return(kt=a.loader)==null?void 0:kt.call(a,vt)}}):q("div",{key:"items"},[Q.value.length?(lt=a.default)==null?void 0:lt.call(a,Me.value):(Be=a["no-data"])==null?void 0:Be.call(a)])]}}),(Fe=a.footer)==null?void 0:Fe.call(a,Me.value)]}})),{}}});function pO(){const e=Qe([]);vS(()=>e.value=[]);function i(a,o){e.value[o]=a}return{refs:e,updateRef:i}}const gO=Re({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:Gt,default:"$first"},prevIcon:{type:Gt,default:"$prev"},nextIcon:{type:Gt,default:"$next"},lastIcon:{type:Gt,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...sr(),...Ft(),...Ji(),...Gi(),...gi(),...$s(),...mn({tag:"nav"}),...Dn(),...Qr({variant:"text"})},"VPagination"),$y=it()({name:"VPagination",props:gO(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,i){let{slots:a,emit:o}=i;const c=Zt(e,"modelValue"),{t:f,n:h}=Zn(),{isRtl:l}=qi(),{themeClasses:b}=$n(e),{width:S}=Jr(),w=bt(-1);ki(void 0,{scoped:!0});const{resizeRef:k}=Yr(te=>{if(!te.length)return;const{target:re,contentRect:ie}=te[0],ue=re.querySelector(".v-pagination__list > *");if(!ue)return;const Q=ie.width,pe=ue.offsetWidth+parseFloat(getComputedStyle(ue).marginRight)*2;w.value=F(Q,pe)}),I=K(()=>parseInt(e.length,10)),E=K(()=>parseInt(e.start,10)),L=K(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):w.value>=0?w.value:F(S.value,58));function F(te,re){const ie=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((te-re*ie)/re).toFixed(2))))}const z=K(()=>{if(I.value<=0||isNaN(I.value)||I.value>Number.MAX_SAFE_INTEGER)return[];if(L.value<=0)return[];if(L.value===1)return[c.value];if(I.value<=L.value)return Dr(I.value,E.value);const te=L.value%2===0,re=te?L.value/2:Math.floor(L.value/2),ie=te?re:re+1,ue=I.value-re;if(ie-c.value>=0)return[...Dr(Math.max(1,L.value-1),E.value),e.ellipsis,I.value];if(c.value-ue>=(te?1:0)){const Q=L.value-1,pe=I.value-Q+E.value;return[E.value,e.ellipsis,...Dr(Q,pe)]}else{const Q=Math.max(1,L.value-2),pe=Q===1?c.value:c.value-Math.ceil(Q/2)+E.value;return[E.value,e.ellipsis,...Dr(Q,pe),e.ellipsis,I.value]}});function B(te,re,ie){te.preventDefault(),c.value=re,ie&&o(ie,re)}const{refs:R,updateRef:Z}=pO();ki({VPaginationBtn:{color:we(()=>e.color),border:we(()=>e.border),density:we(()=>e.density),size:we(()=>e.size),variant:we(()=>e.variant),rounded:we(()=>e.rounded),elevation:we(()=>e.elevation)}});const Y=K(()=>z.value.map((te,re)=>{const ie=ue=>Z(ue,re);if(typeof te=="string")return{isActive:!1,key:`ellipsis-${re}`,page:te,props:{ref:ie,ellipsis:!0,icon:!0,disabled:!0}};{const ue=te===c.value;return{isActive:ue,key:te,page:h(te),props:{ref:ie,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:ue?e.activeColor:e.color,"aria-current":ue,"aria-label":f(ue?e.currentPageAriaLabel:e.pageAriaLabel,te),onClick:Q=>B(Q,te)}}}})),J=K(()=>{const te=!!e.disabled||c.value<=E.value,re=!!e.disabled||c.value>=E.value+I.value-1;return{first:e.showFirstLastPage?{icon:l.value?e.lastIcon:e.firstIcon,onClick:ie=>B(ie,E.value,"first"),disabled:te,"aria-label":f(e.firstAriaLabel),"aria-disabled":te}:void 0,prev:{icon:l.value?e.nextIcon:e.prevIcon,onClick:ie=>B(ie,c.value-1,"prev"),disabled:te,"aria-label":f(e.previousAriaLabel),"aria-disabled":te},next:{icon:l.value?e.prevIcon:e.nextIcon,onClick:ie=>B(ie,c.value+1,"next"),disabled:re,"aria-label":f(e.nextAriaLabel),"aria-disabled":re},last:e.showFirstLastPage?{icon:l.value?e.firstIcon:e.lastIcon,onClick:ie=>B(ie,E.value+I.value-1,"last"),disabled:re,"aria-label":f(e.lastAriaLabel),"aria-disabled":re}:void 0}});function ae(){var re;const te=c.value-E.value;(re=R.value[te])==null||re.$el.focus()}function he(te){te.key===uy.left&&!e.disabled&&c.value>Number(e.start)?(c.value=c.value-1,kn(ae)):te.key===uy.right&&!e.disabled&&c.value<E.value+I.value-1&&(c.value=c.value+1,kn(ae))}return ct(()=>V(e.tag,{ref:k,class:st(["v-pagination",b.value,e.class]),style:St(e.style),role:"navigation","aria-label":f(e.ariaLabel),onKeydown:he,"data-test":"v-pagination-root"},{default:()=>[q("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&q("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(J.value.first):V(gn,nt({_as:"VPaginationBtn"},J.value.first),null)]),q("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(J.value.prev):V(gn,nt({_as:"VPaginationBtn"},J.value.prev),null)]),Y.value.map((te,re)=>q("li",{key:te.key,class:st(["v-pagination__item",{"v-pagination__item--is-active":te.isActive}]),"data-test":"v-pagination-item"},[a.item?a.item(te):V(gn,nt({_as:"VPaginationBtn"},te.props),{default:()=>[te.page]})])),q("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(J.value.next):V(gn,nt({_as:"VPaginationBtn"},J.value.next),null)]),e.showFirstLastPage&&q("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(J.value.last):V(gn,nt({_as:"VPaginationBtn"},J.value.last),null)])])]})),{}}}),bb=Re({prevIcon:{type:Gt,default:"$prev"},nextIcon:{type:Gt,default:"$next"},firstIcon:{type:Gt,default:"$first"},lastIcon:{type:Gt,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),uf=it()({name:"VDataTableFooter",props:bb(),setup(e,i){let{slots:a}=i;const{t:o}=Zn(),{page:c,pageCount:f,startIndex:h,stopIndex:l,itemsLength:b,itemsPerPage:S,setItemsPerPage:w}=sO(),k=K(()=>e.itemsPerPageOptions.map(I=>typeof I=="number"?{value:I,title:I===-1?o("$vuetify.dataFooter.itemsPerPageAll"):String(I)}:{...I,title:isNaN(Number(I.title))?o(I.title):I.title}));return ct(()=>{var E;const I=$y.filterProps(e);return q("div",{class:"v-data-table-footer"},[(E=a.prepend)==null?void 0:E.call(a),q("div",{class:"v-data-table-footer__items-per-page"},[q("span",{"aria-label":o(e.itemsPerPageText)},[o(e.itemsPerPageText)]),V(jc,{items:k.value,modelValue:S.value,"onUpdate:modelValue":L=>w(Number(L)),density:"compact",variant:"outlined",hideDetails:!0},null)]),q("div",{class:"v-data-table-footer__info"},[q("div",null,[o(e.pageText,b.value?h.value+1:0,l.value,b.value)])]),q("div",{class:"v-data-table-footer__pagination"},[V($y,nt({modelValue:c.value,"onUpdate:modelValue":L=>c.value=L,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:f.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},I),null)])])}),{}}}),cf=GM({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,indent:[Number,String],empty:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,i)=>{let{slots:a}=i;const o=e.tag??"td",c=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return V(o,{class:st(["v-data-table__td",{"v-data-table-column--fixed":c==="start","v-data-table-column--fixed-end":c==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap,"v-data-table-column--empty":e.empty},`v-data-table-column--align-${e.align}`]),style:{height:Tt(e.height),width:Tt(e.width),maxWidth:Tt(e.maxWidth),left:c==="start"?Tt(e.fixedOffset||null):void 0,right:c==="end"?Tt(e.fixedEndOffset||null):void 0,paddingInlineStart:e.indent?Tt(e.indent):void 0}},{default:()=>{var f;return[(f=a.default)==null?void 0:f.call(a)]}})}),vO=Re({headers:Array},"DataTable-header"),Q2=Symbol.for("vuetify:data-table-headers"),eI={title:"",sortable:!1},yO={...eI,width:48};function _O(){const i=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(a=>({element:a,priority:0}));return{enqueue:(a,o)=>{let c=!1;for(let f=0;f<i.length;f++)if(i[f].priority>o){i.splice(f,0,{element:a,priority:o}),c=!0;break}c||i.push({element:a,priority:o})},size:()=>i.length,count:()=>{let a=0;if(!i.length)return 0;const o=Math.floor(i[0].priority);for(let c=0;c<i.length;c++)Math.floor(i[c].priority)===o&&(a+=1);return a},dequeue:()=>i.shift()}}function Ny(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)i.push(e);else for(const a of e.children)Ny(a,i);return i}function tI(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const a of e)a.key&&i.add(a.key),a.children&&tI(a.children,i);return i}function bO(e){if(e.key){if(e.key==="data-table-group")return eI;if(["data-table-expand","data-table-select"].includes(e.key))return yO}}function xb(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(i,...e.children.map(a=>xb(a,i+1))):i}function xO(e){let i=!1;function a(f,h){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(f)if(l!=="none"&&(f.fixed=l),f.fixed===!0&&(f.fixed="start"),f.fixed===h)if(f.children)if(h==="start")for(let b=f.children.length-1;b>=0;b--)a(f.children[b],h,h);else for(let b=0;b<f.children.length;b++)a(f.children[b],h,h);else!i&&h==="start"?f.lastFixed=!0:!i&&h==="end"?f.firstFixedEnd=!0:isNaN(Number(f.width))?(`${f.key}`,void 0):f.minWidth=Math.max(Number(f.width)||0,Number(f.minWidth)||0),i=!0;else if(f.children)if(h==="start")for(let b=f.children.length-1;b>=0;b--)a(f.children[b],h);else for(let b=0;b<f.children.length;b++)a(f.children[b],h);else i=!1}for(let f=e.length-1;f>=0;f--)a(e[f],"start");for(let f=0;f<e.length;f++)a(e[f],"end");let o=0;for(let f=0;f<e.length;f++)o=nI(e[f],o);let c=0;for(let f=e.length-1;f>=0;f--)c=iI(e[f],c)}function nI(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return i;if(e.children){e.fixedOffset=i;for(const a of e.children)i=nI(a,i)}else e.fixed&&e.fixed!=="end"&&(e.fixedOffset=i,i+=parseFloat(e.width||"0")||0);return i}function iI(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return i;if(e.children){e.fixedEndOffset=i;for(const a of e.children)i=iI(a,i)}else e.fixed==="end"&&(e.fixedEndOffset=i,i+=parseFloat(e.width||"0")||0);return i}function wO(e,i){const a=[];let o=0;const c=_O(e);for(;c.size()>0;){let h=c.count();const l=[];let b=1;for(;h>0;){const{element:S,priority:w}=c.dequeue(),k=i-o-xb(S);if(l.push({...S,rowspan:k??1,colspan:S.children?Ny(S).length:1}),S.children)for(const I of S.children){const E=w%1+b/Math.pow(10,o+2);c.enqueue(I,o+k+E)}b+=1,h-=1}o+=1,a.push(l)}return{columns:e.map(h=>Ny(h)).flat(),headers:a}}function aI(e){const i=[];for(const a of e){const o={...bO(a),...a},c=o.key??(typeof o.value=="string"?o.value:null),f=o.value??c??null,h={...o,key:c,value:f,sortable:o.sortable??(o.key!=null||!!o.sort),children:o.children?aI(o.children):void 0};i.push(h)}return i}function wb(e,i){const a=Qe([]),o=Qe([]),c=Qe({}),f=Qe({}),h=Qe({});pi(()=>{var F,z,B;const S=(e.headers||Object.keys(e.items[0]??{}).map(R=>({key:R,title:Fs(R)}))).slice(),w=tI(S);(F=i==null?void 0:i.groupBy)!=null&&F.value.length&&!w.has("data-table-group")&&S.unshift({key:"data-table-group",title:"Group"}),(z=i==null?void 0:i.showSelect)!=null&&z.value&&!w.has("data-table-select")&&S.unshift({key:"data-table-select"}),(B=i==null?void 0:i.showExpand)!=null&&B.value&&!w.has("data-table-expand")&&S.push({key:"data-table-expand"});const k=aI(S);xO(k);const I=Math.max(...k.map(R=>xb(R)))+1,E=wO(k,I);a.value=E.headers,o.value=E.columns;const L=E.headers.flat(1);for(const R of L)R.key&&(R.sortable&&(R.sort&&(c.value[R.key]=R.sort),R.sortRaw&&(f.value[R.key]=R.sortRaw)),R.filter&&(h.value[R.key]=R.filter))});const l={headers:a,columns:o,sortFunctions:c,sortRawFunctions:f,filterFunctions:h};return Jn(Q2,l),l}function ig(){const e=vn(Q2);if(!e)throw new Error("Missing headers!");return e}const rI=Re({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:Gt,default:"$sortAsc"},sortDescIcon:{type:Gt,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...Su(),...Rp()},"VDataTableHeaders"),yu=it()({name:"VDataTableHeaders",props:rI(),setup(e,i){let{slots:a}=i;const{t:o}=Zn(),{toggleSort:c,sortBy:f,isSorted:h}=J2(),{someSelected:l,allSelected:b,selectAll:S,showSelectAll:w}=eg(),{columns:k,headers:I}=ig(),{loaderClasses:E}=_f(e);function L(re,ie){if(!(e.sticky||e.fixedHeader)&&!re.fixed)return;const ue=typeof re.fixed=="string"?re.fixed:re.fixed?"start":"none";return{position:"sticky",left:ue==="start"?Tt(re.fixedOffset):void 0,right:ue==="end"?Tt(re.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${ie})`:void 0}}function F(re,ie){re.key==="Enter"&&!e.disableSort&&c(ie)}function z(re){const ie=f.value.find(ue=>ue.key===re.key);return ie?ie.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:B,backgroundColorStyles:R}=Un(()=>e.color),{displayClasses:Z,mobile:Y}=Jr(e),J=K(()=>({headers:I.value,columns:k.value,toggleSort:c,isSorted:h,sortBy:f.value,someSelected:l.value,allSelected:b.value,selectAll:S,getSortIcon:z})),ae=K(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},Z.value,E.value]),he=re=>{let{column:ie,x:ue,y:Q}=re;const pe=ie.key==="data-table-select"||ie.key==="data-table-expand",Ce=ie.key==="data-table-group"&&ie.width===0&&!ie.title,$e=nt(e.headerProps??{},ie.headerProps??{});return V(cf,nt({tag:"th",align:ie.align,class:[{"v-data-table__th--sortable":ie.sortable&&!e.disableSort,"v-data-table__th--sorted":h(ie),"v-data-table__th--fixed":ie.fixed},...ae.value],style:{width:Tt(ie.width),minWidth:Tt(ie.minWidth),maxWidth:Tt(ie.maxWidth),...L(ie,Q)},colspan:ie.colspan,rowspan:ie.rowspan,fixed:ie.fixed,nowrap:ie.nowrap,lastFixed:ie.lastFixed,firstFixedEnd:ie.firstFixedEnd,noPadding:pe,empty:Ce,tabindex:ie.sortable?0:void 0,onClick:ie.sortable?()=>c(ie):void 0,onKeydown:ie.sortable?Xe=>F(Xe,ie):void 0},$e),{default:()=>{var qe;const Xe=`header.${ie.key}`,Ye={column:ie,selectAll:S,isSorted:h,toggleSort:c,sortBy:f.value,someSelected:l.value,allSelected:b.value,getSortIcon:z};return a[Xe]?a[Xe](Ye):Ce?"":ie.key==="data-table-select"?((qe=a["header.data-table-select"])==null?void 0:qe.call(a,Ye))??(w.value&&V(Bs,{modelValue:b.value,indeterminate:l.value&&!b.value,"onUpdate:modelValue":S},null)):q("div",{class:"v-data-table-header__content"},[q("span",null,[ie.title]),ie.sortable&&!e.disableSort&&V(un,{key:"icon",class:"v-data-table-header__sort-icon",icon:z(ie)},null),e.multiSort&&h(ie)&&q("div",{key:"badge",class:st(["v-data-table-header__sort-badge",...B.value]),style:St(R.value)},[f.value.findIndex(Te=>Te.key===ie.key)+1])])}})},te=()=>{const re=K(()=>k.value.filter(ue=>(ue==null?void 0:ue.sortable)&&!e.disableSort)),ie=K(()=>{if(k.value.find(Q=>Q.key==="data-table-select")!=null)return b.value?"$checkboxOn":l.value?"$checkboxIndeterminate":"$checkboxOff"});return V(cf,nt({tag:"th",class:[...ae.value],colspan:I.value.length+1},e.headerProps),{default:()=>[q("div",{class:"v-data-table-header__content"},[V(jc,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:re.value,label:o("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>f.value=[],appendIcon:ie.value,"onClick:append":()=>S(!b.value)},{chip:ue=>{var Q;return V(Vs,{onClick:(Q=ue.item.raw)!=null&&Q.sortable?()=>c(ue.item.raw):void 0,onMousedown:pe=>{pe.preventDefault(),pe.stopPropagation()}},{default:()=>[ue.item.title,V(un,{class:st(["v-data-table__td-sort-icon",h(ue.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:z(ue.item.raw),size:"small"},null)]})}})])]})};ct(()=>Y.value?q("tr",null,[V(te,null,null)]):q(Bt,null,[a.headers?a.headers(J.value):I.value.map((re,ie)=>q("tr",null,[re.map((ue,Q)=>V(he,{column:ue,x:Q,y:ie},null))])),e.loading&&q("tr",{class:"v-data-table-progress"},[q("th",{colspan:k.value.length},[V(bf,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:a.loader})])])]))}}),sI=Re({item:{type:Object,required:!0},groupCollapseIcon:{type:Gt,default:"$tableGroupCollapse"},groupExpandIcon:{type:Gt,default:"$tableGroupExpand"}},"VDataTableGroupHeaderRow"),SO=it()({name:"VDataTableGroupHeaderRow",props:sI(),setup(e,i){let{slots:a}=i;const{isGroupOpen:o,toggleGroup:c,extractRows:f}=N2(),{isSelected:h,isSomeSelected:l,select:b}=eg(),{columns:S}=ig(),w=K(()=>f([e.item])),k=we(()=>S.value.length-(S.value.some(I=>I.key==="data-table-select")?1:0));return()=>q("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[S.value.map(I=>{var E,L;if(I.key==="data-table-group"){const F=o(e.item)?e.groupCollapseIcon:e.groupExpandIcon,z=()=>c(e.item);return((E=a["data-table-group"])==null?void 0:E.call(a,{item:e.item,count:w.value.length,props:{icon:F,onClick:z}}))??V(cf,{class:"v-data-table-group-header-row__column",colspan:k.value},{default:()=>[V(gn,{size:"small",variant:"text",icon:F,onClick:z},null),q("span",null,[e.item.value]),q("span",null,[Lt("("),w.value.length,Lt(")")])]})}else if(I.key==="data-table-select"){const F=h(w.value),z=l(w.value)&&!F,B=R=>b(w.value,R);return((L=a["data-table-select"])==null?void 0:L.call(a,{props:{modelValue:F,indeterminate:z,"onUpdate:modelValue":B}}))??V(cf,{class:"v-data-table__td--select-row",noPadding:!0},{default:()=>[V(Bs,{modelValue:F,indeterminate:z,"onUpdate:modelValue":B},null)]})}return""})])}}),oI=Re({index:Number,item:Object,cellProps:[Object,Function],collapseIcon:{type:Gt,default:"$collapse"},expandIcon:{type:Gt,default:"$expand"},onClick:pa(),onContextmenu:pa(),onDblclick:pa(),...Su()},"VDataTableRow"),Sb=it()({name:"VDataTableRow",props:oI(),setup(e,i){let{slots:a}=i;const{displayClasses:o,mobile:c}=Jr(e,"v-data-table__tr"),{isSelected:f,toggleSelect:h,someSelected:l,allSelected:b,selectAll:S}=eg(),{isExpanded:w,toggleExpand:k}=O2(),{toggleSort:I,sortBy:E,isSorted:L}=J2(),{columns:F}=ig();ct(()=>q("tr",{class:st(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},o.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&F.value.map((z,B)=>{const R=e.item,Z=`item.${z.key}`,Y=`header.${z.key}`,J={index:e.index,item:R.raw,internalItem:R,value:mu(R.columns,z.key),column:z,isSelected:f,toggleSelect:h,isExpanded:w,toggleExpand:k},ae={column:z,selectAll:S,isSorted:L,toggleSort:I,sortBy:E.value,someSelected:l.value,allSelected:b.value,getSortIcon:()=>""},he=typeof e.cellProps=="function"?e.cellProps({index:J.index,item:J.item,internalItem:J.internalItem,value:J.value,column:z}):e.cellProps,te=typeof z.cellProps=="function"?z.cellProps({index:J.index,item:J.item,internalItem:J.internalItem,value:J.value}):z.cellProps,re=z.key==="data-table-select"||z.key==="data-table-expand",ie=z.key==="data-table-group"&&z.width===0&&!z.title;return V(cf,nt({align:z.align,indent:z.intent,class:{"v-data-table__td--expanded-row":z.key==="data-table-expand","v-data-table__td--select-row":z.key==="data-table-select"},fixed:z.fixed,fixedOffset:z.fixedOffset,fixedEndOffset:z.fixedEndOffset,lastFixed:z.lastFixed,firstFixedEnd:z.firstFixedEnd,maxWidth:c.value?void 0:z.maxWidth,noPadding:re,empty:ie,nowrap:z.nowrap,width:c.value?void 0:z.width},he,te),{default:()=>{var Q,pe,Ce,$e;if(z.key==="data-table-select")return((Q=a["item.data-table-select"])==null?void 0:Q.call(a,{...J,props:{disabled:!R.selectable,modelValue:f([R]),onClick:Sh(()=>h(R),["stop"])}}))??V(Bs,{disabled:!R.selectable,modelValue:f([R]),onClick:Sh(Xe=>h(R,e.index,Xe),["stop"])},null);if(z.key==="data-table-expand")return((pe=a["item.data-table-expand"])==null?void 0:pe.call(a,{...J,props:{icon:w(R)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:Sh(()=>k(R),["stop"])}}))??V(gn,{icon:w(R)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:Sh(()=>k(R),["stop"])},null);if(a[Z]&&!c.value)return a[Z](J);const ue=Nn(J.value);return c.value?q(Bt,null,[q("div",{class:"v-data-table__td-title"},[((Ce=a[Y])==null?void 0:Ce.call(a,ae))??z.title]),q("div",{class:"v-data-table__td-value"},[(($e=a[Z])==null?void 0:$e.call(a,J))??ue])]):ue}})})]))}}),lI=Re({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...pr(oI(),["collapseIcon","expandIcon"]),...pr(sI(),["groupCollapseIcon","groupExpandIcon"]),...Su()},"VDataTableRows"),_u=it()({name:"VDataTableRows",inheritAttrs:!1,props:lI(),setup(e,i){let{attrs:a,slots:o}=i;const{columns:c}=ig(),{expandOnClick:f,toggleExpand:h,isExpanded:l}=O2(),{isSelected:b,toggleSelect:S}=eg(),{toggleGroup:w,isGroupOpen:k}=N2(),{t:I}=Zn(),{mobile:E}=Jr(e);return ct(()=>{var F,z;const L=pr(e,["groupCollapseIcon","groupExpandIcon"]);return e.loading&&(!e.items.length||o.loading)?q("tr",{class:"v-data-table-rows-loading",key:"loading"},[q("td",{colspan:c.value.length},[((F=o.loading)==null?void 0:F.call(o))??I(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?q("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[q("td",{colspan:c.value.length},[((z=o["no-data"])==null?void 0:z.call(o))??I(e.noDataText)])]):q(Bt,null,[e.items.map((B,R)=>{var J,ae;if(B.type==="group"){const he={index:R,item:B,columns:c.value,isExpanded:l,toggleExpand:h,isSelected:b,toggleSelect:S,toggleGroup:w,isGroupOpen:k};return o["group-header"]?o["group-header"](he):V(SO,nt({key:`group-header_${B.id}`,item:B},ww(a,":groupHeader",()=>he),L),o)}if(B.type==="group-summary"){const he={index:R,item:B,columns:c.value,toggleGroup:w};return((J=o["group-summary"])==null?void 0:J.call(o,he))??""}const Z={index:R,item:B.raw,internalItem:B,columns:c.value,isExpanded:l,toggleExpand:h,isSelected:b,toggleSelect:S},Y={...Z,props:nt({key:`item_${B.key??B.index}`,onClick:f.value?()=>{h(B)}:void 0,index:R,item:B,cellProps:e.cellProps,collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,mobile:E.value},ww(a,":row",()=>Z),typeof e.rowProps=="function"?e.rowProps({item:Z.item,index:Z.index,internalItem:Z.internalItem}):e.rowProps)};return q(Bt,{key:Y.props.key},[o.item?o.item(Y):V(Sb,Y.props,o),l(B)&&((ae=o["expanded-row"])==null?void 0:ae.call(o,Z))])})])}),{}}}),uI=Re({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...Ft(),...Ji(),...mn(),...Dn()},"VTable"),bu=it()({name:"VTable",props:uI(),setup(e,i){let{slots:a,emit:o}=i;const{themeClasses:c}=$n(e),{densityClasses:f}=Ga(e);return ct(()=>{const h={VCheckboxBtn:{density:e.density}};return V(e.tag,{class:st(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!a.top,"v-table--has-bottom":!!a.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},c.value,f.value,e.class]),style:St(e.style)},{default:()=>{var l,b;return[(l=a.top)==null?void 0:l.call(a),V(pn,{defaults:h},{default:()=>{var S;return[a.default?q("div",{class:"v-table__wrapper",style:{height:Tt(e.height)}},[q("table",null,[a.default()])]):(S=a.wrapper)==null?void 0:S.call(a)]}}),(b=a.bottom)==null?void 0:b.call(a)]}})}),{}}}),kO=Re({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function CO(e,i,a,o){const c=e.returnObject?i:Ri(i,e.itemValue),f=Ri(i,e.itemSelectable,!0),h=o.reduce((l,b)=>(b.key!=null&&(l[b.key]=Ri(i,b.value)),l),{});return{type:"item",key:e.returnObject?Ri(i,e.itemValue):c,index:a,value:c,selectable:f,columns:h,raw:i}}function IO(e,i,a){return i.map((o,c)=>CO(e,o,c,a))}function kb(e,i){return{items:K(()=>IO(e,e.items,i.value))}}const Cb=Re({...lI(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...R2(),...mb(),...vO(),...kO(),...Z2(),...X2(),...rI(),...uI()},"DataTable"),PO=Re({...gb(),...Cb(),...od(),...bb()},"VDataTable"),TO=it()({name:"VDataTable",props:PO(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,i){let{attrs:a,slots:o}=i;const{groupBy:c}=pb(e),{sortBy:f,multiSort:h,mustSort:l}=tg(e),{page:b,itemsPerPage:S}=vb(e),{disableSort:w}=wu(e),{columns:k,headers:I,sortFunctions:E,sortRawFunctions:L,filterFunctions:F}=wb(e,{groupBy:c,showSelect:we(()=>e.showSelect),showExpand:we(()=>e.showExpand)}),{items:z}=kb(e,k),B=we(()=>e.search),{filteredItems:R}=ld(e,z,B,{transform:ge=>ge.columns,customKeyFilter:F}),{toggleSort:Z}=ng({sortBy:f,multiSort:h,mustSort:l,page:b}),{sortByWithGroups:Y,opened:J,extractRows:ae,isGroupOpen:he,toggleGroup:te}=Xp({groupBy:c,sortBy:f,disableSort:w}),{sortedItems:re}=_b(e,R,Y,{transform:ge=>({...ge.raw,...ge.columns}),sortFunctions:E,sortRawFunctions:L}),{flatItems:ie}=Yp(re,c,J,()=>!!o["group-summary"]),ue=K(()=>ie.value.length),{startIndex:Q,stopIndex:pe,pageCount:Ce,setItemsPerPage:$e}=yb({page:b,itemsPerPage:S,itemsLength:ue}),{paginatedItems:Xe}=q2({items:ie,startIndex:Q,stopIndex:pe,itemsPerPage:S}),Ye=K(()=>ae(Xe.value)),{isSelected:qe,select:Te,selectAll:Me,toggleSelect:Ve,someSelected:Fe,allSelected:Be}=Qp(e,{allItems:z,currentPage:Ye}),{isExpanded:lt,toggleExpand:vt}=Kp(e);Jp({page:b,itemsPerPage:S,sortBy:f,groupBy:c,search:B}),ki({VDataTableRows:{hideNoData:we(()=>e.hideNoData),noDataText:we(()=>e.noDataText),loading:we(()=>e.loading),loadingText:we(()=>e.loadingText)}});const kt=K(()=>({page:b.value,itemsPerPage:S.value,sortBy:f.value,pageCount:Ce.value,toggleSort:Z,setItemsPerPage:$e,someSelected:Fe.value,allSelected:Be.value,isSelected:qe,select:Te,selectAll:Me,toggleSelect:Ve,isExpanded:lt,toggleExpand:vt,isGroupOpen:he,toggleGroup:te,items:Ye.value.map(ge=>ge.raw),internalItems:Ye.value,groupedItems:Xe.value,columns:k.value,headers:I.value}));return ct(()=>{const ge=uf.filterProps(e),je=yu.filterProps(e),rt=_u.filterProps(e),ft=bu.filterProps(e);return V(bu,nt({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},ft,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var Rt;return(Rt=o.top)==null?void 0:Rt.call(o,kt.value)},default:()=>{var Rt,fe,se,Se,xe,le;return o.default?o.default(kt.value):q(Bt,null,[(Rt=o.colgroup)==null?void 0:Rt.call(o,kt.value),!e.hideDefaultHeader&&q("thead",{key:"thead"},[V(yu,je,o)]),(fe=o.thead)==null?void 0:fe.call(o,kt.value),!e.hideDefaultBody&&q("tbody",null,[(se=o["body.prepend"])==null?void 0:se.call(o,kt.value),o.body?o.body(kt.value):V(_u,nt(a,rt,{items:Xe.value}),o),(Se=o["body.append"])==null?void 0:Se.call(o,kt.value)]),(xe=o.tbody)==null?void 0:xe.call(o,kt.value),(le=o.tfoot)==null?void 0:le.call(o,kt.value)])},bottom:()=>o.bottom?o.bottom(kt.value):!e.hideDefaultFooter&&q(Bt,null,[V(Ha,null,null),V(uf,ge,{prepend:o["footer.prepend"]})])})}),{}}}),AO=Re({...Wn(Cb(),["hideDefaultFooter"]),...mb(),...k2(),...od()},"VDataTableVirtual"),EO=it()({name:"VDataTableVirtual",props:AO(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,i){let{attrs:a,slots:o}=i;const{groupBy:c}=pb(e),{sortBy:f,multiSort:h,mustSort:l}=tg(e),{disableSort:b}=wu(e),{columns:S,headers:w,filterFunctions:k,sortFunctions:I,sortRawFunctions:E}=wb(e,{groupBy:c,showSelect:we(()=>e.showSelect),showExpand:we(()=>e.showExpand)}),{items:L}=kb(e,S),F=we(()=>e.search),{filteredItems:z}=ld(e,L,F,{transform:ft=>ft.columns,customKeyFilter:k}),{toggleSort:B}=ng({sortBy:f,multiSort:h,mustSort:l}),{sortByWithGroups:R,opened:Z,extractRows:Y,isGroupOpen:J,toggleGroup:ae}=Xp({groupBy:c,sortBy:f,disableSort:b}),{sortedItems:he}=_b(e,z,R,{transform:ft=>({...ft.raw,...ft.columns}),sortFunctions:I,sortRawFunctions:E}),{flatItems:te}=Yp(he,c,Z,()=>!!o["group-summary"]),re=K(()=>Y(te.value)),{isSelected:ie,select:ue,selectAll:Q,toggleSelect:pe,someSelected:Ce,allSelected:$e}=Qp(e,{allItems:re,currentPage:re}),{isExpanded:Xe,toggleExpand:Ye}=Kp(e),{containerRef:qe,markerRef:Te,paddingTop:Me,paddingBottom:Ve,computedItems:Fe,handleItemResize:Be,handleScroll:lt,handleScrollend:vt,calculateVisibleItems:kt,scrollToIndex:ge}=C2(e,te),je=K(()=>Fe.value.map(ft=>ft.raw));Jp({sortBy:f,page:bt(1),itemsPerPage:bt(-1),groupBy:c,search:F}),ki({VDataTableRows:{hideNoData:we(()=>e.hideNoData),noDataText:we(()=>e.noDataText),loading:we(()=>e.loading),loadingText:we(()=>e.loadingText)}});const rt=K(()=>({sortBy:f.value,toggleSort:B,someSelected:Ce.value,allSelected:$e.value,isSelected:ie,select:ue,selectAll:Q,toggleSelect:pe,isExpanded:Xe,toggleExpand:Ye,isGroupOpen:J,toggleGroup:ae,items:re.value.map(ft=>ft.raw),internalItems:re.value,groupedItems:te.value,columns:S.value,headers:w.value}));return ct(()=>{const ft=yu.filterProps(e),Rt=_u.filterProps(e),fe=bu.filterProps(e);return V(bu,nt({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},fe,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var se;return(se=o.top)==null?void 0:se.call(o,rt.value)},wrapper:()=>{var se,Se,xe,le,Ke,ht;return q("div",{ref:qe,onScrollPassive:lt,onScrollend:vt,class:"v-table__wrapper",style:{height:Tt(e.height)}},[q("table",null,[(se=o.colgroup)==null?void 0:se.call(o,rt.value),!e.hideDefaultHeader&&q("thead",{key:"thead"},[V(yu,ft,o)]),(Se=o.thead)==null?void 0:Se.call(o,rt.value),!e.hideDefaultBody&&q("tbody",{key:"tbody"},[q("tr",{ref:Te,style:{height:Tt(Me.value),border:0}},[q("td",{colspan:S.value.length,style:{height:0,border:0}},null)]),(xe=o["body.prepend"])==null?void 0:xe.call(o,rt.value),V(_u,nt(a,Rt,{items:je.value}),{...o,item:et=>V(S2,{key:et.internalItem.index,renderless:!0,"onUpdate:height":tt=>Be(et.internalItem.index,tt)},{default:tt=>{var yt;let{itemRef:dt}=tt;return((yt=o.item)==null?void 0:yt.call(o,{...et,itemRef:dt}))??V(Sb,nt(et.props,{ref:dt,key:et.internalItem.index,index:et.internalItem.index}),o)}})}),(le=o["body.append"])==null?void 0:le.call(o,rt.value),q("tr",{style:{height:Tt(Ve.value),border:0}},[q("td",{colspan:S.value.length,style:{height:0,border:0}},null)])]),(Ke=o.tbody)==null?void 0:Ke.call(o,rt.value),(ht=o.tfoot)==null?void 0:ht.call(o,rt.value)])])},bottom:()=>{var se;return(se=o.bottom)==null?void 0:se.call(o,rt.value)}})}),{calculateVisibleItems:kt,scrollToIndex:ge}}}),MO=Re({itemsLength:{type:[Number,String],required:!0},...gb(),...Cb(),...bb()},"VDataTableServer"),DO=it()({name:"VDataTableServer",props:MO(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,i){let{attrs:a,slots:o}=i;const{groupBy:c}=pb(e),{sortBy:f,multiSort:h,mustSort:l}=tg(e),{page:b,itemsPerPage:S}=vb(e),{disableSort:w}=wu(e),k=K(()=>parseInt(e.itemsLength,10)),{columns:I,headers:E}=wb(e,{groupBy:c,showSelect:we(()=>e.showSelect),showExpand:we(()=>e.showExpand)}),{items:L}=kb(e,I),{toggleSort:F}=ng({sortBy:f,multiSort:h,mustSort:l,page:b}),{opened:z,isGroupOpen:B,toggleGroup:R,extractRows:Z}=Xp({groupBy:c,sortBy:f,disableSort:w}),{pageCount:Y,setItemsPerPage:J}=yb({page:b,itemsPerPage:S,itemsLength:k}),{flatItems:ae}=Yp(L,c,z,()=>!!o["group-summary"]),{isSelected:he,select:te,selectAll:re,toggleSelect:ie,someSelected:ue,allSelected:Q}=Qp(e,{allItems:L,currentPage:L}),{isExpanded:pe,toggleExpand:Ce}=Kp(e),$e=K(()=>Z(L.value));Jp({page:b,itemsPerPage:S,sortBy:f,groupBy:c,search:we(()=>e.search)}),Jn("v-data-table",{toggleSort:F,sortBy:f}),ki({VDataTableRows:{hideNoData:we(()=>e.hideNoData),noDataText:we(()=>e.noDataText),loading:we(()=>e.loading),loadingText:we(()=>e.loadingText)}});const Xe=K(()=>({page:b.value,itemsPerPage:S.value,sortBy:f.value,pageCount:Y.value,toggleSort:F,setItemsPerPage:J,someSelected:ue.value,allSelected:Q.value,isSelected:he,select:te,selectAll:re,toggleSelect:ie,isExpanded:pe,toggleExpand:Ce,isGroupOpen:B,toggleGroup:R,items:$e.value.map(Ye=>Ye.raw),internalItems:$e.value,groupedItems:ae.value,columns:I.value,headers:E.value}));ct(()=>{const Ye=uf.filterProps(e),qe=yu.filterProps(e),Te=_u.filterProps(e),Me=bu.filterProps(e);return V(bu,nt({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Me,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var Ve;return(Ve=o.top)==null?void 0:Ve.call(o,Xe.value)},default:()=>{var Ve,Fe,Be,lt,vt,kt;return o.default?o.default(Xe.value):q(Bt,null,[(Ve=o.colgroup)==null?void 0:Ve.call(o,Xe.value),!e.hideDefaultHeader&&q("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[V(yu,qe,o)]),(Fe=o.thead)==null?void 0:Fe.call(o,Xe.value),!e.hideDefaultBody&&q("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(Be=o["body.prepend"])==null?void 0:Be.call(o,Xe.value),o.body?o.body(Xe.value):V(_u,nt(a,Te,{items:ae.value}),o),(lt=o["body.append"])==null?void 0:lt.call(o,Xe.value)]),(vt=o.tbody)==null?void 0:vt.call(o,Xe.value),(kt=o.tfoot)==null?void 0:kt.call(o,Xe.value)])},bottom:()=>o.bottom?o.bottom(Xe.value):!e.hideDefaultFooter&&q(Bt,null,[V(Ha,null,null),V(uf,Ye,{prepend:o["footer.prepend"]})])})})}}),cI=Re({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:Gt,default:"$next"},prevIcon:{type:Gt,default:"$prev"},modeIcon:{type:Gt,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),jy=it()({name:"VDatePickerControls",props:cI(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,i){let{emit:a}=i;const{t:o}=Zn(),c=K(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),f=K(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),h=K(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),l=K(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function b(){a("click:prev")}function S(){a("click:next")}function w(){a("click:year")}function k(){a("click:month")}return ct(()=>q("div",{class:st(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":Tt(e.controlHeight)}},[V(gn,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:c.value,text:e.text,variant:"text",rounded:!0,onClick:k},null),V(gn,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:f.value,density:"comfortable",icon:e.modeIcon,variant:"text","aria-label":o("$vuetify.datePicker.ariaLabel.selectYear"),onClick:w},null),V(rf,null,null),q("div",{class:"v-date-picker-controls__month"},[V(gn,{"data-testid":"prev-month",disabled:h.value,density:"comfortable",icon:e.prevIcon,variant:"text","aria-label":o("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:b},null),V(gn,{"data-testid":"next-month",disabled:l.value,icon:e.nextIcon,density:"comfortable",variant:"text","aria-label":o("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:S},null)])])),{}}}),VO=Re({appendIcon:Gt,color:String,header:String,transition:String,onClick:pa()},"VDatePickerHeader"),Uy=it()({name:"VDatePickerHeader",props:VO(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,i){let{emit:a,slots:o}=i;const{backgroundColorClasses:c,backgroundColorStyles:f}=Un(()=>e.color);function h(){a("click")}function l(){a("click:append")}return ct(()=>{const b=!!(o.default||e.header),S=!!(o.append||e.appendIcon);return q("div",{class:st(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},c.value]),style:St(f.value),onClick:h},[o.prepend&&q("div",{key:"prepend",class:"v-date-picker-header__prepend"},[o.prepend()]),b&&V(Ua,{key:"content",name:e.transition},{default:()=>{var w;return[q("div",{key:e.header,class:"v-date-picker-header__content"},[((w=o.default)==null?void 0:w.call(o))??e.header])]}}),S&&q("div",{class:"v-date-picker-header__append"},[o.append?V(pn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var w;return[(w=o.append)==null?void 0:w.call(o)]}}):V(gn,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:l},null)])])}),{}}}),zO=Re({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},firstDayOfYear:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function LO(e){const i=vf(),a=Zt(e,"modelValue",[],E=>Si(E).map(L=>i.date(L))),o=K(()=>e.displayValue?i.date(e.displayValue):a.value.length>0?i.date(a.value[0]):e.min?i.date(e.min):Array.isArray(e.allowedDates)?i.date(e.allowedDates[0]):i.date()),c=Zt(e,"year",void 0,E=>{const L=E!=null?Number(E):i.getYear(o.value);return i.startOfYear(i.setYear(i.date(),L))},E=>i.getYear(E)),f=Zt(e,"month",void 0,E=>{const L=E!=null?Number(E):i.getMonth(o.value),F=i.setYear(i.startOfMonth(i.date()),i.getYear(c.value));return i.setMonth(F,L)},E=>i.getMonth(E)),h=K(()=>{const E=i.toJsDate(i.startOfWeek(i.date(),e.firstDayOfWeek)).getDay();return i.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((L,F)=>e.weekdays.includes((F+E)%7))}),l=K(()=>{const E=i.getWeekArray(f.value,e.firstDayOfWeek),L=E.flat(),F=42;if(e.weeksInMonth==="static"&&L.length<F){const z=L[L.length-1];let B=[];for(let R=1;R<=F-L.length;R++)B.push(i.addDays(z,R)),R%7===0&&(E.push(B),B=[])}return E});function b(E,L){return E.filter(F=>e.weekdays.includes(i.toJsDate(F).getDay())).map((F,z)=>{const B=i.toISO(F),R=!i.isSameMonth(F,f.value),Z=i.isSameDay(F,i.startOfMonth(f.value)),Y=i.isSameDay(F,i.endOfMonth(f.value)),J=i.isSameDay(F,f.value),ae=e.weekdays.length;return{date:F,formatted:i.format(F,"keyboardDate"),isAdjacent:R,isDisabled:I(F),isEnd:Y,isHidden:R&&!e.showAdjacentMonths,isSame:J,isSelected:a.value.some(he=>i.isSameDay(F,he)),isStart:Z,isToday:i.isSameDay(F,L),isWeekEnd:z%ae===ae-1,isWeekStart:z%ae===0,isoDate:B,localized:i.format(F,"dayOfMonth"),month:i.getMonth(F),year:i.getYear(F)}})}const S=K(()=>{const E=i.startOfWeek(o.value,e.firstDayOfWeek),L=[];for(let z=0;z<=6;z++)L.push(i.addDays(E,z));const F=i.date();return b(L,F)}),w=K(()=>{const E=l.value.flat(),L=i.date();return b(E,L)}),k=K(()=>l.value.map(E=>E.length?i.getWeek(E[0],e.firstDayOfWeek,e.firstDayOfYear):null));function I(E){if(e.disabled)return!0;const L=i.date(E);return e.min&&i.isBefore(i.endOfDay(L),i.date(e.min))||e.max&&i.isAfter(L,i.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(F=>i.isSameDay(i.date(F),L)):typeof e.allowedDates=="function"?!e.allowedDates(L):!1}return{displayValue:o,daysInMonth:w,daysInWeek:S,genDays:b,model:a,weeksInMonth:l,weekdayLabels:h,weekNumbers:k}}const dI=Re({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...Wn(zO(),["displayValue"])},"VDatePickerMonth"),Hy=it()({name:"VDatePickerMonth",props:dI(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,i){let{emit:a,slots:o}=i;const c=Qe(),{t:f}=Zn(),{daysInMonth:h,model:l,weekNumbers:b,weekdayLabels:S}=LO(e),w=vf(),k=bt(),I=bt(),E=bt(!1),L=we(()=>E.value?e.reverseTransition:e.transition);e.multiple==="range"&&l.value.length>0&&(k.value=l.value[0],l.value.length>1&&(I.value=l.value[l.value.length-1]));const F=K(()=>{const Y=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return l.value.length>=Y});xt(h,(Y,J)=>{J&&(E.value=w.isBefore(Y[0].date,J[0].date))});function z(Y){const J=w.startOfDay(Y);if(l.value.length===0?k.value=void 0:l.value.length===1&&(k.value=l.value[0],I.value=void 0),!k.value)k.value=J,l.value=[k.value];else if(I.value)k.value=Y,I.value=void 0,l.value=[k.value];else{if(w.isSameDay(J,k.value)){k.value=void 0,l.value=[];return}else w.isBefore(J,k.value)?(I.value=w.endOfDay(k.value),k.value=J):I.value=w.endOfDay(J);l.value=jD(w,k.value,I.value)}}function B(Y){const J=w.format(Y.date,"fullDateWithWeekday"),ae=Y.isToday?"currentDate":"selectDate";return f(`$vuetify.datePicker.ariaLabel.${ae}`,J)}function R(Y){const J=l.value.findIndex(ae=>w.isSameDay(ae,Y));if(J===-1)l.value=[...l.value,Y];else{const ae=[...l.value];ae.splice(J,1),l.value=ae}}function Z(Y){e.multiple==="range"?z(Y):e.multiple?R(Y):l.value=[Y]}ct(()=>q("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&q("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&q("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[Lt(" ")]),b.value.map(Y=>q("div",{class:st(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[Y]))]),V(Ua,{name:L.value},{default:()=>{var Y;return[q("div",{ref:c,key:(Y=h.value[0].date)==null?void 0:Y.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&S.value.map(J=>q("div",{class:st(["v-date-picker-month__day","v-date-picker-month__weekday"])},[J])),h.value.map((J,ae)=>{var te;const he={props:{class:"v-date-picker-month__day-btn",color:J.isSelected||J.isToday?e.color:void 0,disabled:J.isDisabled,icon:!0,ripple:!1,text:J.localized,variant:J.isSelected?"flat":J.isToday?"outlined":"text","aria-label":B(J),"aria-current":J.isToday?"date":void 0,onClick:()=>Z(J.date)},item:J,i:ae};return F.value&&!J.isSelected&&(J.isDisabled=!0),q("div",{class:st(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":J.isAdjacent,"v-date-picker-month__day--hide-adjacent":J.isHidden,"v-date-picker-month__day--selected":J.isSelected,"v-date-picker-month__day--week-end":J.isWeekEnd,"v-date-picker-month__day--week-start":J.isWeekStart}]),"data-v-date":J.isDisabled?void 0:J.isoDate},[(e.showAdjacentMonths||!J.isAdjacent)&&(((te=o.day)==null?void 0:te.call(o,he))??V(gn,he.props,null))])})])]}})]))}}),hI=Re({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),qy=it()({name:"VDatePickerMonths",props:hI(),emits:{"update:modelValue":e=>!0},setup(e,i){let{emit:a,slots:o}=i;const c=vf(),f=Zt(e,"modelValue"),h=K(()=>{let b=c.startOfYear(c.date());return e.year&&(b=c.setYear(b,e.year)),Dr(12).map(S=>{const w=c.format(b,"monthShort"),k=c.format(b,"month"),I=!!(!l(S)||e.min&&c.isAfter(c.startOfMonth(c.date(e.min)),b)||e.max&&c.isAfter(b,c.startOfMonth(c.date(e.max))));return b=c.getNextMonth(b),{isDisabled:I,text:w,label:k,value:S}})});pi(()=>{f.value=f.value??c.getMonth(c.date())});function l(b){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(b):typeof e.allowedMonths=="function"?e.allowedMonths(b):!0}return ct(()=>q("div",{class:"v-date-picker-months",style:{height:Tt(e.height)}},[q("div",{class:"v-date-picker-months__content"},[h.value.map((b,S)=>{var I;const w={active:f.value===S,ariaLabel:b.label,color:f.value===S?e.color:void 0,disabled:b.isDisabled,rounded:!0,text:b.text,variant:f.value===b.value?"flat":"text",onClick:()=>k(S)};function k(E){if(f.value===E){a("update:modelValue",f.value);return}f.value=E}return((I=o.month)==null?void 0:I.call(o,{month:b,i:S,props:w}))??V(gn,nt({key:"month"},w),null)})])])),{}}}),fI=Re({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),Gy=it()({name:"VDatePickerYears",props:fI(),directives:{vIntersect:ds},emits:{"update:modelValue":e=>!0},setup(e,i){let{emit:a,slots:o}=i;const c=vf(),f=Zt(e,"modelValue"),h=K(()=>{const w=c.getYear(c.date());let k=w-100,I=w+52;e.min&&(k=c.getYear(c.date(e.min))),e.max&&(I=c.getYear(c.date(e.max)));let E=c.startOfYear(c.date());return E=c.setYear(E,k),Dr(I-k+1,k).map(L=>{const F=c.format(E,"year");return E=c.setYear(E,c.getYear(E)+1),{text:F,value:L,isDisabled:!S(L)}})});pi(()=>{f.value=f.value??c.getYear(c.date())});const l=sp();function b(){var w,k;(w=l.el)==null||w.focus(),(k=l.el)==null||k.scrollIntoView({block:"center"})}function S(w){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(w):typeof e.allowedYears=="function"?e.allowedYears(w):!0}return ct(()=>yi(q("div",{class:"v-date-picker-years",style:{height:Tt(e.height)}},[q("div",{class:"v-date-picker-years__content"},[h.value.map((w,k)=>{var E;const I={ref:f.value===w.value?l:void 0,active:f.value===w.value,color:f.value===w.value?e.color:void 0,rounded:!0,text:w.text,disabled:w.isDisabled,variant:f.value===w.value?"flat":"text",onClick:()=>{if(f.value===w.value){a("update:modelValue",f.value);return}f.value=w.value}};return((E=o.year)==null?void 0:E.call(o,{year:w,i:k,props:I}))??V(gn,nt({key:"month"},I),null)})])]),[[ds,{handler:b},null,{once:!0}]])),{}}}),BO=Re({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...cI(),...dI({weeksInMonth:"static"}),...Wn(hI(),["modelValue"]),...Wn(fI(),["modelValue"]),...Zp({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),RO=it()({name:"VDatePicker",props:BO(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,i){let{emit:a,slots:o}=i;const c=vf(),{t:f}=Zn(),{rtlClasses:h}=qi(),l=Zt(e,"modelValue",void 0,qe=>Si(qe).map(Te=>c.date(Te)),qe=>e.multiple?qe:qe[0]),b=Zt(e,"viewMode"),S=K(()=>{const qe=c.date(e.min);return e.min&&c.isValid(qe)?qe:null}),w=K(()=>{const qe=c.date(e.max);return e.max&&c.isValid(qe)?qe:null}),k=K(()=>{var Me;const qe=c.date();let Te=qe;return(Me=l.value)!=null&&Me[0]?Te=c.date(l.value[0]):S.value&&c.isBefore(qe,S.value)?Te=S.value:w.value&&c.isAfter(qe,w.value)&&(Te=w.value),Te&&c.isValid(Te)?Te:qe}),I=we(()=>e.headerColor??e.color),E=Zt(e,"month"),L=K({get:()=>Number(E.value??c.getMonth(c.startOfMonth(k.value))),set:qe=>E.value=qe}),F=Zt(e,"year"),z=K({get:()=>Number(F.value??c.getYear(c.startOfYear(c.setMonth(k.value,L.value)))),set:qe=>F.value=qe}),B=bt(!1),R=K(()=>e.multiple&&l.value.length>1?f("$vuetify.datePicker.itemsSelected",l.value.length):l.value[0]&&c.isValid(l.value[0])?c.format(c.date(l.value[0]),"normalDateWithWeekday"):f(e.header)),Z=K(()=>{let qe=c.date();return qe=c.setDate(qe,1),qe=c.setMonth(qe,L.value),qe=c.setYear(qe,z.value),c.format(qe,"monthAndYear")}),Y=we(()=>`date-picker-header${B.value?"-reverse":""}-transition`),J=K(()=>{if(e.disabled)return!0;const qe=[];if(b.value!=="month")qe.push("prev","next");else{let Te=c.date();if(Te=c.startOfMonth(Te),Te=c.setMonth(Te,L.value),Te=c.setYear(Te,z.value),S.value){const Me=c.addDays(c.startOfMonth(Te),-1);c.isAfter(S.value,Me)&&qe.push("prev")}if(w.value){const Me=c.addDays(c.endOfMonth(Te),1);c.isAfter(Me,w.value)&&qe.push("next")}}return qe}),ae=K(()=>e.allowedYears||re),he=K(()=>e.allowedMonths||ie);function te(qe,Te){const Me=e.allowedDates;if(typeof Me!="function")return!0;const Ve=c.getDiff(Te,qe,"days");for(let Fe=0;Fe<Ve;Fe++)if(Me(c.addDays(qe,Fe)))return!0;return!1}function re(qe){if(typeof e.allowedDates=="function"){const Te=c.parseISO(`${qe}-01-01`);return te(Te,c.endOfYear(Te))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Te of e.allowedDates)if(c.getYear(c.date(Te))===qe)return!0;return!1}return!0}function ie(qe){if(typeof e.allowedDates=="function"){const Te=String(qe+1).padStart(2,"0"),Me=c.parseISO(`${z.value}-${Te}-01`);return te(Me,c.endOfMonth(Me))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Te of e.allowedDates)if(c.getYear(c.date(Te))===z.value&&c.getMonth(c.date(Te))===qe)return!0;return!1}return!0}function ue(){L.value<11?L.value++:(z.value++,L.value=0,Ye()),Xe()}function Q(){L.value>0?L.value--:(z.value--,L.value=11,Ye()),Xe()}function pe(){b.value="month"}function Ce(){b.value=b.value==="months"?"month":"months"}function $e(){b.value=b.value==="year"?"month":"year"}function Xe(){b.value==="months"&&Ce()}function Ye(){b.value==="year"&&$e()}return xt(l,(qe,Te)=>{const Me=Si(Te),Ve=Si(qe);if(!Ve.length)return;const Fe=c.date(Me[Me.length-1]),Be=c.date(Ve[Ve.length-1]),lt=c.getMonth(Be),vt=c.getYear(Be);lt!==L.value&&(L.value=lt,Xe()),vt!==z.value&&(z.value=vt,Ye()),B.value=c.isBefore(Fe,Be)}),ct(()=>{const qe=Jc.filterProps(e),Te=jy.filterProps(e),Me=Uy.filterProps(e),Ve=Hy.filterProps(e),Fe=Wn(qy.filterProps(e),["modelValue"]),Be=Wn(Gy.filterProps(e),["modelValue"]),lt={color:I.value,header:R.value,transition:Y.value};return V(Jc,nt(qe,{color:I.value,class:["v-date-picker",`v-date-picker--${b.value}`,{"v-date-picker--show-week":e.showWeek},h.value,e.class],style:e.style}),{title:()=>{var vt;return((vt=o.title)==null?void 0:vt.call(o))??q("div",{class:"v-date-picker__title"},[f(e.title)])},header:()=>o.header?V(pn,{defaults:{VDatePickerHeader:{...lt}}},{default:()=>{var vt;return[(vt=o.header)==null?void 0:vt.call(o,lt)]}}):V(Uy,nt({key:"header"},Me,lt,{onClick:b.value!=="month"?pe:void 0}),{prepend:o.prepend,append:o.append}),default:()=>q(Bt,null,[V(jy,nt(Te,{disabled:J.value,text:Z.value,"onClick:next":ue,"onClick:prev":Q,"onClick:month":Ce,"onClick:year":$e}),null),V(ef,{hideOnLeave:!0},{default:()=>[b.value==="months"?V(qy,nt({key:"date-picker-months"},Fe,{modelValue:L.value,"onUpdate:modelValue":[vt=>L.value=vt,Xe],min:S.value,max:w.value,year:z.value,allowedMonths:he.value}),{month:o.month}):b.value==="year"?V(Gy,nt({key:"date-picker-years"},Be,{modelValue:z.value,"onUpdate:modelValue":[vt=>z.value=vt,Ye],min:S.value,max:w.value,allowedYears:ae.value}),{year:o.year}):V(Hy,nt({key:"date-picker-month"},Ve,{modelValue:l.value,"onUpdate:modelValue":vt=>l.value=vt,month:L.value,"onUpdate:month":[vt=>L.value=vt,Xe],year:z.value,"onUpdate:year":[vt=>z.value=vt,Ye],min:S.value,max:w.value}),{day:o.day})]})]),actions:o.actions})}),{}}}),FO=Re({actionText:String,bgColor:String,color:String,icon:Gt,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...Ft(),...Oi(),...$s({size:void 0}),...Dn()},"VEmptyState"),OO=it()({name:"VEmptyState",props:FO(),emits:{"click:action":e=>!0},setup(e,i){let{emit:a,slots:o}=i;const{themeClasses:c}=$n(e),{backgroundColorClasses:f,backgroundColorStyles:h}=Un(()=>e.bgColor),{dimensionStyles:l}=$i(e),{displayClasses:b}=Jr();function S(w){a("click:action",w)}return ct(()=>{var z,B,R;const w=!!(o.actions||e.actionText),k=!!(o.headline||e.headline),I=!!(o.title||e.title),E=!!(o.text||e.text),L=!!(o.media||e.image||e.icon),F=e.size||(e.image?200:96);return q("div",{class:st(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},c.value,f.value,b.value,e.class]),style:St([h.value,l.value,e.style])},[L&&q("div",{key:"media",class:"v-empty-state__media"},[o.media?V(pn,{key:"media-defaults",defaults:{VImg:{src:e.image,height:F},VIcon:{size:F,icon:e.icon}}},{default:()=>[o.media()]}):q(Bt,null,[e.image?V(Xr,{key:"image",src:e.image,height:F},null):e.icon?V(un,{key:"icon",color:e.color,size:F,icon:e.icon},null):void 0])]),k&&q("div",{key:"headline",class:"v-empty-state__headline"},[((z=o.headline)==null?void 0:z.call(o))??e.headline]),I&&q("div",{key:"title",class:"v-empty-state__title"},[((B=o.title)==null?void 0:B.call(o))??e.title]),E&&q("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:Tt(e.textWidth)}},[((R=o.text)==null?void 0:R.call(o))??e.text]),o.default&&q("div",{key:"content",class:"v-empty-state__content"},[o.default()]),w&&q("div",{key:"actions",class:"v-empty-state__actions"},[V(pn,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>{var Z;return[((Z=o.actions)==null?void 0:Z.call(o,{props:{onClick:S}}))??V(gn,{onClick:S},null)]}})])])}),{}}}),$O=Re({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...Wn(jp({active:!0}),["location","spaced"]),...ku(),...bo(),...ps({transition:"fab-transition"})},"VFab"),NO=it()({name:"VFab",props:$O(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const o=Zt(e,"modelValue"),c=bt(56),f=Qe(),{resizeRef:h}=Yr(k=>{k.length&&(c.value=k[0].target.clientHeight)}),l=we(()=>e.app||e.absolute),b=K(()=>{var k;return l.value?((k=e.location)==null?void 0:k.split(" ").shift())??"bottom":!1}),S=K(()=>{var k;return l.value?((k=e.location)==null?void 0:k.split(" ")[1])??"end":!1});ka(()=>e.app,()=>{const k=Cu({id:e.name,order:K(()=>parseInt(e.order,10)),position:b,layoutSize:K(()=>e.layout?c.value+24:0),elementSize:K(()=>c.value+24),active:K(()=>e.app&&o.value),absolute:we(()=>e.absolute)});pi(()=>{f.value=k.layoutItemStyles.value})});const w=Qe();return ct(()=>{const k=gn.filterProps(e);return q("div",{ref:w,class:st(["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${b.value}`]:l.value,[`v-fab--${S.value}`]:l.value},e.class]),style:St([e.app?{...f.value}:{height:e.absolute?"100%":"inherit"},e.style])},[q("div",{class:"v-fab__container"},[V(Ua,{appear:e.appear,transition:e.transition},{default:()=>[yi(V(gn,nt({ref:h},k,{active:void 0,location:void 0}),a),[[ms,e.active]])]})])])}),{}}});function jO(){function e(a){var c,f;return[...((c=a.dataTransfer)==null?void 0:c.items)??[]].filter(h=>h.kind==="file").map(h=>h.webkitGetAsEntry()).filter(Boolean).length>0||[...((f=a.dataTransfer)==null?void 0:f.files)??[]].length>0}async function i(a){var f,h;const o=[],c=[...((f=a.dataTransfer)==null?void 0:f.items)??[]].filter(l=>l.kind==="file").map(l=>l.webkitGetAsEntry()).filter(Boolean);if(c.length)for(const l of c){const b=await mI(l,pI(".",l));o.push(...b.map(S=>S.file))}else o.push(...((h=a.dataTransfer)==null?void 0:h.files)??[]);return o}return{handleDrop:i,hasFilesOrFolders:e}}function mI(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((a,o)=>{e.isFile?e.file(f=>a([{file:f,path:i}]),o):e.isDirectory&&e.createReader().readEntries(async f=>{const h=[];for(const l of f)h.push(...await mI(l,pI(i,l)));a(h)})})}function pI(e,i){return i.isDirectory?`${e}/${i.name}`:e}const UO=Re({filterByType:String},"file-accept");function HO(e){const i=K(()=>e.filterByType?qO(e.filterByType):null);function a(o){if(i.value){const c=o.filter(i.value);return{accepted:c,rejected:o.filter(f=>!c.includes(f))}}return{accepted:o,rejected:[]}}return{filterAccepted:a}}function qO(e){const i=e.split(",").map(f=>f.trim().toLowerCase()),a=i.filter(f=>f.startsWith(".")),o=i.filter(f=>f.endsWith("/*")),c=i.filter(f=>!a.includes(f)&&!o.includes(f));return f=>{var b,S;const h=((b=f.name.split(".").at(-1))==null?void 0:b.toLowerCase())??"",l=((S=f.type.split("/").at(0))==null?void 0:S.toLowerCase())??"";return c.includes(f.type)||a.includes(`.${h}`)||o.includes(`${l}/*`)}}const GO=Re({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},truncateLength:{type:[Number,String],default:22},...wo({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>Si(e).every(i=>i!=null&&typeof i=="object")},...UO(),...kf({clearable:!0})},"VFileInput"),WO=it()({name:"VFileInput",inheritAttrs:!1,props:GO(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,rejected:e=>!0},setup(e,i){let{attrs:a,emit:o,slots:c}=i;const{t:f}=Zn(),{filterAccepted:h}=HO(e),l=Zt(e,"modelValue",e.modelValue,Te=>Si(Te),Te=>!e.multiple&&Array.isArray(Te)?Te[0]:Te),{isFocused:b,focus:S,blur:w}=xo(e),k=K(()=>typeof e.showSize!="boolean"?e.showSize:void 0),I=K(()=>(l.value??[]).reduce((Te,Me)=>{let{size:Ve=0}=Me;return Te+Ve},0)),E=K(()=>rw(I.value,k.value)),L=K(()=>(l.value??[]).map(Te=>{const{name:Me="",size:Ve=0}=Te,Fe=pe(Me);return e.showSize?`${Fe} (${rw(Ve,k.value)})`:Fe})),F=K(()=>{var Me;const Te=((Me=l.value)==null?void 0:Me.length)??0;return e.showSize?f(e.counterSizeString,Te,E.value):f(e.counterString,Te)}),z=Qe(),B=Qe(),R=Qe(),Z=we(()=>b.value||e.active),Y=K(()=>["plain","underlined"].includes(e.variant)),J=bt(!1),{handleDrop:ae,hasFilesOrFolders:he}=jO();function te(){var Te;R.value!==document.activeElement&&((Te=R.value)==null||Te.focus()),b.value||S()}function re(Te){var Me;(Me=R.value)==null||Me.click()}function ie(Te){o("mousedown:control",Te)}function ue(Te){var Me;(Me=R.value)==null||Me.click(),o("click:control",Te)}function Q(Te){Te.stopPropagation(),te(),kn(()=>{l.value=[],mf(e["onClick:clear"],Te)})}function pe(Te){if(Te.length<Number(e.truncateLength))return Te;const Me=Math.floor((Number(e.truncateLength)-1)/2);return`${Te.slice(0,Me)}…${Te.slice(Te.length-Me)}`}function Ce(Te){Te.preventDefault(),Te.stopImmediatePropagation(),J.value=!0}function $e(Te){Te.preventDefault(),J.value=!1}async function Xe(Te){if(Te.preventDefault(),Te.stopImmediatePropagation(),J.value=!1,!R.value||!he(Te))return;const Me=await ae(Te);qe(Me)}function Ye(Te){if(!(!Te.target||Te.repack))if(e.filterByType)qe([...Te.target.files]);else{const Me=Te.target;l.value=[...Me.files??[]]}}function qe(Te){const Me=new DataTransfer,{accepted:Ve,rejected:Fe}=h(Te);Fe.length&&o("rejected",Fe);for(const lt of Ve)Me.items.add(lt);R.value.files=Me.files,l.value=[...Me.files];const Be=new Event("change",{bubbles:!0});Be.repack=!0,R.value.dispatchEvent(Be)}return xt(l,Te=>{(!Array.isArray(Te)||!Te.length)&&R.value&&(R.value.value="")}),ct(()=>{const Te=!!(c.counter||e.counter),Me=!!(Te||c.details),[Ve,Fe]=xl(a),{modelValue:Be,...lt}=Ca.filterProps(e),vt={...yl.filterProps(e),"onClick:clear":Q},kt=a.webkitdirectory!==void 0&&a.webkitdirectory!==!1,ge=a.accept?String(a.accept):void 0,je=kt?void 0:e.filterByType??ge;return V(Ca,nt({ref:z,modelValue:e.multiple?l.value:l.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":J.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":Y.value},e.class],style:e.style,"onClick:prepend":re},Ve,lt,{centerAffix:!Y.value,focused:b.value}),{...c,default:rt=>{let{id:ft,isDisabled:Rt,isDirty:fe,isReadonly:se,isValid:Se,hasDetails:xe}=rt;return V(yl,nt({ref:B,prependIcon:e.prependIcon,onMousedown:ie,onClick:ue,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},vt,{id:ft.value,active:Z.value||fe.value,dirty:fe.value||e.dirty,disabled:Rt.value,focused:b.value,details:xe.value,error:Se.value===!1,onDragover:Ce,onDrop:Xe}),{...c,default:le=>{var et;let{props:{class:Ke,...ht}}=le;return q(Bt,null,[q("input",nt({ref:R,type:"file",accept:je,readonly:se.value,disabled:Rt.value,multiple:e.multiple,name:e.name,onClick:tt=>{tt.stopPropagation(),se.value&&tt.preventDefault(),te()},onChange:Ye,onDragleave:$e,onFocus:te,onBlur:w},ht,Fe),null),q("div",{class:st(Ke)},[!!((et=l.value)!=null&&et.length)&&!e.hideInput&&(c.selection?c.selection({fileNames:L.value,totalBytes:I.value,totalBytesReadable:E.value}):e.chips?L.value.map(tt=>V(Vs,{key:tt,size:"small",text:tt},null)):L.value.join(", "))])])}})},details:Me?rt=>{var ft,Rt;return q(Bt,null,[(ft=c.details)==null?void 0:ft.call(c,rt),Te&&q(Bt,null,[q("span",null,null),V($p,{active:!!((Rt=l.value)!=null&&Rt.length),value:F.value,disabled:e.disabled},c.counter)])])}:void 0})}),sa({},z,B,R)}}),ZO=Re({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...sr(),...Ft(),...Gi(),...ku(),...gi(),...mn({tag:"footer"}),...Dn()},"VFooter"),KO=it()({name:"VFooter",props:ZO(),setup(e,i){let{slots:a}=i;const o=Qe(),{themeClasses:c}=$n(e),{backgroundColorClasses:f,backgroundColorStyles:h}=Un(()=>e.color),{borderClasses:l}=gr(e),{elevationClasses:b}=ra(e),{roundedClasses:S}=Ci(e),w=bt(32),{resizeRef:k}=Yr(E=>{E.length&&(w.value=E[0].target.clientHeight)}),I=K(()=>e.height==="auto"?w.value:parseInt(e.height,10));return ka(()=>e.app,()=>{const E=Cu({id:e.name,order:K(()=>parseInt(e.order,10)),position:we(()=>"bottom"),layoutSize:I,elementSize:K(()=>e.height==="auto"?void 0:I.value),active:we(()=>e.app),absolute:we(()=>e.absolute)});pi(()=>{o.value=E.layoutItemStyles.value})}),ct(()=>V(e.tag,{ref:k,class:st(["v-footer",c.value,f.value,l.value,b.value,S.value,e.class]),style:St([h.value,e.app?o.value:{height:Tt(e.height)},e.style])},a)),{}}}),XO=Re({disabled:Boolean,modelValue:{type:Boolean,default:null},...tb()},"VHover"),YO=it()({name:"VHover",props:XO(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const o=Zt(e,"modelValue"),{runOpenDelay:c,runCloseDelay:f}=nb(e,h=>!e.disabled&&(o.value=h));return()=>{var h;return(h=a.default)==null?void 0:h.call(a,{isHovering:o.value,props:{onMouseenter:c,onMouseleave:f}})}}}),JO=Re({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...Oi(),...mn()},"VInfiniteScroll"),y1=Lr({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,i)=>!0},setup(e,i){let{emit:a}=i;const{intersectionRef:o,isIntersecting:c}=yf();return xt(c,async f=>{a("intersect",e.side,f)}),ct(()=>q("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:o},[Lt(" ")])),{}}}),QO=it()({name:"VInfiniteScroll",props:JO(),emits:{load:e=>!0},setup(e,i){let{slots:a,emit:o}=i;const c=Qe(),f=bt("ok"),h=bt("ok"),l=K(()=>Tt(e.margin)),b=bt(!1);function S(ae){if(!c.value)return;const he=e.direction==="vertical"?"scrollTop":"scrollLeft";c.value[he]=ae}function w(){if(!c.value)return 0;const ae=e.direction==="vertical"?"scrollTop":"scrollLeft";return c.value[ae]}function k(){if(!c.value)return 0;const ae=e.direction==="vertical"?"scrollHeight":"scrollWidth";return c.value[ae]}function I(){if(!c.value)return 0;const ae=e.direction==="vertical"?"clientHeight":"clientWidth";return c.value[ae]}Fi(()=>{c.value&&(e.side==="start"?S(k()):e.side==="both"&&S(k()/2-I()/2))});function E(ae,he){ae==="start"?f.value=he:ae==="end"?h.value=he:ae==="both"&&(f.value=he,h.value=he)}function L(ae){return ae==="start"?f.value:h.value}let F=0;function z(ae,he){b.value=he,b.value&&B(ae)}function B(ae){if(e.mode!=="manual"&&!b.value)return;const he=L(ae);if(!c.value||["empty","loading"].includes(he))return;F=k(),E(ae,"loading");function te(re){E(ae,re),kn(()=>{re==="empty"||re==="error"||(re==="ok"&&ae==="start"&&S(k()-F+w()),e.mode!=="manual"&&kn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{B(ae)})})})}))})}o("load",{side:ae,done:te})}const{t:R}=Zn();function Z(ae,he){var ie,ue,Q,pe,Ce;if(e.side!==ae&&e.side!=="both")return;const te=()=>B(ae),re={side:ae,props:{onClick:te,color:e.color}};return he==="error"?(ie=a.error)==null?void 0:ie.call(a,re):he==="empty"?((ue=a.empty)==null?void 0:ue.call(a,re))??q("div",null,[R(e.emptyText)]):e.mode==="manual"?he==="loading"?((Q=a.loading)==null?void 0:Q.call(a,re))??V(pu,{indeterminate:!0,color:e.color},null):((pe=a["load-more"])==null?void 0:pe.call(a,re))??V(gn,{variant:"outlined",color:e.color,onClick:te},{default:()=>[R(e.loadMoreText)]}):((Ce=a.loading)==null?void 0:Ce.call(a,re))??V(pu,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:Y}=$i(e);ct(()=>{const ae=e.tag,he=e.side==="start"||e.side==="both",te=e.side==="end"||e.side==="both",re=e.mode==="intersect";return V(ae,{ref:c,class:st(["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":he,"v-infinite-scroll--end":te}]),style:St(Y.value)},{default:()=>{var ie;return[q("div",{class:"v-infinite-scroll__side"},[Z("start",f.value)]),he&&re&&V(y1,{key:"start",side:"start",onIntersect:z,rootMargin:l.value},null),(ie=a.default)==null?void 0:ie.call(a),te&&re&&V(y1,{key:"end",side:"end",onIntersect:z,rootMargin:l.value},null),q("div",{class:"v-infinite-scroll__side"},[Z("end",h.value)])]}})});function J(ae){const he=ae??e.side;E(he,"ok"),kn(()=>{S(k()-F+w()),e.mode!=="manual"&&kn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{he==="both"?(B("start"),B("end")):B(he)})})})})})}return{reset:J}}}),gI=Symbol.for("vuetify:v-item-group"),e5=Re({...Ft(),...Tu({selectedClass:"v-item--selected"}),...mn(),...Dn()},"VItemGroup"),t5=it()({name:"VItemGroup",props:e5(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const{themeClasses:o}=$n(e),{isSelected:c,select:f,next:h,prev:l,selected:b}=Sl(e,gI);return()=>V(e.tag,{class:st(["v-item-group",o.value,e.class]),style:St(e.style)},{default:()=>{var S;return[(S=a.default)==null?void 0:S.call(a,{isSelected:c,select:f,next:h,prev:l,selected:b.value})]}})}}),n5=it()({name:"VItem",props:Au(),emits:{"group:selected":e=>!0},setup(e,i){let{slots:a}=i;const{isSelected:o,select:c,toggle:f,selectedClass:h,value:l,disabled:b}=vl(e,gI);return()=>{var S;return(S=a.default)==null?void 0:S.call(a,{isSelected:o.value,selectedClass:h.value,select:c,toggle:f,value:l.value,disabled:b.value})}}}),i5=Re({color:String,...sr(),...Ft(),...gi(),...mn({tag:"kbd"}),...Dn(),...Gi()},"VKbd"),a5=it()({name:"VKbd",props:i5(),setup(e,i){let{slots:a}=i;const{themeClasses:o}=$n(e),{borderClasses:c}=gr(e),{roundedClasses:f}=Ci(e),{backgroundColorClasses:h,backgroundColorStyles:l}=Un(()=>e.color),{elevationClasses:b}=ra(e);return ct(()=>V(e.tag,{class:st(["v-kbd",o.value,h.value,c.value,b.value,f.value,e.class]),style:St([l.value,e.style])},a)),{}}}),r5=Re({...Ft(),...Oi(),...Lk()},"VLayout"),s5=it()({name:"VLayout",props:r5(),setup(e,i){let{slots:a}=i;const{layoutClasses:o,layoutStyles:c,getLayoutItem:f,items:h,layoutRef:l}=Rk(e),{dimensionStyles:b}=$i(e);return ct(()=>{var S;return q("div",{ref:l,class:st([o.value,e.class]),style:St([b.value,c.value,e.style])},[(S=a.default)==null?void 0:S.call(a)])}),{getLayoutItem:f,items:h}}}),o5=Re({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...Ft(),...ku()},"VLayoutItem"),l5=it()({name:"VLayoutItem",props:o5(),setup(e,i){let{slots:a}=i;const{layoutItemStyles:o}=Cu({id:e.name,order:K(()=>parseInt(e.order,10)),position:we(()=>e.position),elementSize:we(()=>e.size),layoutSize:we(()=>e.size),active:we(()=>e.modelValue),absolute:we(()=>e.absolute)});return()=>{var c;return q("div",{class:st(["v-layout-item",e.class]),style:St([o.value,e.style])},[(c=a.default)==null?void 0:c.call(a)])}}}),u5=Re({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...Ft(),...Oi(),...mn(),...ps({transition:"fade-transition"})},"VLazy"),c5=it()({name:"VLazy",directives:{vIntersect:ds},props:u5(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const{dimensionStyles:o}=$i(e),c=Zt(e,"modelValue");function f(h){c.value||(c.value=h)}return ct(()=>yi(V(e.tag,{class:st(["v-lazy",e.class]),style:St([o.value,e.style])},{default:()=>[c.value&&V(Ua,{transition:e.transition,appear:!0},{default:()=>{var h;return[(h=a.default)==null?void 0:h.call(a)]}})]}),[[ds,{handler:f,options:e.options},null]])),{}}}),d5=Re({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...Ft()},"VLocaleProvider"),h5=it()({name:"VLocaleProvider",props:d5(),setup(e,i){let{slots:a}=i;const{rtlClasses:o}=tD(e);return ct(()=>{var c;return q("div",{class:st(["v-locale-provider",o.value,e.class]),style:St(e.style)},[(c=a.default)==null?void 0:c.call(a)])}),{}}}),f5=Lr({name:"VNoSsr",setup(e,i){let{slots:a}=i;const o=_2();return()=>{var c;return o.value&&((c=a.default)==null?void 0:c.call(a))}}}),m5=50,p5=500;function g5(e){let{toggleUpDown:i}=e,a=-1,o=-1;Hi(f);function c(l){f(),h(l),window.addEventListener("pointerup",f),document.addEventListener("blur",f),a=window.setTimeout(()=>{o=window.setInterval(()=>h(l),m5)},p5)}function f(){window.clearTimeout(a),window.clearInterval(o),window.removeEventListener("pointerup",f),document.removeEventListener("blur",f)}function h(l){i(l==="up")}return{holdStart:c,holdStop:f}}const v5=Re({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},minFractionDigits:{type:Number,default:null},decimalSeparator:{type:String,validator:e=>!e||e.length===1},...Wn(Cf(),["modelValue","validationValue"])},"VNumberInput"),y5=it()({name:"VNumberInput",props:{...v5()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const o=Qe(),{holdStart:c,holdStop:f}=g5({toggleUpDown:re}),h=ad(e),l=K(()=>h.isDisabled.value||h.isReadonly.value),b=bt(e.focused),{decimalSeparator:S}=Zn(),w=K(()=>{var Ve;return((Ve=e.decimalSeparator)==null?void 0:Ve[0])||S.value});function k(Ve){let Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.precision,Be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const lt=Fe==null?String(Ve):Ve.toFixed(Fe);if(b.value&&Be)return Number(lt).toString().replace(".",w.value);if(e.minFractionDigits===null||Fe!==null&&Fe<e.minFractionDigits)return lt.replace(".",w.value);let[vt,kt]=lt.split(".");return kt=(kt??"").padEnd(e.minFractionDigits,"0").replace(new RegExp(`(?<=\\d{${e.minFractionDigits}})0+$`,"g"),""),[vt,kt].filter(Boolean).join(w.value)}const I=Zt(e,"modelValue",null,Ve=>Ve??null,Ve=>Ve==null?Ve??null:ni(Number(Ve),e.min,e.max)),E=bt(null);pi(()=>{b.value&&!l.value&&Number(E.value)===I.value||(I.value==null?E.value=null:isNaN(I.value)||(E.value=k(I.value)))});const L=K({get:()=>E.value,set(Ve){if(Ve===null||Ve===""){I.value=null,E.value=null;return}const Fe=Number(Ve.replace(w.value,"."));!isNaN(Fe)&&Fe<=e.max&&Fe>=e.min&&(I.value=Fe,E.value=Ve)}}),F=K(()=>l.value?!1:(I.value??0)+e.step<=e.max),z=K(()=>l.value?!1:(I.value??0)-e.step>=e.min),B=K(()=>e.hideInput?"stacked":e.controlVariant),R=we(()=>B.value==="split"?"$plus":"$collapse"),Z=we(()=>B.value==="split"?"$minus":"$expand"),Y=we(()=>B.value==="split"?"default":"small"),J=we(()=>B.value==="stacked"?"auto":"100%"),ae={props:{onClick:Q,onPointerup:pe,onPointerdown:Ce,onPointercancel:pe}},he={props:{onClick:Q,onPointerup:pe,onPointerdown:$e,onPointercancel:pe}};xt(()=>e.precision,()=>Ye()),xt(()=>e.minFractionDigits,()=>Ye()),Fi(()=>{Xe()});function te(Ve){if(Ve==null)return 0;const Fe=Ve.toString(),Be=Fe.indexOf(".");return~Be?Fe.length-Be:0}function re(){let Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(l.value)return;if(I.value==null){L.value=k(ni(0,e.min,e.max));return}let Fe=Math.max(te(I.value),te(e.step));e.precision!=null&&(Fe=Math.max(Fe,e.precision)),Ve?F.value&&(L.value=k(I.value+e.step,Fe)):z.value&&(L.value=k(I.value-e.step,Fe))}function ie(Ve){var je;if(!Ve.data)return;const Fe=Ve.target,{value:Be,selectionStart:lt,selectionEnd:vt}=Fe??{},kt=Be?Be.slice(0,lt)+Ve.data+Be.slice(vt):Ve.data,ge=pM(kt,e.precision,w.value);if(new RegExp(`^-?\\d*${op(w.value)}?\\d*$`).test(kt)||(Ve.preventDefault(),Fe.value=ge),e.precision!=null){if(((je=kt.split(w.value)[1])==null?void 0:je.length)>e.precision){Ve.preventDefault(),Fe.value=ge;const rt=(lt??0)+Ve.data.length;Fe.setSelectionRange(rt,rt)}e.precision===0&&kt.includes(w.value)&&(Ve.preventDefault(),Fe.value=ge)}}async function ue(Ve){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(Ve.key)||Ve.ctrlKey||["ArrowDown","ArrowUp"].includes(Ve.key)&&(Ve.preventDefault(),Ve.stopPropagation(),Xe(),await kn(),Ve.key==="ArrowDown"?re(!1):re())}function Q(Ve){Ve.stopPropagation()}function pe(Ve){const Fe=Ve.currentTarget;Fe==null||Fe.releasePointerCapture(Ve.pointerId),Ve.preventDefault(),f()}function Ce(Ve){const Fe=Ve.currentTarget;Fe==null||Fe.setPointerCapture(Ve.pointerId),Ve.preventDefault(),Ve.stopPropagation(),c("up")}function $e(Ve){const Fe=Ve.currentTarget;Fe==null||Fe.setPointerCapture(Ve.pointerId),Ve.preventDefault(),Ve.stopPropagation(),c("down")}function Xe(){if(l.value||!o.value)return;const Ve=o.value.value,Fe=Number(Ve.replace(w.value,"."));Ve&&!isNaN(Fe)?L.value=k(ni(Fe,e.min,e.max)):L.value=null}function Ye(){l.value||(L.value=I.value!==null&&!isNaN(I.value)?k(I.value,e.precision,!1):null)}function qe(){if(!l.value){if(I.value===null||isNaN(I.value)){L.value=null;return}L.value=I.value.toString().replace(".",w.value)}}function Te(){qe()}function Me(){Xe()}return ct(()=>{const{modelValue:Ve,type:Fe,...Be}=xi.filterProps(e);function lt(){return a.increment?V(pn,{key:"increment-defaults",defaults:{VBtn:{disabled:!F.value,height:J.value,size:Y.value,icon:R.value,variant:"text"}}},{default:()=>[a.increment(ae)]}):V(gn,{"aria-hidden":"true","data-testid":"increment",disabled:!F.value,height:J.value,icon:R.value,key:"increment-btn",onClick:Q,onPointerdown:Ce,onPointerup:pe,onPointercancel:pe,size:Y.value,variant:"text",tabindex:"-1"},null)}function vt(){return a.decrement?V(pn,{key:"decrement-defaults",defaults:{VBtn:{disabled:!z.value,height:J.value,size:Y.value,icon:Z.value,variant:"text"}}},{default:()=>[a.decrement(he)]}):V(gn,{"aria-hidden":"true","data-testid":"decrement",disabled:!z.value,height:J.value,icon:Z.value,key:"decrement-btn",onClick:Q,onPointerdown:$e,onPointerup:pe,onPointercancel:pe,size:Y.value,variant:"text",tabindex:"-1"},null)}function kt(){return q("div",{class:"v-number-input__control"},[vt(),V(Ha,{vertical:B.value!=="stacked"},null),lt()])}function ge(){return!e.hideInput&&!e.inset?V(Ha,{vertical:!0},null):void 0}const je=B.value==="split"?q("div",{class:"v-number-input__control"},[V(Ha,{vertical:!0},null),lt()]):e.reverse||B.value==="hidden"?void 0:q(Bt,null,[ge(),kt()]),rt=a["append-inner"]||je,ft=B.value==="split"?q("div",{class:"v-number-input__control"},[vt(),V(Ha,{vertical:!0},null)]):e.reverse&&B.value!=="hidden"?q(Bt,null,[kt(),ge()]):void 0,Rt=a["prepend-inner"]||ft;return V(xi,nt({ref:o},Be,{modelValue:L.value,"onUpdate:modelValue":fe=>L.value=fe,focused:b.value,"onUpdate:focused":fe=>b.value=fe,validationValue:I.value,onBeforeinput:ie,onFocus:Te,onBlur:Me,onKeydown:ue,class:["v-number-input",{"v-number-input--default":B.value==="default","v-number-input--hide-input":e.hideInput,"v-number-input--inset":e.inset,"v-number-input--reverse":e.reverse,"v-number-input--split":B.value==="split","v-number-input--stacked":B.value==="stacked"},e.class],style:e.style,inputmode:"decimal"}),{...a,"append-inner":rt?function(){var xe;for(var fe=arguments.length,se=new Array(fe),Se=0;Se<fe;Se++)se[Se]=arguments[Se];return q(Bt,null,[(xe=a["append-inner"])==null?void 0:xe.call(a,...se),je])}:void 0,"prepend-inner":Rt?function(){var xe;for(var fe=arguments.length,se=new Array(fe),Se=0;Se<fe;Se++)se[Se]=arguments[Se];return q(Bt,null,[ft,(xe=a["prepend-inner"])==null?void 0:xe.call(a,...se)])}:void 0})}),sa({},o)}}),_5=Re({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Oi(),...Sf(),...pr(kf({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),b5=it()({name:"VOtpInput",props:_5(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,i){let{attrs:a,emit:o,slots:c}=i;const{dimensionStyles:f}=$i(e),{isFocused:h,focus:l,blur:b}=xo(e),S=Zt(e,"modelValue","",ie=>ie==null?[]:String(ie).split(""),ie=>ie.join("")),{t:w}=Zn(),k=K(()=>Number(e.length)),I=K(()=>Array(k.value).fill(0)),E=Qe(-1),L=Qe(),F=Qe([]),z=K(()=>F.value[E.value]);let B=!1;ka(()=>e.autofocus,()=>{const ie=fl();ie.run(()=>{const{intersectionRef:ue,isIntersecting:Q}=yf();pi(()=>{ue.value=F.value[0]}),xt(Q,pe=>{var Ce;pe&&((Ce=ue.value)==null||Ce.focus(),ie.stop())})})});function R(){if(re(z.value.value)){z.value.value="";return}if(B)return;const ie=S.value.slice(),ue=z.value.value;ie[E.value]=ue;let Q=null;E.value>S.value.length?Q=S.value.length+1:E.value+1!==k.value&&(Q="next"),S.value=ie,Q&&uu(L.value,Q)}function Z(){B=!1,R()}function Y(ie){const ue=S.value.slice(),Q=E.value;let pe=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(ie.key)&&(ie.preventDefault(),ie.key==="ArrowLeft"?pe="prev":ie.key==="ArrowRight"?pe="next":["Backspace","Delete"].includes(ie.key)&&(ue[E.value]="",S.value=ue,E.value>0&&ie.key==="Backspace"?pe="prev":requestAnimationFrame(()=>{var Ce;(Ce=F.value[Q])==null||Ce.select()})),requestAnimationFrame(()=>{pe!=null&&uu(L.value,pe)}))}function J(ie,ue){var Ce;ue.preventDefault(),ue.stopPropagation();const Q=((Ce=ue==null?void 0:ue.clipboardData)==null?void 0:Ce.getData("Text").trim().slice(0,k.value))??"",pe=Q.length-1===-1?ie:Q.length-1;re(Q)||(S.value=Q.split(""),E.value=pe)}function ae(){S.value=[]}function he(ie,ue){l(),E.value=ue}function te(){b(),E.value=-1}function re(ie){return e.type==="number"&&/[^0-9]/g.test(ie)}return ki({VField:{color:we(()=>e.color),bgColor:we(()=>e.color),baseColor:we(()=>e.baseColor),disabled:we(()=>e.disabled),error:we(()=>e.error),variant:we(()=>e.variant)}},{scoped:!0}),xt(S,ie=>{ie.length===k.value&&o("finish",ie.join(""))},{deep:!0}),xt(E,ie=>{ie<0||kn(()=>{var ue;(ue=F.value[ie])==null||ue.select()})}),ct(()=>{var Q;const[ie,ue]=xl(a);return q("div",nt({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},ie),[q("div",{ref:L,class:"v-otp-input__content",style:St([f.value])},[I.value.map((pe,Ce)=>q(Bt,null,[e.divider&&Ce!==0&&q("span",{class:"v-otp-input__divider"},[e.divider]),V(yl,{focused:h.value&&e.focusAll||E.value===Ce,key:Ce},{...c,loader:void 0,default:()=>q("input",{ref:$e=>F.value[Ce]=$e,"aria-label":w(e.label,Ce+1),autofocus:Ce===0&&e.autofocus,autocomplete:"one-time-code",class:st(["v-otp-input__field"]),disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:Ce===0?k.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:S.value[Ce],onInput:R,onFocus:$e=>he($e,Ce),onBlur:te,onKeydown:Y,onCompositionstart:()=>B=!0,onCompositionend:Z,onPaste:$e=>J(Ce,$e)},null)})])),q("input",nt({class:"v-otp-input-input",type:"hidden"},ue,{value:S.value.join("")}),null),V(Rs,{contained:!0,contentClass:"v-otp-input__loader",modelValue:!!e.loading,persistent:!0},{default:()=>{var pe;return[((pe=c.loader)==null?void 0:pe.call(c))??V(pu,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(Q=c.default)==null?void 0:Q.call(c)])])}),{blur:()=>{var ie;(ie=F.value)==null||ie.some(ue=>ue.blur())},focus:()=>{var ie;(ie=F.value)==null||ie[0].focus()},reset:ae,isFocused:h}}});function x5(e){return Math.floor(Math.abs(e))*Math.sign(e)}const w5=Re({scale:{type:[Number,String],default:.5},...Ft()},"VParallax"),S5=it()({name:"VParallax",props:w5(),setup(e,i){let{slots:a}=i;const{intersectionRef:o,isIntersecting:c}=yf(),{resizeRef:f,contentRect:h}=Yr(),{height:l}=Jr(),b=Qe();pi(()=>{var E;o.value=f.value=(E=b.value)==null?void 0:E.$el});let S;xt(c,E=>{E?(S=E_(o.value),S=S===document.scrollingElement?document:S,S.addEventListener("scroll",I,{passive:!0}),I()):S.removeEventListener("scroll",I)}),va(()=>{S==null||S.removeEventListener("scroll",I)}),xt(l,I),xt(()=>{var E;return(E=h.value)==null?void 0:E.height},I);const w=K(()=>1-ni(Number(e.scale)));let k=-1;function I(){!c.value||zs()||(cancelAnimationFrame(k),k=requestAnimationFrame(()=>{var J;const E=((J=b.value)==null?void 0:J.$el).querySelector(".v-img__img");if(!E)return;const L=S instanceof Document?document.documentElement.clientHeight:S.clientHeight,F=S instanceof Document?window.scrollY:S.scrollTop,z=o.value.getBoundingClientRect().top+F,B=h.value.height,R=z+(B-L)/2,Z=x5((F-R)*w.value),Y=Math.max(1,(w.value*(L-B)+B)/B);E.style.setProperty("transform",`translateY(${Z}px) scale(${Y})`)}))}return ct(()=>V(Xr,{class:st(["v-parallax",{"v-parallax--active":c.value},e.class]),style:St(e.style),ref:b,cover:!0,onLoadstart:I,onLoad:I},a)),{}}}),k5=Re({...Hp({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),C5=it()({name:"VRadio",props:k5(),setup(e,i){let{slots:a}=i;return ct(()=>{const o=_l.filterProps(e);return V(_l,nt(o,{class:["v-radio",e.class],style:e.style,type:"radio"}),a)}),{}}}),I5=Re({height:{type:[Number,String],default:"auto"},...wo(),...Wn(ib(),["multiple"]),trueIcon:{type:Gt,default:"$radioOn"},falseIcon:{type:Gt,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),P5=it()({name:"VRadioGroup",inheritAttrs:!1,props:I5(),emits:{"update:modelValue":e=>!0},setup(e,i){let{attrs:a,slots:o}=i;const c=Ia(),f=K(()=>e.id||`radio-group-${c}`),h=Zt(e,"modelValue"),l=Qe();return ct(()=>{const[b,S]=xl(a),w=Ca.filterProps(e),k=_l.filterProps(e),I=o.label?o.label({label:e.label,props:{for:f.value}}):e.label;return V(Ca,nt({ref:l,class:["v-radio-group",e.class],style:e.style},b,w,{modelValue:h.value,"onUpdate:modelValue":E=>h.value=E,id:f.value}),{...o,default:E=>{let{id:L,messagesId:F,isDisabled:z,isReadonly:B}=E;return q(Bt,null,[I&&V(rd,{id:L.value},{default:()=>[I]}),V(d2,nt(k,{id:L.value,"aria-describedby":F.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:z.value,readonly:B.value,"aria-labelledby":I?L.value:void 0,multiple:!1},S,{modelValue:h.value,"onUpdate:modelValue":R=>h.value=R}),o)])}})}),sa({},l)}}),T5=Re({...Sf(),...wo(),...yC(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),A5=it()({name:"VRangeSlider",props:T5(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,i){let{slots:a,emit:o}=i;const c=Qe(),f=Qe(),h=Qe(),{rtlClasses:l}=qi();function b(ie){if(!c.value||!f.value)return;const ue=Iy(ie,c.value.$el,e.direction),Q=Iy(ie,f.value.$el,e.direction),pe=Math.abs(ue),Ce=Math.abs(Q);return pe<Ce||pe===Ce&&ue<0?c.value.$el:f.value.$el}const S=_C(e),w=Zt(e,"modelValue",void 0,ie=>ie!=null&&ie.length?ie.map(ue=>S.roundValue(ue)):[0,0]),{activeThumbRef:k,hasLabels:I,max:E,min:L,mousePressed:F,onSliderMousedown:z,onSliderTouchstart:B,position:R,trackContainerRef:Z,readonly:Y}=bC({props:e,steps:S,onSliderStart:()=>{o("start",w.value)},onSliderEnd:ie=>{var pe;let{value:ue}=ie;const Q=k.value===((pe=c.value)==null?void 0:pe.$el)?[ue,w.value[1]]:[w.value[0],ue];!e.strict&&Q[0]<Q[1]&&(w.value=Q),o("end",w.value)},onSliderMove:ie=>{var Ce,$e,Xe,Ye;let{value:ue}=ie;const[Q,pe]=w.value;!e.strict&&Q===pe&&Q!==L.value&&(k.value=ue>Q?(Ce=f.value)==null?void 0:Ce.$el:($e=c.value)==null?void 0:$e.$el,(Xe=k.value)==null||Xe.focus()),k.value===((Ye=c.value)==null?void 0:Ye.$el)?w.value=[Math.min(ue,pe),pe]:w.value=[Q,Math.max(Q,ue)]},getActiveThumb:b}),{isFocused:J,focus:ae,blur:he}=xo(e),te=K(()=>R(w.value[0])),re=K(()=>R(w.value[1]));return ct(()=>{const ie=Ca.filterProps(e),ue=!!(e.label||a.label||a.prepend);return V(Ca,nt({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!a["tick-label"]||I.value,"v-slider--focused":J.value,"v-slider--pressed":F.value,"v-slider--disabled":e.disabled},l.value,e.class],style:e.style,ref:h},ie,{focused:J.value}),{...a,prepend:ue?Q=>{var pe,Ce;return q(Bt,null,[((pe=a.label)==null?void 0:pe.call(a,Q))??(e.label?V(rd,{class:"v-slider__label",text:e.label},null):void 0),(Ce=a.prepend)==null?void 0:Ce.call(a,Q)])}:void 0,default:Q=>{var $e,Xe;let{id:pe,messagesId:Ce}=Q;return q("div",{class:"v-slider__container",onMousedown:Y.value?void 0:z,onTouchstartPassive:Y.value?void 0:B},[q("input",{id:`${pe.value}_start`,name:e.name||pe.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:w.value[0]},null),q("input",{id:`${pe.value}_stop`,name:e.name||pe.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:w.value[1]},null),V(xC,{ref:Z,start:te.value,stop:re.value},{"tick-label":a["tick-label"]}),V(Py,{ref:c,"aria-describedby":Ce.value,focused:J&&k.value===(($e=c.value)==null?void 0:$e.$el),modelValue:w.value[0],"onUpdate:modelValue":Ye=>w.value=[Ye,w.value[1]],onFocus:Ye=>{var qe,Te,Me,Ve;ae(),k.value=(qe=c.value)==null?void 0:qe.$el,E.value!==L.value&&w.value[0]===w.value[1]&&w.value[1]===L.value&&Ye.relatedTarget!==((Te=f.value)==null?void 0:Te.$el)&&((Me=c.value)==null||Me.$el.blur(),(Ve=f.value)==null||Ve.$el.focus())},onBlur:()=>{he(),k.value=void 0},min:L.value,max:w.value[1],position:te.value,ripple:e.ripple},{"thumb-label":a["thumb-label"]}),V(Py,{ref:f,"aria-describedby":Ce.value,focused:J&&k.value===((Xe=f.value)==null?void 0:Xe.$el),modelValue:w.value[1],"onUpdate:modelValue":Ye=>w.value=[w.value[0],Ye],onFocus:Ye=>{var qe,Te,Me,Ve;ae(),k.value=(qe=f.value)==null?void 0:qe.$el,E.value!==L.value&&w.value[0]===w.value[1]&&w.value[0]===E.value&&Ye.relatedTarget!==((Te=c.value)==null?void 0:Te.$el)&&((Me=f.value)==null||Me.$el.blur(),(Ve=c.value)==null||Ve.$el.focus())},onBlur:()=>{he(),k.value=void 0},min:w.value[0],max:E.value,position:re.value,ripple:e.ripple},{"thumb-label":a["thumb-label"]})])}})}),sa({focus:()=>{var ie;return(ie=c.value)==null?void 0:ie.$el.focus()}},h)}}),E5=Re({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:Gt,default:"$ratingEmpty"},fullIcon:{type:Gt,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...Ft(),...Ji(),...$s(),...mn(),...Dn()},"VRating"),M5=it()({name:"VRating",props:E5(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const{t:o}=Zn(),{themeClasses:c}=$n(e),f=Zt(e,"modelValue"),h=K(()=>ni(parseFloat(f.value),0,Number(e.length))),l=K(()=>Dr(Number(e.length),1)),b=K(()=>l.value.flatMap(z=>e.halfIncrements?[z-.5,z]:[z])),S=bt(-1),w=K(()=>b.value.map(z=>{const B=e.hover&&S.value>-1,R=h.value>=z,Z=S.value>=z,J=(B?Z:R)?e.fullIcon:e.emptyIcon,ae=e.activeColor??e.color,he=R||Z?ae:e.color;return{isFilled:R,isHovered:Z,icon:J,color:he}})),k=K(()=>[0,...b.value].map(z=>{function B(){S.value=z}function R(){S.value=-1}function Z(){e.disabled||e.readonly||(f.value=h.value===z&&e.clearable?0:z)}return{onMouseenter:e.hover?B:void 0,onMouseleave:e.hover?R:void 0,onClick:Z}})),I=Ia(),E=K(()=>e.name??`v-rating-${I}`);function L(z){var re,ie;let{value:B,index:R,showStar:Z=!0}=z;const{onMouseenter:Y,onMouseleave:J,onClick:ae}=k.value[R+1],he=`${E.value}-${String(B).replace(".","-")}`,te={color:(re=w.value[R])==null?void 0:re.color,density:e.density,disabled:e.disabled,icon:(ie=w.value[R])==null?void 0:ie.icon,ripple:e.ripple,size:e.size,variant:"plain"};return q(Bt,null,[q("label",{for:he,class:st({"v-rating__item--half":e.halfIncrements&&B%1>0,"v-rating__item--full":e.halfIncrements&&B%1===0}),onMouseenter:Y,onMouseleave:J,onClick:ae},[q("span",{class:"v-rating__hidden"},[o(e.itemAriaLabel,B,e.length)]),Z?a.item?a.item({...w.value[R],props:te,value:B,index:R,rating:h.value}):V(gn,nt({"aria-label":o(e.itemAriaLabel,B,e.length)},te),null):void 0]),q("input",{class:"v-rating__hidden",name:E.value,id:he,type:"radio",value:B,checked:h.value===B,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function F(z){return a["item-label"]?a["item-label"](z):z.label?q("span",null,[z.label]):q("span",null,[Lt(" ")])}return ct(()=>{var B;const z=!!((B=e.itemLabels)!=null&&B.length)||a["item-label"];return V(e.tag,{class:st(["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},c.value,e.class]),style:St(e.style)},{default:()=>[V(L,{value:0,index:-1,showStar:!1},null),l.value.map((R,Z)=>{var Y,J;return q("div",{class:"v-rating__wrapper"},[z&&e.itemLabelPosition==="top"?F({value:R,index:Z,label:(Y=e.itemLabels)==null?void 0:Y[Z]}):void 0,q("div",{class:"v-rating__item"},[e.halfIncrements?q(Bt,null,[V(L,{value:R-.5,index:Z*2},null),V(L,{value:R,index:Z*2+1},null)]):V(L,{value:R,index:Z},null)]),z&&e.itemLabelPosition==="bottom"?F({value:R,index:Z,label:(J=e.itemLabels)==null?void 0:J[Z]}):void 0])})]})}),{}}}),D5={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function V5(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return q("div",{class:st(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[i])}function _1(e){const[i,a]=e.split("@");return Array.from({length:a}).map(()=>ag(i))}function ag(e){let i=[];if(!e)return i;const a=D5[e];if(e!==a){if(e.includes(","))return b1(e);if(e.includes("@"))return _1(e);a.includes(",")?i=b1(a):a.includes("@")?i=_1(a):a&&i.push(ag(a))}return[V5(e,i)]}function b1(e){return e.replace(/\s/g,"").split(",").map(ag)}const z5=Re({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Oi(),...Gi(),...Dn()},"VSkeletonLoader"),L5=it()({name:"VSkeletonLoader",inheritAttrs:!1,props:z5(),setup(e,i){let{attrs:a,slots:o}=i;const{backgroundColorClasses:c,backgroundColorStyles:f}=Un(()=>e.color),{dimensionStyles:h}=$i(e),{elevationClasses:l}=ra(e),{themeClasses:b}=$n(e),{t:S}=Zn(),w=K(()=>ag(Si(e.type).join(",")));return ct(()=>{var E;const k=!o.default||e.loading,I=e.boilerplate||!k?{}:{ariaLive:"polite",ariaLabel:S(e.loadingText),role:"alert"};return q(Bt,null,[k?q("div",nt({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},b.value,c.value,l.value],style:[f.value,h.value]},I,a),[w.value]):(E=o.default)==null?void 0:E.call(o)])}),{}}}),B5=it()({name:"VSlideGroupItem",props:Au(),emits:{"group:selected":e=>!0},setup(e,i){let{slots:a}=i;const o=vl(e,ab);return()=>{var c;return(c=a.default)==null?void 0:c.call(a,{isSelected:o.isSelected.value,select:o.select,toggle:o.toggle,selectedClass:o.selectedClass.value})}}});function R5(e){const i=bt(e());let a=-1;function o(){clearInterval(a)}function c(){o(),kn(()=>i.value=e())}function f(h){const l=h?getComputedStyle(h):{transitionDuration:.2},b=parseFloat(l.transitionDuration)*1e3||200;if(o(),i.value<=0)return;const S=performance.now();a=window.setInterval(()=>{const w=performance.now()-S+b;i.value=Math.max(e()-w,0),i.value<=0&&o()},b)}return Hi(o),{clear:o,time:i,start:f,reset:c}}const vI=Re({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...bo({location:"bottom"}),...nd(),...gi(),...Qr(),...Dn(),...Wn(If({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy","stickToTarget"])},"VSnackbar"),Wy=it()({name:"VSnackbar",props:vI(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const o=Zt(e,"modelValue"),{positionClasses:c}=id(e),{scopeId:f}=Mu(),{themeClasses:h}=$n(e),{colorClasses:l,colorStyles:b,variantClasses:S}=Iu(e),{roundedClasses:w}=Ci(e),k=R5(()=>Number(e.timeout)),I=Qe(),E=Qe(),L=bt(!1),F=bt(0),z=Qe(),B=vn(Zh,void 0);ka(()=>!!B,()=>{const ue=Bk();pi(()=>{z.value=ue.mainStyles.value})}),xt(o,Z),xt(()=>e.timeout,Z),Fi(()=>{o.value&&Z()});let R=-1;function Z(){k.reset(),window.clearTimeout(R);const ue=Number(e.timeout);if(!o.value||ue===-1)return;const Q=S_(E.value);k.start(Q),R=window.setTimeout(()=>{o.value=!1},ue)}function Y(){k.reset(),window.clearTimeout(R)}function J(){L.value=!0,Y()}function ae(){L.value=!1,Z()}function he(ue){F.value=ue.touches[0].clientY}function te(ue){Math.abs(F.value-ue.changedTouches[0].clientY)>50&&(o.value=!1)}function re(){L.value&&ae()}const ie=K(()=>e.location.split(" ").reduce((ue,Q)=>(ue[`v-snackbar--${Q}`]=!0,ue),{}));return ct(()=>{const ue=Rs.filterProps(e),Q=!!(a.default||a.text||e.text);return V(Rs,nt({ref:I,class:["v-snackbar",{"v-snackbar--active":o.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},ie.value,c.value,e.class],style:[z.value,e.style]},ue,{modelValue:o.value,"onUpdate:modelValue":pe=>o.value=pe,contentProps:nt({class:["v-snackbar__wrapper",h.value,l.value,w.value,S.value],style:[b.value],onPointerenter:J,onPointerleave:ae},ue.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:he,onTouchend:te,onAfterLeave:re},f),{default:()=>{var pe,Ce;return[wl(!1,"v-snackbar"),e.timer&&!L.value&&q("div",{key:"timer",class:"v-snackbar__timer"},[V(Bp,{ref:E,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,modelValue:k.time.value},null)]),Q&&q("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((pe=a.text)==null?void 0:pe.call(a))??e.text,(Ce=a.default)==null?void 0:Ce.call(a)]),a.actions&&V(pn,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[q("div",{class:"v-snackbar__actions"},[a.actions({isActive:o})])]})]},activator:a.activator})}),sa({},I)}}),F5=Re({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...Wn(vI(),["modelValue"])},"VSnackbarQueue"),O5=it()({name:"VSnackbarQueue",props:F5(),emits:{"update:modelValue":e=>!0},setup(e,i){let{emit:a,slots:o}=i;const{t:c}=Zn(),f=bt(!1),h=bt(!1),l=bt();xt(()=>e.modelValue.length,(I,E)=>{!h.value&&I>E&&S()}),xt(f,I=>{I&&(h.value=!0)});function b(){e.modelValue.length?S():(l.value=void 0,h.value=!1)}function S(){const[I,...E]=e.modelValue;a("update:modelValue",E),l.value=typeof I=="string"?{text:I}:I,kn(()=>{f.value=!0})}function w(){f.value=!1}const k=K(()=>({color:typeof e.closable=="string"?e.closable:void 0,text:c(e.closeText)}));ct(()=>{const I=!!(e.closable||o.actions),{modelValue:E,...L}=Wy.filterProps(e);return q(Bt,null,[h.value&&!!l.value&&(o.default?V(pn,{defaults:{VSnackbar:l.value}},{default:()=>[o.default({item:l.value})]}):V(Wy,nt(L,l.value,{modelValue:f.value,"onUpdate:modelValue":F=>f.value=F,onAfterLeave:b}),{text:o.text?()=>{var F;return(F=o.text)==null?void 0:F.call(o,{item:l.value})}:void 0,actions:I?()=>q(Bt,null,[o.actions?V(pn,{defaults:{VBtn:k.value}},{default:()=>[o.actions({item:l.value,props:{onClick:w}})]}):V(gn,nt(k.value,{onClick:w}),null)]):void 0}))])})}}),yI=Re({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),_I=Re({autoLineWidth:Boolean,...yI()},"VBarline"),x1=it()({name:"VBarline",props:_I(),setup(e,i){let{slots:a}=i;const o=Ia(),c=K(()=>e.id||`barline-${o}`),f=K(()=>Number(e.autoDrawDuration)||500),h=K(()=>!!(e.showLabels||e.labels.length>0||a!=null&&a.label)),l=K(()=>parseFloat(e.lineWidth)||4),b=K(()=>Math.max(e.modelValue.length*l.value,Number(e.width))),S=K(()=>({minX:0,maxX:b.value,minY:0,maxY:parseInt(e.height,10)})),w=K(()=>e.modelValue.map(z=>Ri(z,e.itemValue,z)));function k(z,B){const{minX:R,maxX:Z,minY:Y,maxY:J}=B,ae=z.length;let he=e.max!=null?Number(e.max):Math.max(...z),te=e.min!=null?Number(e.min):Math.min(...z);te>0&&e.min==null&&(te=0),he<0&&e.max==null&&(he=0);const re=Z/(ae===1?2:ae),ie=(J-Y)/(he-te||1),ue=J-Math.abs(te*ie);return z.map((Q,pe)=>{const Ce=Math.abs(ie*Q);return{x:R+pe*re,y:ue-Ce+ +(Q<0)*Ce,height:Ce,value:Q}})}const I=K(()=>{const z=[],B=k(w.value,S.value),R=B.length;for(let Z=0;z.length<R;Z++){const Y=B[Z];let J=e.labels[Z];J||(J=typeof Y=="object"?Y.value:Y),z.push({x:Y.x,value:String(J)})}return z}),E=K(()=>k(w.value,S.value)),L=K(()=>E.value.length===1?(S.value.maxX-l.value)/2:(Math.abs(E.value[0].x-E.value[1].x)-l.value)/2),F=K(()=>typeof e.smooth=="boolean"?e.smooth?2:0:Number(e.smooth));ct(()=>{const z=e.gradient.slice().length?e.gradient.slice().reverse():[""];return q("svg",{display:"block"},[q("defs",null,[q("linearGradient",{id:c.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[z.map((B,R)=>q("stop",{offset:R/Math.max(z.length-1,1),"stop-color":B||"currentColor"},null))])]),q("clipPath",{id:`${c.value}-clip`},[E.value.map(B=>q("rect",{x:B.x+L.value,y:B.y,width:l.value,height:B.height,rx:F.value,ry:F.value},[e.autoDraw&&!zs()&&q(Bt,null,[q("animate",{attributeName:"y",from:B.y+B.height,to:B.y,dur:`${f.value}ms`,fill:"freeze"},null),q("animate",{attributeName:"height",from:"0",to:B.height,dur:`${f.value}ms`,fill:"freeze"},null)])]))]),h.value&&q("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[I.value.map((B,R)=>{var Z;return q("text",{x:B.x+L.value+l.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[((Z=a.label)==null?void 0:Z.call(a,{index:R,value:B.value}))??B.value])})]),q("g",{"clip-path":`url(#${c.value}-clip)`,fill:`url(#${c.value})`},[q("rect",{x:0,y:0,width:Math.max(e.modelValue.length*l.value,Number(e.width)),height:e.height},null)])])})}});function $5(e,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const c=e.shift(),f=e[e.length-1];return(a?`M${c.x} ${o-c.x+2} L${c.x} ${c.y}`:`M${c.x} ${c.y}`)+e.map((h,l)=>{const b=e[l+1],S=e[l-1]||c,w=b&&N5(b,h,S);if(!b||w)return`L${h.x} ${h.y}`;const k=Math.min(w1(S,h),w1(b,h)),E=k/2<i?k/2:i,L=S1(S,h,E),F=S1(b,h,E);return`L${L.x} ${L.y}S${h.x} ${h.y} ${F.x} ${F.y}`}).join("")+(a?`L${f.x} ${o-c.x+2} Z`:"")}function Om(e){return parseInt(e,10)}function N5(e,i,a){return Om(e.x+a.x)===Om(2*i.x)&&Om(e.y+a.y)===Om(2*i.y)}function w1(e,i){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function S1(e,i,a){const o={x:e.x-i.x,y:e.y-i.y},c=Math.sqrt(o.x*o.x+o.y*o.y),f={x:o.x/c,y:o.y/c};return{x:i.x+f.x*a,y:i.y+f.y*a}}const bI=Re({fill:Boolean,...yI()},"VTrendline"),k1=it()({name:"VTrendline",props:bI(),setup(e,i){let{slots:a}=i;const o=Ia(),c=K(()=>e.id||`trendline-${o}`),f=K(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),h=Qe(0),l=Qe(null);function b(z,B){const{minX:R,maxX:Z,minY:Y,maxY:J}=B;z.length===1&&(z=[z[0],z[0]]);const ae=z.length,he=e.max!=null?Number(e.max):Math.max(...z),te=e.min!=null?Number(e.min):Math.min(...z),re=(Z-R)/(ae-1),ie=(J-Y)/(he-te||1);return z.map((ue,Q)=>({x:R+Q*re,y:J-(ue-te)*ie,value:ue}))}const S=K(()=>!!(e.showLabels||e.labels.length>0||a!=null&&a.label)),w=K(()=>parseFloat(e.lineWidth)||4),k=K(()=>Number(e.width)),I=K(()=>{const z=Number(e.padding);return{minX:z,maxX:k.value-z,minY:z,maxY:parseInt(e.height,10)-z}}),E=K(()=>e.modelValue.map(z=>Ri(z,e.itemValue,z))),L=K(()=>{const z=[],B=b(E.value,I.value),R=B.length;for(let Z=0;z.length<R;Z++){const Y=B[Z];let J=e.labels[Z];J||(J=typeof Y=="object"?Y.value:Y),z.push({x:Y.x,value:String(J)})}return z});xt(()=>e.modelValue,async()=>{if(await kn(),!e.autoDraw||!l.value||zs())return;const z=l.value,B=z.getTotalLength();e.fill?(z.style.transformOrigin="bottom center",z.style.transition="none",z.style.transform="scaleY(0)",z.getBoundingClientRect(),z.style.transition=`transform ${f.value}ms ${e.autoDrawEasing}`,z.style.transform="scaleY(1)"):(z.style.strokeDasharray=`${B}`,z.style.strokeDashoffset=`${B}`,z.getBoundingClientRect(),z.style.transition=`stroke-dashoffset ${f.value}ms ${e.autoDrawEasing}`,z.style.strokeDashoffset="0"),h.value=B},{immediate:!0});function F(z){const B=typeof e.smooth=="boolean"?e.smooth?8:0:Number(e.smooth);return $5(b(E.value,I.value),B,z,parseInt(e.height,10))}ct(()=>{var B;const z=e.gradient.slice().length?e.gradient.slice().reverse():[""];return q("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[q("defs",null,[q("linearGradient",{id:c.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[z.map((R,Z)=>q("stop",{offset:Z/Math.max(z.length-1,1),"stop-color":R||"currentColor"},null))])]),S.value&&q("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[L.value.map((R,Z)=>{var Y;return q("text",{x:R.x+w.value/2+w.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[((Y=a.label)==null?void 0:Y.call(a,{index:Z,value:R.value}))??R.value])})]),q("path",{ref:l,d:F(e.fill),fill:e.fill?`url(#${c.value})`:"none",stroke:e.fill?"none":`url(#${c.value})`},null),e.fill&&q("path",{d:F(!1),fill:"none",stroke:e.color??((B=e.gradient)==null?void 0:B[0])},null)])})}}),j5=Re({type:{type:String,default:"trend"},..._I(),...bI()},"VSparkline"),U5=it()({name:"VSparkline",props:j5(),setup(e,i){let{slots:a}=i;const{textColorClasses:o,textColorStyles:c}=ga(()=>e.color),f=K(()=>!!(e.showLabels||e.labels.length>0||a!=null&&a.label)),h=K(()=>{let l=parseInt(e.height,10);return f.value&&(l+=parseInt(e.labelSize,10)*1.5),l});ct(()=>{const l=e.type==="trend"?k1:x1,b=e.type==="trend"?k1.filterProps(e):x1.filterProps(e);return V(l,nt({key:e.type,class:o.value,style:c.value,viewBox:`0 0 ${e.width} ${parseInt(h.value,10)}`},b),a)})}}),H5=Re({...Ft(),...w2({offset:8,minWidth:0,openDelay:0,closeDelay:100,location:"top center",transition:"scale-transition"})},"VSpeedDial"),q5=it()({name:"VSpeedDial",props:H5(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const o=Zt(e,"modelValue"),c=Qe(),f=K(()=>{var S;const[l,b="center"]=((S=e.location)==null?void 0:S.split(" "))??[];return`${l} ${b}`}),h=K(()=>({[`v-speed-dial__content--${f.value.replace(" ","-")}`]:!0}));return ct(()=>{const l=Yc.filterProps(e);return V(Yc,nt(l,{modelValue:o.value,"onUpdate:modelValue":b=>o.value=b,class:e.class,style:e.style,contentClass:["v-speed-dial__content",h.value,e.contentClass],location:f.value,ref:c,transition:"fade-transition"}),{...a,default:b=>V(pn,{defaults:{VBtn:{size:"small"}}},{default:()=>[V(Ua,{appear:!0,group:!0,transition:e.transition},{default:()=>{var S;return[(S=a.default)==null?void 0:S.call(a,b)]}})]})})}),{}}}),Ib=Symbol.for("vuetify:v-stepper"),xI=Re({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),wI=it()({name:"VStepperActions",props:xI(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,i){let{emit:a,slots:o}=i;const{t:c}=Zn();function f(){a("click:prev")}function h(){a("click:next")}return ct(()=>{const l={onClick:f},b={onClick:h};return q("div",{class:"v-stepper-actions"},[V(pn,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:c(e.prevText),variant:"text"}}},{default:()=>{var S;return[((S=o.prev)==null?void 0:S.call(o,{props:l}))??V(gn,l,null)]}}),V(pn,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:c(e.nextText),variant:"tonal"}}},{default:()=>{var S;return[((S=o.next)==null?void 0:S.call(o,{props:b}))??V(gn,b,null)]}})])}),{}}}),SI=_o("v-stepper-header"),G5=Re({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:Gt,default:"$complete"},editable:Boolean,editIcon:{type:Gt,default:"$edit"},error:Boolean,errorIcon:{type:Gt,default:"$error"},icon:Gt,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),W5=Re({...G5(),...Au()},"VStepperItem"),kI=it()({name:"VStepperItem",directives:{vRipple:qa},props:W5(),emits:{"group:selected":e=>!0},setup(e,i){let{slots:a}=i;const o=vl(e,Ib,!0),c=K(()=>(o==null?void 0:o.value.value)??e.value),f=K(()=>e.rules.every(I=>I()===!0)),h=K(()=>!e.disabled&&e.editable),l=K(()=>!e.disabled&&e.editable),b=K(()=>e.error||!f.value),S=K(()=>e.complete||e.rules.length>0&&f.value),w=K(()=>b.value?e.errorIcon:S.value?e.completeIcon:o.isSelected.value&&e.editable?e.editIcon:e.icon),k=K(()=>({canEdit:l.value,hasError:b.value,hasCompleted:S.value,title:e.title,subtitle:e.subtitle,step:c.value,value:e.value}));return ct(()=>{var z,B,R;const I=(!o||o.isSelected.value||S.value||l.value)&&!b.value&&!e.disabled,E=!!(e.title!=null||a.title),L=!!(e.subtitle!=null||a.subtitle);function F(){o==null||o.toggle()}return yi(q("button",{class:st(["v-stepper-item",{"v-stepper-item--complete":S.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":b.value},o==null?void 0:o.selectedClass.value]),disabled:!e.editable,type:"button",onClick:F},[h.value&&wl(!0,"v-stepper-item"),V(zr,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:I?e.color:void 0,size:24},{default:()=>{var Z;return[((Z=a.icon)==null?void 0:Z.call(a,k.value))??(w.value?V(un,{icon:w.value},null):c.value)]}}),q("div",{class:"v-stepper-item__content"},[E&&q("div",{key:"title",class:"v-stepper-item__title"},[((z=a.title)==null?void 0:z.call(a,k.value))??e.title]),L&&q("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[((B=a.subtitle)==null?void 0:B.call(a,k.value))??e.subtitle]),(R=a.default)==null?void 0:R.call(a,k.value)])]),[[qa,e.editable&&e.ripple,null]])}),{}}}),Z5=Re({...Wn(Gp(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),CI=it()({name:"VStepperWindow",props:Z5(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const o=vn(Ib,null),c=Zt(e,"modelValue"),f=K({get(){var h;return c.value!=null||!o?c.value:(h=o.items.value.find(l=>o.selected.value.includes(l.id)))==null?void 0:h.value},set(h){c.value=h}});return ct(()=>{const h=gu.filterProps(e);return V(gu,nt({_as:"VStepperWindow"},h,{modelValue:f.value,"onUpdate:modelValue":l=>f.value=l,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),a)}),{}}}),K5=Re({...Wp()},"VStepperWindowItem"),II=it()({name:"VStepperWindowItem",props:K5(),setup(e,i){let{slots:a}=i;return ct(()=>{const o=vu.filterProps(e);return V(vu,nt({_as:"VStepperWindowItem"},o,{class:["v-stepper-window-item",e.class],style:e.style}),a)}),{}}}),X5=Re({altLabels:Boolean,bgColor:String,completeIcon:Gt,editIcon:Gt,editable:Boolean,errorIcon:Gt,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...Su()},"Stepper"),Y5=Re({...X5(),...Tu({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...fb(),...pr(xI(),["prevText","nextText"])},"VStepper"),J5=it()({name:"VStepper",props:Y5(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const{items:o,next:c,prev:f,selected:h}=Sl(e,Ib),{displayClasses:l,mobile:b}=Jr(e),{completeIcon:S,editIcon:w,errorIcon:k,color:I,editable:E,prevText:L,nextText:F}=wu(e),z=K(()=>e.items.map((Z,Y)=>{const J=Ri(Z,e.itemTitle,Z),ae=Ri(Z,e.itemValue,Y+1);return{title:J,value:ae,raw:Z}})),B=K(()=>o.value.findIndex(Z=>h.value.includes(Z.id))),R=K(()=>e.disabled?e.disabled:B.value===0?"prev":B.value===o.value.length-1?"next":!1);return ki({VStepperItem:{editable:E,errorIcon:k,completeIcon:S,editIcon:w,prevText:L,nextText:F},VStepperActions:{color:I,disabled:R,prevText:L,nextText:F}}),ct(()=>{const Z=lf.filterProps(e),Y=!!(a.header||e.items.length),J=e.items.length>0,ae=!e.hideActions&&!!(J||a.actions);return V(lf,nt(Z,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":b.value},l.value,e.class],style:e.style}),{default:()=>{var he,te;return[Y&&V(SI,{key:"stepper-header"},{default:()=>[z.value.map((re,ie)=>{let{raw:ue,...Q}=re;return q(Bt,null,[!!ie&&V(Ha,null,null),V(kI,Q,{default:a[`header-item.${Q.value}`]??a.header,icon:a.icon,title:a.title,subtitle:a.subtitle})])})]}),J&&V(CI,{key:"stepper-window"},{default:()=>[z.value.map(re=>V(II,{value:re.value},{default:()=>{var ie,ue;return((ie=a[`item.${re.value}`])==null?void 0:ie.call(a,re))??((ue=a.item)==null?void 0:ue.call(a,re))}}))]}),(he=a.default)==null?void 0:he.call(a,{prev:f,next:c}),ae&&(((te=a.actions)==null?void 0:te.call(a,{next:c,prev:f}))??V(wI,{key:"stepper-actions","onClick:prev":f,"onClick:next":c},a))]}})}),{prev:f,next:c}}}),Q5=Re({color:String,height:[Number,String],window:Boolean,...Ft(),...Gi(),...ku(),...gi(),...mn(),...Dn()},"VSystemBar"),e3=it()({name:"VSystemBar",props:Q5(),setup(e,i){let{slots:a}=i;const{themeClasses:o}=$n(e),{backgroundColorClasses:c,backgroundColorStyles:f}=Un(()=>e.color),{elevationClasses:h}=ra(e),{roundedClasses:l}=Ci(e),{ssrBootStyles:b}=Eu(),S=K(()=>e.height??(e.window?32:24)),{layoutItemStyles:w}=Cu({id:e.name,order:K(()=>parseInt(e.order,10)),position:bt("top"),layoutSize:S,elementSize:S,active:K(()=>!0),absolute:we(()=>e.absolute)});return ct(()=>V(e.tag,{class:st(["v-system-bar",{"v-system-bar--window":e.window},o.value,c.value,h.value,l.value,e.class]),style:St([f.value,w.value,b.value,e.style])},a)),{}}}),Pb=Symbol.for("vuetify:v-tabs"),PI=Re({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Wn(jp({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),TI=it()({name:"VTab",props:PI(),setup(e,i){let{slots:a,attrs:o}=i;const{textColorClasses:c,textColorStyles:f}=ga(()=>e.sliderColor),h=Qe(),l=Qe(),b=K(()=>e.direction==="horizontal"),S=K(()=>{var k,I;return((I=(k=h.value)==null?void 0:k.group)==null?void 0:I.isSelected.value)??!1});function w(k){var E,L;let{value:I}=k;if(I){const F=(L=(E=h.value)==null?void 0:E.$el.parentElement)==null?void 0:L.querySelector(".v-tab--selected .v-tab__slider"),z=l.value;if(!F||!z)return;const B=getComputedStyle(F).color,R=F.getBoundingClientRect(),Z=z.getBoundingClientRect(),Y=b.value?"x":"y",J=b.value?"X":"Y",ae=b.value?"right":"bottom",he=b.value?"width":"height",te=R[Y],re=Z[Y],ie=te>re?R[ae]-Z[ae]:R[Y]-Z[Y],ue=Math.sign(ie)>0?b.value?"right":"bottom":Math.sign(ie)<0?b.value?"left":"top":"center",pe=(Math.abs(ie)+(Math.sign(ie)<0?R[he]:Z[he]))/Math.max(R[he],Z[he])||0,Ce=R[he]/Z[he]||0,$e=1.5;uo(z,{backgroundColor:[B,"currentcolor"],transform:[`translate${J}(${ie}px) scale${J}(${Ce})`,`translate${J}(${ie/$e}px) scale${J}(${(pe-1)/$e+1})`,"none"],transformOrigin:Array(3).fill(ue)},{duration:225,easing:Hh})}}return ct(()=>{const k=gn.filterProps(e);return V(gn,nt({symbol:Pb,ref:h,class:["v-tab",e.class],style:e.style,tabindex:S.value?0:-1,role:"tab","aria-selected":String(S.value),active:!1},k,o,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":w}),{...a,default:()=>{var I;return q(Bt,null,[((I=a.default)==null?void 0:I.call(a))??e.text,!e.hideSlider&&q("div",{ref:l,class:st(["v-tab__slider",c.value]),style:St(f.value)},null)])}})}),sa({},h)}}),t3=Re({...Wn(Gp(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),AI=it()({name:"VTabsWindow",props:t3(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const o=vn(Pb,null),c=Zt(e,"modelValue"),f=K({get(){var h;return c.value!=null||!o?c.value:(h=o.items.value.find(l=>o.selected.value.includes(l.id)))==null?void 0:h.value},set(h){c.value=h}});return ct(()=>{const h=gu.filterProps(e);return V(gu,nt({_as:"VTabsWindow"},h,{modelValue:f.value,"onUpdate:modelValue":l=>f.value=l,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),a)}),{}}}),n3=Re({...Wp()},"VTabsWindowItem"),EI=it()({name:"VTabsWindowItem",props:n3(),setup(e,i){let{slots:a}=i;return ct(()=>{const o=vu.filterProps(e);return V(vu,nt({_as:"VTabsWindowItem"},o,{class:["v-tabs-window-item",e.class],style:e.style}),a)}),{}}});function i3(e){return e?e.map(i=>Uh(i)?i:{text:i,value:i}):[]}const a3=Re({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...pr(PI(),["spaced"]),...rb({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Ji(),...mn()},"VTabs"),r3=it()({name:"VTabs",props:a3(),emits:{"update:modelValue":e=>!0},setup(e,i){let{attrs:a,slots:o}=i;const c=Zt(e,"modelValue"),f=K(()=>i3(e.items)),{densityClasses:h}=Ga(e),{backgroundColorClasses:l,backgroundColorStyles:b}=Un(()=>e.bgColor),{scopeId:S}=Mu();return ki({VTab:{color:we(()=>e.color),direction:we(()=>e.direction),stacked:we(()=>e.stacked),fixed:we(()=>e.fixedTabs),sliderColor:we(()=>e.sliderColor),hideSlider:we(()=>e.hideSlider)}}),ct(()=>{const w=of.filterProps(e),k=!!(o.window||e.items.length>0);return q(Bt,null,[V(of,nt(w,{modelValue:c.value,"onUpdate:modelValue":I=>c.value=I,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},h.value,l.value,e.class],style:[{"--v-tabs-height":Tt(e.height)},b.value,e.style],role:"tablist",symbol:Pb},S,a),{default:()=>{var I;return[((I=o.default)==null?void 0:I.call(o))??f.value.map(E=>{var L;return((L=o.tab)==null?void 0:L.call(o,{item:E}))??V(TI,nt(E,{key:E.text,value:E.value,spaced:e.spaced}),{default:o[`tab.${E.value}`]?()=>{var F;return(F=o[`tab.${E.value}`])==null?void 0:F.call(o,{item:E})}:void 0})})]}}),k&&V(AI,nt({modelValue:c.value,"onUpdate:modelValue":I=>c.value=I,key:"tabs-window"},S),{default:()=>{var I;return[f.value.map(E=>{var L;return((L=o.item)==null?void 0:L.call(o,{item:E}))??V(EI,{value:E.value},{default:()=>{var F;return(F=o[`item.${E.value}`])==null?void 0:F.call(o,{item:E})}})}),(I=o.window)==null?void 0:I.call(o)]}})])}),{}}}),s3=Re({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...IC(),...wo(),...kf()},"VTextarea"),o3=it()({name:"VTextarea",directives:{vIntersect:ds},inheritAttrs:!1,props:s3(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(e,i){let{attrs:a,emit:o,slots:c}=i;const f=Zt(e,"modelValue"),{isFocused:h,focus:l,blur:b}=xo(e),{onIntersect:S}=TC(e),w=K(()=>typeof e.counterValue=="function"?e.counterValue(f.value):(f.value||"").toString().length),k=K(()=>{if(a.maxlength)return a.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),I=Qe(),E=Qe(),L=bt(""),F=Qe(),z=PC(e),B=K(()=>e.persistentPlaceholder||h.value||e.active);function R(){var Q;z.isSuppressing.value&&z.update(),F.value!==document.activeElement&&((Q=F.value)==null||Q.focus()),h.value||l()}function Z(Q){R(),o("click:control",Q)}function Y(Q){o("mousedown:control",Q)}function J(Q){Q.stopPropagation(),R(),kn(()=>{f.value="",mf(e["onClick:clear"],Q)})}function ae(Q){var Ce;const pe=Q.target;if(f.value=pe.value,(Ce=e.modelModifiers)!=null&&Ce.trim){const $e=[pe.selectionStart,pe.selectionEnd];kn(()=>{pe.selectionStart=$e[0],pe.selectionEnd=$e[1]})}}const he=Qe(),te=Qe(Number(e.rows)),re=K(()=>["plain","underlined"].includes(e.variant));pi(()=>{e.autoGrow||(te.value=Number(e.rows))});function ie(){e.autoGrow&&kn(()=>{if(!he.value||!E.value)return;const Q=getComputedStyle(he.value),pe=getComputedStyle(E.value.$el),Ce=parseFloat(Q.getPropertyValue("--v-field-padding-top"))+parseFloat(Q.getPropertyValue("--v-input-padding-top"))+parseFloat(Q.getPropertyValue("--v-field-padding-bottom")),$e=he.value.scrollHeight,Xe=parseFloat(Q.lineHeight),Ye=Math.max(parseFloat(e.rows)*Xe+Ce,parseFloat(pe.getPropertyValue("--v-input-control-height"))),qe=parseFloat(e.maxRows)*Xe+Ce||1/0,Te=ni($e??0,Ye,qe);te.value=Math.floor((Te-Ce)/Xe),L.value=Tt(Te)})}Fi(ie),xt(f,ie),xt(()=>e.rows,ie),xt(()=>e.maxRows,ie),xt(()=>e.density,ie),xt(te,Q=>{o("update:rows",Q)});let ue;return xt(he,Q=>{Q?(ue=new ResizeObserver(ie),ue.observe(he.value)):ue==null||ue.disconnect()}),va(()=>{ue==null||ue.disconnect()}),ct(()=>{const Q=!!(c.counter||e.counter||e.counterValue),pe=!!(Q||c.details),[Ce,$e]=xl(a),{modelValue:Xe,...Ye}=Ca.filterProps(e),qe={...yl.filterProps(e),"onClick:clear":J};return V(Ca,nt({ref:I,modelValue:f.value,"onUpdate:modelValue":Te=>f.value=Te,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":re.value},e.class],style:e.style},Ce,Ye,{centerAffix:te.value===1&&!re.value,focused:h.value}),{...c,default:Te=>{let{id:Me,isDisabled:Ve,isDirty:Fe,isReadonly:Be,isValid:lt,hasDetails:vt}=Te;return V(yl,nt({ref:E,style:{"--v-textarea-control-height":L.value},onClick:Z,onMousedown:Y,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},qe,{id:Me.value,active:B.value||Fe.value,centerAffix:te.value===1&&!re.value,dirty:Fe.value||e.dirty,disabled:Ve.value,focused:h.value,details:vt.value,error:lt.value===!1}),{...c,default:kt=>{let{props:{class:ge,...je}}=kt;return q(Bt,null,[e.prefix&&q("span",{class:"v-text-field__prefix"},[e.prefix]),yi(q("textarea",nt({ref:F,class:ge,value:f.value,onInput:ae,autofocus:e.autofocus,readonly:Be.value,disabled:Ve.value,placeholder:e.placeholder,rows:e.rows,name:z.fieldName.value,autocomplete:z.fieldAutocomplete.value,onFocus:R,onBlur:b},je,$e),null),[[ds,{handler:S},null,{once:!0}]]),e.autoGrow&&yi(q("textarea",{class:st([ge,"v-textarea__sizer"]),id:`${je.id}-sizer`,"onUpdate:modelValue":rt=>f.value=rt,ref:he,readonly:!0,"aria-hidden":"true"},null),[[WE,f.value]]),e.suffix&&q("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:pe?Te=>{var Me;return q(Bt,null,[(Me=c.details)==null?void 0:Me.call(c,Te),Q&&q(Bt,null,[q("span",null,null),V($p,{active:e.persistentCounter||h.value,value:w.value,max:k.value,disabled:e.disabled},c.counter)])])}:void 0})}),sa({},I,E,F)}}),l3=Re({withBackground:Boolean,...Ft(),...Dn(),...mn()},"VThemeProvider"),u3=it()({name:"VThemeProvider",props:l3(),setup(e,i){let{slots:a}=i;const{themeClasses:o}=$n(e);return()=>{var c;return e.withBackground?V(e.tag,{class:st(["v-theme-provider",o.value,e.class]),style:St(e.style)},{default:()=>{var f;return[(f=a.default)==null?void 0:f.call(a)]}}):(c=a.default)==null?void 0:c.call(a)}}}),c3=Re({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:Gt,iconColor:String,lineColor:String,...Ft(),...gi(),...$s(),...Gi()},"VTimelineDivider"),d3=it()({name:"VTimelineDivider",props:c3(),setup(e,i){let{slots:a}=i;const{sizeClasses:o,sizeStyles:c}=td(e,"v-timeline-divider__dot"),{backgroundColorStyles:f,backgroundColorClasses:h}=Un(()=>e.dotColor),{roundedClasses:l}=Ci(e,"v-timeline-divider__dot"),{elevationClasses:b}=ra(e),{backgroundColorClasses:S,backgroundColorStyles:w}=Un(()=>e.lineColor);return ct(()=>q("div",{class:st(["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class]),style:St(e.style)},[q("div",{class:st(["v-timeline-divider__before",S.value]),style:St(w.value)},null),!e.hideDot&&q("div",{key:"dot",class:st(["v-timeline-divider__dot",b.value,l.value,o.value]),style:St(c.value)},[q("div",{class:st(["v-timeline-divider__inner-dot",h.value,l.value]),style:St(f.value)},[a.default?V(pn,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},a.default):V(un,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),q("div",{class:st(["v-timeline-divider__after",S.value]),style:St(w.value)},null)])),{}}}),MI=Re({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:Gt,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>e==null||["start","end"].includes(e)},...Ft(),...Oi(),...Gi(),...gi(),...$s(),...mn()},"VTimelineItem"),h3=it()({name:"VTimelineItem",props:MI(),setup(e,i){let{slots:a}=i;const{dimensionStyles:o}=$i(e),c=bt(0),f=Qe();return xt(f,h=>{var l;h&&(c.value=((l=h.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:l.getBoundingClientRect().width)??0)},{flush:"post"}),ct(()=>{var h,l;return q("div",{class:st(["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":e.side==="start","v-timeline-item--side-end":e.side==="end"},e.class]),style:St([{"--v-timeline-dot-size":Tt(c.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${Tt(e.lineInset)})`:Tt(0)},e.style])},[q("div",{class:"v-timeline-item__body",style:St(o.value)},[(h=a.default)==null?void 0:h.call(a)]),V(d3,{ref:f,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:a.icon}),e.density!=="compact"&&q("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&((l=a.opposite)==null?void 0:l.call(a))])])}),{}}}),f3=Re({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...pr(MI({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...Ft(),...Ji(),...mn(),...Dn()},"VTimeline"),m3=it()({name:"VTimeline",props:f3(),setup(e,i){let{slots:a}=i;const{themeClasses:o}=$n(e),{densityClasses:c}=Ga(e),{rtlClasses:f}=qi();ki({VTimelineDivider:{lineColor:we(()=>e.lineColor)},VTimelineItem:{density:we(()=>e.density),dotColor:we(()=>e.dotColor),fillDot:we(()=>e.fillDot),hideOpposite:we(()=>e.hideOpposite),iconColor:we(()=>e.iconColor),lineColor:we(()=>e.lineColor),lineInset:we(()=>e.lineInset),size:we(()=>e.size)}});const h=K(()=>{const b=e.side?e.side:e.density!=="default"?"end":null;return b&&`v-timeline--side-${b}`}),l=K(()=>{const b=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return b;case"start":return b[0];case"end":return b[1];default:return null}});return ct(()=>V(e.tag,{class:st(["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,l.value,{"v-timeline--inset-line":!!e.lineInset},o.value,c.value,h.value,f.value,e.class]),style:St([{"--v-timeline-line-thickness":Tt(e.lineThickness)},e.style])},a)),{}}});function ru(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(i,"0")}const p3=Re({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),Zy=it()({name:"VTimePickerClock",props:p3(),emits:{change:e=>!0,input:e=>!0},setup(e,i){let{emit:a}=i;const o=Qe(null),c=Qe(null),f=Qe(void 0),h=Qe(!1),l=Qe(null),b=Qe(null),S=rk(Te=>a("change",Te),750),{textColorClasses:w,textColorStyles:k}=ga(()=>e.color),{backgroundColorClasses:I,backgroundColorStyles:E}=Un(()=>e.color),L=K(()=>e.max-e.min+1),F=K(()=>e.double?L.value/2:L.value),z=K(()=>360/F.value),B=K(()=>z.value*Math.PI/180),R=K(()=>e.modelValue==null?e.min:e.modelValue),Z=K(()=>.62),Y=K(()=>{const Te=[];for(let Me=e.min;Me<=e.max;Me=Me+e.step)Te.push(Me);return Te});xt(()=>e.modelValue,Te=>{f.value=Te});function J(Te){f.value!==Te&&(f.value=Te),a("input",Te)}function ae(Te){return!e.allowedValues||e.allowedValues(Te)}function he(Te){if(!e.scrollable||e.disabled)return;Te.preventDefault();const Me=Math.sign(-Te.deltaY||1);let Ve=R.value;do Ve=Ve+Me,Ve=(Ve-e.min+L.value)%L.value+e.min;while(!ae(Ve)&&Ve!==R.value);Ve!==e.displayedValue&&J(Ve),S(Ve)}function te(Te){return e.double&&Te-e.min>=F.value}function re(Te){return te(Te)?Z.value:1}function ie(Te){const Me=e.rotate*Math.PI/180;return{x:Math.sin((Te-e.min)*B.value+Me)*re(Te),y:-Math.cos((Te-e.min)*B.value+Me)*re(Te)}}function ue(Te,Me){const Ve=(Math.round(Te/z.value)+(Me?F.value:0))%L.value+e.min;return Te<360-z.value/2?Ve:Me?e.max-F.value+1:e.min}function Q(Te){const{x:Me,y:Ve}=ie(Te);return{left:`${Math.round(50+Me*50)}%`,top:`${Math.round(50+Ve*50)}%`}}function pe(Te,Me){const Ve=Me.x-Te.x,Fe=Me.y-Te.y;return Math.sqrt(Ve*Ve+Fe*Fe)}function Ce(Te,Me){const Ve=2*Math.atan2(Me.y-Te.y-pe(Te,Me),Me.x-Te.x);return Math.abs(Ve*180/Math.PI)}function $e(Te){l.value===null&&(l.value=Te),b.value=Te,J(Te)}function Xe(Te){var fe,se;if(Te.preventDefault(),!h.value&&Te.type!=="click"||!o.value)return;const{width:Me,top:Ve,left:Fe}=(fe=o.value)==null?void 0:fe.getBoundingClientRect(),{width:Be}=((se=c.value)==null?void 0:se.getBoundingClientRect())??{width:0},{clientX:lt,clientY:vt}="touches"in Te?Te.touches[0]:Te,kt={x:Me/2,y:-Me/2},ge={x:lt-Fe,y:Ve-vt},je=Math.round(Ce(kt,ge)-e.rotate+360)%360,rt=e.double&&pe(kt,ge)<(Be+Be*Z.value)/4,ft=Math.ceil(15/z.value);let Rt;for(let Se=0;Se<ft;Se++)if(Rt=ue(je+Se*z.value,rt),ae(Rt)||(Rt=ue(je-Se*z.value,rt),ae(Rt)))return $e(Rt)}function Ye(Te){e.disabled||(Te.preventDefault(),window.addEventListener("mousemove",Xe),window.addEventListener("touchmove",Xe),window.addEventListener("mouseup",qe),window.addEventListener("touchend",qe),l.value=null,b.value=null,h.value=!0,Xe(Te))}function qe(Te){Te.stopPropagation(),window.removeEventListener("mousemove",Xe),window.removeEventListener("touchmove",Xe),window.removeEventListener("mouseup",qe),window.removeEventListener("touchend",qe),h.value=!1,b.value!==null&&ae(b.value)&&a("change",b.value)}ct(()=>q("div",{class:st([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:Ye,onTouchstart:Ye,onWheel:he,ref:o},[q("div",{class:"v-time-picker-clock__inner",ref:c},[q("div",{class:st([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":te(e.modelValue)},w.value]),style:St([{transform:`rotate(${e.rotate+z.value*(R.value-e.min)}deg) scaleY(${re(R.value)})`},k.value])},null),Y.value.map(Te=>{const Me=Te===R.value;return q("div",{class:st([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":Me,"v-time-picker-clock__item--disabled":e.disabled||!ae(Te)},Me&&I.value]),style:St([Q(Te),Me&&E.value])},[q("span",null,[e.format(Te)])])})])]))}}),g3=Re({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),Ky=it()({name:"VTimePickerControls",props:g3(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0},setup(e,i){let{emit:a,slots:o}=i;const{t:c}=Zn();return ct(()=>{let f=e.hour;return e.ampm&&(f=f?(f-1)%12+1:12),q("div",{class:"v-time-picker-controls"},[q("div",{class:st({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[V(gn,{active:e.viewMode==="hour",color:e.viewMode==="hour"?e.color:void 0,disabled:e.disabled,variant:"tonal",class:st({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),text:e.hour==null?"--":ru(`${f}`),onClick:()=>a("update:viewMode","hour")},null),q("span",{class:st(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}])},[Lt(":")]),V(gn,{active:e.viewMode==="minute",color:e.viewMode==="minute"?e.color:void 0,class:st({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,variant:"tonal",text:e.minute==null?"--":ru(e.minute),onClick:()=>a("update:viewMode","minute")},null),e.useSeconds&&q("span",{class:st(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]),key:"secondsDivider"},[Lt(":")]),e.useSeconds&&V(gn,{key:"secondsVal",active:e.viewMode==="second",color:e.viewMode==="second"?e.color:void 0,variant:"tonal",onClick:()=>a("update:viewMode","second"),class:st({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,text:e.second==null?"--":ru(e.second)},null),e.ampm&&q("div",{class:"v-time-picker-controls__ampm"},[V(gn,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:st({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"}),disabled:e.disabled,text:c("$vuetify.timePicker.am"),variant:e.disabled&&e.period==="am"?"elevated":"tonal",onClick:()=>e.period!=="am"?a("update:period","am"):null},null),V(gn,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:st({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"}),disabled:e.disabled,text:c("$vuetify.timePicker.pm"),variant:e.disabled&&e.period==="pm"?"elevated":"tonal",onClick:()=>e.period!=="pm"?a("update:period","pm"):null},null)])])])}),{}}}),v3=Dr(24),DI=Dr(12),y3=DI.map(e=>e+12);Dr(60);const _3=Re({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},period:{type:String,default:"am",validator:e=>["am","pm"].includes(e)},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...Wn(Zp({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),b3=it()({name:"VTimePicker",props:_3(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,i){let{emit:a,slots:o}=i;const{t:c}=Zn(),f=Qe(null),h=Qe(null),l=Qe(null),b=Qe(null),S=Qe(null),w=Qe(null),k=Zt(e,"period","am"),I=Zt(e,"viewMode","hour"),E=Qe(null),L=Qe(null),F=K(()=>{let Q;if(e.allowedHours instanceof Array?Q=$e=>e.allowedHours.includes($e):Q=e.allowedHours,!e.min&&!e.max)return Q;const pe=e.min?Number(e.min.split(":")[0]):0,Ce=e.max?Number(e.max.split(":")[0]):23;return $e=>$e>=Number(pe)&&$e<=Number(Ce)&&(!Q||Q($e))}),z=K(()=>{let Q;const pe=!F.value||f.value===null||F.value(f.value);if(e.allowedMinutes instanceof Array?Q=Me=>e.allowedMinutes.includes(Me):Q=e.allowedMinutes,!e.min&&!e.max)return pe?Q:()=>!1;const[Ce,$e]=e.min?e.min.split(":").map(Number):[0,0],[Xe,Ye]=e.max?e.max.split(":").map(Number):[23,59],qe=Ce*60+Number($e),Te=Xe*60+Number(Ye);return Me=>{const Ve=60*f.value+Me;return Ve>=qe&&Ve<=Te&&pe&&(!Q||Q(Me))}}),B=K(()=>{let Q;const Ce=(!F.value||f.value===null||F.value(f.value))&&(!z.value||h.value===null||z.value(h.value));if(e.allowedSeconds instanceof Array?Q=Be=>e.allowedSeconds.includes(Be):Q=e.allowedSeconds,!e.min&&!e.max)return Ce?Q:()=>!1;const[$e,Xe,Ye]=e.min?e.min.split(":").map(Number):[0,0,0],[qe,Te,Me]=e.max?e.max.split(":").map(Number):[23,59,59],Ve=$e*3600+Xe*60+Number(Ye||0),Fe=qe*3600+Te*60+Number(Me||0);return Be=>{const lt=3600*f.value+60*h.value+Be;return lt>=Ve&&lt<=Fe&&Ce&&(!Q||Q(Be))}}),R=K(()=>e.format==="ampm");xt(()=>e.period,Q=>re(Q)),xt(()=>e.modelValue,Q=>he(Q)),Fi(()=>{he(e.modelValue)});function Z(){return f.value!=null&&h.value!=null&&(!e.useSeconds||l.value!=null)?`${ru(f.value)}:${ru(h.value)}`+(e.useSeconds?`:${ru(l.value)}`:""):null}function Y(){const Q=Z();Q!==null&&a("update:modelValue",Q)}function J(Q){return Q?(Q-1)%12+1:12}function ae(Q,pe){return Q%12+(pe==="pm"?12:0)}function he(Q){if(Q==null||Q==="")f.value=null,h.value=null,l.value=null;else if(Q instanceof Date)f.value=Q.getHours(),h.value=Q.getMinutes(),l.value=Q.getSeconds();else{const[pe,,Ce,,$e,Xe]=Q.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);f.value=Xe?ae(parseInt(pe,10),Xe):parseInt(pe,10),h.value=parseInt(Ce,10),l.value=parseInt($e||0,10)}k.value=f.value==null||f.value<12?"am":"pm"}function te(Q,pe){const Ce=F.value;if(!Ce)return pe;const $e=R.value?pe<12?DI:y3:v3;return(($e.find(Ye=>Ce((Ye+pe)%$e.length+$e[0]))||0)+pe)%$e.length+$e[0]}function re(Q){if(k.value=Q,f.value!=null){const pe=f.value+(k.value==="am"?-12:12);f.value=te("hour",pe)}return a("update:period",Q),Y(),!0}function ie(Q){I.value==="hour"?f.value=R.value?ae(Q,k.value):Q:I.value==="minute"?h.value=Q:l.value=Q}function ue(Q){switch(I.value||"hour"){case"hour":a("update:hour",Q);break;case"minute":a("update:minute",Q);break;case"second":a("update:second",Q);break}const pe=f.value!==null&&h.value!==null&&(e.useSeconds?l.value!==null:!0);I.value==="hour"?I.value="minute":e.useSeconds&&I.value==="minute"&&(I.value="second"),!(f.value===b.value&&h.value===S.value&&(!e.useSeconds||l.value===w.value)||Z()===null)&&(b.value=f.value,S.value=h.value,e.useSeconds&&(w.value=l.value),pe&&Y())}ct(()=>{const Q=Jc.filterProps(e),pe=Ky.filterProps(e),Ce=Zy.filterProps(Wn(e,["format","modelValue","min","max"]));return V(Jc,nt(Q,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>{var $e;return(($e=o.title)==null?void 0:$e.call(o))??q("div",{class:"v-time-picker__title"},[c(e.title)])},header:()=>V(Ky,nt(pe,{ampm:R.value,hour:f.value,minute:h.value,period:k.value,second:l.value,viewMode:I.value,"onUpdate:period":$e=>re($e),"onUpdate:viewMode":$e=>I.value=$e,ref:E}),null),default:()=>V(Zy,nt(Ce,{allowedValues:I.value==="hour"?F.value:I.value==="minute"?z.value:B.value,double:I.value==="hour"&&!R.value,format:I.value==="hour"?R.value?J:$e=>$e:$e=>ru($e,2),max:I.value==="hour"?R.value&&k.value==="am"?11:23:59,min:I.value==="hour"&&R.value&&k.value==="pm"?12:0,size:20,step:I.value==="hour"?1:5,modelValue:I.value==="hour"?f.value:I.value==="minute"?h.value:l.value,onChange:ue,onInput:ie,ref:L}),null),actions:o.actions})})}}),x3=Re({...Wn(FC({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),Xy=it()({name:"VTreeviewGroup",props:x3(),setup(e,i){let{slots:a}=i;const o=Qe(),c=K(()=>{var h;return(h=o.value)!=null&&h.isOpen?e.collapseIcon:e.expandIcon}),f=K(()=>({VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,toggleIcon:c.value}}));return ct(()=>{const h=nf.filterProps(e);return V(nf,nt(h,{ref:o,class:["v-treeview-group",e.class],subgroup:!0}),{...a,activator:a.activator?l=>q(Bt,null,[V(pn,{defaults:f.value},{default:()=>{var b;return[(b=a.activator)==null?void 0:b.call(a,l)]}})]):void 0})}),{}}}),VI=Symbol.for("vuetify:v-treeview"),zI=Re({loading:Boolean,hideActions:Boolean,hasCustomPrepend:Boolean,indentLines:Array,toggleIcon:Gt,...OC({slim:!0})},"VTreeviewItem"),Yy=it()({name:"VTreeviewItem",props:zI(),emits:{toggleExpand:e=>!0},setup(e,i){let{slots:a,emit:o}=i;const c=vn(VI,{visibleIds:Qe()}).visibleIds,f=Qe(),h=K(()=>{var I,E;return((I=f.value)==null?void 0:I.root.activatable.value)&&((E=f.value)==null?void 0:E.isGroupActivator)}),l=K(()=>{var I,E;return((I=f.value)==null?void 0:I.link.isClickable.value)||e.value!=null&&!!((E=f.value)!=null&&E.list)}),b=K(()=>!e.disabled&&e.link!==!1&&(e.link||l.value||h.value)),S=K(()=>{var I;return c.value&&!c.value.has(rn((I=f.value)==null?void 0:I.id))});function w(I){var E,L;b.value&&h.value&&((L=f.value)==null||L.activate(!((E=f.value)!=null&&E.isActivated),I))}function k(I){I.preventDefault(),I.stopPropagation(),o("toggleExpand",I)}return ct(()=>{var L;const I=ri.filterProps(e),E=a.prepend||e.toggleIcon||e.indentLines||e.prependIcon||e.prependAvatar;return V(ri,nt({ref:f},I,{active:((L=f.value)==null?void 0:L.isActivated)||void 0,class:["v-treeview-item",{"v-treeview-item--activatable-group-activator":h.value,"v-treeview-item--filtered":S.value},e.class],ripple:!1,onClick:w}),{...a,prepend:E?F=>{var z;return q(Bt,null,[e.indentLines&&e.indentLines.length>0?q("div",{key:"indent-lines",class:"v-treeview-indent-lines",style:{"--v-indent-parts":e.indentLines.length}},[e.indentLines.map(B=>q("div",{class:st(`v-treeview-indent-line v-treeview-indent-line--${B}`)},null))]):"",!e.hideActions&&V(J_,{start:!0},{default:()=>[e.toggleIcon?q(Bt,null,[a.toggle?V(pn,{key:"prepend-defaults",defaults:{VBtn:{density:"compact",icon:e.toggleIcon,variant:"text",loading:e.loading},VProgressCircular:{indeterminate:"disable-shrink",size:20,width:2}}},{default:()=>[a.toggle({...F,loading:e.loading,props:{onClick:k}})]}):V(gn,{key:"prepend-toggle",density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:k},{loader:()=>V(pu,{indeterminate:"disable-shrink",size:"20",width:"2"},null)})]):q("div",{class:"v-treeview-item__level"},null)]}),e.hasCustomPrepend?V(pn,{key:"prepend-defaults",defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{start:!0}}},{default:()=>{var B;return[(B=a.prepend)==null?void 0:B.call(a,F)]}}):q(Bt,null,[(z=a.prepend)==null?void 0:z.call(a,F),e.prependAvatar&&V(zr,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&V(un,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])])}:void 0})}),sa({},f)}}),LI=Re({fluid:Boolean,disabled:Boolean,loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,openOnClick:{type:Boolean,default:void 0},indeterminateIcon:{type:Gt,default:"$checkboxIndeterminate"},falseIcon:Gt,trueIcon:Gt,returnObject:Boolean,activatable:Boolean,selectable:Boolean,selectedColor:String,selectStrategy:[String,Function,Object],index:Number,isLastGroup:Boolean,separateRoots:Boolean,parentIndentLines:Array,indentLinesVariant:String,path:{type:Array,default:()=>[]},...pr(zI(),["hideActions"]),...Ji()},"VTreeviewChildren"),gp=it()({name:"VTreeviewChildren",props:LI(),setup(e,i){let{slots:a}=i;const o=Ui(new Set),c=Qe([]),f=K(()=>!e.disabled&&(e.openOnClick!=null?e.openOnClick:e.selectable&&!e.activatable));async function h(b){var S,w;try{if(!((S=e.items)!=null&&S.length)||!e.loadChildren)return;((w=b==null?void 0:b.children)==null?void 0:w.length)===0&&(o.add(b.value),await e.loadChildren(b.raw))}finally{o.delete(b.value)}}function l(b,S){e.selectable&&b(S)}return()=>{var b,S;return((b=a.default)==null?void 0:b.call(a))??((S=e.items)==null?void 0:S.map((w,k,I)=>{var te,re;const{children:E,props:L}=w,F=o.has(w.value),z=!!((te=I.at(k+1))!=null&&te.children),B=((re=e.path)==null?void 0:re.length)??0,R=I.length-1===k,Z={index:k,depth:B,isFirst:k===0,isLast:R,path:[...e.path,k],hideAction:e.hideActions},Y=KM({depth:B,isLast:R,isLastGroup:e.isLastGroup,leafLinks:!e.hideActions&&!e.fluid,separateRoots:e.separateRoots,parentIndentLines:e.parentIndentLines,variant:e.indentLinesVariant}),J={toggle:a.toggle?ie=>{var ue;return(ue=a.toggle)==null?void 0:ue.call(a,{...ie,...Z,item:w.raw,internalItem:w,loading:F})}:void 0,prepend:ie=>{var ue;return q(Bt,null,[e.selectable&&(!E||E&&!["leaf","single-leaf"].includes(e.selectStrategy))&&V(J_,{start:!0},{default:()=>[V(Bs,{key:w.value,modelValue:ie.isSelected,disabled:e.disabled,loading:F,color:e.selectedColor,density:e.density,indeterminate:ie.isIndeterminate,indeterminateIcon:e.indeterminateIcon,falseIcon:e.falseIcon,trueIcon:e.trueIcon,"onUpdate:modelValue":Q=>l(ie.select,Q),onClick:Q=>Q.stopPropagation(),onKeydown:Q=>{["Enter","Space"].includes(Q.key)&&(Q.stopPropagation(),l(ie.select,ie.isSelected))}},null)]}),(ue=a.prepend)==null?void 0:ue.call(a,{...ie,...Z,item:w.raw,internalItem:w})])},append:a.append?ie=>{var ue;return(ue=a.append)==null?void 0:ue.call(a,{...ie,...Z,item:w.raw,internalItem:w})}:void 0,title:a.title?ie=>{var ue;return(ue=a.title)==null?void 0:ue.call(a,{...ie,item:w.raw,internalItem:w})}:void 0,subtitle:a.subtitle?ie=>{var ue;return(ue=a.subtitle)==null?void 0:ue.call(a,{...ie,item:w.raw,internalItem:w})}:void 0},ae=Xy.filterProps(L),he=gp.filterProps({...e,...Z});return E?V(Xy,nt(ae,{value:e.returnObject?w.raw:ae==null?void 0:ae.value,rawId:ae==null?void 0:ae.value}),{activator:ie=>{let{props:ue}=ie;const Q={...L,...ue,value:L==null?void 0:L.value,indentLines:Y.node,onToggleExpand:[()=>h(w),ue.onClick],onClick:f.value?[()=>h(w),ue.onClick]:()=>{var pe,Ce;return l((pe=c.value[k])==null?void 0:pe.select,!((Ce=c.value[k])!=null&&Ce.isSelected))}};return Lm(a.header,{props:Q,item:w.raw,internalItem:w,loading:F},()=>V(Yy,nt({ref:pe=>c.value[k]=pe},Q,{hasCustomPrepend:!!a.prepend,hideActions:e.hideActions,value:e.returnObject?w.raw:L.value,loading:F}),J))},default:()=>V(gp,nt(he,{items:E,indentLinesVariant:e.indentLinesVariant,parentIndentLines:Y.children,isLastGroup:z,returnObject:e.returnObject}),a)}):Lm(a.item,{props:L,item:w.raw,internalItem:w},()=>w.type==="divider"?Lm(a.divider,{props:w.raw},()=>V(Ha,w.props,null)):w.type==="subheader"?Lm(a.subheader,{props:w.raw},()=>V(sd,w.props,null)):V(Yy,nt(L,{hasCustomPrepend:!!a.prepend,hideActions:e.hideActions,indentLines:Y.leaf,value:e.returnObject?rn(w.raw):L.value}),J))}))}}});function BI(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const a of e)i.push(a),a.children&&BI(a.children,i);return i}const w3=Re({openAll:Boolean,indentLines:[Boolean,String],search:String,...od({filterKeys:["title"]}),...Wn(LI(),["index","path","indentLinesVariant","parentIndentLines","isLastGroup"]),...Wn(qC({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav","openStrategy"]),modelValue:Array},"VTreeview"),S3=it()({name:"VTreeview",props:w3(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"update:modelValue":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,i){let{slots:a,emit:o}=i;const{items:c}=HC(e),f=we(()=>e.activeColor),h=we(()=>e.baseColor),l=we(()=>e.color),b=Zt(e,"activated"),S=Zt(e,"selected"),w=K({get:()=>e.modelValue??S.value,set(Z){S.value=Z,o("update:modelValue",Z)}}),k=Qe(),I=K(()=>e.openAll?R(c.value):e.opened),E=K(()=>BI(c.value)),L=we(()=>e.search),{filteredItems:F}=ld(e,E,L),z=K(()=>{var Y;if(!L.value)return null;const Z=(Y=k.value)==null?void 0:Y.getPath;return Z?new Set(F.value.flatMap(J=>{const ae=e.returnObject?J.raw:J.props.value;return[...Z(ae),...B(ae)].map(rn)})):null});function B(Z){var ae,he;const Y=[],J=(((ae=k.value)==null?void 0:ae.children.get(Z))??[]).slice();for(;J.length;){const te=J.shift();te&&(Y.push(te),J.push(...(((he=k.value)==null?void 0:he.children.get(te))??[]).slice()))}return Y}function R(Z){let Y=[];for(const J of Z)J.children&&(Y.push(e.returnObject?rn(J.raw):J.value),J.children&&(Y=Y.concat(R(J.children))));return Y}return Jn(VI,{visibleIds:z}),ki({VTreeviewGroup:{activeColor:f,baseColor:h,color:l,collapseIcon:we(()=>e.collapseIcon),expandIcon:we(()=>e.expandIcon)},VTreeviewItem:{activeClass:we(()=>e.activeClass),activeColor:f,baseColor:h,color:l,density:we(()=>e.density),disabled:we(()=>e.disabled),lines:we(()=>e.lines),variant:we(()=>e.variant)}}),ct(()=>{const Z=vo.filterProps(e),Y=gp.filterProps(e),J=typeof e.indentLines=="boolean"?"default":e.indentLines;return V(vo,nt({ref:k},Z,{class:["v-treeview",{"v-treeview--fluid":e.fluid},e.class],openStrategy:"multiple",style:e.style,opened:I.value,activated:b.value,"onUpdate:activated":ae=>b.value=ae,selected:w.value,"onUpdate:selected":ae=>w.value=ae}),{default:()=>[V(gp,nt(Y,{density:e.density,returnObject:e.returnObject,items:c.value,parentIndentLines:e.indentLines?[]:void 0,indentLinesVariant:J}),a)]})}),{}}}),k3=it()({name:"VValidation",props:kC(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const o=CC(e,"validation");return()=>{var c;return(c=a.default)==null?void 0:c.call(a,o)}}}),C3=Object.freeze(Object.defineProperty({__proto__:null,VAlert:db,VAlertTitle:I2,VApp:GC,VAppBar:My,VAppBarNavIcon:KC,VAppBarTitle:eB,VAutocomplete:qR,VAvatar:zr,VBadge:WR,VBanner:XR,VBannerActions:T2,VBannerText:A2,VBottomNavigation:JR,VBottomSheet:eF,VBreadcrumbs:aF,VBreadcrumbsDivider:M2,VBreadcrumbsItem:D2,VBtn:gn,VBtnGroup:Ty,VBtnToggle:xL,VCard:ss,VCardActions:Yk,VCardItem:nC,VCardSubtitle:Jk,VCardText:Ms,VCardTitle:gl,VCarousel:fF,VCarouselItem:pF,VCheckbox:GB,VCheckboxBtn:Bs,VChip:Vs,VChipGroup:YB,VClassIcon:B_,VCode:gF,VCol:na,VColorPicker:eO,VCombobox:nO,VComponentIcon:_y,VConfirmEdit:aO,VContainer:Dy,VCounter:$p,VDataIterator:mO,VDataTable:TO,VDataTableFooter:uf,VDataTableHeaders:yu,VDataTableRow:Sb,VDataTableRows:_u,VDataTableServer:DO,VDataTableVirtual:EO,VDatePicker:RO,VDatePickerControls:jy,VDatePickerHeader:Uy,VDatePickerMonth:Hy,VDatePickerMonths:qy,VDatePickerYears:Gy,VDefaultsProvider:pn,VDialog:Ry,VDialogBottomTransition:Hz,VDialogTopTransition:qz,VDialogTransition:Fp,VDivider:Ha,VEmptyState:OO,VExpandTransition:Op,VExpandXTransition:U_,VExpansionPanel:ul,VExpansionPanelText:As,VExpansionPanelTitle:Es,VExpansionPanels:G_,VFab:NO,VFabTransition:Uz,VFadeTransition:ef,VField:yl,VFieldLabel:kh,VFileInput:WO,VFooter:KO,VForm:u2,VHover:YO,VIcon:un,VImg:Xr,VInfiniteScroll:QO,VInput:Ca,VItem:n5,VItemGroup:t5,VKbd:a5,VLabel:rd,VLayout:s5,VLayoutItem:l5,VLazy:c5,VLigatureIcon:YD,VList:vo,VListGroup:nf,VListImg:jL,VListItem:ri,VListItemAction:J_,VListItemMedia:qL,VListItemSubtitle:Ba,VListItemTitle:Ra,VListSubheader:sd,VLocaleProvider:h5,VMain:s2,VMenu:Yc,VMessages:SC,VNavigationDrawer:qm,VNoSsr:f5,VNumberInput:y5,VOtpInput:b5,VOverlay:Rs,VPagination:$y,VParallax:S5,VProgressCircular:pu,VProgressLinear:Bp,VRadio:C5,VRadioGroup:P5,VRangeSlider:A5,VRating:M5,VResponsive:Sy,VRow:fo,VScaleTransition:N_,VScrollXReverseTransition:Wz,VScrollXTransition:Gz,VScrollYReverseTransition:Kz,VScrollYTransition:Zz,VSelect:jc,VSelectionControl:_l,VSelectionControlGroup:d2,VSheet:lf,VSkeletonLoader:L5,VSlideGroup:of,VSlideGroupItem:B5,VSlideXReverseTransition:Yz,VSlideXTransition:Xz,VSlideYReverseTransition:Jz,VSlideYTransition:j_,VSlider:Gr,VSnackbar:Wy,VSnackbarQueue:O5,VSpacer:rf,VSparkline:U5,VSpeedDial:q5,VStepper:J5,VStepperActions:wI,VStepperHeader:SI,VStepperItem:kI,VStepperWindow:CI,VStepperWindowItem:II,VSvgIcon:L_,VSwitch:cb,VSystemBar:e3,VTab:TI,VTable:bu,VTabs:r3,VTabsWindow:AI,VTabsWindowItem:EI,VTextField:xi,VTextarea:o3,VThemeProvider:u3,VTimePicker:b3,VTimePickerClock:Zy,VTimePickerControls:Ky,VTimeline:m3,VTimelineItem:h3,VToolbar:Ey,VToolbarItems:xB,VToolbarTitle:af,VTooltip:hb,VTreeview:S3,VTreeviewGroup:Xy,VTreeviewItem:Yy,VValidation:k3,VVirtualScroll:qp,VWindow:gu,VWindowItem:vu},Symbol.toStringTag,{value:"Module"}));function I3(e,i){const a=i.modifiers||{},o=i.value,{once:c,immediate:f,...h}=a,l=!Object.keys(h).length,{handler:b,options:S}=typeof o=="object"?o:{handler:o,options:{attributes:(h==null?void 0:h.attr)??l,characterData:(h==null?void 0:h.char)??l,childList:(h==null?void 0:h.child)??l,subtree:(h==null?void 0:h.sub)??l}},w=new MutationObserver(function(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],I=arguments.length>1?arguments[1]:void 0;b==null||b(k,I),c&&RI(e,i)});f&&(b==null||b([],w)),e._mutate=Object(e._mutate),e._mutate[i.instance.$.uid]={observer:w},w.observe(e,S)}function RI(e,i){var a;(a=e._mutate)!=null&&a[i.instance.$.uid]&&(e._mutate[i.instance.$.uid].observer.disconnect(),delete e._mutate[i.instance.$.uid])}const P3={mounted:I3,unmounted:RI};function T3(e,i){var c,f;const a=i.value,o={passive:!((c=i.modifiers)!=null&&c.active)};window.addEventListener("resize",a,o),e._onResize=Object(e._onResize),e._onResize[i.instance.$.uid]={handler:a,options:o},(f=i.modifiers)!=null&&f.quiet||a()}function A3(e,i){var c;if(!((c=e._onResize)!=null&&c[i.instance.$.uid]))return;const{handler:a,options:o}=e._onResize[i.instance.$.uid];window.removeEventListener("resize",a,o),delete e._onResize[i.instance.$.uid]}const E3={mounted:T3,unmounted:A3};function FI(e,i){const{self:a=!1}=i.modifiers??{},o=i.value,c=typeof o=="object"&&o.options||{passive:!0},f=typeof o=="function"||"handleEvent"in o?o:o.handler,h=a?e:i.arg?document.querySelector(i.arg):window;h&&(h.addEventListener("scroll",f,c),e._onScroll=Object(e._onScroll),e._onScroll[i.instance.$.uid]={handler:f,options:c,target:a?void 0:h})}function OI(e,i){var f;if(!((f=e._onScroll)!=null&&f[i.instance.$.uid]))return;const{handler:a,options:o,target:c=e}=e._onScroll[i.instance.$.uid];c.removeEventListener("scroll",a,o),delete e._onScroll[i.instance.$.uid]}function M3(e,i){i.value!==i.oldValue&&(OI(e,i),FI(e,i))}const D3={mounted:FI,unmounted:OI,updated:M3};function V3(e,i){const a=typeof e=="string"?_S(e):e,o=z3(a,i);return{mounted:o,updated:o,unmounted(c){XS(null,c)}}}function z3(e,i){return function(a,o,c){var k,I,E;const f=typeof i=="function"?i(o):i,h=((k=o.value)==null?void 0:k.text)??o.value??(f==null?void 0:f.text),l=Uh(o.value)?o.value:{},b=()=>h??a.textContent,S=(c.ctx===o.instance.$?(I=L3(c,o.instance.$))==null?void 0:I.provides:(E=c.ctx)==null?void 0:E.provides)??o.instance.$.provides,w=fs(e,nt(f,l),b);w.appContext=Object.assign(Object.create(null),o.instance.$.appContext,{provides:S}),XS(w,a)}}function L3(e,i){const a=new Set,o=f=>{var h,l;for(const b of f){if(!b)continue;if(b===e||b.el&&e.el&&b.el===e.el)return!0;a.add(b);let S;if(b.suspense?S=o([b.ssContent]):Array.isArray(b.children)?S=o(b.children):(h=b.component)!=null&&h.vnode&&(S=o([(l=b.component)==null?void 0:l.subTree])),S)return S;a.delete(b)}return!1};if(!o([i.subTree]))return i;const c=Array.from(a).reverse();for(const f of c)if(f.component)return f.component;return i}const B3=V3(hb,e=>{var i;return{activator:"parent",location:(i=e.arg)==null?void 0:i.replace("-"," "),text:typeof e.value=="boolean"?void 0:e.value}}),R3=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:By,Intersect:ds,Mutate:P3,Resize:E3,Ripple:qa,Scroll:D3,Tooltip:B3,Touch:pp},Symbol.toStringTag,{value:"Module"})),F3=Fk({components:C3,directives:R3,theme:{defaultTheme:"light",themes:{light:{colors:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"}},dark:{colors:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"}}}}}),O3=eM();YE(wB).use(NR).use(O3).use(F3).mount("#app");export{NB as $,Yi as A,AB as B,EB as C,rf as D,db as E,q as F,r3 as G,TI as H,gu as I,vu as J,xi as K,TO as L,Vs as M,zr as N,Xr as O,jc as P,o3 as Q,Nc as R,WO as S,Yk as T,hl as U,Dy as V,MA as W,Bt as X,u2 as Y,Ry as Z,Up as _,Lp as a,Np as a0,BB as a1,l2 as a2,Fi as a3,Ip as a4,St as a5,st as a6,Dc as a7,bu as a8,xt as a9,J5 as aa,_S as ab,Wr as b,K as c,hs as d,V as e,na as f,ss as g,gl as h,Lt as i,Ms as j,vo as k,sd as l,ri as m,Ra as n,cb as o,en as p,Ha as q,Qe as r,Ba as s,Nn as t,Vp as u,gn as v,Ge as w,un as x,fo as y,Wy as z};
