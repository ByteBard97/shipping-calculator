import{aA as Le}from"./mermaid-C39sk-16.js";import{d as ze,F as Pe,r as ke,b as oe,w as O,V as je,e as q,f as ye,g as Oe,h as Fe,i as le,j as De,G as ue,H as Ue,I as Me,t as Z,y as Te,C as te,D as qe,E as Ve,J as Be,v as Ne,x as We,A as re}from"./index-9GbT_GpC.js";var be={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var $e=be.exports,Ae;function He(){return Ae||(Ae=1,(function(xe,Re){((Y,y)=>{xe.exports=y()})($e,function Y(){var y=typeof self<"u"?self:typeof window<"u"?window:y!==void 0?y:{},z,U=!y.document&&!!y.postMessage,_e=y.IS_PAPA_WORKER||!1,he={},Ee=0,a={};function c(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var r=ae(t);r.chunkSize=parseInt(r.chunkSize),t.step||t.chunk||(r.chunkSize=null),this._handle=new fe(r),(this._handle.streamer=this)._config=r}).call(this,e),this.parseChunk=function(t,r){var n=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<n){let d=this._config.newline;d||(i=this._config.quoteChar||'"',d=this._handle.guessLineEndings(t,i)),t=[...t.split(d).slice(n)].join(d)}this.isFirstChunk&&b(this._config.beforeFirstChunk)&&(i=this._config.beforeFirstChunk(t))!==void 0&&(t=i),this.isFirstChunk=!1,this._halted=!1;var n=this._partialLine+t,i=(this._partialLine="",this._handle.parse(n,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=i.meta.cursor,n=(this._finished||(this._partialLine=n.substring(t-this._baseIndex),this._baseIndex=t),i&&i.data&&(this._rowCount+=i.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),_e)y.postMessage({results:i,workerId:a.WORKER_ID,finished:n});else if(b(this._config.chunk)&&!r){if(this._config.chunk(i,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=i=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(i.data),this._completeResults.errors=this._completeResults.errors.concat(i.errors),this._completeResults.meta=i.meta),this._completed||!n||!b(this._config.complete)||i&&i.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),n||i&&i.meta.paused||this._nextChunk(),i}this._halted=!0},this._sendError=function(t){b(this._config.error)?this._config.error(t):_e&&this._config.error&&y.postMessage({workerId:a.WORKER_ID,error:t,finished:!1})}}function w(e){var t;(e=e||{}).chunkSize||(e.chunkSize=a.RemoteChunkSize),c.call(this,e),this._nextChunk=U?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),U||(t.onload=W(this._chunkLoaded,this),t.onerror=W(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!U),this._config.downloadRequestHeaders){var r,n=this._config.downloadRequestHeaders;for(r in n)t.setRequestHeader(r,n[r])}var i;this._config.chunkSize&&(i=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+i));try{t.send(this._config.downloadRequestBody)}catch(d){this._chunkError(d.message)}U&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(r){r=t.statusText||r,this._sendError(new Error(r))}}function H(e){(e=e||{}).chunkSize||(e.chunkSize=a.LocalChunkSize),c.call(this,e);var t,r,n=typeof FileReader<"u";this.stream=function(i){this._input=i,r=i.slice||i.webkitSlice||i.mozSlice,n?((t=new FileReader).onload=W(this._chunkLoaded,this),t.onerror=W(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var i=this._input,d=(this._config.chunkSize&&(d=Math.min(this._start+this._config.chunkSize,this._input.size),i=r.call(i,this._start,d)),t.readAsText(i,this._config.encoding));n||this._chunkLoaded({target:{result:d}})},this._chunkLoaded=function(i){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(i.target.result)},this._chunkError=function(){this._sendError(t.error)}}function X(e){var t;c.call(this,e=e||{}),this.stream=function(r){return t=r,this._nextChunk()},this._nextChunk=function(){var r,n;if(!this._finished)return r=this._config.chunkSize,t=r?(n=t.substring(0,r),t.substring(r)):(n=t,""),this._finished=!t,this.parseChunk(n)}}function de(e){c.call(this,e=e||{});var t=[],r=!0,n=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(i){this._input=i,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=W(function(i){try{t.push(typeof i=="string"?i:i.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(d){this._streamError(d)}},this),this._streamError=W(function(i){this._streamCleanUp(),this._sendError(i)},this),this._streamEnd=W(function(){this._streamCleanUp(),n=!0,this._streamData("")},this),this._streamCleanUp=W(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function fe(e){var t,r,n,i,d=Math.pow(2,53),D=-d,V=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,B=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,f=this,R=0,o=0,P=!1,u=!1,_=[],s={data:[],errors:[],meta:{}};function T(g){return e.skipEmptyLines==="greedy"?g.join("").trim()==="":g.length===1&&g[0].length===0}function F(){if(s&&n&&(N("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),n=!1),e.skipEmptyLines&&(s.data=s.data.filter(function(l){return!T(l)})),L()){let l=function(S,A){b(e.transformHeader)&&(S=e.transformHeader(S,A)),_.push(S)};if(s)if(Array.isArray(s.data[0])){for(var g=0;L()&&g<s.data.length;g++)s.data[g].forEach(l);s.data.splice(0,1)}else s.data.forEach(l)}function v(l,S){for(var A=e.header?{}:[],k=0;k<l.length;k++){var E=k,m=l[k],m=(($,h)=>(x=>(e.dynamicTypingFunction&&e.dynamicTyping[x]===void 0&&(e.dynamicTyping[x]=e.dynamicTypingFunction(x)),(e.dynamicTyping[x]||e.dynamicTyping)===!0))($)?h==="true"||h==="TRUE"||h!=="false"&&h!=="FALSE"&&((x=>{if(V.test(x)&&(x=parseFloat(x),D<x&&x<d))return 1})(h)?parseFloat(h):B.test(h)?new Date(h):h===""?null:h):h)(E=e.header?k>=_.length?"__parsed_extra":_[k]:E,m=e.transform?e.transform(m,E):m);E==="__parsed_extra"?(A[E]=A[E]||[],A[E].push(m)):A[E]=m}return e.header&&(k>_.length?N("FieldMismatch","TooManyFields","Too many fields: expected "+_.length+" fields but parsed "+k,o+S):k<_.length&&N("FieldMismatch","TooFewFields","Too few fields: expected "+_.length+" fields but parsed "+k,o+S)),A}var C;s&&(e.header||e.dynamicTyping||e.transform)&&(C=1,!s.data.length||Array.isArray(s.data[0])?(s.data=s.data.map(v),C=s.data.length):s.data=v(s.data,0),e.header&&s.meta&&(s.meta.fields=_),o+=C)}function L(){return e.header&&_.length===0}function N(g,v,C,l){g={type:g,code:v,message:C},l!==void 0&&(g.row=l),s.errors.push(g)}b(e.step)&&(i=e.step,e.step=function(g){s=g,L()?F():(F(),s.data.length!==0&&(R+=g.data.length,e.preview&&R>e.preview?r.abort():(s.data=s.data[0],i(s,f))))}),this.parse=function(g,v,C){var l=e.quoteChar||'"',l=(e.newline||(e.newline=this.guessLineEndings(g,l)),n=!1,e.delimiter?b(e.delimiter)&&(e.delimiter=e.delimiter(g),s.meta.delimiter=e.delimiter):((l=((S,A,k,E,m)=>{var $,h,x,ee;m=m||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var ce=0;ce<m.length;ce++){for(var K,me=m[ce],j=0,Q=0,I=0,M=(x=void 0,new p({comments:E,delimiter:me,newline:A,preview:10}).parse(S)),G=0;G<M.data.length;G++)k&&T(M.data[G])?I++:(K=M.data[G].length,Q+=K,x===void 0?x=K:0<K&&(j+=Math.abs(K-x),x=K));0<M.data.length&&(Q/=M.data.length-I),(h===void 0||j<=h)&&(ee===void 0||ee<Q)&&1.99<Q&&(h=j,$=me,ee=Q)}return{successful:!!(e.delimiter=$),bestDelimiter:$}})(g,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=l.bestDelimiter:(n=!0,e.delimiter=a.DefaultDelimiter),s.meta.delimiter=e.delimiter),ae(e));return e.preview&&e.header&&l.preview++,t=g,r=new p(l),s=r.parse(t,v,C),F(),P?{meta:{paused:!0}}:s||{meta:{paused:!1}}},this.paused=function(){return P},this.pause=function(){P=!0,r.abort(),t=b(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){f.streamer._halted?(P=!1,f.streamer.parseChunk(t,!0)):setTimeout(f.resume,3)},this.aborted=function(){return u},this.abort=function(){u=!0,r.abort(),s.meta.aborted=!0,b(e.complete)&&e.complete(s),t=""},this.guessLineEndings=function(S,l){S=S.substring(0,1048576);var l=new RegExp(ie(l)+"([^]*?)"+ie(l),"gm"),C=(S=S.replace(l,"")).split("\r"),l=S.split(`
`),S=1<l.length&&l[0].length<C[0].length;if(C.length===1||S)return`
`;for(var A=0,k=0;k<C.length;k++)C[k][0]===`
`&&A++;return A>=C.length/2?`\r
`:"\r"}}function ie(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function p(e){var t=(e=e||{}).delimiter,r=e.newline,n=e.comments,i=e.step,d=e.preview,D=e.fastMode,V=null,B=!1,f=e.quoteChar==null?'"':e.quoteChar,R=f;if(e.escapeChar!==void 0&&(R=e.escapeChar),(typeof t!="string"||-1<a.BAD_DELIMITERS.indexOf(t))&&(t=","),n===t)throw new Error("Comment character same as delimiter");n===!0?n="#":(typeof n!="string"||-1<a.BAD_DELIMITERS.indexOf(n))&&(n=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var o=0,P=!1;this.parse=function(u,_,s){if(typeof u!="string")throw new Error("Input must be a string");var T=u.length,F=t.length,L=r.length,N=n.length,g=b(i),v=[],C=[],l=[],S=o=0;if(!u)return j();if(D||D!==!1&&u.indexOf(f)===-1){for(var A=u.split(r),k=0;k<A.length;k++){if(l=A[k],o+=l.length,k!==A.length-1)o+=r.length;else if(s)return j();if(!n||l.substring(0,N)!==n){if(g){if(v=[],ee(l.split(t)),Q(),P)return j()}else ee(l.split(t));if(d&&d<=k)return v=v.slice(0,d),j(!0)}}return j()}for(var E=u.indexOf(t,o),m=u.indexOf(r,o),$=new RegExp(ie(R)+ie(f),"g"),h=u.indexOf(f,o);;)if(u[o]===f)for(h=o,o++;;){if((h=u.indexOf(f,h+1))===-1)return s||C.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:v.length,index:o}),K();if(h===T-1)return K(u.substring(o,h).replace($,f));if(f===R&&u[h+1]===R)h++;else if(f===R||h===0||u[h-1]!==R){E!==-1&&E<h+1&&(E=u.indexOf(t,h+1));var x=ce((m=m!==-1&&m<h+1?u.indexOf(r,h+1):m)===-1?E:Math.min(E,m));if(u.substr(h+1+x,F)===t){l.push(u.substring(o,h).replace($,f)),u[o=h+1+x+F]!==f&&(h=u.indexOf(f,o)),E=u.indexOf(t,o),m=u.indexOf(r,o);break}if(x=ce(m),u.substring(h+1+x,h+1+x+L)===r){if(l.push(u.substring(o,h).replace($,f)),me(h+1+x+L),E=u.indexOf(t,o),h=u.indexOf(f,o),g&&(Q(),P))return j();if(d&&v.length>=d)return j(!0);break}C.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:v.length,index:o}),h++}}else if(n&&l.length===0&&u.substring(o,o+N)===n){if(m===-1)return j();o=m+L,m=u.indexOf(r,o),E=u.indexOf(t,o)}else if(E!==-1&&(E<m||m===-1))l.push(u.substring(o,E)),o=E+F,E=u.indexOf(t,o);else{if(m===-1)break;if(l.push(u.substring(o,m)),me(m+L),g&&(Q(),P))return j();if(d&&v.length>=d)return j(!0)}return K();function ee(I){v.push(I),S=o}function ce(I){var M=0;return M=I!==-1&&(I=u.substring(h+1,I))&&I.trim()===""?I.length:M}function K(I){return s||(I===void 0&&(I=u.substring(o)),l.push(I),o=T,ee(l),g&&Q()),j()}function me(I){o=I,ee(l),l=[],m=u.indexOf(r,o)}function j(I){if(e.header&&!_&&v.length&&!B){var M=v[0],G=Object.create(null),we=new Set(M);let Ce=!1;for(let pe=0;pe<M.length;pe++){let J=M[pe];if(G[J=b(e.transformHeader)?e.transformHeader(J,pe):J]){let ve,Se=G[J];for(;ve=J+"_"+Se,Se++,we.has(ve););we.add(ve),M[pe]=ve,G[J]++,Ce=!0,(V=V===null?{}:V)[ve]=J}else G[J]=1,M[pe]=J;we.add(J)}Ce&&console.warn("Duplicate headers found and renamed."),B=!0}return{data:v,errors:C,meta:{delimiter:t,linebreak:r,aborted:P,truncated:!!I,cursor:S+(_||0),renamedHeaders:V}}}function Q(){i(j()),v=[],C=[]}},this.abort=function(){P=!0},this.getCharIndex=function(){return o}}function ne(e){var t=e.data,r=he[t.workerId],n=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){n=!0,ge(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:se,resume:se};if(b(r.userStep)){for(var d=0;d<t.results.data.length&&(r.userStep({data:t.results.data[d],errors:t.results.errors,meta:t.results.meta},i),!n);d++);delete t.results}else b(r.userChunk)&&(r.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!n&&ge(t.workerId,t.results)}function ge(e,t){var r=he[e];b(r.userComplete)&&r.userComplete(t),r.terminate(),delete he[e]}function se(){throw new Error("Not implemented.")}function ae(e){if(typeof e!="object"||e===null)return e;var t,r=Array.isArray(e)?[]:{};for(t in e)r[t]=ae(e[t]);return r}function W(e,t){return function(){e.apply(t,arguments)}}function b(e){return typeof e=="function"}return a.parse=function(e,t){var r=(t=t||{}).dynamicTyping||!1;if(b(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=!!b(t.transform)&&t.transform,!t.worker||!a.WORKERS_SUPPORTED)return r=null,a.NODE_STREAM_INPUT,typeof e=="string"?(e=(n=>n.charCodeAt(0)!==65279?n:n.slice(1))(e),r=new(t.download?w:X)(t)):e.readable===!0&&b(e.read)&&b(e.on)?r=new de(t):(y.File&&e instanceof File||e instanceof Object)&&(r=new H(t)),r.stream(e);(r=(()=>{var n;return!!a.WORKERS_SUPPORTED&&(n=(()=>{var i=y.URL||y.webkitURL||null,d=Y.toString();return a.BLOB_URL||(a.BLOB_URL=i.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",d,")();"],{type:"text/javascript"})))})(),(n=new y.Worker(n)).onmessage=ne,n.id=Ee++,he[n.id]=n)})()).userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=b(t.step),t.chunk=b(t.chunk),t.complete=b(t.complete),t.error=b(t.error),delete t.worker,r.postMessage({input:e,config:t,workerId:r.id})},a.unparse=function(e,t){var r=!1,n=!0,i=",",d=`\r
`,D='"',V=D+D,B=!1,f=null,R=!1,o=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||a.BAD_DELIMITERS.filter(function(_){return t.delimiter.indexOf(_)!==-1}).length||(i=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(r=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(B=t.skipEmptyLines),typeof t.newline=="string"&&(d=t.newline),typeof t.quoteChar=="string"&&(D=t.quoteChar),typeof t.header=="boolean"&&(n=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");f=t.columns}t.escapeChar!==void 0&&(V=t.escapeChar+D),t.escapeFormulae instanceof RegExp?R=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(R=/^[=+\-@\t\r].*$/)}})(),new RegExp(ie(D),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return P(null,e,B);if(typeof e[0]=="object")return P(f||Object.keys(e[0]),e,B)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||f),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),P(e.fields||[],e.data||[],B);throw new Error("Unable to serialize unrecognized input");function P(_,s,T){var F="",L=(typeof _=="string"&&(_=JSON.parse(_)),typeof s=="string"&&(s=JSON.parse(s)),Array.isArray(_)&&0<_.length),N=!Array.isArray(s[0]);if(L&&n){for(var g=0;g<_.length;g++)0<g&&(F+=i),F+=u(_[g],g);0<s.length&&(F+=d)}for(var v=0;v<s.length;v++){var C=(L?_:s[v]).length,l=!1,S=L?Object.keys(s[v]).length===0:s[v].length===0;if(T&&!L&&(l=T==="greedy"?s[v].join("").trim()==="":s[v].length===1&&s[v][0].length===0),T==="greedy"&&L){for(var A=[],k=0;k<C;k++){var E=N?_[k]:k;A.push(s[v][E])}l=A.join("").trim()===""}if(!l){for(var m=0;m<C;m++){0<m&&!S&&(F+=i);var $=L&&N?_[m]:m;F+=u(s[v][$],m)}v<s.length-1&&(!T||0<C&&!S)&&(F+=d)}}return F}function u(_,s){var T,F;return _==null?"":_.constructor===Date?JSON.stringify(_).slice(1,25):(F=!1,R&&typeof _=="string"&&R.test(_)&&(_="'"+_,F=!0),T=_.toString().replace(o,V),(F=F||r===!0||typeof r=="function"&&r(_,s)||Array.isArray(r)&&r[s]||((L,N)=>{for(var g=0;g<N.length;g++)if(-1<L.indexOf(N[g]))return!0;return!1})(T,a.BAD_DELIMITERS)||-1<T.indexOf(i)||T.charAt(0)===" "||T.charAt(T.length-1)===" ")?D+T+D:T)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!U&&!!y.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=p,a.ParserHandle=fe,a.NetworkStreamer=w,a.FileStreamer=H,a.StringStreamer=X,a.ReadableStreamStreamer=de,y.jQuery&&((z=y.jQuery).fn.parse=function(e){var t=e.config||{},r=[];return this.each(function(d){if(!(z(this).prop("tagName").toUpperCase()==="INPUT"&&z(this).attr("type").toLowerCase()==="file"&&y.FileReader)||!this.files||this.files.length===0)return!0;for(var D=0;D<this.files.length;D++)r.push({file:this.files[D],inputElem:this,instanceConfig:z.extend({},t)})}),n(),this;function n(){if(r.length===0)b(e.complete)&&e.complete();else{var d,D,V,B,f=r[0];if(b(e.before)){var R=e.before(f.file,f.inputElem);if(typeof R=="object"){if(R.action==="abort")return d="AbortError",D=f.file,V=f.inputElem,B=R.reason,void(b(e.error)&&e.error({name:d},D,V,B));if(R.action==="skip")return void i();typeof R.config=="object"&&(f.instanceConfig=z.extend(f.instanceConfig,R.config))}else if(R==="skip")return void i()}var o=f.instanceConfig.complete;f.instanceConfig.complete=function(P){b(o)&&o(P,f.file,f.inputElem),i()},a.parse(f.file,f.instanceConfig)}}function i(){r.splice(0,1),n()}}),_e&&(y.onmessage=function(e){e=e.data,a.WORKER_ID===void 0&&e&&(a.WORKER_ID=e.workerId),typeof e.input=="string"?y.postMessage({workerId:a.WORKER_ID,results:a.parse(e.input,e.config),finished:!0}):(y.File&&e.input instanceof File||e.input instanceof Object)&&(e=a.parse(e.input,e.config))&&y.postMessage({workerId:a.WORKER_ID,results:e,finished:!0})}),(w.prototype=Object.create(c.prototype)).constructor=w,(H.prototype=Object.create(c.prototype)).constructor=H,(X.prototype=Object.create(X.prototype)).constructor=X,(de.prototype=Object.create(c.prototype)).constructor=de,a})})(be)),be.exports}var Ke=He();const Ie=Le(Ke),Qe={class:"text-h4"},Je={class:"text-h4"},Ge={class:"text-h4"},Ze={class:"text-h4"},Ye={key:0},tt=ze({__name:"BatchView",setup(xe){const Re=Pe(),Y=ke([]),y=ke(null),z=ke([]),U=ke(null),_e=[{title:"Origin",key:"origin_zone",sortable:!0},{title:"Destination",key:"dest_zone",sortable:!0},{title:"Weight (lb)",key:"weight_lb",sortable:!0},{title:"Service",key:"service",sortable:!0},{title:"Quote",key:"quote_price",sortable:!0},{title:"True Price",key:"true_price",sortable:!0},{title:"Diff ($)",key:"diff_abs",sortable:!0},{title:"Diff (%)",key:"diff_pct",sortable:!0}];function he(){if(y.value=null,z.value=[],U.value=null,!Y.value||Y.value.length===0)return;const a=Y.value[0];Ie.parse(a,{header:!0,skipEmptyLines:!0,complete:c=>{try{const w=c.data.map(p=>({origin_zone:p.origin_zone||p.Origin||p.origin,dest_zone:p.dest_zone||p.Destination||p.dest,length_in:parseFloat(p.length_in||p.length||12),width_in:parseFloat(p.width_in||p.width||10),height_in:parseFloat(p.height_in||p.height||8),weight_lb:parseFloat(p.weight_lb||p.weight||5),service:(p.service||"standard").toLowerCase(),declared_value:parseFloat(p.declared_value||p.value||100),residential:p.residential==="true"||p.residential==="1"})),H=Re.calculateBatch(w);z.value=H.map((p,ne)=>{const ge=c.data[ne],se=ge.true_price?parseFloat(ge.true_price):null;let ae=null,W=null;return se!==null&&(ae=p.total-se,W=ae/se*100),{...p.shipment,quote_price:p.total,true_price:se,diff_abs:ae,diff_pct:W}});const X=z.value.reduce((p,ne)=>p+ne.quote_price,0),de=X/z.value.length,fe=z.value.filter(p=>p.diff_pct!==null).map(p=>Math.abs(p.diff_pct)),ie=fe.length>0?fe.reduce((p,ne)=>p+ne,0)/fe.length:null;U.value={count:z.value.length,totalPrice:X,avgPrice:de,avgError:ie}}catch(w){y.value=`Failed to process CSV: ${w}`,console.error(w)}},error:c=>{y.value=`Failed to parse CSV: ${c.message}`}})}function Ee(){const a=Ie.unparse(z.value),c=new Blob([a],{type:"text/csv"}),w=URL.createObjectURL(c),H=document.createElement("a");H.href=w,H.download=`batch-results-${Date.now()}.csv`,H.click(),URL.revokeObjectURL(w)}return(a,c)=>(re(),oe(je,null,{default:O(()=>[q(Te,null,{default:O(()=>[q(ye,{cols:"12"},{default:O(()=>[q(Oe,null,{default:O(()=>[q(Fe,null,{default:O(()=>[...c[1]||(c[1]=[le("Batch Pricing",-1)])]),_:1}),q(De,null,{default:O(()=>[q(Ue,{modelValue:Y.value,"onUpdate:modelValue":c[0]||(c[0]=w=>Y.value=w),label:"Upload CSV",accept:".csv","prepend-icon":"mdi-file-delimited",onChange:he},null,8,["modelValue"]),y.value?(re(),oe(Me,{key:0,type:"error",class:"mt-4"},{default:O(()=>[le(Z(y.value),1)]),_:1})):ue("",!0),U.value?(re(),oe(Oe,{key:1,variant:"outlined",class:"mt-4"},{default:O(()=>[q(Fe,null,{default:O(()=>[...c[2]||(c[2]=[le("Summary",-1)])]),_:1}),q(De,null,{default:O(()=>[q(Te,null,{default:O(()=>[q(ye,{cols:"6",md:"3"},{default:O(()=>[te("div",Qe,Z(U.value.count),1),c[3]||(c[3]=te("div",{class:"text-caption"},"Total Shipments",-1))]),_:1}),q(ye,{cols:"6",md:"3"},{default:O(()=>[te("div",Je,"$"+Z(U.value.totalPrice.toFixed(2)),1),c[4]||(c[4]=te("div",{class:"text-caption"},"Total Price",-1))]),_:1}),q(ye,{cols:"6",md:"3"},{default:O(()=>[te("div",Ge,"$"+Z(U.value.avgPrice.toFixed(2)),1),c[5]||(c[5]=te("div",{class:"text-caption"},"Average Price",-1))]),_:1}),U.value.avgError!==null?(re(),oe(ye,{key:0,cols:"6",md:"3"},{default:O(()=>[te("div",Ze,Z(U.value.avgError.toFixed(1))+"%",1),c[6]||(c[6]=te("div",{class:"text-caption"},"Avg Error",-1))]),_:1})):ue("",!0)]),_:1})]),_:1})]),_:1})):ue("",!0),z.value.length>0?(re(),oe(qe,{key:2,headers:_e,items:z.value,class:"mt-4",density:"compact"},{"item.quote_price":O(({item:w})=>[le(" $"+Z(w.quote_price.toFixed(2)),1)]),"item.diff_abs":O(({item:w})=>[w.diff_abs!==null?(re(),Be("span",Ye," $"+Z(w.diff_abs.toFixed(2)),1)):ue("",!0)]),"item.diff_pct":O(({item:w})=>[w.diff_pct!==null?(re(),oe(Ve,{key:0,color:Math.abs(w.diff_pct)<10?"success":"warning",size:"small"},{default:O(()=>[le(Z(w.diff_pct>0?"+":"")+Z(w.diff_pct.toFixed(1))+"% ",1)]),_:2},1032,["color"])):ue("",!0)]),_:1},8,["items"])):ue("",!0),z.value.length>0?(re(),oe(Ne,{key:3,color:"primary",class:"mt-4",onClick:Ee},{default:O(()=>[q(We,{start:""},{default:O(()=>[...c[7]||(c[7]=[le("mdi-download",-1)])]),_:1}),c[8]||(c[8]=le(" Export Results CSV ",-1))]),_:1})):ue("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{tt as default};
